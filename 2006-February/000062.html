<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Php-qt-svn] r214 - in trunk: qt qt/classes qt/text_related tests
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/php-qt-svn/2006-February/index.html" >
   <LINK REL="made" HREF="mailto:php-qt-svn%40lists.berlios.de?Subject=Re%3A%20%5BPhp-qt-svn%5D%20r214%20-%20in%20trunk%3A%20qt%20qt/classes%20qt/text_related%20tests&In-Reply-To=%3C200602092245.k19MjLhX004836%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Php-qt-svn] r214 - in trunk: qt qt/classes qt/text_related tests</H1>
    <B>tm243 at BerliOS</B> 
    <A HREF="mailto:php-qt-svn%40lists.berlios.de?Subject=Re%3A%20%5BPhp-qt-svn%5D%20r214%20-%20in%20trunk%3A%20qt%20qt/classes%20qt/text_related%20tests&In-Reply-To=%3C200602092245.k19MjLhX004836%40sheep.berlios.de%3E"
       TITLE="[Php-qt-svn] r214 - in trunk: qt qt/classes qt/text_related tests">tm243 at berlios.de
       </A><BR>
    <I>Thu Feb  9 23:45:21 CET 2006</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000063.html">[Php-qt-svn] r215 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62">[ date ]</a>
              <a href="thread.html#62">[ thread ]</a>
              <a href="subject.html#62">[ subject ]</a>
              <a href="author.html#62">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tm243
Date: 2006-02-09 23:45:19 +0100 (Thu, 09 Feb 2006)
New Revision: 214

Added:
   trunk/tests/unicode.xml
Modified:
   trunk/qt/classes/qlineedit.cpp
   trunk/qt/php_qt.h
   trunk/qt/text_related/qstring.cpp
   trunk/tests/unicode.php
Log:
QLineEdit and QString improved to pass unicode test from Ferenc Veres. Thanks Ferenc.

Modified: trunk/qt/classes/qlineedit.cpp
===================================================================
--- trunk/qt/classes/qlineedit.cpp	2006-01-24 10:07:51 UTC (rev 213)
+++ trunk/qt/classes/qlineedit.cpp	2006-02-09 22:45:19 UTC (rev 214)
@@ -20,18 +20,19 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  *
  * QLineEdit.cpp - QLineEdit PHP implementation.
- * begin           : Wed Jan 11 20:29:53 2006
+ * begin           : Thu Feb  9 23:08:03 2006
  * generated by    : moni using kalyptus 0.9.
  */
 
 #include &lt;iostream&gt;
 using namespace std;
 
+#include &quot;../php_qt.h&quot;
 #include &lt;QLineEdit&gt;
-#include &quot;../php_qt.h&quot;
 
 
 
+
 /*		public enumEchoMode:long {
 			EchoMode = 0,
 			EchoMode = 1,
@@ -45,28 +46,32 @@
  *    flags:    s
  */
 ZEND_METHOD(QLineEdit, tr){
+		/* ss public*/
 
+		/* const char* , const char* ,  */
+
 	if (ZEND_NUM_ARGS() == 2){
-		/* ss */
-		char* var_ss_0;   // default: 
-		int len_ss_0;
+		zval *z_0; // define ZVAL
+		zval *z_1; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_STRING &amp;&amp; Z_TYPE_P(z_1) == IS_STRING){
+			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-		char* var_ss_1;   // default: 0
-		int len_ss_1;
 
-
-		/* const char* , const char* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;ss|&quot;, &amp;var_ss_0, len_ss_0, &amp;var_ss_1, len_ss_1) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-
-			
-			QString return_object = (QString) obj-&gt;tr( (const char*) var_ss_0 , (const char*) var_ss_1);
+			QString* return_object = new QString;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QString) obj-&gt;tr( (const char*) Z_STRVAL_P(z_0) , (const char*) Z_STRVAL_P(z_1));
+			} else {
+				*return_object = (QString) QLineEdit::tr( (const char*) Z_STRVAL_P(z_0) , (const char*) Z_STRVAL_P(z_1));
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
+			}
 		}
 	}
 }
@@ -80,11 +85,17 @@
 ZEND_METHOD(QLineEdit, inputMask){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QString return_object = (QString) obj-&gt;inputMask();
+			QString* return_object = new QString;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QString) obj-&gt;inputMask();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -97,22 +108,23 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, insert){
+		/* o public*/
 
+		/* const QString&amp; ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 
-
-		/* const QString&amp; ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o&quot;, &amp;z_var_o_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_OBJECT){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;const QString&amp;&quot;) {
-				obj-&gt;insert((const QString&amp;) var_o_0);
+
+			if(!strcmp(Z_OBJCE_P(z_0)-&gt;name,&quot;QString&quot;)) {
+				obj-&gt;insert((const QString&amp;) *obj_z_0);
 			RETURN_NULL();
 			}
+			}
 		}
 	}
 }
@@ -164,18 +176,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setMaxLength){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* l */
-		long var_l_0;    // default: 
-
-		/* int ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;l&quot;, &amp;var_l_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setMaxLength((int) var_l_0);
+
+			obj-&gt;setMaxLength((int) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -187,24 +201,6 @@
  *    flags:    v
  */
 ZEND_METHOD(QLineEdit, qt_invoke){
-
-	if (ZEND_NUM_ARGS() == 2){
-		/* lo */
-		long var_lo_0;    // default: 
-		zval* z_var_lo_1;   // default: 
-
-		/* int , QUObject* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;lo&quot;, &amp;var_lo_0, &amp;z_var_lo_1) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_lo_1 = (QObject*) php_qt_fetch(z_var_lo_1);
-
-			QString tmp_lo_0(var_lo_1-&gt;metaObject()-&gt;className());
-			
-			if(tmp_lo_0 == &quot;QUObject*&quot;) {
-				RETURN_BOOL(obj-&gt;qt_invoke((int) var_lo_0, (QUObject*) var_lo_1));
-			}
-		}
-	}
 }
 
 /*********************************
@@ -214,18 +210,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setModified){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setModified((bool) var_b_0);
+
+			obj-&gt;setModified((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -237,18 +235,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setFrame){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setFrame((bool) var_b_0);
+
+			obj-&gt;setFrame((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -260,22 +260,6 @@
  *    flags:    v
  */
 ZEND_METHOD(QLineEdit, qt_cast){
-
-	if (ZEND_NUM_ARGS() == 1){
-		/* s */
-		char* var_s_0;   // default: 
-		int len_s_0;
-
-
-		/* const char* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;s&quot;, &amp;var_s_0, len_s_0) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-
-			
-			obj-&gt;qt_cast( (const char*) var_s_0);
-			RETURN_NULL();
-		}
-	}
 }
 
 /*********************************
@@ -285,18 +269,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setReadOnly){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setReadOnly((bool) var_b_0);
+
+			obj-&gt;setReadOnly((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -308,20 +294,18 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setEchoMode){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 
-
-		/* EchoMode ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o&quot;, &amp;z_var_o_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;EchoMode&quot;) {
-				obj-&gt;setEchoMode((EchoMode) var_o_0);
+
+			obj-&gt;setEchoMode((QLineEdit::EchoMode) Z_LVAL_P(z_0));
 			RETURN_NULL();
 			}
 		}
@@ -337,11 +321,17 @@
 ZEND_METHOD(QLineEdit, metaObject){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QMetaObject * return_object = (QMetaObject *) obj-&gt;metaObject();
+			QMetaObject ** return_object = new QMetaObject *;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QMetaObject *) obj-&gt;metaObject();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -354,19 +344,21 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, cursorBackward){
+		/* ll public*/
 
+		/* int mark, int steps,  */
+
 	if (ZEND_NUM_ARGS() == 2){
-		/* bl */
-		bool var_bl_0;   // _default: 
-		long var_bl_1;    // default: 1
-
-		/* bool mark, int steps,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;bl|&quot;, &amp;var_bl_0, &amp;var_bl_1) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		zval *z_1; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG &amp;&amp; Z_TYPE_P(z_1) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;cursorBackward((bool) var_bl_0 ,(int) var_bl_1);
+
+			obj-&gt;cursorBackward((bool) Z_LVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -378,18 +370,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, cursorWordBackward){
+		/* l public*/
 
+		/* int mark,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool mark,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;cursorWordBackward((bool) var_b_0);
+
+			obj-&gt;cursorWordBackward((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -401,24 +395,6 @@
  *    flags:    v
  */
 ZEND_METHOD(QLineEdit, qt_emit){
-
-	if (ZEND_NUM_ARGS() == 2){
-		/* lo */
-		long var_lo_0;    // default: 
-		zval* z_var_lo_1;   // default: 
-
-		/* int , QUObject* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;lo&quot;, &amp;var_lo_0, &amp;z_var_lo_1) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_lo_1 = (QObject*) php_qt_fetch(z_var_lo_1);
-
-			QString tmp_lo_0(var_lo_1-&gt;metaObject()-&gt;className());
-			
-			if(tmp_lo_0 == &quot;QUObject*&quot;) {
-				RETURN_BOOL(obj-&gt;qt_emit((int) var_lo_0, (QUObject*) var_lo_1));
-			}
-		}
-	}
 }
 
 /*********************************
@@ -428,18 +404,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setAlignment){
+		/* l public*/
 
+		/* int flag,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* l */
-		long var_l_0;    // default: 
-
-		/* int flag,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;l&quot;, &amp;var_l_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setAlignment((Qt::Alignment) var_l_0);
+
+			obj-&gt;setAlignment((Qt::Alignment) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -451,16 +429,6 @@
  *    flags:    cv
  */
 ZEND_METHOD(QLineEdit, className){
-	if (ZEND_NUM_ARGS() == 0){
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			const char * return_object = (const char *) obj-&gt;className();
-				zend_class_entry *ce;                                   
-				object_init_ex(return_value, QLineEdit_ce_ptr);     
-				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
-				php_qt_register(return_value,le);                   
-				return;                                             
-	}
 }
 
 /*********************************
@@ -470,45 +438,60 @@
  *    flags:    t
  */
 ZEND_METHOD(QLineEdit, __construct){
+		/* o public*/
 
+		/* qt_QWidget* parent,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 0
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_OBJECT){
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
 
-		/* QWidget* parent,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o|&quot;, &amp;z_var_o_0) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;QWidget*&quot;) {
-				QLineEdit *QLineEdit_ptr = new QLineEdit((QWidget*) var_o_0);
-			PHP_QT_REGISTER(QLineEdit_ptr);
-			RETURN_NULL();
+			if(obj_z_0-&gt;inherits(&quot;QWidget&quot;)) {
+				QLineEdit *QLineEdit_ptr = new QLineEdit((QWidget*) obj_z_0);
+				PHP_QT_REGISTER(QLineEdit_ptr);
+				RETURN_NULL();
 			}
+			}
 		}
 	}
+		/* oo public*/
 
+		/* const QString&amp; , qt_QWidget* parent,  */
+
 	if (ZEND_NUM_ARGS() == 2){
-		/* oo */
-		zval* z_var_oo_0;   // default: 
-		zval* z_var_oo_1;   // default: 0
+		zval *z_0; // define ZVAL
+		zval *z_1; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
 
-		/* const QString&amp; , QWidget* parent,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;oo|&quot;, &amp;z_var_oo_0, &amp;z_var_oo_1) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_oo_0 = (QObject*) php_qt_fetch(z_var_oo_0);
-			QObject* var_oo_1 = (QObject*) php_qt_fetch(z_var_oo_1);
 
-			QString tmp_oo_0(var_oo_0-&gt;metaObject()-&gt;className());
-			QString tmp_oo_1(var_oo_1-&gt;metaObject()-&gt;className());
-			
-			if(tmp_oo_0 == &quot;const QString&amp;&quot; &amp;&amp; tmp_oo_1 == &quot;QWidget*&quot;) {
-				QLineEdit *QLineEdit_ptr = new QLineEdit((const QString&amp;) var_oo_0, (QWidget*) var_oo_1);
-			PHP_QT_REGISTER(QLineEdit_ptr);
-			RETURN_NULL();
+			if(Z_TYPE_P(z_0) == IS_STRING){
+
+			  QString *str = new QString(&quot;&quot;);
+			  *str = QString(QString::fromUtf8(Z_STRVAL_P(z_0)));
+
+			  zend_class_entry *ce;                                   
+			  object_init_ex(z_0, QString_ce_ptr);
+			  zend_rsrc_list_entry le;                            
+			  le.ptr = str;
+			  php_qt_register(z_0,le);                                 
+
 			}
+
+
+			if(Z_TYPE_P(z_0) == IS_OBJECT &amp;&amp; Z_TYPE_P(z_1) == IS_OBJECT){
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
+			QObject* obj_z_1 = (QObject*) php_qt_fetch(z_1);
+
+
+//			if(!strcmp(Z_OBJCE_P(z_0)-&gt;name,&quot;QString&quot;) &amp;&amp; obj_z_1-&gt;inherits(&quot;QWidget&quot;)) {
+				QLineEdit *QLineEdit_ptr = new QLineEdit((const QString&amp;) *obj_z_0, (QWidget*) obj_z_1);
+				PHP_QT_REGISTER(QLineEdit_ptr);
+				RETURN_NULL();
+//			}
+			}
 		}
 	}
 }
@@ -520,16 +503,6 @@
  *    flags:    s
  */
 ZEND_METHOD(QLineEdit, staticMetaObject){
-	if (ZEND_NUM_ARGS() == 0){
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QMetaObject* return_object = (QMetaObject*) obj-&gt;staticMetaObject();
-				zend_class_entry *ce;                                   
-				object_init_ex(return_value, QLineEdit_ce_ptr);     
-				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
-				php_qt_register(return_value,le);                   
-				return;                                             
-	}
 }
 
 /*********************************
@@ -539,16 +512,6 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, qObject){
-	if (ZEND_NUM_ARGS() == 0){
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* return_object = (QObject*) obj-&gt;qObject();
-				zend_class_entry *ce;                                   
-				object_init_ex(return_value, QLineEdit_ce_ptr);     
-				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
-				php_qt_register(return_value,le);                   
-				return;                                             
-	}
 }
 
 /*********************************
@@ -558,23 +521,31 @@
  *    flags:    c
  */
 ZEND_METHOD(QLineEdit, inputMethodQuery){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* l */
-		long var_l_0;    // default: 
-
-		/* int ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;l&quot;, &amp;var_l_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			QVariant return_object = (QVariant) obj-&gt;inputMethodQuery((Qt::InputMethodQuery) var_l_0);
+
+			QVariant* return_object = new QVariant;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QVariant) obj-&gt;inputMethodQuery((Qt::InputMethodQuery) Z_LVAL_P(z_0));
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
+			}
 		}
 	}
 }
@@ -588,11 +559,17 @@
 ZEND_METHOD(QLineEdit, text){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QString return_object = (QString) obj-&gt;text();
+			QString* return_object = new QString;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QString) obj-&gt;text();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -607,11 +584,17 @@
 ZEND_METHOD(QLineEdit, minimumSizeHint){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QSize return_object = (QSize) obj-&gt;minimumSizeHint();
+			QSize* return_object = new QSize;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QSize) obj-&gt;minimumSizeHint();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -624,18 +607,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, home){
+		/* l public*/
 
+		/* int mark,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool mark,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;home((bool) var_b_0);
+
+			obj-&gt;home((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -661,19 +646,21 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, cursorForward){
+		/* ll public*/
 
+		/* int mark, int steps,  */
+
 	if (ZEND_NUM_ARGS() == 2){
-		/* bl */
-		bool var_bl_0;   // _default: 
-		long var_bl_1;    // default: 1
-
-		/* bool mark, int steps,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;bl|&quot;, &amp;var_bl_0, &amp;var_bl_1) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		zval *z_1; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG &amp;&amp; Z_TYPE_P(z_1) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;cursorForward((bool) var_bl_0 ,(int) var_bl_1);
+
+			obj-&gt;cursorForward((bool) Z_LVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -685,18 +672,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setDragEnabled){
+		/* l public*/
 
+		/* int b,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool b,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setDragEnabled((bool) var_b_0);
+
+			obj-&gt;setDragEnabled((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -708,25 +697,6 @@
  *    flags:    v
  */
 ZEND_METHOD(QLineEdit, qt_property){
-
-	if (ZEND_NUM_ARGS() == 3){
-		/* llo */
-		long var_llo_0;    // default: 
-		long var_llo_1;    // default: 
-		zval* z_var_llo_2;   // default: 
-
-		/* int , int , QVariant* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;llo&quot;, &amp;var_llo_0, &amp;var_llo_1, &amp;z_var_llo_2) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_llo_2 = (QObject*) php_qt_fetch(z_var_llo_2);
-
-			QString tmp_llo_0(var_llo_2-&gt;metaObject()-&gt;className());
-			
-			if(tmp_llo_0 == &quot;QVariant*&quot;) {
-				RETURN_BOOL(obj-&gt;qt_property((int) var_llo_0, (int) var_llo_1, (QVariant*) var_llo_2));
-			}
-		}
-	}
 }
 
 /*********************************
@@ -749,22 +719,23 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setValidator){
+		/* o public*/
 
+		/* const QValidator* ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 
-
-		/* const QValidator* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o&quot;, &amp;z_var_o_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_OBJECT){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;const QValidator*&quot;) {
-				obj-&gt;setValidator((const QValidator*) var_o_0);
+
+			if(obj_z_0-&gt;inherits(&quot;QValidator&quot;)) {
+				obj-&gt;setValidator((const QValidator*) obj_z_0);
 			RETURN_NULL();
 			}
+			}
 		}
 	}
 }
@@ -860,11 +831,17 @@
 ZEND_METHOD(QLineEdit, displayText){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QString return_object = (QString) obj-&gt;displayText();
+			QString* return_object = new QString;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QString) obj-&gt;displayText();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -877,18 +854,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, cursorWordForward){
+		/* l public*/
 
+		/* int mark,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool mark,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;cursorWordForward((bool) var_b_0);
+
+			obj-&gt;cursorWordForward((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -900,21 +879,22 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, event){
+		/* o public*/
 
+		/* qt_QEvent* ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 
-
-		/* QEvent* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o&quot;, &amp;z_var_o_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_OBJECT){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;QEvent*&quot;) {
-				RETURN_BOOL(obj-&gt;event((QEvent*) var_o_0));
+
+			if(!strcmp(Z_OBJCE_P(z_0)-&gt;name,&quot;QEvent&quot;)) {
+				RETURN_BOOL(obj-&gt;event((QEvent*) obj_z_0));
 			}
+			}
 		}
 	}
 }
@@ -928,11 +908,17 @@
 ZEND_METHOD(QLineEdit, validator){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			const QValidator * return_object = (const QValidator *) obj-&gt;validator();
+			const QValidator ** return_object = new const QValidator *;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (const QValidator *) obj-&gt;validator();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -945,18 +931,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, end){
+		/* l public*/
 
+		/* int mark,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* b */
-		bool var_b_0;   // _default: 
-
-		/* bool mark,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;b&quot;, &amp;var_b_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;end((bool) var_b_0);
+
+			obj-&gt;end((bool) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -981,17 +969,19 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, cursorPositionAt){
+		/* l public*/
 
+		/* const QPoint&amp; pos,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* l */
-		long var_l_0;    // default: 
-
-		/* const QPoint&amp; pos,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;l&quot;, &amp;var_l_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			RETURN_LONG(obj-&gt;cursorPositionAt((const QPoint&amp;) var_l_0));
+
+			RETURN_LONG(obj-&gt;cursorPositionAt((const QPoint&amp;) Z_LVAL_P(z_0)));
+			}
 		}
 	}
 }
@@ -1017,19 +1007,21 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setSelection){
+		/* ll public*/
 
+		/* int , int ,  */
+
 	if (ZEND_NUM_ARGS() == 2){
-		/* ll */
-		long var_ll_0;    // default: 
-		long var_ll_1;    // default: 
-
-		/* int , int ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;ll&quot;, &amp;var_ll_0, &amp;var_ll_1) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		zval *z_1; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG &amp;&amp; Z_TYPE_P(z_1) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setSelection((int) var_ll_0 ,(int) var_ll_1);
+
+			obj-&gt;setSelection((int) Z_LVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -1043,11 +1035,17 @@
 ZEND_METHOD(QLineEdit, selectedText){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QString return_object = (QString) obj-&gt;selectedText();
+			QString* return_object = new QString;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QString) obj-&gt;selectedText();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -1086,22 +1084,23 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setInputMask){
+		/* o public*/
 
+		/* const QString&amp; inputMask,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 
-
-		/* const QString&amp; inputMask,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o&quot;, &amp;z_var_o_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_OBJECT){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;const QString&amp;&quot;) {
-				obj-&gt;setInputMask((const QString&amp;) var_o_0);
+
+			if(!strcmp(Z_OBJCE_P(z_0)-&gt;name,&quot;QString&quot;)) {
+				obj-&gt;setInputMask((const QString&amp;) *obj_z_0);
 			RETURN_NULL();
 			}
+			}
 		}
 	}
 }
@@ -1140,22 +1139,23 @@
  *    flags:    l
  */
 ZEND_METHOD(QLineEdit, setText){
+		/* o public_slots*/
 
+		/* const QString&amp; ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* o */
-		zval* z_var_o_0;   // default: 
-
-		/* const QString&amp; ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;o&quot;, &amp;z_var_o_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_OBJECT){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QObject* var_o_0 = (QObject*) php_qt_fetch(z_var_o_0);
+			QObject* obj_z_0 = (QObject*) php_qt_fetch(z_0);
 
-			QString tmp_o_0(var_o_0-&gt;metaObject()-&gt;className());
-			
-			if(tmp_o_0 == &quot;const QString&amp;&quot;) {
-				obj-&gt;setText((const QString&amp;) var_o_0);
+
+			if(!strcmp(Z_OBJCE_P(z_0)-&gt;name,&quot;QString&quot;)) {
+				obj-&gt;setText((const QString&amp;) *obj_z_0);
 			RETURN_NULL();
 			}
+			}
 		}
 	}
 }
@@ -1169,13 +1169,7 @@
 ZEND_METHOD(QLineEdit, alignment){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			Qt::Alignment return_object = (Qt::Alignment) obj-&gt;alignment();
-				zend_class_entry *ce;                                   
-				object_init_ex(return_value, QLineEdit_ce_ptr);     
-				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
-				php_qt_register(return_value,le);                   
-				return;                                             
+			RETURN_LONG(obj-&gt;alignment());
 	}
 }
 
@@ -1188,11 +1182,17 @@
 ZEND_METHOD(QLineEdit, sizeHint){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QSize return_object = (QSize) obj-&gt;sizeHint();
+			QSize* return_object = new QSize;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QSize) obj-&gt;sizeHint();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -1205,18 +1205,20 @@
  *    flags:    
  */
 ZEND_METHOD(QLineEdit, setCursorPosition){
+		/* l public*/
 
+		/* int ,  */
+
 	if (ZEND_NUM_ARGS() == 1){
-		/* l */
-		long var_l_0;    // default: 
-
-		/* int ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;l&quot;, &amp;var_l_0) == SUCCESS) {
+		zval *z_0; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;z&quot;, &amp;z_0) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_LONG){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-			
-			obj-&gt;setCursorPosition((int) var_l_0);
+
+			obj-&gt;setCursorPosition((int) Z_LVAL_P(z_0));
 			RETURN_NULL();
+			}
 		}
 	}
 }
@@ -1230,11 +1232,17 @@
 ZEND_METHOD(QLineEdit, createStandardContextMenu){
 	if (ZEND_NUM_ARGS() == 0){
 			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-			QMenu * return_object = (QMenu *) obj-&gt;createStandardContextMenu();
+			QMenu ** return_object = new QMenu *;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QMenu *) obj-&gt;createStandardContextMenu();
+			} else {
+				php_error(E_ERROR,&quot;Object not found&quot;);
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
 	}
@@ -1301,28 +1309,32 @@
  *    flags:    s
  */
 ZEND_METHOD(QLineEdit, trUtf8){
+		/* ss public*/
 
+		/* const char* , const char* ,  */
+
 	if (ZEND_NUM_ARGS() == 2){
-		/* ss */
-		char* var_ss_0;   // default: 
-		int len_ss_0;
+		zval *z_0; // define ZVAL
+		zval *z_1; // define ZVAL
+		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
+			if(Z_TYPE_P(z_0) == IS_STRING &amp;&amp; Z_TYPE_P(z_1) == IS_STRING){
+			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
 
-		char* var_ss_1;   // default: 0
-		int len_ss_1;
 
-
-		/* const char* , const char* ,  */
-		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;ss|&quot;, &amp;var_ss_0, len_ss_0, &amp;var_ss_1, len_ss_1) == SUCCESS) {
-			QLineEdit *obj = (QLineEdit*) PHP_QT_FETCH();
-
-			
-			QString return_object = (QString) obj-&gt;trUtf8( (const char*) var_ss_0 , (const char*) var_ss_1);
+			QString* return_object = new QString;
+			// static?
+			if(getThis() != NULL){
+				*return_object = (QString) obj-&gt;trUtf8( (const char*) Z_STRVAL_P(z_0) , (const char*) Z_STRVAL_P(z_1));
+			} else {
+				*return_object = (QString) QLineEdit::trUtf8( (const char*) Z_STRVAL_P(z_0) , (const char*) Z_STRVAL_P(z_1));
+			}
 				zend_class_entry *ce;                                   
 				object_init_ex(return_value, QLineEdit_ce_ptr);     
 				zend_rsrc_list_entry le;                            
-				le.ptr = &amp;return_object;                                       
+				le.ptr = return_object;                                       
 				php_qt_register(return_value,le);                   
 				return;                                             
+			}
 		}
 	}
 }

Modified: trunk/qt/php_qt.h
===================================================================
--- trunk/qt/php_qt.h	2006-01-24 10:07:51 UTC (rev 213)
+++ trunk/qt/php_qt.h	2006-02-09 22:45:19 UTC (rev 214)
@@ -24,6 +24,7 @@
 #define debug
 
 #include &lt;QTextStream&gt;
+#include &lt;QVariant&gt;
 #define QOUT()                                              \
     extern QTextStream qout(stdout, QIODevice::WriteOnly);  \
 

Modified: trunk/qt/text_related/qstring.cpp
===================================================================
--- trunk/qt/text_related/qstring.cpp	2006-01-24 10:07:51 UTC (rev 213)
+++ trunk/qt/text_related/qstring.cpp	2006-02-09 22:45:19 UTC (rev 214)
@@ -553,8 +553,8 @@
 			}
 			if(Z_TYPE_P(z_0) == IS_STRING){
 
+			QString *QString_ptr = new QString( (const char*) Z_STRVAL_P(z_0));
 
-			QString *QString_ptr = new QString( (const char*) Z_STRVAL_P(z_0));
 				PHP_QT_REGISTER(QString_ptr);
 				RETURN_NULL();
 			}
@@ -2016,20 +2016,23 @@
 		if(zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC,&quot;zz&quot;, &amp;z_0, &amp;z_1) == SUCCESS) {
 			if(Z_TYPE_P(z_0) == IS_STRING &amp;&amp; Z_TYPE_P(z_1) == IS_LONG){
 
-	QString return_object;			
-    if(getThis() != NULL){
-        QString *obj = (QString*) PHP_QT_FETCH();
-        return_object = (QString) obj-&gt;fromUtf8( (const char*) Z_STRVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
-    }else {
-        return_object = (QString) QString::fromUtf8( (const char*) Z_STRVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
-    }
-				
-				zend_class_entry *ce;                                   
-				object_init_ex(return_value, QString_ce_ptr);     
-				zend_rsrc_list_entry le;                            
-				le.ptr = (void*) &amp;return_object;                                       
-				php_qt_register(return_value,le);                   
-				return;                                             
+// wichtig: Speicher auf dem Heap alloziieren
+			  QString *return_object = new QString;
+  			  if(getThis() != NULL){
+		        QString *obj = (QString*) PHP_QT_FETCH();
+// hier einfach &#252;berschreiben
+      			*return_object = (QString) obj-&gt;fromUtf8( (const char*) Z_STRVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
+// static
+		      } else {
+		        *return_object = (QString) QString::fromUtf8( (const char*) Z_STRVAL_P(z_0) ,(int) Z_LVAL_P(z_1));
+
+		      }		
+			  zend_class_entry *ce;                                   
+			  object_init_ex(return_value, QString_ce_ptr);
+			  zend_rsrc_list_entry le;                            
+			  le.ptr = return_object;
+			  php_qt_register(return_value,le);
+			  return;
 			}
 		}
 	}

Modified: trunk/tests/unicode.php
===================================================================
--- trunk/tests/unicode.php	2006-01-24 10:07:51 UTC (rev 213)
+++ trunk/tests/unicode.php	2006-02-09 22:45:19 UTC (rev 214)
@@ -1,19 +1,48 @@
 &lt;?php
 
+	/* unicode test from Ferenc Verec */
+
     if(!extension_loaded('php_qt')) {
         dl('php_qt.' . PHP_SHLIB_SUFFIX);
     }
 
-	$QString = new QString(&quot;hello&quot;);
+	class TestButtons extends QWidget
+	{
+		public $layout;
+		public $buttons;
 
-	echo $QString-&gt;toUTF8();
+		public function __construct() 
+		{
+			parent::__construct();
+			
+			$this-&gt;layout = new QVBoxLayout($this);
 
-	echo $QString;
+			// Load the test xml
+			$unicodeXml = new DOMDocument();
+			$unicodeXml-&gt;load(&quot;unicode.xml&quot;);
+			$xpath = new DOMXPath($unicodeXml);
+			$dataNodes = $xpath-&gt;query(&quot;/test/data&quot;);
 
-	$QString-&gt;setUnicode(new QChar(65), 1);
+			// Loop on all data node and create buttons
+			foreach($dataNodes as $data)
+			{
+				$this-&gt;buttons[] = new QLineEdit(QString::fromUtf8($data-&gt;nodeValue, -1),$this);
+				$this-&gt;layout-&gt;addWidget($this-&gt;buttons[count($this-&gt;buttons)-1]);
+			}
 
-	echo $QString;
+			$this-&gt;buttons[] = new QLineEdit(&quot;Test&quot;,$this);
+			$this-&gt;layout-&gt;addWidget($this-&gt;buttons[count($this-&gt;buttons)-1]);
 
-	echo &quot;\n&quot;;
+			$this-&gt;buttons[] = new QLineEdit((&quot;second Test&quot;),$this);
+			$this-&gt;layout-&gt;addWidget($this-&gt;buttons[count($this-&gt;buttons)-1]);
 
-?&gt;
\ No newline at end of file
+		}
+
+	}
+
+    $app = new QApplication();
+	$widget = new TestButtons();
+	$widget-&gt;show();
+	$app-&gt;exec();
+
+?&gt;

Added: trunk/tests/unicode.xml
===================================================================
--- trunk/tests/unicode.xml	2006-01-24 10:07:51 UTC (rev 213)
+++ trunk/tests/unicode.xml	2006-02-09 22:45:19 UTC (rev 214)
@@ -0,0 +1,8 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
+&lt;test&gt;
+	&lt;data lang=&quot;en&quot;&gt;This is a test text&lt;/data&gt;
+	&lt;data lang=&quot;hu&quot;&gt;&#195;&#129;rv&#195;&#173;zt&#197;&#177;r&#197;&#145; t&#195;&#188;k&#195;&#182;rf&#195;&#186;r&#195;&#179;g&#195;&#169;p&lt;/data&gt;
+	&lt;data lang=&quot;jp&quot;&gt;&#227;&#129;&#147;&#227;&#130;&#140;&#227;&#129;&#175;&#227;&#131;&#134;&#227;&#130;&#185;&#227;&#131;&#136;&#227;&#131;&#134;&#227;&#130;&#173;&#227;&#130;&#185;&#227;&#131;&#136;&#227;&#129;&#167;&#227;&#129;&#130;&#227;&#130;&#139;&lt;/data&gt;
+	&lt;data lang=&quot;ko&quot;&gt;&#236;&#157;&#180;&#234;&#178;&#131;&#236;&#157;&#128; &#236;&#139;&#156;&#237;&#151;&#152; &#236;&#155;&#144;&#235;&#179;&#184; &#236;&#157;&#180;&#235;&#139;&#164;&lt;/data&gt;
+	&lt;data lang=&quot;ru&quot;&gt;&#208;&#173;&#209;&#130;&#208;&#190; &#208;&#177;&#209;&#131;&#208;&#180;&#208;&#181;&#209;&#130; &#209;&#130;&#208;&#181;&#208;&#186;&#209;&#129;&#209;&#130; &#208;&#184;&#209;&#129;&#208;&#191;&#209;&#139;&#209;&#130;&#208;&#176;&#208;&#189;&#208;&#184;&#209;&#143;&lt;/data&gt;
+&lt;/test&gt;
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000063.html">[Php-qt-svn] r215 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#62">[ date ]</a>
              <a href="thread.html#62">[ thread ]</a>
              <a href="subject.html#62">[ subject ]</a>
              <a href="author.html#62">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/php-qt-svn">More information about the Php-qt-svn
mailing list</a><br>
</body></html>

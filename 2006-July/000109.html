<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Php-qt-svn] r265 - in trunk: . admin
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/php-qt-svn/2006-July/index.html" >
   <LINK REL="made" HREF="mailto:php-qt-svn%40lists.berlios.de?Subject=Re%3A%20%5BPhp-qt-svn%5D%20r265%20-%20in%20trunk%3A%20.%20admin&In-Reply-To=%3C200607212005.k6LK5qTo022828%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000108.html">
   <LINK REL="Next"  HREF="000110.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Php-qt-svn] r265 - in trunk: . admin</H1>
    <B>tm243 at BerliOS</B> 
    <A HREF="mailto:php-qt-svn%40lists.berlios.de?Subject=Re%3A%20%5BPhp-qt-svn%5D%20r265%20-%20in%20trunk%3A%20.%20admin&In-Reply-To=%3C200607212005.k6LK5qTo022828%40sheep.berlios.de%3E"
       TITLE="[Php-qt-svn] r265 - in trunk: . admin">tm243 at mail.berlios.de
       </A><BR>
    <I>Fri Jul 21 22:05:52 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000108.html">[Php-qt-svn] r264 - trunk/qt/classes
</A></li>
        <LI>Next message: <A HREF="000110.html">[Php-qt-svn] r266 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109">[ date ]</a>
              <a href="thread.html#109">[ thread ]</a>
              <a href="subject.html#109">[ subject ]</a>
              <a href="author.html#109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tm243
Date: 2006-07-21 22:05:36 +0200 (Fri, 21 Jul 2006)
New Revision: 265

Added:
   trunk/admin/
   trunk/admin/Doxyfile.am
   trunk/admin/Doxyfile.global
   trunk/admin/Makefile.common
   trunk/admin/acinclude.m4.in
   trunk/admin/bcheck.pl
   trunk/admin/compile
   trunk/admin/conf.change.pl
   trunk/admin/config.guess
   trunk/admin/config.pl
   trunk/admin/config.sub
   trunk/admin/configure.in.bot.end
   trunk/admin/configure.in.min
   trunk/admin/cvs.sh
   trunk/admin/debianrules
   trunk/admin/depcomp
   trunk/admin/deps.am
   trunk/admin/detect-autoconf.pl
   trunk/admin/doxygen.sh
   trunk/admin/install-sh
   trunk/admin/libtool.m4.in
   trunk/admin/ltmain.sh
   trunk/admin/missing
   trunk/admin/mkinstalldirs
   trunk/admin/nmcheck
   trunk/admin/oldinclude.m4.in
   trunk/admin/pkg.m4.in
   trunk/admin/ylwrap
Modified:
   trunk/README
   trunk/config.m4
Log:
now we're using KDE's build system (better configuration of environment variables)

Modified: trunk/README
===================================================================
--- trunk/README	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/README	2006-07-21 20:05:36 UTC (rev 265)
@@ -25,17 +25,21 @@
 installed in /usr/local/php511
 
 At first it is neccessary to check your environment for compiling. 
-To do that change into the php-5.1xxx/ext/php_qt directory and run phpize 
+To do that change into the php-5.1xxx/ext/php_qt directory and run phpize, kdeize
 and configure:
 
 /usr/local/php511/bin/phpize
 
-./configure --with-php_qt[=/usr/lib/qt4/include] 		\
-  --with-qtlib=/usr/lib/qt4 							\
-  --with-php-config=/usr/local/php511/bin/php-config	\
+./kdeize
 
-The arguments in brackets are optional but may be necessary on your system.
+./configure \
+  --enable-php_qt \
+  --with-qt-includes=/usr/lib/qt4/include \
+  --with-qt-libraries=/usr/lib/qt4 \
+  --with-php-config=/usr/local/php511/bin/php-config \
 
+If --with-qt-includes and --with-qt-config are omitted, configure will try to find files in default or standard pathes
+
 To remove old objectfiles run 
 
 make clean

Added: trunk/admin/Doxyfile.am
===================================================================
--- trunk/admin/Doxyfile.am	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/Doxyfile.am	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,19 @@
+apidox:
+	@echo Building APIDOX with 'make apidox' is deprecated.
+	false
+
+install-apidox:
+	@echo Building APIDOX with 'make apidox' is deprecated.
+	false
+
+uninstall-apidox:
+	@echo Building APIDOX with 'make apidox' is deprecated.
+	false
+
+
+.PHONY: install-apidox uninstall-apidox apidox
+
+
+# Local Variables:
+# mode: makefile
+# End:

Added: trunk/admin/Doxyfile.global
===================================================================
--- trunk/admin/Doxyfile.global	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/Doxyfile.global	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,196 @@
+PROJECT_NAME           = 
+PROJECT_NUMBER         = 
+OUTPUT_DIRECTORY       = ../apidocs/
+OUTPUT_LANGUAGE        = English
+USE_WINDOWS_ENCODING   = NO
+BRIEF_MEMBER_DESC      = NO
+REPEAT_BRIEF           = YES
+ABBREVIATE_BRIEF       = 
+ALWAYS_DETAILED_SEC    = YES
+INLINE_INHERITED_MEMB  = NO
+FULL_PATH_NAMES        = NO
+STRIP_FROM_PATH        = 
+SHORT_NAMES            = NO
+JAVADOC_AUTOBRIEF      = YES
+MULTILINE_CPP_IS_BRIEF = NO
+INHERIT_DOCS           = YES
+DISTRIBUTE_GROUP_DOC   = NO
+TAB_SIZE               = 4
+OPTIMIZE_OUTPUT_FOR_C  = NO
+OPTIMIZE_OUTPUT_JAVA   = NO
+SUBGROUPING            = YES
+EXTRACT_ALL            = NO
+EXTRACT_PRIVATE        = NO
+EXTRACT_STATIC         = YES
+EXTRACT_LOCAL_CLASSES  = NO
+HIDE_UNDOC_MEMBERS     = NO
+HIDE_UNDOC_CLASSES     = YES
+HIDE_FRIEND_COMPOUNDS  = NO
+HIDE_IN_BODY_DOCS      = NO
+INTERNAL_DOCS          = NO
+CASE_SENSE_NAMES       = YES
+HIDE_SCOPE_NAMES       = NO
+SHOW_INCLUDE_FILES     = YES
+INLINE_INFO            = YES
+SORT_BRIEF_DOCS        = NO
+SORT_BY_SCOPE_NAME     = NO
+GENERATE_TESTLIST      = NO
+GENERATE_BUGLIST       = YES
+GENERATE_DEPRECATEDLIST= YES
+ENABLED_SECTIONS       = 
+MAX_INITIALIZER_LINES  = 30
+SHOW_USED_FILES        = YES
+QUIET                  = YES
+WARNINGS               = NO
+WARN_IF_UNDOCUMENTED   = NO
+WARN_IF_DOC_ERROR      = YES
+WARN_FORMAT            = 
+WARN_LOGFILE           = 
+INPUT                  = 
+FILE_PATTERNS          = *.h \
+                         *.cpp \
+                         *.cc \
+                         *.hpp \
+                         *.dox \
+                         *.c++ \
+                         *.cxx \
+                         *.h++ \
+                         *.hh
+RECURSIVE              = YES
+EXCLUDE                = 
+EXCLUDE_SYMLINKS       = NO
+EXCLUDE_PATTERNS       = *.moc.* \
+                         moc* \
+                         *.all_cpp.* \
+                         *unload.* \
+                         */test/* \
+                         */tests/* \
+                         *_p.h 
+EXAMPLE_PATH           = 
+EXAMPLE_PATTERNS       = 
+EXAMPLE_RECURSIVE      = NO
+IMAGE_PATH             = 
+INPUT_FILTER           = 
+FILTER_SOURCE_FILES    = NO
+SOURCE_BROWSER         = YES
+INLINE_SOURCES         = NO
+STRIP_CODE_COMMENTS    = YES
+REFERENCED_BY_RELATION = YES
+REFERENCES_RELATION    = YES
+VERBATIM_HEADERS       = YES
+ALPHABETICAL_INDEX     = YES
+COLS_IN_ALPHA_INDEX    = 3
+HTML_OUTPUT            = 
+HTML_FILE_EXTENSION    = .html
+HTML_HEADER            = ../apidocs/common/header.html
+HTML_FOOTER            = ../apidocs/common/footer.html
+HTML_STYLESHEET        = ../apidocs/common/doxygen.css
+HTML_ALIGN_MEMBERS     = YES
+GENERATE_HTMLHELP      = NO
+CHM_FILE               = 
+HHC_LOCATION           = 
+GENERATE_CHI           = NO
+BINARY_TOC             = NO
+TOC_EXPAND             = NO
+DISABLE_INDEX          = YES
+ENUM_VALUES_PER_LINE   = 4
+GENERATE_TREEVIEW      = NO
+TREEVIEW_WIDTH         = 250
+GENERATE_LATEX         = NO
+LATEX_OUTPUT           = 
+LATEX_CMD_NAME         = latex
+MAKEINDEX_CMD_NAME     = makeindex
+COMPACT_LATEX          = NO
+PAPER_TYPE             = a4wide
+EXTRA_PACKAGES         = 
+LATEX_HEADER           = 
+PDF_HYPERLINKS         = NO
+USE_PDFLATEX           = NO
+LATEX_BATCHMODE        = NO
+LATEX_HIDE_INDICES     = NO
+GENERATE_RTF           = NO
+RTF_OUTPUT             = 
+COMPACT_RTF            = NO
+RTF_HYPERLINKS         = NO
+RTF_STYLESHEET_FILE    = 
+RTF_EXTENSIONS_FILE    = 
+GENERATE_MAN           = NO
+MAN_OUTPUT             = 
+MAN_EXTENSION          = .kde3
+MAN_LINKS              = YES
+GENERATE_XML           = NO
+XML_OUTPUT             = xml
+XML_SCHEMA             = 
+XML_DTD                = 
+XML_PROGRAMLISTING     = NO
+GENERATE_AUTOGEN_DEF   = NO
+GENERATE_PERLMOD       = NO
+PERLMOD_LATEX          = NO
+PERLMOD_PRETTY         = YES
+PERLMOD_MAKEVAR_PREFIX = 
+ENABLE_PREPROCESSING   = YES
+SEARCH_INCLUDES        = YES
+INCLUDE_PATH           = 
+INCLUDE_FILE_PATTERNS  = 
+PREDEFINED             = QT_VERSION=320 \
+                         __cplusplus \
+                         Q_WS_X11
+EXPAND_AS_DEFINED      = 
+SKIP_FUNCTION_MACROS   = YES
+TAGFILES               = 
+GENERATE_TAGFILE       = 
+ALLEXTERNALS           = NO
+EXTERNAL_GROUPS        = NO
+PERL_PATH              = 
+CLASS_DIAGRAMS         = YES
+HIDE_UNDOC_RELATIONS   = NO
+HAVE_DOT               = NO
+UML_LOOK               = NO
+TEMPLATE_RELATIONS     = YES
+INCLUDE_GRAPH          = YES
+INCLUDED_BY_GRAPH      = YES
+CALL_GRAPH             = NO
+GRAPHICAL_HIERARCHY    = YES
+DOT_IMAGE_FORMAT       = png
+DOT_PATH               = 
+DOTFILE_DIRS           = 
+MAX_DOT_GRAPH_WIDTH    = 800
+MAX_DOT_GRAPH_HEIGHT   = 1024
+MAX_DOT_GRAPH_DEPTH    = 0
+GENERATE_LEGEND        = YES
+DOT_CLEANUP            = YES
+SEARCHENGINE           = NO
+
+### KDE Settings
+ALIASES = \
+	&quot;intern=\par&lt;b&gt;Internal use only.&lt;/b&gt;&quot; \
+	&quot;reimp=\par&lt;b&gt;Reimplemented from superclass.&lt;/b&gt;&quot; \
+	&quot;obsolete=@deprecated&quot; \
+	&quot;feature=\xrefitem features \&quot;Feature(s)\&quot; \&quot;Features\&quot;&quot; \
+	&quot;maintainer=\xrefitem maintainers \&quot;Maintainer(s)\&quot; \&quot;Maintainers\&quot;&quot; \
+	&quot;unmaintained=\xrefitem unmaintained \&quot;Unmaintained\&quot; \&quot;Unmaintained\&quot;&quot; \
+	&quot;requirement=\xrefitem requirements \&quot;Requirement(s)\&quot; \&quot;Requirements\&quot;&quot; \
+	&quot;faq=\xrefitem FAQ \&quot;F.A.Q.\&quot; \&quot;F.A.Q.\&quot;&quot; \
+	&quot;authors=\xrefitem authors \&quot;Author(s)\&quot; \&quot;Authors\&quot;&quot; \
+	&quot;FIXME=\xrefitem fixme \&quot;Fixme\&quot; \&quot;Fixme\&quot;&quot; \
+	&quot;bc=\xrefitem bc \&quot;Binary Compatible\&quot; \&quot;Binary Compatible\&quot;&quot;
+
+HTML_ALIGN_MEMBERS     = YES
+REFERENCED_BY_RELATION = NO
+REFERENCES_RELATION    = NO
+VERBATIM_HEADERS       = NO
+GENERATE_HTML          = YES
+SOURCE_BROWSER         = YES
+GENERATE_AUTOGEN_DEF   = NO
+DETAILS_AT_TOP         = YES
+SORT_MEMBER_DOCS       = YES
+GENERATE_TODOLIST      = YES
+IGNORE_PREFIX          = K
+GENERATE_HTML          = YES
+CLASS_GRAPH            = YES
+COLLABORATION_GRAPH    = NO
+
+
+MACRO_EXPANSION = YES
+EXPAND_ONLY_PREDEF = YES
+


Property changes on: trunk/admin/Doxyfile.global
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/Makefile.common
===================================================================
--- trunk/admin/Makefile.common	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/Makefile.common	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,37 @@
+### Makefile.common
+###
+### Copyright (C) 2002 by the KDE developers
+
+### All the real work is done by the shellscript cvs.sh
+
+SHELL=/bin/sh
+
+cvs dist configure configure.in configure.files subdirs package-messages package-merge Makefile.am acinclude.m4 extract-messages:
+	@admindir=$(admindir); \
+	if test &quot;x$$admindir&quot; = x; then \
+	  admindir=.; until test -f $$admindir/admin/cvs.sh; do \
+	    admindir=$$admindir/..; \
+	    if test `cd $$admindir &amp;&amp; pwd` = / ; then break; fi; \
+	  done; \
+	  admindir=$$admindir/admin; \
+	  if test -f $$admindir/cvs.sh; then :; else \
+	    echo &quot;Can't find the admin/ directory in any parent of the&quot;; \
+	    echo &quot;current directory.  Please set it with admindir=...&quot;; \
+	    exit 1; \
+	  fi; \
+	fi; \
+	if test &quot;$@&quot; = &quot;package-merge&quot;; then \
+		MAKE=&quot;$(MAKE)&quot; POFILES=&quot;$(POFILES)&quot; PACKAGE=&quot;$(PACKAGE)&quot; \
+	  	$(SHELL) $$admindir/cvs.sh package-merge ;\
+	else \
+		MAKE=&quot;$(MAKE)&quot; $(SHELL) $$admindir/cvs.sh $@ ;\
+	fi
+
+configure.in: configure.files subdirs
+configure.files: subdirs
+
+svn: cvs
+
+.SILENT:
+
+.PHONY: svn cvs dist package-merge package-messages

Added: trunk/admin/acinclude.m4.in
===================================================================
--- trunk/admin/acinclude.m4.in	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/acinclude.m4.in	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,5591 @@
+##   -*- autoconf -*-
+
+dnl    This file is part of the KDE libraries/packages
+dnl    Copyright (C) 1997 Janos Farkas (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">chexum at shadow.banki.hu</A>)
+dnl              (C) 1997,98,99 Stephan Kulow (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">coolo at kde.org</A>)
+
+dnl    This file is free software; you can redistribute it and/or
+dnl    modify it under the terms of the GNU Library General Public
+dnl    License as published by the Free Software Foundation; either
+dnl    version 2 of the License, or (at your option) any later version.
+
+dnl    This library is distributed in the hope that it will be useful,
+dnl    but WITHOUT ANY WARRANTY; without even the implied warranty of
+dnl    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+dnl    Library General Public License for more details.
+
+dnl    You should have received a copy of the GNU Library General Public License
+dnl    along with this library; see the file COPYING.LIB.  If not, write to
+dnl    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+dnl    Boston, MA 02110-1301, USA.
+
+dnl IMPORTANT NOTE:
+dnl Please do not modify this file unless you expect your modifications to be
+dnl carried into every other module in the repository.
+dnl
+dnl Single-module modifications are best placed in configure.in for kdelibs
+dnl and kdebase or configure.in.in if present.
+
+# KDE_PATH_X_DIRECT
+dnl Internal subroutine of AC_PATH_X.
+dnl Set ac_x_includes and/or ac_x_libraries.
+AC_DEFUN([KDE_PATH_X_DIRECT],
+[
+AC_REQUIRE([KDE_CHECK_LIB64])
+
+if test &quot;$ac_x_includes&quot; = NO; then
+  # Guess where to find include files, by looking for this one X11 .h file.
+  test -z &quot;$x_direct_test_include&quot; &amp;&amp; x_direct_test_include=X11/Intrinsic.h
+
+  # First, try using that file with no special directory specified.
+AC_TRY_CPP([#include &lt;$x_direct_test_include&gt;],
+[# We can compile using X headers with no special include directory.
+ac_x_includes=],
+[# Look for the header file in a standard set of common directories.
+# Check X11 before X11Rn because it is often a symlink to the current release.
+  for ac_dir in               \
+    /usr/X11/include          \
+    /usr/X11R6/include        \
+    /usr/X11R5/include        \
+    /usr/X11R4/include        \
+                              \
+    /usr/include/X11          \
+    /usr/include/X11R6        \
+    /usr/include/X11R5        \
+    /usr/include/X11R4        \
+                              \
+    /usr/local/X11/include    \
+    /usr/local/X11R6/include  \
+    /usr/local/X11R5/include  \
+    /usr/local/X11R4/include  \
+                              \
+    /usr/local/include/X11    \
+    /usr/local/include/X11R6  \
+    /usr/local/include/X11R5  \
+    /usr/local/include/X11R4  \
+                              \
+    /usr/X386/include         \
+    /usr/x386/include         \
+    /usr/XFree86/include/X11  \
+                              \
+    /usr/include              \
+    /usr/local/include        \
+    /usr/unsupported/include  \
+    /usr/athena/include       \
+    /usr/local/x11r5/include  \
+    /usr/lpp/Xamples/include  \
+                              \
+    /usr/openwin/include      \
+    /usr/openwin/share/include \
+    ; \
+  do
+    if test -r &quot;$ac_dir/$x_direct_test_include&quot;; then
+      ac_x_includes=$ac_dir
+      break
+    fi
+  done])
+fi # $ac_x_includes = NO
+
+if test &quot;$ac_x_libraries&quot; = NO; then
+  # Check for the libraries.
+
+  test -z &quot;$x_direct_test_library&quot; &amp;&amp; x_direct_test_library=Xt
+  test -z &quot;$x_direct_test_function&quot; &amp;&amp; x_direct_test_function=XtMalloc
+
+  # See if we find them without any special options.
+  # Don't add to $LIBS permanently.
+  ac_save_LIBS=&quot;$LIBS&quot;
+  LIBS=&quot;-l$x_direct_test_library $LIBS&quot;
+AC_TRY_LINK([#include &lt;X11/Intrinsic.h&gt;], [${x_direct_test_function}(1)],
+[LIBS=&quot;$ac_save_LIBS&quot;
+# We can link X programs with no special library path.
+ac_x_libraries=],
+[LIBS=&quot;$ac_save_LIBS&quot;
+# First see if replacing the include by lib works.
+# Check X11 before X11Rn because it is often a symlink to the current release.
+for ac_dir in `echo &quot;$ac_x_includes&quot; | sed s/include/lib${kdelibsuff}/` \
+    /usr/X11/lib${kdelibsuff}           \
+    /usr/X11R6/lib${kdelibsuff}         \
+    /usr/X11R5/lib${kdelibsuff}         \
+    /usr/X11R4/lib${kdelibsuff}         \
+                                        \
+    /usr/lib${kdelibsuff}/X11           \
+    /usr/lib${kdelibsuff}/X11R6         \
+    /usr/lib${kdelibsuff}/X11R5         \
+    /usr/lib${kdelibsuff}/X11R4         \
+                                        \
+    /usr/local/X11/lib${kdelibsuff}     \
+    /usr/local/X11R6/lib${kdelibsuff}   \
+    /usr/local/X11R5/lib${kdelibsuff}   \
+    /usr/local/X11R4/lib${kdelibsuff}   \
+                                        \
+    /usr/local/lib${kdelibsuff}/X11     \
+    /usr/local/lib${kdelibsuff}/X11R6   \
+    /usr/local/lib${kdelibsuff}/X11R5   \
+    /usr/local/lib${kdelibsuff}/X11R4   \
+                                        \
+    /usr/X386/lib${kdelibsuff}          \
+    /usr/x386/lib${kdelibsuff}          \
+    /usr/XFree86/lib${kdelibsuff}/X11   \
+                                        \
+    /usr/lib${kdelibsuff}               \
+    /usr/local/lib${kdelibsuff}         \
+    /usr/unsupported/lib${kdelibsuff}   \
+    /usr/athena/lib${kdelibsuff}        \
+    /usr/local/x11r5/lib${kdelibsuff}   \
+    /usr/lpp/Xamples/lib${kdelibsuff}   \
+    /lib/usr/lib${kdelibsuff}/X11       \
+                                        \
+    /usr/openwin/lib${kdelibsuff}       \
+    /usr/openwin/share/lib${kdelibsuff} \
+    ; \
+do
+dnl Don't even attempt the hair of trying to link an X program!
+  for ac_extension in a so sl; do
+    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
+      ac_x_libraries=$ac_dir
+      break 2
+    fi
+  done
+done])
+fi # $ac_x_libraries = NO
+])
+
+
+dnl ------------------------------------------------------------------------
+dnl Find a file (or one of more files in a list of dirs)
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([AC_FIND_FILE],
+[
+$3=NO
+for i in $2;
+do
+  for j in $1;
+  do
+    echo &quot;configure: __oline__: $i/$j&quot; &gt;&amp;AC_FD_CC
+    if test -r &quot;$i/$j&quot;; then
+      echo &quot;taking that&quot; &gt;&amp;AC_FD_CC
+      $3=$i
+      break 2
+    fi
+  done
+done
+])
+
+dnl KDE_FIND_PATH(program-name, variable-name, list-of-dirs,
+dnl	if-not-found, test-parameter, prepend-path)
+dnl
+dnl Look for program-name in list-of-dirs+$PATH.
+dnl If prepend-path is set, look in $PATH+list-of-dirs instead.
+dnl If found, $variable-name is set. If not, if-not-found is evaluated.
+dnl test-parameter: if set, the program is executed with this arg,
+dnl                 and only a successful exit code is required.
+AC_DEFUN([KDE_FIND_PATH],
+[
+   AC_MSG_CHECKING([for $1])
+   if test -n &quot;$$2&quot;; then
+        kde_cv_path=&quot;$$2&quot;;
+   else
+        kde_cache=`echo $1 | sed 'y%./+-%__p_%'`
+
+        AC_CACHE_VAL(kde_cv_path_$kde_cache,
+        [
+        kde_cv_path=&quot;NONE&quot;
+	kde_save_IFS=$IFS
+	IFS=':'
+	dirs=&quot;&quot;
+	for dir in $PATH; do
+	  dirs=&quot;$dirs $dir&quot;
+	done
+	if test -z &quot;$6&quot;; then  dnl Append dirs in PATH (default)
+	  dirs=&quot;$3 $dirs&quot;
+        else  dnl Prepend dirs in PATH (if 6th arg is set)
+	  dirs=&quot;$dirs $3&quot;
+	fi
+	IFS=$kde_save_IFS
+
+        for dir in $dirs; do
+	  if test -x &quot;$dir/$1&quot;; then
+	    if test -n &quot;[$5]&quot;
+	    then
+              evalstr=&quot;$dir/$1 [$5] 2&gt;&amp;1 &quot;
+	      if eval $evalstr; then
+                kde_cv_path=&quot;$dir/$1&quot;
+                break
+	      fi
+            else
+		kde_cv_path=&quot;$dir/$1&quot;
+                break
+	    fi
+          fi
+        done
+
+        eval &quot;kde_cv_path_$kde_cache=$kde_cv_path&quot;
+
+        ])
+
+      eval &quot;kde_cv_path=\&quot;`echo '$kde_cv_path_'$kde_cache`\&quot;&quot;
+
+   fi
+
+   if test -z &quot;$kde_cv_path&quot; || test &quot;$kde_cv_path&quot; = NONE; then
+      AC_MSG_RESULT(not found)
+      $4
+   else
+      AC_MSG_RESULT($kde_cv_path)
+      $2=$kde_cv_path
+
+   fi
+])
+
+AC_DEFUN([KDE_MOC_ERROR_MESSAGE],
+[
+    AC_MSG_ERROR([No Qt meta object compiler (moc) found!
+Please check whether you installed Qt correctly.
+You need to have a running moc binary.
+configure tried to run $ac_cv_path_moc and the test didn't
+succeed. If configure shouldn't have tried this one, set
+the environment variable MOC to the right one before running
+configure.
+])
+])
+
+AC_DEFUN([KDE_UIC_ERROR_MESSAGE],
+[
+    AC_MSG_WARN([No Qt ui compiler (uic) found!
+Please check whether you installed Qt correctly.
+You need to have a running uic binary.
+configure tried to run $ac_cv_path_uic and the test didn't
+succeed. If configure shouldn't have tried this one, set
+the environment variable UIC to the right one before running
+configure.
+])
+])
+
+AC_DEFUN([KDE_RCC_ERROR_MESSAGE],
+[
+    AC_MSG_WARN([No Qt resource compiler (rcc) found!
+Please check whether you installed Qt correctly.
+You need to have a running rcc binary.
+configure tried to run $ac_cv_path_rcc and the test didn't
+succeed. If configure shouldn't have tried this one, set
+the environment variable UIC to the right one before running
+configure.
+])
+])
+
+
+AC_DEFUN([KDE_CHECK_UIC_FLAG],
+[
+    AC_MSG_CHECKING([whether uic supports -$1 ])
+    kde_cache=`echo $1 | sed 'y% .=/+-%____p_%'`
+    AC_CACHE_VAL(kde_cv_prog_uic_$kde_cache,
+    [
+        cat &gt;conftest.ui &lt;&lt;EOT
+        &lt;!DOCTYPE UI&gt;&lt;UI version=&quot;3&quot; stdsetdef=&quot;1&quot;&gt;&lt;/UI&gt;
+EOT
+        ac_uic_testrun=&quot;$UIC_PATH -$1 $2 conftest.ui &gt;/dev/null&quot;
+        if AC_TRY_EVAL(ac_uic_testrun); then
+            eval &quot;kde_cv_prog_uic_$kde_cache=yes&quot;
+        else
+            eval &quot;kde_cv_prog_uic_$kde_cache=no&quot;
+        fi
+        rm -f conftest*
+    ])
+
+    if eval &quot;test \&quot;`echo '$kde_cv_prog_uic_'$kde_cache`\&quot; = yes&quot;; then
+        AC_MSG_RESULT([yes])
+        :
+        $3
+    else
+        AC_MSG_RESULT([no])
+        :
+        $4
+    fi
+])
+
+
+dnl ------------------------------------------------------------------------
+dnl Find the meta object compiler and the ui compiler in the PATH,
+dnl in $QTDIR/bin, and some more usual places
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([AC_PATH_QT_MOC_UIC],
+[
+   AC_REQUIRE([KDE_CHECK_PERL])
+   qt_bindirs=&quot;&quot;
+   for dir in $kde_qt_dirs; do
+      qt_bindirs=&quot;$qt_bindirs $dir/bin $dir/src/moc&quot;
+   done
+   qt_bindirs=&quot;$qt_bindirs /usr/bin /usr/X11R6/bin /usr/local/qt/bin&quot;
+   if test ! &quot;$ac_qt_bindir&quot; = &quot;NO&quot;; then
+      qt_bindirs=&quot;$ac_qt_bindir $qt_bindirs&quot;
+   fi
+
+   KDE_FIND_PATH(moc, MOC_PATH, [$qt_bindirs], [KDE_MOC_ERROR_MESSAGE], [ -v 2&gt;&amp;1 | grep -E -q 'version [5-9]' ])
+   MOC=&quot;$MOC_PATH \$(AM_CPPFLAGS) \$(CPPFLAGS) \$(KDE_CPPFLAGS) \$(INCLUDES)&quot;
+   if test -z &quot;$UIC_NOT_NEEDED&quot;; then
+     KDE_FIND_PATH(uic, UIC_PATH, [$qt_bindirs], [UIC_PATH=&quot;&quot;], [ -v ])
+     KDE_FIND_PATH(uic3, UIC3_PATH, [$qt_bindirs], [UIC3_PATH=&quot;&quot;], [ -version 2&gt;&amp;1 | grep -q 'version 4' ])
+     if test -z &quot;$UIC_PATH&quot; ; then
+       KDE_UIC_ERROR_MESSAGE
+       exit 1
+     else
+       UIC=$UIC_PATH
+
+       KDE_CHECK_UIC_FLAG(L,[/nonexistent],ac_uic_supports_libpath=yes,ac_uic_supports_libpath=no)
+       KDE_CHECK_UIC_FLAG(nounload,,ac_uic_supports_nounload=yes,ac_uic_supports_nounload=no)
+
+       if test x$ac_uic_supports_libpath = xyes; then
+           UIC=&quot;$UIC -L \$(kde_widgetdir)&quot;
+       fi
+       if test x$ac_uic_supports_nounload = xyes; then
+           UIC=&quot;$UIC -nounload&quot;
+       fi
+     fi
+     if test -n &quot;$UIC3_PATH&quot;; then
+         UIC=&quot;$UIC -3 $UIC3_PATH&quot;
+     fi
+   else
+     UIC=&quot;echo uic not available: &quot;
+   fi
+
+   if test $kde_qtver = 4; then
+     KDE_FIND_PATH(rcc, RCC, [$qt_bindirs], [KDE_RCC_ERROR_MESSAGE])
+     AC_SUBST(RCC)
+   fi
+
+   AC_SUBST(MOC)
+   AC_SUBST(UIC)
+   AC_SUBST(UIC3_PATH)
+
+   UIC_TR=&quot;tr2i18n&quot;
+
+   AC_SUBST(UIC_TR)
+])
+
+AC_DEFUN([KDE_SET_PATHS],
+[
+  kde_cv_all_paths=&quot;kde_have_all_paths=\&quot;yes\&quot; \
+	kde_htmldir=\&quot;$kde_htmldir\&quot; \
+	kde_appsdir=\&quot;$kde_appsdir\&quot; \
+	kde_icondir=\&quot;$kde_icondir\&quot; \
+	kde_sounddir=\&quot;$kde_sounddir\&quot; \
+	kde_datadir=\&quot;$kde_datadir\&quot; \
+	kde_locale=\&quot;$kde_locale\&quot; \
+	kde_cgidir=\&quot;$kde_cgidir\&quot; \
+	kde_confdir=\&quot;$kde_confdir\&quot; \
+	kde_kcfgdir=\&quot;$kde_kcfgdir\&quot; \
+	kde_mimedir=\&quot;$kde_mimedir\&quot; \
+	kde_toolbardir=\&quot;$kde_toolbardir\&quot; \
+	kde_wallpaperdir=\&quot;$kde_wallpaperdir\&quot; \
+	kde_templatesdir=\&quot;$kde_templatesdir\&quot; \
+	kde_bindir=\&quot;$kde_bindir\&quot; \
+	kde_servicesdir=\&quot;$kde_servicesdir\&quot; \
+	kde_servicetypesdir=\&quot;$kde_servicetypesdir\&quot; \
+	kde_moduledir=\&quot;$kde_moduledir\&quot; \
+	kde_styledir=\&quot;$kde_styledir\&quot; \
+	kde_imageformatsdir=\&quot;$kde_imageformatsdir\&quot; \
+	kde_widgetdir=\&quot;$kde_widgetdir\&quot; \
+	xdg_appsdir=\&quot;$xdg_appsdir\&quot; \
+	xdg_menudir=\&quot;$xdg_menudir\&quot; \
+	xdg_directorydir=\&quot;$xdg_directorydir\&quot; \
+	kde_result=$1&quot;
+])
+
+AC_DEFUN([KDE_SET_DEFAULT_PATHS],
+[
+
+  if test -z &quot;$kde_htmldir&quot;; then
+    kde_htmldir='\${datadir}/doc/HTML'
+  fi
+  if test -z &quot;$kde_appsdir&quot;; then
+    kde_appsdir='\${datadir}/applnk'
+  fi
+  if test -z &quot;$kde_icondir&quot;; then
+    kde_icondir='\${datadir}/icons'
+  fi
+  if test -z &quot;$kde_sounddir&quot;; then
+    kde_sounddir='\${datadir}/sounds'
+  fi
+  if test -z &quot;$kde_datadir&quot;; then
+    kde_datadir='\${datadir}/apps'
+  fi
+  if test -z &quot;$kde_locale&quot;; then
+    kde_locale='\${datadir}/locale'
+  fi
+  if test -z &quot;$kde_cgidir&quot;; then
+    kde_cgidir='\${exec_prefix}/cgi-bin'
+  fi
+  if test -z &quot;$kde_confdir&quot;; then
+    kde_confdir='\${datadir}/config'
+  fi
+  if test -z &quot;$kde_kcfgdir&quot;; then
+    kde_kcfgdir='\${datadir}/config.kcfg'
+  fi
+  if test -z &quot;$kde_mimedir&quot;; then
+    kde_mimedir='\${datadir}/mimelnk'
+  fi
+  if test -z &quot;$kde_toolbardir&quot;; then
+    kde_toolbardir='\${datadir}/toolbar'
+  fi
+  if test -z &quot;$kde_wallpaperdir&quot;; then
+    kde_wallpaperdir='\${datadir}/wallpapers'
+  fi
+  if test -z &quot;$kde_templatesdir&quot;; then
+    kde_templatesdir='\${datadir}/templates'
+  fi
+  if test -z &quot;$kde_bindir&quot;; then
+    kde_bindir='\${exec_prefix}/bin'
+  fi
+  if test -z &quot;$kde_servicesdir&quot;; then
+    kde_servicesdir='\${datadir}/services'
+  fi
+  if test -z &quot;$kde_servicetypesdir&quot;; then
+    kde_servicetypesdir='\${datadir}/servicetypes'
+  fi
+  if test -z &quot;$kde_moduledir&quot;; then
+    kde_moduledir='\${libdir}/kde4'
+  fi
+  if test -z &quot;$kde_styledir&quot;; then
+    kde_styledir='\${libdir}/kde4/plugins/styles'
+  fi
+  if test -z &quot;$kde_imageformatsdir&quot;; then
+    kde_imageformatsdir='\${libdir}/kde4/plugins/imageformats'
+  fi
+  if test -z &quot;$kde_widgetdir&quot;; then
+    kde_widgetdir='\${libdir}/kde4/plugins/designer'
+  fi
+  if test -z &quot;$xdg_appsdir&quot;; then
+    xdg_appsdir='\${datadir}/applications/kde'
+  fi
+  if test -z &quot;$xdg_menudir&quot;; then
+    xdg_menudir='\${sysconfdir}/xdg/menus'
+  fi
+  if test -z &quot;$xdg_directorydir&quot;; then
+    xdg_directorydir='\${datadir}/desktop-directories'
+  fi
+
+  KDE_SET_PATHS(defaults)
+
+])
+
+AC_DEFUN([KDE_CHECK_PATHS_FOR_COMPLETENESS],
+[ if test -z &quot;$kde_htmldir&quot; || test -z &quot;$kde_appsdir&quot; ||
+   test -z &quot;$kde_icondir&quot; || test -z &quot;$kde_sounddir&quot; ||
+   test -z &quot;$kde_datadir&quot; || test -z &quot;$kde_locale&quot;  ||
+   test -z &quot;$kde_cgidir&quot;  || test -z &quot;$kde_confdir&quot; ||
+   test -z &quot;$kde_kcfgdir&quot; ||
+   test -z &quot;$kde_mimedir&quot; || test -z &quot;$kde_toolbardir&quot; ||
+   test -z &quot;$kde_wallpaperdir&quot; || test -z &quot;$kde_templatesdir&quot; ||
+   test -z &quot;$kde_bindir&quot; || test -z &quot;$kde_servicesdir&quot; ||
+   test -z &quot;$kde_servicetypesdir&quot; || test -z &quot;$kde_moduledir&quot; ||
+   test -z &quot;$kde_styledir&quot; || test -z &quot;$kde_imageformatsdir&quot; ||
+   test -z &quot;$kde_widgetdir&quot; ||
+   test -z &quot;$xdg_appsdir&quot; || test -z &quot;$xdg_menudir&quot; || test -z &quot;$xdg_directorydir&quot; ||
+   test &quot;x$kde_have_all_paths&quot; != &quot;xyes&quot;; then
+     kde_have_all_paths=no
+  fi
+])
+
+AC_DEFUN([KDE_MISSING_PROG_ERROR],
+[
+    AC_MSG_ERROR([The important program $1 was not found!
+Please check whether you installed KDE correctly.
+])
+])
+
+AC_DEFUN([KDE_MISSING_ARTS_ERROR],
+[
+    AC_MSG_ERROR([The important program $1 was not found!
+Please check whether you installed aRts correctly or use
+--without-arts to compile without aRts support (this will remove functionality).
+])
+])
+
+AC_DEFUN([KDE_SET_DEFAULT_BINDIRS],
+[
+    kde_default_bindirs=&quot;/usr/bin /usr/local/bin /opt/local/bin /usr/X11R6/bin /opt/kde/bin /opt/kde4/bin /usr/kde/bin /usr/local/kde/bin&quot;
+    test -n &quot;$KDEDIR&quot; &amp;&amp; kde_default_bindirs=&quot;$KDEDIR/bin $kde_default_bindirs&quot;
+    if test -n &quot;$KDEDIRS&quot;; then
+       kde_save_IFS=$IFS
+       IFS=:
+       for dir in $KDEDIRS; do
+            kde_default_bindirs=&quot;$dir/bin $kde_default_bindirs &quot;
+       done
+       IFS=$kde_save_IFS
+    fi
+])
+
+AC_DEFUN([KDE_SUBST_PROGRAMS],
+[
+    AC_ARG_WITH(arts,
+        AC_HELP_STRING([--with-arts],[build without aRts [default=no]]),
+        [build_arts=$withval],
+        [build_arts=no]
+    )
+    AM_CONDITIONAL(include_ARTS, test &quot;$build_arts&quot; '!=' &quot;no&quot;)
+    if test &quot;$build_arts&quot; = &quot;no&quot;; then
+        AC_DEFINE(WITHOUT_ARTS, 1, [Defined if compiling without arts])
+    fi
+
+        KDE_SET_DEFAULT_BINDIRS
+        kde_default_bindirs=&quot;$exec_prefix/bin $prefix/bin $kde_libs_prefix/bin $kde_default_bindirs&quot;
+        KDE_FIND_PATH(dcopidl, DCOPIDL, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(dcopidl)])
+        KDE_FIND_PATH(dcopidl2cpp, DCOPIDL2CPP, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(dcopidl2cpp)])
+        if test &quot;$build_arts&quot; '!=' &quot;no&quot;; then
+          KDE_FIND_PATH(mcopidl, MCOPIDL, [$kde_default_bindirs], [KDE_MISSING_ARTS_ERROR(mcopidl)])
+          KDE_FIND_PATH(artsc-config, ARTSCCONFIG, [$kde_default_bindirs], [KDE_MISSING_ARTS_ERROR(artsc-config)])
+        fi
+        KDE_FIND_PATH(meinproc, MEINPROC, [$kde_default_bindirs])
+
+        kde32ornewer=1
+        kde33ornewer=1
+
+        if test -n &quot;$kde32ornewer&quot;; then
+            KDE_FIND_PATH(kconfig_compiler, KCONFIG_COMPILER, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(kconfig_compiler)])
+        fi
+        if test -n &quot;$kde33ornewer&quot;; then
+            KDE_FIND_PATH(makekdewidgets, MAKEKDEWIDGETS, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(makekdewidgets)])
+            AC_SUBST(MAKEKDEWIDGETS)
+        fi
+        KDE_FIND_PATH(xmllint, XMLLINT, [${prefix}/bin ${exec_prefix}/bin], [XMLLINT=&quot;&quot;])
+
+        if test -n &quot;$MEINPROC&quot; -a &quot;$MEINPROC&quot; != &quot;compiled&quot;; then
+ 	    kde_sharedirs=&quot;/usr/share/kde /usr/local/share /usr/share /opt/kde4/share /opt/kde/share $prefix/share&quot;
+            test -n &quot;$KDEDIR&quot; &amp;&amp; kde_sharedirs=&quot;$KDEDIR/share $kde_sharedirs&quot;
+            AC_FIND_FILE(apps/ksgmltools2/customization/kde-chunk.xsl, $kde_sharedirs, KDE_XSL_STYLESHEET)
+	    if test &quot;$KDE_XSL_STYLESHEET&quot; = &quot;NO&quot;; then
+		KDE_XSL_STYLESHEET=&quot;&quot;
+	    else
+                KDE_XSL_STYLESHEET=&quot;$KDE_XSL_STYLESHEET/apps/ksgmltools2/customization/kde-chunk.xsl&quot;
+	    fi
+        fi
+
+        DCOP_DEPENDENCIES='$(DCOPIDL)'
+        if test -n &quot;$kde32ornewer&quot;; then
+            DCOPIDLNG='$(DCOPIDL)'
+            KCFG_DEPENDENCIES='$(KCONFIG_COMPILER)'
+            DCOP_DEPENDENCIES='$(DCOPIDL) $(DCOPIDLNG)'
+            AC_SUBST(KCONFIG_COMPILER)
+            AC_SUBST(KCFG_DEPENDENCIES)
+            AC_SUBST(DCOPIDLNG)
+        fi
+        AC_SUBST(DCOPIDL)
+        AC_SUBST(DCOPIDL2CPP)
+        AC_SUBST(DCOP_DEPENDENCIES)
+        AC_SUBST(MCOPIDL)
+        AC_SUBST(ARTSCCONFIG)
+	AC_SUBST(MEINPROC)
+ 	AC_SUBST(KDE_XSL_STYLESHEET)
+	AC_SUBST(XMLLINT)
+])dnl
+
+AC_DEFUN([AC_CREATE_KFSSTND],
+[
+AC_REQUIRE([AC_CHECK_RPATH])
+
+AC_MSG_CHECKING([for KDE paths])
+kde_result=&quot;&quot;
+kde_cached_paths=yes
+AC_CACHE_VAL(kde_cv_all_paths,
+[
+  KDE_SET_DEFAULT_PATHS($1)
+  kde_cached_paths=no
+])
+eval &quot;$kde_cv_all_paths&quot;
+KDE_CHECK_PATHS_FOR_COMPLETENESS
+if test &quot;$kde_have_all_paths&quot; = &quot;no&quot; &amp;&amp; test &quot;$kde_cached_paths&quot; = &quot;yes&quot;; then
+  # wrong values were cached, may be, we can set better ones
+  kde_result=
+  kde_htmldir= kde_appsdir= kde_icondir= kde_sounddir=
+  kde_datadir= kde_locale=  kde_cgidir=  kde_confdir= kde_kcfgdir=
+  kde_mimedir= kde_toolbardir= kde_wallpaperdir= kde_templatesdir=
+  kde_bindir= kde_servicesdir= kde_servicetypesdir= kde_moduledir=
+  kde_have_all_paths=
+  kde_styledir=
+  kde_imageformatsdir=
+  kde_widgetdir=
+  xdg_appsdir = xdg_menudir= xdg_directorydir=
+  KDE_SET_DEFAULT_PATHS($1)
+  eval &quot;$kde_cv_all_paths&quot;
+  KDE_CHECK_PATHS_FOR_COMPLETENESS
+  kde_result=&quot;$kde_result (cache overridden)&quot;
+fi
+if test &quot;$kde_have_all_paths&quot; = &quot;no&quot;; then
+  AC_MSG_ERROR([configure could not run a little KDE program to test the environment.
+Since it had compiled and linked before, it must be a strange problem on your system.
+Look at config.log for details. If you are not able to fix this, look at
+<A HREF="http://www.kde.org/faq/installation.html">http://www.kde.org/faq/installation.html</A> or any www.kde.org mirror.
+(If you're using an egcs version on Linux, you may update binutils!)
+])
+else
+  rm -f conftest*
+  AC_MSG_RESULT($kde_result)
+fi
+
+bindir=$kde_bindir
+
+KDE_SUBST_PROGRAMS
+
+])
+
+AC_DEFUN([AC_SUBST_KFSSTND],
+[
+AC_SUBST(kde_htmldir)
+AC_SUBST(kde_appsdir)
+AC_SUBST(kde_icondir)
+AC_SUBST(kde_sounddir)
+AC_SUBST(kde_datadir)
+AC_SUBST(kde_locale)
+AC_SUBST(kde_confdir)
+AC_SUBST(kde_kcfgdir)
+AC_SUBST(kde_mimedir)
+AC_SUBST(kde_wallpaperdir)
+AC_SUBST(kde_bindir)
+dnl X Desktop Group standards
+AC_SUBST(xdg_appsdir)
+AC_SUBST(xdg_menudir)
+AC_SUBST(xdg_directorydir)
+dnl for KDE 2
+AC_SUBST(kde_templatesdir)
+AC_SUBST(kde_servicesdir)
+AC_SUBST(kde_servicetypesdir)
+AC_SUBST(kde_moduledir)
+AC_SUBST(kdeinitdir, '$(kde_moduledir)')
+AC_SUBST(kde_styledir)
+AC_SUBST(kde_imageformatsdir)
+AC_SUBST(kde_widgetdir)
+dnl AC_SUBST(kde_minidir)
+dnl AC_SUBST(kde_cgidir)
+dnl AC_SUBST(kde_toolbardir)
+])
+
+AC_DEFUN([KDE_MISC_TESTS],
+[
+   dnl Checks for libraries.
+   AC_CHECK_LIB(util, main, [LIBUTIL=&quot;-lutil&quot;]) dnl for *BSD
+   AC_SUBST(LIBUTIL)
+   AC_CHECK_LIB(compat, main, [LIBCOMPAT=&quot;-lcompat&quot;]) dnl for *BSD
+   AC_SUBST(LIBCOMPAT)
+   kde_have_crypt=
+   AC_CHECK_LIB(crypt, crypt, [LIBCRYPT=&quot;-lcrypt&quot;; kde_have_crypt=yes],
+      AC_CHECK_LIB(c, crypt, [kde_have_crypt=yes], [
+        AC_MSG_WARN([you have no crypt in either libcrypt or libc.
+You should install libcrypt from another source or configure with PAM
+support])
+	kde_have_crypt=no
+      ]))
+   AC_SUBST(LIBCRYPT)
+   if test $kde_have_crypt = yes; then
+      AC_DEFINE_UNQUOTED(HAVE_CRYPT, 1, [Defines if your system has the crypt function])
+   fi
+   AC_CHECK_SOCKLEN_T
+   AC_CHECK_LIB(dnet, dnet_ntoa, [X_EXTRA_LIBS=&quot;$X_EXTRA_LIBS -ldnet&quot;])
+   if test $ac_cv_lib_dnet_dnet_ntoa = no; then
+      AC_CHECK_LIB(dnet_stub, dnet_ntoa,
+        [X_EXTRA_LIBS=&quot;$X_EXTRA_LIBS -ldnet_stub&quot;])
+   fi
+   AC_CHECK_FUNC(inet_ntoa)
+   if test $ac_cv_func_inet_ntoa = no; then
+     AC_CHECK_LIB(nsl, inet_ntoa, X_EXTRA_LIBS=&quot;$X_EXTRA_LIBS -lnsl&quot;)
+   fi
+   AC_CHECK_FUNC(connect)
+   if test $ac_cv_func_connect = no; then
+      AC_CHECK_LIB(socket, connect, X_EXTRA_LIBS=&quot;-lsocket $X_EXTRA_LIBS&quot;, ,
+        $X_EXTRA_LIBS)
+   fi
+
+   AC_CHECK_FUNC(remove)
+   if test $ac_cv_func_remove = no; then
+      AC_CHECK_LIB(posix, remove, X_EXTRA_LIBS=&quot;$X_EXTRA_LIBS -lposix&quot;)
+   fi
+
+   # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
+   AC_CHECK_FUNC(shmat, ,
+     AC_CHECK_LIB(ipc, shmat, X_EXTRA_LIBS=&quot;$X_EXTRA_LIBS -lipc&quot;))
+
+   # more headers that need to be explicitly included on darwin
+   AC_CHECK_HEADERS(sys/types.h stdint.h)
+
+   # sys/bitypes.h is needed for uint32_t and friends on Tru64
+   AC_CHECK_HEADERS(sys/bitypes.h)
+
+   # darwin requires a poll emulation library
+   AC_CHECK_LIB(poll, poll, LIB_POLL=&quot;-lpoll&quot;)
+
+   # for some image handling on Mac OS X
+   AC_CHECK_HEADERS(Carbon/Carbon.h)
+
+   # CoreAudio framework
+   AC_CHECK_HEADER(CoreAudio/CoreAudio.h, [
+     AC_DEFINE(HAVE_COREAUDIO, 1, [Define if you have the CoreAudio API])
+     FRAMEWORK_COREAUDIO=&quot;-Wl,-framework,CoreAudio&quot;
+   ])
+
+   AC_CHECK_RES_INIT
+   AC_SUBST(LIB_POLL)
+   AC_SUBST(FRAMEWORK_COREAUDIO)
+   LIBSOCKET=&quot;$X_EXTRA_LIBS&quot;
+   AC_SUBST(LIBSOCKET)
+   AC_SUBST(X_EXTRA_LIBS)
+   AC_CHECK_LIB(ucb, killpg, [LIBUCB=&quot;-lucb&quot;]) dnl for Solaris2.4
+   AC_SUBST(LIBUCB)
+
+   case $host in  dnl this *is* LynxOS specific
+   *-*-lynxos* )
+        AC_MSG_CHECKING([LynxOS header file wrappers])
+        [CFLAGS=&quot;$CFLAGS -D__NO_INCLUDE_WARN__&quot;]
+        AC_MSG_RESULT(disabled)
+        AC_CHECK_LIB(bsd, gethostbyname, [LIBSOCKET=&quot;-lbsd&quot;]) dnl for LynxOS
+         ;;
+    esac
+
+   KDE_CHECK_TYPES
+   KDE_CHECK_LIBDL
+   KDE_CHECK_STRLCPY
+   KDE_CHECK_PIE_SUPPORT
+
+# darwin needs this to initialize the environment
+AC_CHECK_HEADERS(crt_externs.h)
+AC_CHECK_FUNC(_NSGetEnviron, [AC_DEFINE(HAVE_NSGETENVIRON, 1, [Define if your system needs _NSGetEnviron to set up the environment])])
+
+AH_VERBATIM(_DARWIN_ENVIRON,
+[
+#if defined(HAVE_NSGETENVIRON) &amp;&amp; defined(HAVE_CRT_EXTERNS_H)
+# include &lt;sys/time.h&gt;
+# include &lt;crt_externs.h&gt;
+# define environ (*_NSGetEnviron())
+#endif
+])
+
+AH_VERBATIM(_AIX_STRINGS_H_BZERO,
+[
+/*
+ * AIX defines FD_SET in terms of bzero, but fails to include &lt;strings.h&gt;
+ * that defines bzero.
+ */
+
+#if defined(_AIX)
+#include &lt;strings.h&gt;
+#endif
+])
+
+AC_CHECK_FUNCS([vsnprintf snprintf])
+
+AH_VERBATIM(_TRU64,[
+/*
+ * On HP-UX, the declaration of vsnprintf() is needed every time !
+ */
+
+#if !defined(HAVE_VSNPRINTF) || defined(hpux)
+#if __STDC__
+#include &lt;stdarg.h&gt;
+#include &lt;stdlib.h&gt;
+#else
+#include &lt;varargs.h&gt;
+#endif
+#ifdef __cplusplus
+extern &quot;C&quot;
+#endif
+int vsnprintf(char *str, size_t n, char const *fmt, va_list ap);
+#ifdef __cplusplus
+extern &quot;C&quot;
+#endif
+int snprintf(char *str, size_t n, char const *fmt, ...);
+#endif
+])
+
+])
+
+dnl ------------------------------------------------------------------------
+dnl Find the header files and libraries for X-Windows. Extended the
+dnl macro AC_PATH_X
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([K_PATH_X],
+[
+AC_REQUIRE([KDE_MISC_TESTS])dnl
+AC_REQUIRE([KDE_CHECK_LIB64])
+
+AC_ARG_ENABLE(
+  embedded,
+  AC_HELP_STRING([--enable-embedded],[link to Qt-embedded, don't use X]),
+  kde_use_qt_emb=$enableval,
+  kde_use_qt_emb=no
+)
+
+AC_ARG_ENABLE(
+  qtopia,
+  AC_HELP_STRING([--enable-qtopia],[link to Qt-embedded, link to the Qtopia Environment]),
+  kde_use_qt_emb_palm=$enableval,
+  kde_use_qt_emb_palm=no
+)
+
+AC_ARG_ENABLE(
+  mac,
+  AC_HELP_STRING([--enable-mac],[link to Qt/Mac (don't use X)]),
+  kde_use_qt_mac=$enableval,
+  kde_use_qt_mac=no
+)
+
+# used to disable x11-specific stuff on special platforms
+AM_CONDITIONAL(include_x11, test &quot;$kde_use_qt_emb&quot; = &quot;no&quot; &amp;&amp; test &quot;$kde_use_qt_mac&quot; = &quot;no&quot;)
+
+if test &quot;$kde_use_qt_emb&quot; = &quot;no&quot; &amp;&amp; test &quot;$kde_use_qt_mac&quot; = &quot;no&quot;; then
+
+AC_MSG_CHECKING(for X)
+
+AC_CACHE_VAL(kde_cv_have_x,
+[# One or both of the vars are not set, and there is no cached value.
+if test &quot;{$x_includes+set}&quot; = set || test &quot;$x_includes&quot; = NONE; then
+   kde_x_includes=NO
+else
+   kde_x_includes=$x_includes
+fi
+if test &quot;{$x_libraries+set}&quot; = set || test &quot;$x_libraries&quot; = NONE; then
+   kde_x_libraries=NO
+else
+   kde_x_libraries=$x_libraries
+fi
+
+# below we use the standard autoconf calls
+ac_x_libraries=$kde_x_libraries
+ac_x_includes=$kde_x_includes
+
+KDE_PATH_X_DIRECT
+dnl AC_PATH_X_XMKMF picks /usr/lib as the path for the X libraries.
+dnl Unfortunately, if compiling with the N32 ABI, this is not the correct
+dnl location. The correct location is /usr/lib32 or an undefined value
+dnl (the linker is smart enough to pick the correct default library).
+dnl Things work just fine if you use just AC_PATH_X_DIRECT.
+dnl Solaris has a similar problem. AC_PATH_X_XMKMF forces x_includes to
+dnl /usr/openwin/include, which doesn't work. /usr/include does work, so
+dnl x_includes should be left alone.
+case &quot;$host&quot; in
+mips-sgi-irix6*)
+  ;;
+*-*-solaris*)
+  ;;
+*)
+  _AC_PATH_X_XMKMF
+  if test -z &quot;$ac_x_includes&quot;; then
+    ac_x_includes=&quot;.&quot;
+  fi
+  if test -z &quot;$ac_x_libraries&quot;; then
+    ac_x_libraries=&quot;/usr/lib${kdelibsuff}&quot;
+  fi
+esac
+#from now on we use our own again
+
+# when the user already gave --x-includes, we ignore
+# what the standard autoconf macros told us.
+if test &quot;$kde_x_includes&quot; = NO; then
+  kde_x_includes=$ac_x_includes
+fi
+
+# for --x-libraries too
+if test &quot;$kde_x_libraries&quot; = NO; then
+  kde_x_libraries=$ac_x_libraries
+fi
+
+if test &quot;$kde_x_includes&quot; = NO; then
+  AC_MSG_ERROR([Can't find X includes. Please check your installation and add the correct paths!])
+fi
+
+if test &quot;$kde_x_libraries&quot; = NO; then
+  AC_MSG_ERROR([Can't find X libraries. Please check your installation and add the correct paths!])
+fi
+
+# Record where we found X for the cache.
+kde_cv_have_x=&quot;have_x=yes \
+         kde_x_includes=$kde_x_includes kde_x_libraries=$kde_x_libraries&quot;
+])dnl
+
+eval &quot;$kde_cv_have_x&quot;
+
+if test &quot;$have_x&quot; != yes; then
+  AC_MSG_RESULT($have_x)
+  no_x=yes
+else
+  AC_MSG_RESULT([libraries $kde_x_libraries, headers $kde_x_includes])
+fi
+
+if test -z &quot;$kde_x_includes&quot; || test &quot;x$kde_x_includes&quot; = xNONE; then
+  X_INCLUDES=&quot;&quot;
+  x_includes=&quot;.&quot;; dnl better than nothing :-
+ else
+  x_includes=$kde_x_includes
+  X_INCLUDES=&quot;-I$x_includes&quot;
+fi
+
+if test -z &quot;$kde_x_libraries&quot; || test &quot;x$kde_x_libraries&quot; = xNONE; then
+  X_LDFLAGS=&quot;&quot;
+  x_libraries=&quot;/usr/lib&quot;; dnl better than nothing :-
+ else
+  x_libraries=$kde_x_libraries
+  X_LDFLAGS=&quot;-L$x_libraries&quot;
+fi
+all_includes=&quot;$X_INCLUDES&quot;
+all_libraries=&quot;$X_LDFLAGS $LDFLAGS_AS_NEEDED $LDFLAGS_NEW_DTAGS&quot;
+
+# Check for libraries that X11R6 Xt/Xaw programs need.
+ac_save_LDFLAGS=&quot;$LDFLAGS&quot;
+LDFLAGS=&quot;$LDFLAGS $X_LDFLAGS&quot;
+# SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
+# check for ICE first), but we must link in the order -lSM -lICE or
+# we get undefined symbols.  So assume we have SM if we have ICE.
+# These have to be linked with before -lX11, unlike the other
+# libraries we check for below, so use a different variable.
+#  <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">--interran at uluru.Stanford.EDU</A>, <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">kb at cs.umb.edu.</A>
+AC_CHECK_LIB(ICE, IceConnectionNumber,
+  [LIBSM=&quot;-lSM -lICE&quot;], , $X_EXTRA_LIBS)
+LDFLAGS=&quot;$ac_save_LDFLAGS&quot;
+
+LIB_X11='-lX11 $(LIBSOCKET)'
+
+AC_MSG_CHECKING(for libXext)
+AC_CACHE_VAL(kde_cv_have_libXext,
+[
+kde_ldflags_safe=&quot;$LDFLAGS&quot;
+kde_libs_safe=&quot;$LIBS&quot;
+
+LDFLAGS=&quot;$LDFLAGS $X_LDFLAGS $USER_LDFLAGS&quot;
+LIBS=&quot;-lXext -lX11 $LIBSOCKET&quot;
+
+AC_TRY_LINK([
+#include &lt;stdio.h&gt;
+#ifdef STDC_HEADERS
+# include &lt;stdlib.h&gt;
+#endif
+],
+[
+printf(&quot;hello Xext\n&quot;);
+],
+kde_cv_have_libXext=yes,
+kde_cv_have_libXext=no
+)
+
+LDFLAGS=$kde_ldflags_safe
+LIBS=$kde_libs_safe
+])
+
+AC_MSG_RESULT($kde_cv_have_libXext)
+
+if test &quot;$kde_cv_have_libXext&quot; = &quot;no&quot;; then
+  AC_MSG_ERROR([We need a working libXext to proceed. Since configure
+can't find it itself, we stop here assuming that make wouldn't find
+them either.])
+fi
+
+LIB_XEXT=&quot;-lXext&quot;
+QTE_NORTTI=&quot;&quot;
+
+elif test &quot;$kde_use_qt_emb&quot; = &quot;yes&quot;; then
+  dnl We're using QT Embedded
+  CPPFLAGS=-DQWS
+  CXXFLAGS=&quot;$CXXFLAGS -fno-rtti&quot;
+  QTE_NORTTI=&quot;-fno-rtti -DQWS&quot;
+  X_PRE_LIBS=&quot;&quot;
+  LIB_X11=&quot;&quot;
+  LIB_XEXT=&quot;&quot;
+  LIB_XRENDER=&quot;&quot;
+  LIBSM=&quot;&quot;
+  X_INCLUDES=&quot;&quot;
+  X_LDFLAGS=&quot;&quot;
+  x_includes=&quot;&quot;
+  x_libraries=&quot;&quot;
+elif test &quot;$kde_use_qt_mac&quot; = &quot;yes&quot;; then
+  dnl We're using QT/Mac (I use QT_MAC so that qglobal.h doesn't *have* to
+  dnl be included to get the information) --Sam
+  CXXFLAGS=&quot;$CXXFLAGS -DQT_MAC -no-cpp-precomp&quot;
+  CFLAGS=&quot;$CFLAGS -DQT_MAC -no-cpp-precomp&quot;
+  X_PRE_LIBS=&quot;&quot;
+  LIB_X11=&quot;&quot;
+  LIB_XEXT=&quot;&quot;
+  LIB_XRENDER=&quot;&quot;
+  LIBSM=&quot;&quot;
+  X_INCLUDES=&quot;&quot;
+  X_LDFLAGS=&quot;&quot;
+  x_includes=&quot;&quot;
+  x_libraries=&quot;&quot;
+fi
+AC_SUBST(X_PRE_LIBS)
+AC_SUBST(LIB_X11)
+AC_SUBST(LIB_XRENDER)
+AC_SUBST(LIBSM)
+AC_SUBST(X_INCLUDES)
+AC_SUBST(X_LDFLAGS)
+AC_SUBST(x_includes)
+AC_SUBST(x_libraries)
+AC_SUBST(QTE_NORTTI)
+AC_SUBST(LIB_XEXT)
+
+])
+
+AC_DEFUN([KDE_PRINT_QT_PROGRAM],
+[
+cat &gt; conftest.$ac_ext &lt;&lt;EOF
+#include &quot;confdefs.h&quot;
+#include &lt;QtGui/QPushButton&gt;
+
+int main() {
+    QPushButton hello(&quot;Hello world!&quot;);
+    hello.resize(100, 30);
+
+    return 0;
+}
+EOF
+
+echo &quot;#if ! ($kde_qt_verstring)&quot; &gt;&gt; conftest.$ac_ext
+echo &quot;#error 1&quot; &gt;&gt; conftest.$ac_ext
+echo &quot;#endif&quot; &gt;&gt; conftest.$ac_ext
+
+])
+
+AC_DEFUN([KDE_USE_QT],
+[
+kde_qtver=4
+kde_qtsubver=1
+kde_qt_minversion=&quot;&gt;= Qt 4.1&quot;
+kde_qt_verstring=&quot;QT_VERSION &gt;= 0x040100&quot;
+
+if test -z &quot;$2&quot;; then
+  if test &quot;$kde_qtver&quot; = &quot;2&quot;; then
+    if test $kde_qtsubver -gt 0; then
+      kde_qt_minversion=&quot;&gt;= Qt 2.2.2&quot;
+    else
+      kde_qt_minversion=&quot;&gt;= Qt 2.0.2&quot;
+    fi
+  fi
+  if test &quot;$kde_qtver&quot; = &quot;3&quot;; then
+    if test $kde_qtsubver -gt 0; then
+	 if test $kde_qtsubver -gt 1; then
+	    if test $kde_qtsubver -gt 2; then
+		kde_qt_minversion=&quot;&gt;= Qt 3.3 and &lt; 4.0&quot;
+	    else
+	        kde_qt_minversion=&quot;&gt;= Qt 3.2 and &lt; 4.0&quot;
+	    fi
+	 else
+            kde_qt_minversion=&quot;&gt;= Qt 3.1 (20021021) and &lt; 4.0&quot;
+         fi
+    else
+      kde_qt_minversion=&quot;&gt;= Qt 3.0 and &lt; 4.0&quot;
+    fi
+  fi
+  if test &quot;$kde_qtver&quot; = &quot;1&quot;; then
+    kde_qt_minversion=&quot;&gt;= 1.42 and &lt; 2.0&quot;
+  fi
+else
+   kde_qt_minversion=&quot;$2&quot;
+fi
+
+if test -z &quot;$3&quot;; then
+   if test $kde_qtver = 3; then
+     if test $kde_qtsubver -gt 0; then
+       kde_qt_verstring=&quot;QT_VERSION &gt;= <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">0x03 at VER</A>@00 &amp;&amp; QT_VERSION &lt; 0x040000&quot;
+       qtsubver=`echo &quot;00$kde_qtsubver&quot; | sed -e 's,.*\(..\)$,\1,'`
+       kde_qt_verstring=`echo $kde_qt_verstring | sed -e &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">s, at VER</A>@,$qtsubver,&quot;`
+     else
+       kde_qt_verstring=&quot;QT_VERSION &gt;= 300 &amp;&amp; QT_VERSION &lt; 0x040000&quot;
+     fi
+   fi
+   if test $kde_qtver = 2; then
+     if test $kde_qtsubver -gt 0; then
+       kde_qt_verstring=&quot;QT_VERSION &gt;= 222&quot;
+     else
+       kde_qt_verstring=&quot;QT_VERSION &gt;= 200&quot;
+     fi
+   fi
+   if test $kde_qtver = 1; then
+    kde_qt_verstring=&quot;QT_VERSION &gt;= 142 &amp;&amp; QT_VERSION &lt; 200&quot;
+   fi
+else
+   kde_qt_verstring=&quot;$3&quot;
+fi
+
+if test $kde_qtver = 4; then
+  kde_qt_dirs=&quot;$QTDIR /usr/lib/qt4 /usr/lib/qt /usr/share/qt4&quot;
+fi
+if test $kde_qtver = 3; then
+  kde_qt_dirs=&quot;$QTDIR /usr/lib/qt3 /usr/lib/qt /usr/share/qt3&quot;
+fi
+if test $kde_qtver = 2; then
+   kde_qt_dirs=&quot;$QTDIR /usr/lib/qt2 /usr/lib/qt&quot;
+fi
+if test $kde_qtver = 1; then
+   kde_qt_dirs=&quot;$QTDIR /usr/lib/qt&quot;
+fi
+])
+
+dnl ------------------------------------------------------------------------
+dnl Try to find the Qt headers and libraries.
+dnl $(QT_LDFLAGS) will be -Lqtliblocation (if needed)
+dnl and $(QT_INCLUDES) will be -Iqthdrlocation (if needed)
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([AC_PATH_QT],
+[
+AC_REQUIRE([K_PATH_X])
+AC_REQUIRE([KDE_USE_QT])
+AC_REQUIRE([KDE_CHECK_LIB64])
+
+dnl ------------------------------------------------------------------------
+dnl If we not get --disable-qt-mt then adjust some vars for the host.
+dnl ------------------------------------------------------------------------
+
+KDE_MT_LDFLAGS=
+KDE_MT_LIBS=
+KDE_CHECK_THREADING
+CPPFLAGS=&quot;$USE_THREADS -DQT_THREAD_SUPPORT $CPPFLAGS&quot;
+KDE_MT_LDFLAGS=&quot;$USE_THREADS&quot;
+KDE_MT_LIBS=&quot;$LIBPTHREAD&quot;
+
+AC_SUBST(KDE_MT_LDFLAGS)
+AC_SUBST(KDE_MT_LIBS)
+
+kde_qt_was_given=yes
+
+dnl ------------------------------------------------------------
+dnl If we got --enable-embedded then adjust the Qt library name.
+dnl ------------------------------------------------------------
+if test &quot;x$kde_use_qt_emb&quot; = &quot;xyes&quot;; then
+  qtlib=&quot;qte&quot;
+else
+  qtlib=&quot;qt&quot;
+fi
+
+kde_int_qt=&quot;-l$qtlib&quot;
+
+if test -z &quot;$LIBQPE&quot;; then
+dnl ------------------------------------------------------------
+dnl If we got --enable-palmtop then add -lqpe to the link line
+dnl ------------------------------------------------------------
+  if test &quot;x$kde_use_qt_emb&quot; = &quot;xyes&quot;; then
+    if test &quot;x$kde_use_qt_emb_palm&quot; = &quot;xyes&quot;; then
+      LIB_QPE=&quot;-lqpe&quot;
+    else
+      LIB_QPE=&quot;&quot;
+    fi
+  else
+    LIB_QPE=&quot;&quot;
+  fi
+fi
+
+LIBQT=&quot;-lQtGui_debug&quot;
+kde_int_qt=&quot;-lQtGui_debug&quot;
+
+AC_REQUIRE([AC_FIND_PNG])
+AC_REQUIRE([AC_FIND_JPEG])
+LIBQT=&quot;$LIBQT $LIBPNG $LIBJPEG&quot;
+
+AC_REQUIRE([KDE_CHECK_LIBDL])
+LIBQT=&quot;$LIBQT $LIBDL&quot;
+
+AC_MSG_CHECKING([for Qt])
+
+if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$kde_use_qt_mac&quot; != &quot;xyes&quot;; then
+LIBQT=&quot;$LIBQT $X_PRE_LIBS -lXext -lX11 $LIBSM $LIBSOCKET&quot;
+fi
+ac_qt_includes=NO ac_qt_libraries=NO ac_qt_bindir=NO
+qt_libraries=&quot;&quot;
+qt_includes=&quot;&quot;
+AC_ARG_WITH(qt-dir,
+    AC_HELP_STRING([--with-qt-dir=DIR],[where the root of Qt is installed ]),
+    [  ac_qt_includes=&quot;$withval&quot;/include
+       ac_qt_libraries=&quot;$withval&quot;/lib${kdelibsuff}
+       ac_qt_bindir=&quot;$withval&quot;/bin
+    ])
+
+AC_ARG_WITH(qt-includes,
+    AC_HELP_STRING([--with-qt-includes=DIR],[where the Qt includes are. ]),
+    [
+       ac_qt_includes=&quot;$withval&quot;
+    ])
+
+kde_qt_libs_given=no
+
+AC_ARG_WITH(qt-libraries,
+    AC_HELP_STRING([--with-qt-libraries=DIR],[where the Qt library is installed.]),
+    [  ac_qt_libraries=&quot;$withval&quot;
+       kde_qt_libs_given=yes
+    ])
+
+AC_CACHE_VAL(ac_cv_have_qt,
+[#try to guess Qt locations
+
+qt_incdirs=&quot;&quot;
+for dir in $kde_qt_dirs; do
+   qt_incdirs=&quot;$qt_incdirs $dir/include $dir&quot;
+done
+qt_incdirs=&quot;$QTINC $qt_incdirs /usr/local/qt/include /usr/include/qt /usr/include /usr/X11R6/include/X11/qt /usr/X11R6/include/qt /usr/X11R6/include/qt2 /usr/include/qt3 $x_includes&quot;
+if test ! &quot;$ac_qt_includes&quot; = &quot;NO&quot;; then
+   qt_incdirs=&quot;$ac_qt_includes $qt_incdirs&quot;
+fi
+
+kde_qt_header=QtGui/QPushButton
+
+AC_FIND_FILE($kde_qt_header, $qt_incdirs, qt_incdir)
+ac_qt_includes=&quot;$qt_incdir&quot;
+
+qt_libdirs=&quot;&quot;
+for dir in $kde_qt_dirs; do
+   qt_libdirs=&quot;$qt_libdirs $dir/lib${kdelibsuff} $dir&quot;
+done
+qt_libdirs=&quot;$QTLIB $qt_libdirs /usr/X11R6/lib /usr/lib /usr/local/qt/lib $x_libraries&quot;
+if test ! &quot;$ac_qt_libraries&quot; = &quot;NO&quot;; then
+  qt_libdir=$ac_qt_libraries
+else
+  qt_libdirs=&quot;$ac_qt_libraries $qt_libdirs&quot;
+  # if the Qt was given, the chance is too big that libqt.* doesn't exist
+  qt_libdir=
+  for dir in $qt_libdirs; do
+    try=&quot;ls -1 $dir/libQtCore_debug.la&quot;
+    if test -n &quot;`$try 2&gt; /dev/null`&quot;; then qt_libdir=$dir; break; else echo &quot;tried $dir&quot; &gt;&amp;AC_FD_CC ; fi
+  done
+fi
+for a in $qt_libdir/lib`echo ${kde_int_qt} | sed 's,^-l,,'`_incremental.*; do
+  if test -e &quot;$a&quot;; then
+    LIBQT=&quot;$LIBQT ${kde_int_qt}_incremental&quot;
+    break
+  fi
+done
+
+ac_qt_libraries=&quot;$qt_libdir&quot;
+
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+
+ac_cxxflags_safe=&quot;$CXXFLAGS&quot;
+ac_ldflags_safe=&quot;$LDFLAGS&quot;
+ac_libs_safe=&quot;$LIBS&quot;
+
+CXXFLAGS=&quot;$CXXFLAGS -I$qt_incdir $all_includes&quot;
+if test -n &quot;$qt_libdir&quot;; then
+  LDFLAGS=&quot;$LDFLAGS -L$qt_libdir&quot;
+fi
+LDFLAGS=&quot;$LDFLAGS $all_libraries $USER_LDFLAGS $KDE_MT_LDFLAGS&quot;
+LIBS=&quot;$LIBS $LIBQT $KDE_MT_LIBS&quot;
+
+KDE_PRINT_QT_PROGRAM
+
+ac_link='$LIBTOOL_SHELL --silent --mode=link ${CXX-g++} -o conftest $CXXFLAGS $all_includes $CPPFLAGS $LDFLAGS $all_libraries conftest.$ac_ext $LIBS -lQtGui_debug -lQtCore_debug $KDE_TEST_RPATH 1&gt;&amp;5'
+
+if AC_TRY_EVAL(ac_link) &amp;&amp; test -s conftest; then
+  rm -f conftest*
+else
+  echo &quot;configure: failed program was:&quot; &gt;&amp;AC_FD_CC
+  cat conftest.$ac_ext &gt;&amp;AC_FD_CC
+  ac_qt_libraries=&quot;NO&quot;
+fi
+rm -f conftest*
+CXXFLAGS=&quot;$ac_cxxflags_safe&quot;
+LDFLAGS=&quot;$ac_ldflags_safe&quot;
+LIBS=&quot;$ac_libs_safe&quot;
+
+AC_LANG_RESTORE
+if test &quot;$ac_qt_includes&quot; = NO || test &quot;$ac_qt_libraries&quot; = NO; then
+  ac_cv_have_qt=&quot;have_qt=no&quot;
+  ac_qt_notfound=&quot;&quot;
+  missing_qt_mt=&quot;&quot;
+  if test &quot;$ac_qt_includes&quot; = NO; then
+    if test &quot;$ac_qt_libraries&quot; = NO; then
+      ac_qt_notfound=&quot;(headers and libraries)&quot;;
+    else
+      ac_qt_notfound=&quot;(headers)&quot;;
+    fi
+  else
+    ac_qt_notfound=&quot;(library $qtlib)&quot;;
+  fi
+
+  AC_MSG_ERROR([Qt ($kde_qt_minversion) $ac_qt_notfound not found. Please check your installation (and make sure you compiled Qt with -debug - doing symlinks to a -release build of Qt4 will introduce breakage, do not do that -)!
+For more details about this problem, look at the end of config.log.$missing_qt_mt])
+else
+  have_qt=&quot;yes&quot;
+fi
+])
+
+eval &quot;$ac_cv_have_qt&quot;
+
+if test &quot;$have_qt&quot; != yes; then
+  AC_MSG_RESULT([$have_qt]);
+else
+  ac_cv_have_qt=&quot;have_qt=yes \
+    ac_qt_includes=$ac_qt_includes ac_qt_libraries=$ac_qt_libraries&quot;
+  AC_MSG_RESULT([libraries $ac_qt_libraries, headers $ac_qt_includes])
+
+  qt_libraries=&quot;$ac_qt_libraries&quot;
+  qt_includes=&quot;$ac_qt_includes&quot;
+fi
+
+AC_SUBST(qt_libraries)
+AC_SUBST(qt_includes)
+
+if test &quot;$qt_includes&quot; = &quot;$x_includes&quot; || test -z &quot;$qt_includes&quot;; then
+ QT_INCLUDES=&quot;-I$qt_includes/Qt -I$qt_includes/QtCore -I$qt_includes/QtGui -I$qt_includes/QtXml -I$qt_includes/Qt3Support&quot;
+else
+ QT_INCLUDES=&quot;-I$qt_includes -I$qt_includes/Qt -I$qt_includes/QtCore -I$qt_includes/QtGui -I$qt_includes/QtXml -I$qt_includes/Qt3Support&quot;
+ all_includes=&quot;$QT_INCLUDES $all_includes&quot;
+fi
+
+if test &quot;$qt_libraries&quot; = &quot;$x_libraries&quot; || test -z &quot;$qt_libraries&quot;; then
+ QT_LDFLAGS=&quot;&quot;
+else
+ QT_LDFLAGS=&quot;-L$qt_libraries&quot;
+ all_libraries=&quot;$QT_LDFLAGS $all_libraries&quot;
+fi
+test -z &quot;$KDE_MT_LDFLAGS&quot; || all_libraries=&quot;$all_libraries $KDE_MT_LDFLAGS&quot;
+
+AC_SUBST(QT_INCLUDES)
+AC_SUBST(QT_LDFLAGS)
+AC_PATH_QT_MOC_UIC
+
+KDE_CHECK_QT_JPEG
+
+if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$kde_use_qt_mac&quot; != &quot;xyes&quot;; then
+LIB_QT=&quot;$kde_int_qt $LIBJPEG_QT &quot;'$(LIBZ) $(LIBPNG) -lXext $(LIB_X11) $(LIBSM)'
+else
+LIB_QT=&quot;$kde_int_qt $LIBJPEG_QT &quot;'$(LIBZ) $(LIBPNG)'
+fi
+test -z &quot;$KDE_MT_LIBS&quot; || LIB_QT=&quot;$LIB_QT $KDE_MT_LIBS&quot;
+for a in $qt_libdir/lib`echo ${kde_int_qt} | sed 's,^-l,,'`_incremental.*; do
+  if test -e &quot;$a&quot;; then
+     LIB_QT=&quot;$LIB_QT ${kde_int_qt}_incremental&quot;
+     break
+  fi
+done
+
+AC_SUBST(LIB_QT)
+AC_SUBST(LIB_QPE)
+
+AC_SUBST(kde_qtver)
+])
+
+AC_DEFUN([KDE_CHECK_UIC_PLUGINS],
+[
+AC_REQUIRE([AC_PATH_QT_MOC_UIC])
+
+if test x$ac_uic_supports_libpath = xyes; then
+
+AC_MSG_CHECKING([if UIC has KDE plugins available])
+AC_CACHE_VAL(kde_cv_uic_plugins,
+[
+cat &gt; actest.ui &lt;&lt; EOF
+&lt;!DOCTYPE UI&gt;&lt;UI version=&quot;3.0&quot; stdsetdef=&quot;1&quot;&gt;
+&lt;class&gt;NewConnectionDialog&lt;/class&gt;
+&lt;widget class=&quot;QDialog&quot;&gt;
+   &lt;widget class=&quot;KLineEdit&quot;&gt;
+        &lt;property name=&quot;name&quot;&gt;
+           &lt;cstring&gt;testInput&lt;/cstring&gt;
+        &lt;/property&gt;
+   &lt;/widget&gt;
+&lt;/widget&gt;
+&lt;/UI&gt;
+EOF
+
+
+
+kde_cv_uic_plugins=no
+kde_line=&quot;$UIC_PATH -L $kde_widgetdir&quot;
+if test x$ac_uic_supports_nounload = xyes; then
+   kde_line=&quot;$kde_line -nounload&quot;
+fi
+kde_line=&quot;$kde_line -impl actest.h actest.ui &gt; actest.cpp&quot;
+if AC_TRY_EVAL(kde_line); then
+	# if you're trying to debug this check and think it's incorrect,
+	# better check your installation. The check _is_ correct - your
+	# installation is not.
+	if test -f actest.cpp &amp;&amp; grep klineedit actest.cpp &gt; /dev/null; then
+		kde_cv_uic_plugins=yes
+	fi
+fi
+rm -f actest.ui actest.cpp
+])
+
+AC_MSG_RESULT([$kde_cv_uic_plugins])
+if test &quot;$kde_cv_uic_plugins&quot; != yes; then
+	AC_MSG_ERROR([
+you need to install kdelibs first.
+
+If you did install kdelibs, then the Qt version that is picked up by
+this configure is not the same version you used to compile kdelibs.
+The Qt Plugin installed by kdelibs is *ONLY* loadable if it is the
+_same Qt version_, compiled with the _same compiler_ and the same Qt
+configuration settings.
+])
+fi
+fi
+])
+
+AC_DEFUN([KDE_CHECK_FINAL],
+[
+  AC_ARG_ENABLE(final,
+	AC_HELP_STRING([--enable-final],
+		       [build size optimized apps (experimental - needs lots of memory)]),
+	kde_use_final=$enableval, kde_use_final=no)
+
+  if test &quot;x$kde_use_final&quot; = &quot;xyes&quot;; then
+      KDE_USE_FINAL_TRUE=&quot;&quot;
+      KDE_USE_FINAL_FALSE=&quot;#&quot;
+   else
+      KDE_USE_FINAL_TRUE=&quot;#&quot;
+      KDE_USE_FINAL_FALSE=&quot;&quot;
+  fi
+  AC_SUBST(KDE_USE_FINAL_TRUE)
+  AC_SUBST(KDE_USE_FINAL_FALSE)
+])
+
+AC_DEFUN([KDE_CHECK_CLOSURE],
+[
+  AC_ARG_ENABLE(closure,
+		AC_HELP_STRING([--enable-closure],[delay template instantiation]),
+  	kde_use_closure=$enableval, kde_use_closure=no)
+
+  KDE_NO_UNDEFINED=&quot;&quot;
+  if test &quot;x$kde_use_closure&quot; = &quot;xyes&quot;; then
+       KDE_USE_CLOSURE_TRUE=&quot;&quot;
+       KDE_USE_CLOSURE_FALSE=&quot;#&quot;
+#       CXXFLAGS=&quot;$CXXFLAGS $REPO&quot;
+  else
+       KDE_USE_CLOSURE_TRUE=&quot;#&quot;
+       KDE_USE_CLOSURE_FALSE=&quot;&quot;
+       KDE_NO_UNDEFINED=&quot;&quot;
+       case $host in
+         *-*-linux-gnu)
+           KDE_CHECK_COMPILER_FLAG([Wl,--no-undefined],
+                [KDE_CHECK_COMPILER_FLAG([Wl,--allow-shlib-undefined],
+		[KDE_NO_UNDEFINED=&quot;-Wl,--no-undefined -Wl,--allow-shlib-undefined&quot;],
+		[KDE_NO_UNDEFINED=&quot;&quot;])],
+	    [KDE_NO_UNDEFINED=&quot;&quot;])
+           ;;
+       esac
+  fi
+  AC_SUBST(KDE_USE_CLOSURE_TRUE)
+  AC_SUBST(KDE_USE_CLOSURE_FALSE)
+  AC_SUBST(KDE_NO_UNDEFINED)
+])
+
+dnl Check if the linker supports --enable-new-dtags and --as-needed
+AC_DEFUN([KDE_CHECK_NEW_LDFLAGS],
+[
+  AC_ARG_ENABLE(new_ldflags,
+		AC_HELP_STRING([--enable-new-ldflags],
+		[enable the new linker flags]),
+	kde_use_new_ldflags=$enableval,
+	kde_use_new_ldflags=no)
+
+  LDFLAGS_AS_NEEDED=&quot;&quot;
+  LDFLAGS_NEW_DTAGS=&quot;&quot;
+  if test &quot;x$kde_use_new_ldflags&quot; = &quot;xyes&quot;; then
+       LDFLAGS_NEW_DTAGS=&quot;&quot;
+       KDE_CHECK_COMPILER_FLAG([Wl,--enable-new-dtags],
+		[LDFLAGS_NEW_DTAGS=&quot;-Wl,--enable-new-dtags&quot;],)
+
+       KDE_CHECK_COMPILER_FLAG([Wl,--as-needed],
+		[LDFLAGS_AS_NEEDED=&quot;-Wl,--as-needed&quot;],)
+  fi
+  AC_SUBST(LDFLAGS_AS_NEEDED)
+  AC_SUBST(LDFLAGS_NEW_DTAGS)
+])
+
+AC_DEFUN([KDE_CHECK_NMCHECK],
+[
+  AC_ARG_ENABLE(nmcheck,AC_HELP_STRING([--enable-nmcheck],[enable automatic namespace cleanness check]),
+	kde_use_nmcheck=$enableval, kde_use_nmcheck=no)
+
+  if test &quot;$kde_use_nmcheck&quot; = &quot;yes&quot;; then
+      KDE_USE_NMCHECK_TRUE=&quot;&quot;
+      KDE_USE_NMCHECK_FALSE=&quot;#&quot;
+   else
+      KDE_USE_NMCHECK_TRUE=&quot;#&quot;
+      KDE_USE_NMCHECK_FALSE=&quot;&quot;
+  fi
+  AC_SUBST(KDE_USE_NMCHECK_TRUE)
+  AC_SUBST(KDE_USE_NMCHECK_FALSE)
+])
+
+AC_DEFUN([KDE_EXPAND_MAKEVAR], [
+savex=$exec_prefix
+test &quot;x$exec_prefix&quot; = xNONE &amp;&amp; exec_prefix=$prefix
+tmp=$$2
+while $1=`eval echo &quot;$tmp&quot;`; test &quot;x$$1&quot; != &quot;x$tmp&quot;; do tmp=$$1; done
+exec_prefix=$savex
+])
+
+dnl ------------------------------------------------------------------------
+dnl Now, the same with KDE
+dnl $(KDE_LDFLAGS) will be the kdeliblocation (if needed)
+dnl and $(kde_includes) will be the kdehdrlocation (if needed)
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([AC_BASE_PATH_KDE],
+[
+AC_REQUIRE([KDE_CHECK_STL])
+AC_REQUIRE([AC_PATH_QT])dnl
+AC_REQUIRE([KDE_CHECK_LIB64])
+
+AC_CHECK_RPATH
+AC_MSG_CHECKING([for KDE])
+
+if test &quot;${prefix}&quot; != NONE; then
+  kde_includes=${includedir}
+  KDE_EXPAND_MAKEVAR(ac_kde_includes, includedir)
+
+  kde_libraries=${libdir}
+  KDE_EXPAND_MAKEVAR(ac_kde_libraries, libdir)
+
+else
+  ac_kde_includes=
+  ac_kde_libraries=
+  kde_libraries=&quot;&quot;
+  kde_includes=&quot;&quot;
+fi
+
+AC_CACHE_VAL(ac_cv_have_kde,
+[#try to guess kde locations
+
+kde_check_header=&quot;ksharedptr.h&quot;
+kde_check_lib=&quot;libkio$shrext&quot;
+
+if test -z &quot;$1&quot;; then
+
+kde_incdirs=&quot;$kde_libs_prefix/include /usr/lib/kde/include /usr/local/kde/include /usr/local/include /usr/kde/include /usr/include/kde /usr/include /opt/kde4/include /opt/kde/include $x_includes $qt_includes&quot;
+test -n &quot;$KDEDIR&quot; &amp;&amp; kde_incdirs=&quot;$KDEDIR/include $KDEDIR/include/kde $KDEDIR $kde_incdirs&quot;
+kde_incdirs=&quot;$ac_kde_includes $kde_incdirs&quot;
+AC_FIND_FILE($kde_check_header, $kde_incdirs, kde_incdir)
+ac_kde_includes=&quot;$kde_incdir&quot;
+
+if test -n &quot;$ac_kde_includes&quot; &amp;&amp; test ! -r &quot;$ac_kde_includes/$kde_check_header&quot;; then
+  AC_MSG_ERROR([
+in the prefix, you've chosen, are no KDE headers installed. This will fail.
+So, check this please and use another prefix!])
+fi
+
+if grep -q DONTPORT $ac_kde_includes/kdeversion.h; then
+  AC_MSG_ERROR([Don't port against this version of kdelibs! Use /branches/work/kdelibs4_snapshot instead!!])
+fi
+
+kde_libdirs=&quot;$kde_libs_prefix/lib${kdelibsuff} /usr/lib/kde/lib${kdelibsuff} /usr/local/kde/lib${kdelibsuff} /usr/kde/lib${kdelibsuff} /usr/lib${kdelibsuff}/kde /usr/lib${kdelibsuff}/kde4 /usr/lib${kdelibsuff} /usr/X11R6/lib${kdelibsuff} /usr/local/lib${kdelibsuff} /opt/kde4/lib${kdelibsuff} /opt/kde/lib${kdelibsuff} /usr/X11R6/kde/lib${kdelibsuff}&quot;
+test -n &quot;$KDEDIR&quot; &amp;&amp; kde_libdirs=&quot;$KDEDIR/lib${kdelibsuff} $KDEDIR $kde_libdirs&quot;
+kde_libdirs=&quot;$ac_kde_libraries $libdir $kde_libdirs&quot;
+AC_FIND_FILE($kde_check_lib, $kde_libdirs, kde_libdir)
+ac_kde_libraries=&quot;$kde_libdir&quot;
+
+kde_widgetdir=NO
+dnl this might be somewhere else
+AC_FIND_FILE(&quot;kde4/plugins/designer/kdewidgets.la&quot;, $kde_libdirs, kde_widgetdir)
+
+if test -n &quot;$ac_kde_libraries&quot; &amp;&amp; test ! -r &quot;$ac_kde_libraries/$kde_check_lib&quot;; then
+AC_MSG_ERROR([
+in the prefix, you've chosen, are no KDE libraries installed. This will fail.
+So, check this please and use another prefix!])
+fi
+
+if test -n &quot;$kde_widgetdir&quot; &amp;&amp; test ! -r &quot;$kde_widgetdir/kde4/plugins/designer/kdewidgets.la&quot;; then
+AC_MSG_ERROR([
+I can't find the designer plugins. These are required and should have been installed
+by kdelibs])
+fi
+
+if test -n &quot;$kde_widgetdir&quot;; then
+    kde_widgetdir=&quot;$kde_widgetdir/kde4/plugins/designer&quot;
+fi
+
+
+if test &quot;$ac_kde_includes&quot; = NO || test &quot;$ac_kde_libraries&quot; = NO || test &quot;$kde_widgetdir&quot; = NO; then
+  ac_cv_have_kde=&quot;have_kde=no&quot;
+else
+  ac_cv_have_kde=&quot;have_kde=yes \
+    ac_kde_includes=$ac_kde_includes ac_kde_libraries=$ac_kde_libraries&quot;
+fi
+
+else dnl test -z $1, e.g. from kdelibs
+
+  ac_cv_have_kde=&quot;have_kde=no&quot;
+
+fi
+])dnl
+
+eval &quot;$ac_cv_have_kde&quot;
+
+if test &quot;$have_kde&quot; != &quot;yes&quot;; then
+ if test &quot;${prefix}&quot; = NONE; then
+  ac_kde_prefix=&quot;$ac_default_prefix&quot;
+ else
+  ac_kde_prefix=&quot;$prefix&quot;
+ fi
+ if test &quot;$exec_prefix&quot; = NONE; then
+  ac_kde_exec_prefix=&quot;$ac_kde_prefix&quot;
+  AC_MSG_RESULT([will be installed in $ac_kde_prefix])
+ else
+  ac_kde_exec_prefix=&quot;$exec_prefix&quot;
+  AC_MSG_RESULT([will be installed in $ac_kde_prefix and $ac_kde_exec_prefix])
+ fi
+
+ kde_libraries=&quot;${libdir}&quot;
+ kde_includes=&quot;${includedir}&quot;
+
+else
+  ac_cv_have_kde=&quot;have_kde=yes \
+    ac_kde_includes=$ac_kde_includes ac_kde_libraries=$ac_kde_libraries&quot;
+  AC_MSG_RESULT([libraries $ac_kde_libraries, headers $ac_kde_includes])
+
+  kde_libraries=&quot;$ac_kde_libraries&quot;
+  kde_includes=&quot;$ac_kde_includes&quot;
+fi
+AC_SUBST(kde_libraries)
+AC_SUBST(kde_includes)
+
+if test &quot;$kde_includes&quot; = &quot;$x_includes&quot; || test &quot;$kde_includes&quot; = &quot;$qt_includes&quot;  || test &quot;$kde_includes&quot; = &quot;/usr/include&quot;; then
+ KDE_INCLUDES=&quot;&quot;
+else
+ KDE_INCLUDES=&quot;-I$kde_includes&quot;
+ all_includes=&quot;$KDE_INCLUDES $all_includes&quot;
+fi
+
+KDE_DEFAULT_CXXFLAGS=&quot;-DQT_CLEAN_NAMESPACE -DQT_NO_CAST_TO_ASCII -DQT_NO_STL -DQT_NO_COMPAT -DQT_NO_TRANSLATION -DQT3_SUPPORT&quot;
+
+KDE_LDFLAGS=&quot;-L$kde_libraries&quot;
+if test ! &quot;$kde_libraries&quot; = &quot;$x_libraries&quot; &amp;&amp; test ! &quot;$kde_libraries&quot; = &quot;$qt_libraries&quot; ; then
+ all_libraries=&quot;$KDE_LDFLAGS $all_libraries&quot;
+fi
+
+AC_SUBST(KDE_LDFLAGS)
+AC_SUBST(KDE_INCLUDES)
+
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+
+all_libraries=&quot;$all_libraries $USER_LDFLAGS&quot;
+all_includes=&quot;$all_includes $USER_INCLUDES&quot;
+AC_SUBST(all_includes)
+AC_SUBST(all_libraries)
+
+if test -z &quot;$1&quot;; then
+KDE_CHECK_UIC_PLUGINS
+fi
+
+ac_kde_libraries=&quot;$kde_libdir&quot;
+
+AC_SUBST(AUTODIRS)
+
+
+])
+
+AC_DEFUN([KDE_CHECK_EXTRA_LIBS],
+[
+AC_MSG_CHECKING(for extra includes)
+AC_ARG_WITH(extra-includes,AC_HELP_STRING([--with-extra-includes=DIR],[adds non standard include paths]),
+  kde_use_extra_includes=&quot;$withval&quot;,
+  kde_use_extra_includes=NONE
+)
+kde_extra_includes=
+if test -n &quot;$kde_use_extra_includes&quot; &amp;&amp; \
+   test &quot;$kde_use_extra_includes&quot; != &quot;NONE&quot;; then
+
+   ac_save_ifs=$IFS
+   IFS=':'
+   for dir in $kde_use_extra_includes; do
+     kde_extra_includes=&quot;$kde_extra_includes $dir&quot;
+     USER_INCLUDES=&quot;$USER_INCLUDES -I$dir&quot;
+   done
+   IFS=$ac_save_ifs
+   kde_use_extra_includes=&quot;added&quot;
+else
+   kde_use_extra_includes=&quot;no&quot;
+fi
+AC_SUBST(USER_INCLUDES)
+
+AC_MSG_RESULT($kde_use_extra_includes)
+
+kde_extra_libs=
+AC_MSG_CHECKING(for extra libs)
+AC_ARG_WITH(extra-libs,AC_HELP_STRING([--with-extra-libs=DIR],[adds non standard library paths]),
+  kde_use_extra_libs=$withval,
+  kde_use_extra_libs=NONE
+)
+if test -n &quot;$kde_use_extra_libs&quot; &amp;&amp; \
+   test &quot;$kde_use_extra_libs&quot; != &quot;NONE&quot;; then
+
+   ac_save_ifs=$IFS
+   IFS=':'
+   for dir in $kde_use_extra_libs; do
+     kde_extra_libs=&quot;$kde_extra_libs $dir&quot;
+     KDE_EXTRA_RPATH=&quot;$KDE_EXTRA_RPATH -R $dir&quot;
+     USER_LDFLAGS=&quot;$USER_LDFLAGS -L$dir&quot;
+   done
+   IFS=$ac_save_ifs
+   kde_use_extra_libs=&quot;added&quot;
+else
+   kde_use_extra_libs=&quot;no&quot;
+fi
+
+AC_SUBST(USER_LDFLAGS)
+
+AC_MSG_RESULT($kde_use_extra_libs)
+
+])
+
+AC_DEFUN([KDE_CREATE_LIBS_ALIASES],
+[
+   AC_REQUIRE([KDE_MISC_TESTS])
+   AC_REQUIRE([KDE_CHECK_LIBDL])
+   AC_REQUIRE([K_PATH_X])
+
+   case $host in
+               *cygwin*) lib_kded=&quot;-lkdeinit_kded&quot; ;;
+               *) lib_kded=&quot;&quot; ;;
+       esac
+   AC_SUBST(LIB_KDED, $lib_kded)
+   AC_SUBST(LIB_KDECORE, &quot;-lkdecore&quot;)
+   AC_SUBST(LIB_KDEUI, &quot;-lkdeui&quot;)
+   AC_SUBST(LIB_KIO, &quot;-lkio&quot;)
+   AC_SUBST(LIB_KJS, &quot;-lkjs&quot;)
+   AC_SUBST(LIB_SMB, &quot;-lsmb&quot;)
+   AC_SUBST(LIB_KAB, &quot;-lkab&quot;)
+   AC_SUBST(LIB_KABC, &quot;-lkabc&quot;)
+   AC_SUBST(LIB_KHTML, &quot;-lkhtml&quot;)
+   AC_SUBST(LIB_KSPELL, &quot;-lkspell&quot;)
+   AC_SUBST(LIB_KSPELL2, &quot;-lkspell2&quot;)
+   AC_SUBST(LIB_KPARTS, &quot;-lkparts&quot;)
+   AC_SUBST(LIB_KDEPRINT, &quot;-lkdeprint&quot;)
+   AC_SUBST(LIB_KUTILS, &quot;-lkutils&quot;)
+   AC_SUBST(LIB_KDEPIM, &quot;-lkdepim&quot;)
+   AC_SUBST(LIB_KIMPROXY, &quot;-lkimproxy&quot;)
+   AC_SUBST(LIB_KNEWSTUFF, &quot;-lknewstuff&quot;)
+   AC_SUBST(LIB_KDNSSD, &quot;-lkdnssd&quot;)
+   AC_SUBST(LIB_KDE3SUPPORT, &quot;-lkde3support&quot;)
+# these are for backward compatibility
+   AC_SUBST(LIB_KSYCOCA, &quot;-lkio&quot;)
+   AC_SUBST(LIB_KFILE, &quot;-lkio&quot;)
+#these are for Qt4 libs separation
+   AC_SUBST(LIB_QTCORE, &quot;-lQtCore_debug&quot;)
+   AC_SUBST(LIB_QTXML, &quot;-lQtXml_debug&quot;)
+   AC_SUBST(LIB_QTGUI, &quot;-lQtGui_debug&quot;)
+   AC_SUBST(LIB_QTNETWORK, &quot;-lQtNetwork_debug&quot;)
+   AC_SUBST(LIB_QTOPENGL, &quot;-lQtOpenGL_debug&quot;)
+   AC_SUBST(LIB_QTSQL, &quot;-lQtSql_debug&quot;)
+   AC_SUBST(LIB_QTTESTLIB, &quot;-lQtTest_debug&quot;)
+   AC_SUBST(LIB_QT3SUPPORT, &quot;-lQt3Support_debug&quot;)
+   AC_SUBST(LIB_QTDESIGNER, &quot;-lQtDesigner_debug&quot;)
+])
+
+AC_DEFUN([AC_PATH_KDE],
+[
+  AC_BASE_PATH_KDE
+  AC_ARG_ENABLE(path-check,AC_HELP_STRING([--disable-path-check],[don't try to find out, where to install]),
+  [
+  if test &quot;$enableval&quot; = &quot;no&quot;;
+    then ac_use_path_checking=&quot;default&quot;
+    else ac_use_path_checking=&quot;&quot;
+  fi
+  ],
+  [
+    ac_use_path_checking=&quot;default&quot;
+  ]
+  )
+
+  AC_CREATE_KFSSTND($ac_use_path_checking)
+
+  AC_SUBST_KFSSTND
+  KDE_CREATE_LIBS_ALIASES
+])
+
+dnl KDE_CHECK_FUNC_EXT(&lt;func&gt;, [headers], [sample-use], [C prototype], [autoheader define], [call if found])
+AC_DEFUN([KDE_CHECK_FUNC_EXT],
+[
+AC_MSG_CHECKING(for $1)
+AC_CACHE_VAL(kde_cv_func_$1,
+[
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+kde_safe_LIBS=&quot;$LIBS&quot;
+LIBS=&quot;$LIBS $X_EXTRA_LIBS&quot;
+if test &quot;$GXX&quot; = &quot;yes&quot;; then
+CXXFLAGS=&quot;$CXXFLAGS -pedantic-errors&quot;
+fi
+AC_TRY_COMPILE([
+$2
+],
+[
+$3
+],
+kde_cv_func_$1=yes,
+kde_cv_func_$1=no)
+CXXFLAGS=&quot;$save_CXXFLAGS&quot;
+LIBS=&quot;$kde_safe_LIBS&quot;
+AC_LANG_RESTORE
+])
+
+AC_MSG_RESULT($kde_cv_func_$1)
+
+AC_MSG_CHECKING([if $1 needs custom prototype])
+AC_CACHE_VAL(kde_cv_proto_$1,
+[
+if test &quot;x$kde_cv_func_$1&quot; = xyes; then
+  kde_cv_proto_$1=no
+else
+  case &quot;$1&quot; in
+	setenv|unsetenv|usleep|random|srandom|seteuid|mkstemps|mkstemp|revoke|vsnprintf|strlcpy|strlcat)
+		kde_cv_proto_$1=&quot;yes - in libkdefakes&quot;
+		;;
+	*)
+		kde_cv_proto_$1=unknown
+		;;
+  esac
+fi
+
+if test &quot;x$kde_cv_proto_$1&quot; = xunknown; then
+
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+  kde_safe_libs=$LIBS
+  LIBS=&quot;$LIBS $X_EXTRA_LIBS&quot;
+  AC_TRY_LINK([
+$2
+
+extern &quot;C&quot; $4;
+],
+[
+$3
+],
+[ kde_cv_func_$1=yes
+  kde_cv_proto_$1=yes ],
+  [kde_cv_proto_$1=&quot;$1 unavailable&quot;]
+)
+LIBS=$kde_safe_libs
+AC_LANG_RESTORE
+fi
+])
+AC_MSG_RESULT($kde_cv_proto_$1)
+
+if test &quot;x$kde_cv_func_$1&quot; = xyes; then
+  AC_DEFINE(HAVE_$5, 1, [Define if you have $1])
+  $6
+fi
+if test &quot;x$kde_cv_proto_$1&quot; = xno; then
+  AC_DEFINE(HAVE_$5_PROTO, 1,
+  [Define if you have the $1 prototype])
+fi
+
+AH_VERBATIM([_HAVE_$5_PROTO],
+[
+#if !defined(HAVE_$5_PROTO)
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+$4;
+#ifdef __cplusplus
+}
+#endif
+#endif
+])
+])
+
+AC_DEFUN([AC_CHECK_SETENV],
+[
+	KDE_CHECK_FUNC_EXT(setenv, [
+#include &lt;stdlib.h&gt;
+],
+		[setenv(&quot;VAR&quot;, &quot;VALUE&quot;, 1);],
+	        [int setenv (const char *, const char *, int)],
+		[SETENV])
+])
+
+AC_DEFUN([AC_CHECK_UNSETENV],
+[
+	KDE_CHECK_FUNC_EXT(unsetenv, [
+#include &lt;stdlib.h&gt;
+],
+		[unsetenv(&quot;VAR&quot;);],
+	        [void unsetenv (const char *)],
+		[UNSETENV])
+])
+
+AC_DEFUN([AC_CHECK_GETDOMAINNAME],
+[
+	KDE_CHECK_FUNC_EXT(getdomainname, [
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+#include &lt;netdb.h&gt;
+],
+		[
+char buffer[200];
+getdomainname(buffer, 200);
+],
+	        [#include &lt;sys/types.h&gt;
+		int getdomainname (char *, size_t)],
+		[GETDOMAINNAME])
+])
+
+AC_DEFUN([AC_CHECK_GETHOSTNAME],
+[
+	KDE_CHECK_FUNC_EXT(gethostname, [
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+],
+		[
+char buffer[200];
+gethostname(buffer, 200);
+],
+	        [int gethostname (char *, unsigned int)],
+		[GETHOSTNAME])
+])
+
+AC_DEFUN([AC_CHECK_USLEEP],
+[
+	KDE_CHECK_FUNC_EXT(usleep, [
+#include &lt;unistd.h&gt;
+],
+		[
+usleep(200);
+],
+	        [int usleep (unsigned int)],
+		[USLEEP])
+])
+
+
+AC_DEFUN([AC_CHECK_RANDOM],
+[
+	KDE_CHECK_FUNC_EXT(random, [
+#include &lt;stdlib.h&gt;
+],
+		[
+random();
+],
+	        [long int random(void)],
+		[RANDOM])
+
+	KDE_CHECK_FUNC_EXT(srandom, [
+#include &lt;stdlib.h&gt;
+],
+		[
+srandom(27);
+],
+	        [void srandom(unsigned int)],
+		[SRANDOM])
+
+])
+
+AC_DEFUN([AC_CHECK_INITGROUPS],
+[
+	KDE_CHECK_FUNC_EXT(initgroups, [
+#include &lt;sys/types.h&gt;
+#include &lt;unistd.h&gt;
+#include &lt;grp.h&gt;
+],
+	[
+char buffer[200];
+initgroups(buffer, 27);
+],
+	[int initgroups(const char *, gid_t)],
+	[INITGROUPS])
+])
+
+AC_DEFUN([AC_CHECK_MKSTEMPS],
+[
+	KDE_CHECK_FUNC_EXT(mkstemps, [
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+],
+	[
+mkstemps(&quot;/tmp/aaaXXXXXX&quot;, 6);
+],
+	[int mkstemps(char *, int)],
+	[MKSTEMPS])
+])
+
+AC_DEFUN([AC_CHECK_MKSTEMP],
+[
+	KDE_CHECK_FUNC_EXT(mkstemp, [
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+],
+	[
+mkstemp(&quot;/tmp/aaaXXXXXX&quot;);
+],
+	[int mkstemp(char *)],
+	[MKSTEMP])
+])
+
+AC_DEFUN([AC_CHECK_MKDTEMP],
+[
+	KDE_CHECK_FUNC_EXT(mkdtemp, [
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+],
+	[
+mkdtemp(&quot;/tmp/aaaXXXXXX&quot;);
+],
+	[char *mkdtemp(char *)],
+	[MKDTEMP])
+])
+
+
+AC_DEFUN([AC_CHECK_RES_INIT],
+[
+  AC_MSG_CHECKING([if res_init needs -lresolv])
+  kde_libs_safe=&quot;$LIBS&quot;
+  LIBS=&quot;$LIBS $X_EXTRA_LIBS -lresolv&quot;
+  AC_TRY_LINK(
+    [
+#include &lt;sys/types.h&gt;
+#include &lt;netinet/in.h&gt;
+#include &lt;arpa/nameser.h&gt;
+#include &lt;resolv.h&gt;
+    ],
+    [
+      res_init();
+    ],
+    [
+      LIBRESOLV=&quot;-lresolv&quot;
+      AC_MSG_RESULT(yes)
+      AC_DEFINE(HAVE_RES_INIT, 1, [Define if you have the res_init function])
+    ],
+    [ AC_MSG_RESULT(no) ]
+  )
+  LIBS=$kde_libs_safe
+  AC_SUBST(LIBRESOLV)
+
+  KDE_CHECK_FUNC_EXT(res_init,
+    [
+#include &lt;sys/types.h&gt;
+#include &lt;netinet/in.h&gt;
+#include &lt;arpa/nameser.h&gt;
+#include &lt;resolv.h&gt;
+    ],
+    [res_init()],
+    [int res_init(void)],
+    [RES_INIT])
+])
+
+AC_DEFUN([AC_CHECK_STRLCPY],
+[
+	KDE_CHECK_FUNC_EXT(strlcpy, [
+#include &lt;string.h&gt;
+],
+[ char buf[20];
+  strlcpy(buf, &quot;KDE function test&quot;, sizeof(buf));
+],
+ 	[unsigned long strlcpy(char*, const char*, unsigned long)],
+	[STRLCPY])
+])
+
+AC_DEFUN([AC_CHECK_STRLCAT],
+[
+	KDE_CHECK_FUNC_EXT(strlcat, [
+#include &lt;string.h&gt;
+],
+[ char buf[20];
+  buf[0]='\0';
+  strlcat(buf, &quot;KDE function test&quot;, sizeof(buf));
+],
+ 	[unsigned long strlcat(char*, const char*, unsigned long)],
+	[STRLCAT])
+])
+
+AC_DEFUN([AC_CHECK_RES_QUERY],
+[
+	KDE_CHECK_FUNC_EXT(res_query, [
+#include &lt;sys/types.h&gt;
+#include &lt;netinet/in.h&gt;
+#include &lt;arpa/nameser.h&gt;
+#include &lt;resolv.h&gt;
+#include &lt;netdb.h&gt;
+],
+[
+res_query(NULL, 0, 0, NULL, 0);
+],
+	[int res_query(const char *, int, int, unsigned char *, int)],
+	[RES_QUERY])
+])
+
+AC_DEFUN([AC_CHECK_DN_SKIPNAME],
+[
+	KDE_CHECK_FUNC_EXT(dn_skipname, [
+#include &lt;sys/types.h&gt;
+#include &lt;netinet/in.h&gt;
+#include &lt;arpa/nameser.h&gt;
+#include &lt;resolv.h&gt;
+],
+[
+dn_skipname (NULL, NULL);
+],
+	[int dn_skipname (unsigned char *, unsigned char *)],
+	[DN_SKIPNAME])
+])
+
+
+AC_DEFUN([AC_FIND_GIF],
+   [AC_MSG_CHECKING([for giflib])
+AC_CACHE_VAL(ac_cv_lib_gif,
+[ac_save_LIBS=&quot;$LIBS&quot;
+if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$kde_use_qt_mac&quot; != &quot;xyes&quot;; then
+LIBS=&quot;$all_libraries -lgif -lX11 $LIBSOCKET&quot;
+else
+LIBS=&quot;$all_libraries -lgif&quot;
+fi
+AC_TRY_LINK(dnl
+[
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+int GifLastError(void);
+#ifdef __cplusplus
+}
+#endif
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+],
+            [return GifLastError();],
+            eval &quot;ac_cv_lib_gif=yes&quot;,
+            eval &quot;ac_cv_lib_gif=no&quot;)
+LIBS=&quot;$ac_save_LIBS&quot;
+])dnl
+if eval &quot;test \&quot;`echo $ac_cv_lib_gif`\&quot; = yes&quot;; then
+  AC_MSG_RESULT(yes)
+  AC_DEFINE_UNQUOTED(HAVE_LIBGIF, 1, [Define if you have libgif])
+else
+  AC_MSG_ERROR(You need giflib30. Please install the kdesupport package)
+fi
+])
+
+AC_DEFUN([KDE_FIND_JPEG_HELPER],
+[
+AC_MSG_CHECKING([for libjpeg$2])
+AC_CACHE_VAL(ac_cv_lib_jpeg_$1,
+[
+ac_save_LIBS=&quot;$LIBS&quot;
+LIBS=&quot;$all_libraries $USER_LDFLAGS -ljpeg$2 -lm&quot;
+ac_save_CFLAGS=&quot;$CFLAGS&quot;
+CFLAGS=&quot;$CFLAGS $all_includes $USER_INCLUDES&quot;
+AC_TRY_LINK(
+[
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+void jpeg_CreateDecompress();
+#ifdef __cplusplus
+}
+#endif
+],
+[jpeg_CreateDecompress();],
+            eval &quot;ac_cv_lib_jpeg_$1=-ljpeg$2&quot;,
+            eval &quot;ac_cv_lib_jpeg_$1=no&quot;)
+LIBS=&quot;$ac_save_LIBS&quot;
+CFLAGS=&quot;$ac_save_CFLAGS&quot;
+])
+
+if eval &quot;test ! \&quot;`echo $ac_cv_lib_jpeg_$1`\&quot; = no&quot;; then
+  LIBJPEG=&quot;$ac_cv_lib_jpeg_$1&quot;
+  AC_MSG_RESULT($ac_cv_lib_jpeg_$1)
+else
+  AC_MSG_RESULT(no)
+  $3
+fi
+
+])
+
+AC_DEFUN([AC_FIND_JPEG],
+[
+dnl first look for libraries
+KDE_FIND_JPEG_HELPER(6b, 6b,
+   KDE_FIND_JPEG_HELPER(normal, [],
+    [
+       LIBJPEG=
+    ]
+   )
+)
+
+dnl then search the headers (can't use simply AC_TRY_xxx, as jpeglib.h
+dnl requires system dependent includes loaded before it)
+jpeg_incdirs=&quot;$includedir /usr/include /usr/local/include $kde_extra_includes&quot;
+AC_FIND_FILE(jpeglib.h, $jpeg_incdirs, jpeg_incdir)
+test &quot;x$jpeg_incdir&quot; = xNO &amp;&amp; jpeg_incdir=
+
+dnl if headers _and_ libraries are missing, this is no error, and we
+dnl continue with a warning (the user will get no jpeg support in khtml)
+dnl if only one is missing, it means a configuration error, but we still
+dnl only warn
+if test -n &quot;$jpeg_incdir&quot; &amp;&amp; test -n &quot;$LIBJPEG&quot; ; then
+  AC_DEFINE_UNQUOTED(HAVE_LIBJPEG, 1, [Define if you have libjpeg])
+else
+  if test -n &quot;$jpeg_incdir&quot; || test -n &quot;$LIBJPEG&quot; ; then
+    AC_MSG_WARN([
+There is an installation error in jpeg support. You seem to have only one
+of either the headers _or_ the libraries installed. You may need to either
+provide correct --with-extra-... options, or the development package of
+libjpeg6b. You can get a source package of libjpeg from <A HREF="http://www.ijg.org/">http://www.ijg.org/</A>
+Disabling JPEG support.
+])
+  else
+    AC_MSG_WARN([libjpeg not found. disable JPEG support.])
+  fi
+  jpeg_incdir=
+  LIBJPEG=
+fi
+
+AC_SUBST(LIBJPEG)
+AH_VERBATIM(_AC_CHECK_JPEG,
+[/*
+ * jpeg.h needs HAVE_BOOLEAN, when the system uses boolean in system
+ * headers and I'm too lazy to write a configure test as long as only
+ * unixware is related
+ */
+#ifdef _UNIXWARE
+#define HAVE_BOOLEAN
+#endif
+])
+])
+
+AC_DEFUN([KDE_CHECK_QT_JPEG],
+[
+if test -n &quot;$LIBJPEG&quot;; then
+AC_MSG_CHECKING([if Qt needs $LIBJPEG])
+AC_CACHE_VAL(kde_cv_qt_jpeg,
+[
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+ac_save_LIBS=&quot;$LIBS&quot;
+LIBS=&quot;$all_libraries $USER_LDFLAGS $LIBQT&quot;
+LIBS=`echo $LIBS | sed &quot;s/$LIBJPEG//&quot;`
+ac_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+CXXFLAGS=&quot;$CXXFLAGS $all_includes $USER_INCLUDES&quot;
+AC_TRY_LINK(
+[#include &lt;qapplication.h&gt;],
+            [
+            int argc;
+            char** argv;
+            QApplication app(argc, argv);],
+            eval &quot;kde_cv_qt_jpeg=no&quot;,
+            eval &quot;kde_cv_qt_jpeg=yes&quot;)
+LIBS=&quot;$ac_save_LIBS&quot;
+CXXFLAGS=&quot;$ac_save_CXXFLAGS&quot;
+AC_LANG_RESTORE
+fi
+])
+
+if eval &quot;test ! \&quot;`echo $kde_cv_qt_jpeg`\&quot; = no&quot;; then
+  AC_MSG_RESULT(yes)
+  LIBJPEG_QT='$(LIBJPEG)'
+else
+  AC_MSG_RESULT(no)
+  LIBJPEG_QT=
+fi
+
+])
+
+AC_DEFUN([AC_FIND_ZLIB],
+[
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+AC_MSG_CHECKING([for libz])
+AC_CACHE_VAL(ac_cv_lib_z,
+[
+kde_save_LIBS=&quot;$LIBS&quot;
+LIBS=&quot;$all_libraries $USER_LDFLAGS -lz $LIBSOCKET&quot;
+kde_save_CFLAGS=&quot;$CFLAGS&quot;
+CFLAGS=&quot;$CFLAGS $all_includes $USER_INCLUDES&quot;
+AC_TRY_LINK(dnl
+[
+#include&lt;zlib.h&gt;
+],
+[
+  char buf[42];
+  gzFile f = (gzFile) 0;
+  /* this would segfault.. but we only link, don't run */
+  (void) gzgets(f, buf, sizeof(buf));
+
+  return (zlibVersion() == ZLIB_VERSION);
+],
+            eval &quot;ac_cv_lib_z='-lz'&quot;,
+            eval &quot;ac_cv_lib_z=no&quot;)
+LIBS=&quot;$kde_save_LIBS&quot;
+CFLAGS=&quot;$kde_save_CFLAGS&quot;
+])dnl
+if test ! &quot;$ac_cv_lib_z&quot; = no; then
+  AC_DEFINE_UNQUOTED(HAVE_LIBZ, 1, [Define if you have libz])
+  LIBZ=&quot;$ac_cv_lib_z&quot;
+  AC_MSG_RESULT($ac_cv_lib_z)
+else
+  AC_MSG_ERROR(not found.
+          Possibly configure picks up an outdated version
+          installed by XFree86. Remove it from your system.
+
+          Check your installation and look into config.log)
+  LIBZ=&quot;&quot;
+fi
+AC_SUBST(LIBZ)
+])
+
+AC_DEFUN([KDE_TRY_TIFFLIB],
+[
+AC_MSG_CHECKING([for libtiff $1])
+
+AC_CACHE_VAL(kde_cv_libtiff_$1,
+[
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+kde_save_LIBS=&quot;$LIBS&quot;
+if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$kde_use_qt_mac&quot; != &quot;xyes&quot;; then
+LIBS=&quot;$all_libraries $USER_LDFLAGS -l$1 $LIBJPEG $LIBZ -lX11 $LIBSOCKET -lm&quot;
+else
+LIBS=&quot;$all_libraries $USER_LDFLAGS -l$1 $LIBJPEG $LIBZ -lm&quot;
+fi
+kde_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+CXXFLAGS=&quot;$CXXFLAGS $all_includes $USER_INCLUDES&quot;
+
+AC_TRY_LINK(dnl
+[
+#include&lt;tiffio.h&gt;
+],
+    [return (TIFFOpen( &quot;&quot;, &quot;r&quot;) == 0); ],
+[
+    kde_cv_libtiff_$1=&quot;-l$1 $LIBJPEG $LIBZ&quot;
+], [
+    kde_cv_libtiff_$1=no
+])
+
+LIBS=&quot;$kde_save_LIBS&quot;
+CXXFLAGS=&quot;$kde_save_CXXFLAGS&quot;
+AC_LANG_RESTORE
+])
+
+if test &quot;$kde_cv_libtiff_$1&quot; = &quot;no&quot;; then
+    AC_MSG_RESULT(no)
+    LIBTIFF=&quot;&quot;
+    $3
+else
+    LIBTIFF=&quot;$kde_cv_libtiff_$1&quot;
+    AC_MSG_RESULT(yes)
+    AC_DEFINE_UNQUOTED(HAVE_LIBTIFF, 1, [Define if you have libtiff])
+    $2
+fi
+
+])
+
+AC_DEFUN([AC_FIND_TIFF],
+[
+AC_REQUIRE([K_PATH_X])
+AC_REQUIRE([AC_FIND_ZLIB])
+AC_REQUIRE([AC_FIND_JPEG])
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+
+KDE_TRY_TIFFLIB(tiff, [],
+   KDE_TRY_TIFFLIB(tiff34))
+
+AC_SUBST(LIBTIFF)
+])
+
+AC_DEFUN([KDE_FIND_LIBEXR],
+[
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+AC_REQUIRE([AC_FIND_ZLIB])
+AC_CACHE_VAL(ac_cv_libexr,
+[
+  if test -z &quot;$PKG_CONFIG&quot;; then
+    AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
+  fi
+
+  AC_MSG_CHECKING([for OpenEXR libraries])
+
+  if test &quot;$PKG_CONFIG&quot; = &quot;no&quot; ; then
+     AC_MSG_RESULT(no)
+     echo &quot;*** The pkg-config script could not be found. Make sure it is&quot;
+     echo &quot;*** in your path, or set the PKG_CONFIG environment variable&quot;
+     echo &quot;*** to the full path to pkg-config.&quot;
+     echo &quot;*** Or see <A HREF="http://www.freedesktop.org/software/pkgconfig">http://www.freedesktop.org/software/pkgconfig</A> to get pkg-config.&quot;
+  else
+     if !(`$PKG_CONFIG --exists OpenEXR`) ; then
+        AC_MSG_RESULT(no)
+        EXRSTATUS=no
+     else
+        if !(`$PKG_CONFIG --atleast-version=&quot;1.1.1&quot; OpenEXR`) ; then
+           AC_MSG_RESULT(no)
+           EXRSTATUS=old
+        else
+           kde_save_LIBS=&quot;$LIBS&quot;
+           LIBS=&quot;$LIBS $all_libraries $USER_LDFLAGS $LIBZ `pkg-config --libs OpenEXR`&quot;
+           AC_LANG_SAVE
+           AC_LANG_CPLUSPLUS
+           kde_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+           EXR_FLAGS=`$PKG_CONFIG --cflags OpenEXR`
+           CXXFLAGS=&quot;$CXXFLAGS $all_includes $USER_INCLUDES $EXR_FLAGS&quot;
+
+           AC_TRY_LINK(dnl
+               [
+               #include &lt;ImfRgbaFile.h&gt;
+               ],
+               [
+               using namespace Imf;
+               RgbaInputFile file (&quot;dummy&quot;);
+               return 0;
+               ],
+               eval &quot;ac_cv_libexr='`pkg-config --libs OpenEXR`'&quot;,
+               eval &quot;ac_cv_libexr=no&quot;
+           )
+           LIBS=&quot;$kde_save_LIBS&quot;
+           CXXFLAGS=&quot;$kde_save_CXXFLAGS&quot;
+           AC_LANG_RESTORE
+           ])dnl
+           if eval &quot;test ! \&quot;`echo $ac_cv_libexr`\&quot; = no&quot;; then
+               AC_DEFINE_UNQUOTED(HAVE_EXR, 1, [Define if you have OpenEXR])
+               LIB_EXR=&quot;$ac_cv_libexr&quot;
+               AC_MSG_RESULT($ac_cv_libexr)
+           else
+               AC_MSG_RESULT(no)
+               LIB_EXR=&quot;&quot;
+           fi
+        fi
+     fi
+  fi
+  AC_SUBST(LIB_EXR)
+  AC_SUBST(EXR_FLAGS)
+])
+
+
+
+AC_DEFUN([AC_FIND_PNG],
+[
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+AC_REQUIRE([AC_FIND_ZLIB])
+AC_MSG_CHECKING([for libpng])
+AC_CACHE_VAL(ac_cv_lib_png,
+[
+kde_save_LIBS=&quot;$LIBS&quot;
+if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$kde_use_qt_mac&quot; != &quot;xyes&quot;; then
+LIBS=&quot;$LIBS $all_libraries $USER_LDFLAGS -lpng $LIBZ -lm -lX11 $LIBSOCKET&quot;
+else
+LIBS=&quot;$LIBS $all_libraries $USER_LDFLAGS -lpng $LIBZ -lm&quot;
+fi
+kde_save_CFLAGS=&quot;$CFLAGS&quot;
+CFLAGS=&quot;$CFLAGS $all_includes $USER_INCLUDES&quot;
+
+AC_TRY_LINK(dnl
+    [
+    #include&lt;png.h&gt;
+    ],
+    [
+    png_structp png_ptr = png_create_read_struct(  /* image ptr */
+		PNG_LIBPNG_VER_STRING, 0, 0, 0 );
+    return( png_ptr != 0 );
+    ],
+    eval &quot;ac_cv_lib_png='-lpng $LIBZ -lm'&quot;,
+    eval &quot;ac_cv_lib_png=no&quot;
+)
+LIBS=&quot;$kde_save_LIBS&quot;
+CFLAGS=&quot;$kde_save_CFLAGS&quot;
+])dnl
+if eval &quot;test ! \&quot;`echo $ac_cv_lib_png`\&quot; = no&quot;; then
+  AC_DEFINE_UNQUOTED(HAVE_LIBPNG, 1, [Define if you have libpng])
+  LIBPNG=&quot;$ac_cv_lib_png&quot;
+  AC_SUBST(LIBPNG)
+  AC_MSG_RESULT($ac_cv_lib_png)
+else
+  AC_MSG_RESULT(no)
+  LIBPNG=&quot;&quot;
+  AC_SUBST(LIBPNG)
+fi
+])
+
+
+AC_DEFUN([AC_FIND_JASPER],
+[
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+AC_REQUIRE([AC_FIND_JPEG])
+AC_MSG_CHECKING([for jasper])
+AC_CACHE_VAL(ac_cv_jasper,
+[
+kde_save_LIBS=&quot;$LIBS&quot;
+LIBS=&quot;$LIBS $all_libraries $USER_LDFLAGS -ljasper $LIBJPEG -lm&quot;
+kde_save_CFLAGS=&quot;$CFLAGS&quot;
+CFLAGS=&quot;$CFLAGS $all_includes $USER_INCLUDES&quot;
+
+AC_TRY_LINK(dnl
+    [
+    #include&lt;jasper/jasper.h&gt;
+    ],
+    [
+    return( jas_init() );
+    ],
+    eval &quot;ac_cv_jasper='-ljasper $LIBJPEG -lm'&quot;,
+    eval &quot;ac_cv_jasper=no&quot;
+)
+LIBS=&quot;$kde_save_LIBS&quot;
+CFLAGS=&quot;$kde_save_CFLAGS&quot;
+])dnl
+if eval &quot;test ! \&quot;`echo $ac_cv_jasper`\&quot; = no&quot;; then
+  AC_DEFINE_UNQUOTED(HAVE_JASPER, 1, [Define if you have jasper])
+  LIB_JASPER=&quot;$ac_cv_jasper&quot;
+  AC_MSG_RESULT($ac_cv_jasper)
+else
+  AC_MSG_RESULT(no)
+  LIB_JASPER=&quot;&quot;
+fi
+AC_SUBST(LIB_JASPER)
+])
+
+AC_DEFUN([AC_CHECK_BOOL],
+[
+  AC_DEFINE_UNQUOTED(HAVE_BOOL, 1, [You _must_ have bool])
+])
+
+AC_DEFUN([AC_CHECK_GNU_EXTENSIONS],
+[
+AC_MSG_CHECKING(if you need GNU extensions)
+AC_CACHE_VAL(ac_cv_gnu_extensions,
+[
+cat &gt; conftest.c &lt;&lt; EOF
+#include &lt;features.h&gt;
+
+#ifdef __GNU_LIBRARY__
+yes
+#endif
+EOF
+
+if (eval &quot;$ac_cpp conftest.c&quot;) 2&gt;&amp;5 |
+  egrep &quot;yes&quot; &gt;/dev/null 2&gt;&amp;1; then
+  rm -rf conftest*
+  ac_cv_gnu_extensions=yes
+else
+  ac_cv_gnu_extensions=no
+fi
+])
+
+AC_MSG_RESULT($ac_cv_gnu_extensions)
+if test &quot;$ac_cv_gnu_extensions&quot; = &quot;yes&quot;; then
+  AC_DEFINE_UNQUOTED(_GNU_SOURCE, 1, [Define if you need to use the GNU extensions])
+fi
+])
+
+AC_DEFUN([KDE_CHECK_COMPILER_FLAG],
+[
+AC_MSG_CHECKING([whether $CXX supports -$1])
+kde_cache=`echo $1 | sed 'y% .=/+-,%____p__%'`
+AC_CACHE_VAL(kde_cv_prog_cxx_$kde_cache,
+[
+  AC_LANG_SAVE
+  AC_LANG_CPLUSPLUS
+  save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+  CXXFLAGS=&quot;$CXXFLAGS -$1&quot;
+  AC_TRY_LINK([],[ return 0; ], [eval &quot;kde_cv_prog_cxx_$kde_cache=yes&quot;], [])
+  CXXFLAGS=&quot;$save_CXXFLAGS&quot;
+  AC_LANG_RESTORE
+])
+if eval &quot;test \&quot;`echo '$kde_cv_prog_cxx_'$kde_cache`\&quot; = yes&quot;; then
+ AC_MSG_RESULT(yes)
+ :
+ $2
+else
+ AC_MSG_RESULT(no)
+ :
+ $3
+fi
+])
+
+AC_DEFUN([KDE_CHECK_C_COMPILER_FLAG],
+[
+AC_MSG_CHECKING([whether $CC supports -$1])
+kde_cache=`echo $1 | sed 'y% .=/+-,%____p__%'`
+AC_CACHE_VAL(kde_cv_prog_cc_$kde_cache,
+[
+  AC_LANG_SAVE
+  AC_LANG_C
+  save_CFLAGS=&quot;$CFLAGS&quot;
+  CFLAGS=&quot;$CFLAGS -$1&quot;
+  AC_TRY_LINK([],[ return 0; ], [eval &quot;kde_cv_prog_cc_$kde_cache=yes&quot;], [])
+  CFLAGS=&quot;$save_CFLAGS&quot;
+  AC_LANG_RESTORE
+])
+if eval &quot;test \&quot;`echo '$kde_cv_prog_cc_'$kde_cache`\&quot; = yes&quot;; then
+ AC_MSG_RESULT(yes)
+ :
+ $2
+else
+ AC_MSG_RESULT(no)
+ :
+ $3
+fi
+])
+
+
+dnl AC_REMOVE_FORBIDDEN removes forbidden arguments from variables
+dnl use: AC_REMOVE_FORBIDDEN(CC, [-forbid -bad-option whatever])
+dnl it's all white-space separated
+AC_DEFUN([AC_REMOVE_FORBIDDEN],
+[ __val=$$1
+  __forbid=&quot; $2 &quot;
+  if test -n &quot;$__val&quot;; then
+    __new=&quot;&quot;
+    ac_save_IFS=$IFS
+    IFS=&quot; 	&quot;
+    for i in $__val; do
+      case &quot;$__forbid&quot; in
+        *&quot; $i &quot;*) AC_MSG_WARN([found forbidden $i in $1, removing it]) ;;
+	*) # Careful to not add spaces, where there were none, because otherwise
+	   # libtool gets confused, if we change e.g. CXX
+	   if test -z &quot;$__new&quot; ; then __new=$i ; else __new=&quot;$__new $i&quot; ; fi ;;
+      esac
+    done
+    IFS=$ac_save_IFS
+    $1=$__new
+  fi
+])
+
+
+AC_DEFUN([KDE_CHECK_FOR_BAD_COMPILER],
+[
+  AC_MSG_CHECKING([whether $CC is blacklisted])
+
+  dnl In theory we have tu run this test against $CC and $CXX
+  dnl in C and in C++ mode, because its perfectly legal for
+  dnl the user to mix compiler versions, since C has a defined
+  dnl ABI.
+  dnl
+  dnl For now, we assume the user is not on crack.
+
+  AC_TRY_COMPILE([
+#ifdef __GNUC__
+#if __GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ == 0 &amp;&amp; __GNUC_PATCHLEVEL__ == 0
+choke me
+#endif
+#endif
+], ,
+  kde_bad_compiler=no,
+  kde_bad_compiler=yes
+)
+
+  AC_MSG_RESULT($kde_bad_compiler)
+
+if test &quot;$kde_bad_compiler&quot; = &quot;yes&quot;; then
+  AC_MSG_ERROR([
+
+This particular compiler version is blacklisted because it
+is known to miscompile KDE. Please use a newer version, or
+if that is not yet available, choose an older version.
+
+Please do not report a bug or bother us reporting this
+configure error. We know about it, and we introduced
+it by intention to avoid untraceable bugs or crashes in KDE.
+
+])
+fi
+
+])
+
+
+AC_DEFUN([KDE_CHECK_FOR_OPT_NOINLINE_MATCH],
+[
+  AC_CACHE_CHECK([whether system headers can cope with -O2 -fno-inline],
+    kde_cv_opt_noinline_match,
+  [
+  kde_cv_opt_noinline_match=irrelevant
+  dnl if we don't use both -O2 and -fno-inline, this check is moot
+  if echo &quot;$CFLAGS&quot; | grep -qe -O2 \
+     &amp;&amp; echo &quot;$CFLAGS&quot; | grep -qe -fno-inline ; then
+
+    ac_cflags_save=&quot;$CFLAGS&quot;
+    CFLAGS=&quot;$CFLAGS -D_USE_GNU&quot;
+
+    AC_TRY_LINK([
+  #include &lt;string.h&gt;
+], [  const char *pt, *et;
+  et = __extension__      ({ char __a0, __a1, __a2;       (__builtin_constant_p (  &quot;;,&quot;  ) &amp;&amp; ((size_t)(const void *)((   &quot;;,&quot;   )+ 1) - (size_t)(const void *)(   &quot;;,&quot;   ) == 1)        ? ((__a0 =((__const char  *) (  &quot;;,&quot;  ))[0], __a0 == '\0')     ? ((void) (  pt ),((void *)0) )        : ((__a1 = ((__const char *) (  &quot;;,&quot;  ))[1], __a1== '\0')      ? (__extension__ (__builtin_constant_p (  __a0 ) &amp;&amp; ( __a0 ) == '\0'   ? (char *) __rawmemchr (   pt  ,   __a0)       : strchr(   pt  ,   __a0 )))   : ((__a2 = ((__const char *) (  &quot;;,&quot;  ))[2], __a2 == '\0')      ? __strpbrk_c2 (  pt , __a0, __a1)      :(((__const char *) (  &quot;;,&quot;  ))[3] == '\0'     ? __strpbrk_c3 (  pt ,__a0, __a1, __a2): strpbrk (  pt ,   &quot;;,&quot;  ))))) : strpbrk (  pt ,  &quot;;,&quot;  )); }) ;
+],
+    kde_cv_opt_noinline_match=yes,
+    kde_cv_opt_noinline_match=no
+    )
+
+    CFLAGS=&quot;$ac_cflags_save&quot;
+  fi
+  ])
+])
+
+
+dnl AC_VALIDIFY_CXXFLAGS checks for forbidden flags the user may have given
+AC_DEFUN([AC_VALIDIFY_CXXFLAGS],
+[dnl
+if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot;; then
+ AC_REMOVE_FORBIDDEN(CXX, [-fno-rtti -rpath])
+ AC_REMOVE_FORBIDDEN(CXXFLAGS, [-fno-rtti -rpath])
+else
+ AC_REMOVE_FORBIDDEN(CXX, [-rpath])
+ AC_REMOVE_FORBIDDEN(CXXFLAGS, [-rpath])
+fi
+])
+
+AC_DEFUN([AC_CHECK_COMPILERS],
+[
+  AC_ARG_ENABLE(debug,
+	        AC_HELP_STRING([--enable-debug=ARG],[enables debug symbols (yes|no|full) [default=no]]),
+  [
+    case $enableval in
+      yes)
+        kde_use_debug_code=&quot;yes&quot;
+        kde_use_debug_define=no
+        ;;
+      full)
+        kde_use_debug_code=&quot;full&quot;
+        kde_use_debug_define=no
+        ;;
+      *)
+        kde_use_debug_code=&quot;no&quot;
+        kde_use_debug_define=yes
+        ;;
+    esac
+  ],
+    [kde_use_debug_code=&quot;no&quot;
+      kde_use_debug_define=no
+  ])
+
+  dnl Just for configure --help
+  AC_ARG_ENABLE(dummyoption,
+	        AC_HELP_STRING([--disable-debug],
+	  		       [disables debug output and debug symbols [default=no]]),
+		[],[])
+
+  AC_ARG_ENABLE(strict,
+		AC_HELP_STRING([--enable-strict],
+			      [compiles with strict compiler options (may not work!)]),
+   [
+    if test $enableval = &quot;no&quot;; then
+         kde_use_strict_options=&quot;no&quot;
+       else
+         kde_use_strict_options=&quot;yes&quot;
+    fi
+   ], [kde_use_strict_options=&quot;no&quot;])
+
+  AC_ARG_ENABLE(warnings,AC_HELP_STRING([--disable-warnings],[disables compilation with -Wall and similar]),
+   [
+    if test $enableval = &quot;no&quot;; then
+         kde_use_warnings=&quot;no&quot;
+       else
+         kde_use_warnings=&quot;yes&quot;
+    fi
+   ], [kde_use_warnings=&quot;yes&quot;])
+
+  dnl enable warnings for debug build
+  if test &quot;$kde_use_debug_code&quot; != &quot;no&quot;; then
+    kde_use_warnings=yes
+  fi
+
+  AC_ARG_ENABLE(profile,AC_HELP_STRING([--enable-profile],[creates profiling infos [default=no]]),
+    [kde_use_profiling=$enableval],
+    [kde_use_profiling=&quot;no&quot;]
+  )
+
+  dnl this prevents stupid AC_PROG_CC to add &quot;-g&quot; to the default CFLAGS
+  CFLAGS=&quot; $CFLAGS&quot;
+
+  AC_PROG_CC
+
+  AC_PROG_CPP
+
+  if test &quot;$GCC&quot; = &quot;yes&quot;; then
+    if test &quot;$kde_use_debug_code&quot; != &quot;no&quot;; then
+      if test $kde_use_debug_code = &quot;full&quot;; then
+        CFLAGS=&quot;-g3 -fno-inline $CFLAGS&quot;
+      else
+        CFLAGS=&quot;-g -O2 -fno-reorder-blocks -fno-schedule-insns -fno-inline $CFLAGS&quot;
+      fi
+    else
+      CFLAGS=&quot;-O2 $CFLAGS&quot;
+    fi
+  fi
+
+  if test &quot;$kde_use_debug_define&quot; = &quot;yes&quot;; then
+    CFLAGS=&quot;-DNDEBUG $CFLAGS&quot;
+  fi
+
+
+  case &quot;$host&quot; in
+  *-*-sysv4.2uw*) CFLAGS=&quot;-D_UNIXWARE $CFLAGS&quot;;;
+  *-*-sysv5uw7*) CFLAGS=&quot;-D_UNIXWARE7 $CFLAGS&quot;;;
+  esac
+
+  if test -z &quot;$LDFLAGS&quot; &amp;&amp; test &quot;$kde_use_debug_code&quot; = &quot;no&quot; &amp;&amp; test &quot;$GCC&quot; = &quot;yes&quot;; then
+     LDFLAGS=&quot;&quot;
+  fi
+
+  CXXFLAGS=&quot; $CXXFLAGS&quot;
+
+  AC_PROG_CXX
+
+  KDE_CHECK_FOR_BAD_COMPILER
+
+  if test &quot;$GXX&quot; = &quot;yes&quot; || test &quot;$CXX&quot; = &quot;KCC&quot;; then
+    if test &quot;$kde_use_debug_code&quot; != &quot;no&quot;; then
+      if test &quot;$CXX&quot; = &quot;KCC&quot;; then
+        CXXFLAGS=&quot;+K0 -Wall -pedantic -W -Wpointer-arith -Wwrite-strings $CXXFLAGS&quot;
+      else
+        if test &quot;$kde_use_debug_code&quot; = &quot;full&quot;; then
+          CXXFLAGS=&quot;-g3 -fno-inline $CXXFLAGS&quot;
+        else
+          CXXFLAGS=&quot;-g -O2 -fno-reorder-blocks -fno-schedule-insns -fno-inline $CXXFLAGS&quot;
+        fi
+      fi
+      KDE_CHECK_COMPILER_FLAG(fno-builtin,[CXXFLAGS=&quot;-fno-builtin $CXXFLAGS&quot;])
+
+      dnl convenience compiler flags
+      KDE_CHECK_COMPILER_FLAG(Woverloaded-virtual, [WOVERLOADED_VIRTUAL=&quot;-Woverloaded-virtual&quot;], [WOVERLOADED_VRITUAL=&quot;&quot;])
+      AC_SUBST(WOVERLOADED_VIRTUAL)
+    else
+      if test &quot;$CXX&quot; = &quot;KCC&quot;; then
+        CXXFLAGS=&quot;+K3 $CXXFLAGS&quot;
+      else
+        CXXFLAGS=&quot;-O2 $CXXFLAGS&quot;
+      fi
+    fi
+  fi
+
+  if test &quot;$kde_use_debug_define&quot; = &quot;yes&quot;; then
+    CXXFLAGS=&quot;-DNDEBUG -DNO_DEBUG $CXXFLAGS&quot;
+  fi
+
+  if test &quot;$kde_use_profiling&quot; = &quot;yes&quot;; then
+    KDE_CHECK_COMPILER_FLAG(pg,
+    [
+      CFLAGS=&quot;-pg $CFLAGS&quot;
+      CXXFLAGS=&quot;-pg $CXXFLAGS&quot;
+    ])
+  fi
+
+  if test &quot;$kde_use_warnings&quot; = &quot;yes&quot;; then
+      if test &quot;$GCC&quot; = &quot;yes&quot;; then
+        CXXFLAGS=&quot;-Wall -W -Wpointer-arith $CXXFLAGS&quot;
+        case $host in
+          *-*-linux-gnu)
+            CFLAGS=&quot;-std=iso9899:1990 -W -Wall -Wchar-subscripts -Wshadow -Wpointer-arith -Wmissing-prototypes -Wwrite-strings -D_XOPEN_SOURCE=500 -D_BSD_SOURCE $CFLAGS&quot;
+            CXXFLAGS=&quot;-ansi -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -Wcast-align -Wconversion -Wchar-subscripts $CXXFLAGS&quot;
+            KDE_CHECK_COMPILER_FLAG(Wmissing-format-attribute, [CXXFLAGS=&quot;$CXXFLAGS -Wformat-security -Wmissing-format-attribute&quot;])
+            KDE_CHECK_C_COMPILER_FLAG(Wmissing-format-attribute, [CFLAGS=&quot;$CFLAGS -Wformat-security -Wmissing-format-attribute&quot;])
+          ;;
+        esac
+        KDE_CHECK_COMPILER_FLAG(Wundef,[CXXFLAGS=&quot;-Wundef $CXXFLAGS&quot;])
+        KDE_CHECK_COMPILER_FLAG(Wno-long-long,[CXXFLAGS=&quot;-Wno-long-long $CXXFLAGS&quot;])
+        KDE_CHECK_COMPILER_FLAG(Wnon-virtual-dtor,[CXXFLAGS=&quot;-Wnon-virtual-dtor $CXXFLAGS&quot;])
+     fi
+  fi
+
+  if test &quot;$GXX&quot; = &quot;yes&quot; &amp;&amp; test &quot;$kde_use_strict_options&quot; = &quot;yes&quot;; then
+    CXXFLAGS=&quot;-Wcast-qual -Wshadow -Wcast-align $CXXFLAGS&quot;
+  fi
+
+  AC_ARG_ENABLE(pch,
+     AC_HELP_STRING([--enable-pch],
+                    [enables precompiled header support (currently only KCC or gcc &gt;=3.4+unsermake) [default=no]]),
+    [ kde_use_pch=$enableval ],[ kde_use_pch=no ])
+
+  HAVE_GCC_VISIBILITY=0
+  AC_SUBST([HAVE_GCC_VISIBILITY])
+
+  if test &quot;$GXX&quot; = &quot;yes&quot;; then
+    KDE_CHECK_COMPILER_FLAG(fno-exceptions,[CXXFLAGS=&quot;$CXXFLAGS -fno-exceptions&quot;])
+    KDE_CHECK_COMPILER_FLAG(fno-check-new, [CXXFLAGS=&quot;$CXXFLAGS -fno-check-new&quot;])
+    KDE_CHECK_COMPILER_FLAG(fno-common, [CXXFLAGS=&quot;$CXXFLAGS -fno-common&quot;])
+    KDE_CHECK_COMPILER_FLAG(fexceptions, [USE_EXCEPTIONS=&quot;-fexceptions&quot;], USE_EXCEPTIONS=	)
+    ENABLE_PERMISSIVE_FLAG=&quot;-fpermissive&quot;
+
+    if test &quot;$kde_use_pch&quot; = &quot;yes&quot;; then
+        AC_MSG_CHECKING(whether gcc supports precompiling c header files)
+        echo &gt;conftest.h
+        if $CC -x c-header conftest.h &gt;/dev/null 2&gt;/dev/null; then
+            kde_gcc_supports_pch=yes
+            AC_MSG_RESULT(yes)
+        else
+            kde_gcc_supports_pch=no
+            AC_MSG_RESULT(no)
+        fi
+        if test &quot;$kde_gcc_supports_pch&quot; = &quot;yes&quot;; then
+            AC_MSG_CHECKING(whether gcc supports precompiling c++ header files)
+            if $CXX -x c++-header conftest.h &gt;/dev/null 2&gt;/dev/null; then
+                kde_gcc_supports_pch=yes
+                AC_MSG_RESULT(yes)
+            else
+                kde_gcc_supports_pch=no
+                AC_MSG_RESULT(no)
+            fi
+        fi
+        rm -f conftest.h conftest.h.gch
+    fi
+
+    KDE_CHECK_FOR_OPT_NOINLINE_MATCH
+    if test &quot;x$kde_cv_opt_noinline_match&quot; = &quot;xno&quot; ; then
+       CFLAGS=&quot;`echo &quot;$CFLAGS&quot; | sed &quot;s/ -fno-inline//&quot;`&quot;
+    fi
+  fi
+  AM_CONDITIONAL(unsermake_enable_pch, test &quot;$kde_use_pch&quot; = &quot;yes&quot; &amp;&amp; test &quot;$kde_gcc_supports_pch&quot; = &quot;yes&quot;)
+  if test &quot;$CXX&quot; = &quot;KCC&quot;; then
+    dnl unfortunately we currently cannot disable exception support in KCC
+    dnl because doing so is binary incompatible and Qt by default links with exceptions :-(
+    dnl KDE_CHECK_COMPILER_FLAG(-no_exceptions,[CXXFLAGS=&quot;$CXXFLAGS --no_exceptions&quot;])
+    dnl KDE_CHECK_COMPILER_FLAG(-exceptions, [USE_EXCEPTIONS=&quot;--exceptions&quot;], USE_EXCEPTIONS=	)
+
+    if test &quot;$kde_use_pch&quot; = &quot;yes&quot;; then
+      dnl TODO: support --pch-dir!
+      KDE_CHECK_COMPILER_FLAG(-pch,[CXXFLAGS=&quot;$CXXFLAGS --pch&quot;])
+      dnl the below works (but the dir must exist), but it's
+      dnl useless for a whole package.
+      dnl The are precompiled headers for each source file, so when compiling
+      dnl from scratch, it doesn't make a difference, and they take up
+      dnl around ~5Mb _per_ sourcefile.
+      dnl KDE_CHECK_COMPILER_FLAG(-pch_dir /tmp,
+      dnl   [CXXFLAGS=&quot;$CXXFLAGS --pch_dir `pwd`/pcheaders&quot;])
+    fi
+    dnl this flag controls inlining. by default KCC inlines in optimisation mode
+    dnl all implementations that are defined inside the class {} declaration.
+    dnl because of templates-compatibility with broken gcc compilers, this
+    dnl can cause excessive inlining. This flag limits it to a sane level
+    KDE_CHECK_COMPILER_FLAG(-inline_keyword_space_time=6,[CXXFLAGS=&quot;$CXXFLAGS --inline_keyword_space_time=6&quot;])
+    KDE_CHECK_COMPILER_FLAG(-inline_auto_space_time=2,[CXXFLAGS=&quot;$CXXFLAGS --inline_auto_space_time=2&quot;])
+    KDE_CHECK_COMPILER_FLAG(-inline_implicit_space_time=2.0,[CXXFLAGS=&quot;$CXXFLAGS --inline_implicit_space_time=2.0&quot;])
+    KDE_CHECK_COMPILER_FLAG(-inline_generated_space_time=2.0,[CXXFLAGS=&quot;$CXXFLAGS --inline_generated_space_time=2.0&quot;])
+    dnl Some source files are shared between multiple executables
+    dnl (or libraries) and some of those need template instantiations.
+    dnl In that case KCC needs to compile those sources with
+    dnl --one_instantiation_per_object.  To make it easy for us we compile
+    dnl _all_ objects with that flag (--one_per is a shorthand).
+    KDE_CHECK_COMPILER_FLAG(-one_per, [CXXFLAGS=&quot;$CXXFLAGS --one_per&quot;])
+  fi
+  AC_SUBST(USE_EXCEPTIONS)
+  dnl obsolete macro - provided to keep things going
+  USE_RTTI=
+  AC_SUBST(USE_RTTI)
+
+  case &quot;$host&quot; in
+      *-*-irix*)  test &quot;$GXX&quot; = yes &amp;&amp; CXXFLAGS=&quot;-D_LANGUAGE_C_PLUS_PLUS -D__LANGUAGE_C_PLUS_PLUS $CXXFLAGS&quot; ;;
+      *-*-sysv4.2uw*) CXXFLAGS=&quot;-D_UNIXWARE $CXXFLAGS&quot;;;
+      *-*-sysv5uw7*) CXXFLAGS=&quot;-D_UNIXWARE7 $CXXFLAGS&quot;;;
+      *-*-solaris*)
+        if test &quot;$GXX&quot; = yes; then
+          libstdcpp=`$CXX -print-file-name=libstdc++.so`
+          if test ! -f $libstdcpp; then
+             AC_MSG_ERROR([You've compiled gcc without --enable-shared. This doesn't work with KDE. Please recompile gcc with --enable-shared to receive a libstdc++.so])
+          fi
+        fi
+        ;;
+  esac
+
+  AC_VALIDIFY_CXXFLAGS
+
+  AC_PROG_CXXCPP
+
+  if test &quot;$GCC&quot; = yes; then
+     NOOPT_CFLAGS=-O0
+  fi
+  KDE_CHECK_COMPILER_FLAG(O0,[NOOPT_CXXFLAGS=-O0])
+
+  AC_ARG_ENABLE(coverage,
+    AC_HELP_STRING([--enable-coverage],[use gcc coverage testing]), [
+      if test &quot;$am_cv_CC_dependencies_compiler_type&quot; = &quot;gcc3&quot;; then
+        ac_coverage_compiler=&quot;-fprofile-arcs -ftest-coverage&quot;
+        ac_coverage_linker=&quot;-lgcc&quot;
+      elif test &quot;$am_cv_CC_dependencies_compiler_type&quot; = &quot;gcc&quot;; then
+        ac_coverage_compiler=&quot;-fprofile-arcs -ftest-coverage&quot;
+        ac_coverage_linker=&quot;&quot;
+      else
+        AC_MSG_ERROR([coverage with your compiler is not supported])
+      fi
+      CFLAGS=&quot;$CFLAGS $ac_coverage_compiler&quot;
+      CXXFLAGS=&quot;$CXXFLAGS $ac_coverage_compiler&quot;
+      LDFLAGS=&quot;$LDFLAGS $ac_coverage_linker&quot;
+    ])
+
+  AC_SUBST(NOOPT_CXXFLAGS)
+  AC_SUBST(NOOPT_CFLAGS)
+  AC_SUBST(ENABLE_PERMISSIVE_FLAG)
+
+  KDE_CHECK_NEW_LDFLAGS
+  KDE_CHECK_FINAL
+  KDE_CHECK_CLOSURE
+  KDE_CHECK_NMCHECK
+
+  ifdef([AM_DEPENDENCIES], AC_REQUIRE([KDE_ADD_DEPENDENCIES]), [])
+])
+
+AC_DEFUN([KDE_CHECK_VISIBILITY_GCC_BUG],
+  [
+    AC_CACHE_CHECK([for gcc -fvisibility-inlines-hidden bug], kde_cv_val_gcc_visibility_bug,
+      [
+        AC_LANG_SAVE
+        AC_LANG_CPLUSPLUS
+
+        safe_CXXFLAGS=$CXXFLAGS
+        safe_LDFLAGS=$LDFLAGS
+        CXXFLAGS=&quot;$CXXFLAGS -fPIC -fvisibility-inlines-hidden -O0&quot;
+        LDFLAGS=&quot;$LDFLAGS -shared -fPIC&quot;
+
+        AC_TRY_LINK(
+        [
+          /* <A HREF="http://gcc.gnu.org/bugzilla/show_bug.cgi?id=19664">http://gcc.gnu.org/bugzilla/show_bug.cgi?id=19664</A> */
+	  #include &lt;string&gt;
+          int some_function( void ) __attribute__ ((visibility(&quot;default&quot;)));
+          int some_function( void )
+          {
+	    std::string s(&quot;blafasel&quot;);
+            return 0;
+          }
+        ], [/* elvis is alive */],
+        kde_cv_val_gcc_visibility_bug=no, kde_cv_val_gcc_visibility_bug=yes)
+
+        CXXFLAGS=$safe_CXXFLAGS
+        LDFLAGS=$safe_LDFLAGS
+        AC_LANG_RESTORE
+      ]
+    )
+
+    if test x$kde_cv_val_gcc_visibility_bug = xno; then
+      CXXFLAGS=&quot;$CXXFLAGS -fvisibility-inlines-hidden&quot;
+    fi
+  ]
+)
+
+AC_DEFUN([KDE_ENABLE_HIDDEN_VISIBILITY],
+[
+  AC_REQUIRE([AC_PATH_QT])
+
+  AC_MSG_CHECKING([grepping for visibility push/pop in headers])
+
+  if test &quot;x$GXX&quot; = &quot;xyes&quot;; then
+    AC_LANG_SAVE
+    AC_LANG_CPLUSPLUS
+    AC_EGREP_CPP(
+       [GCC visibility push],
+       [ #include &lt;vector&gt;
+       ],
+    [
+      AC_MSG_RESULT(yes)
+      kde_stdc_visibility_patched=yes ],
+    [
+      AC_MSG_RESULT(no)
+      AC_MSG_WARN([Your libstdc++ doesn't appear to be patched for
+                   visibility support. Disabling -fvisibility=hidden])
+
+      kde_stdc_visibility_patched=no ])
+    AC_LANG_RESTORE
+
+    kde_have_gcc_visibility=no
+
+    if test x$kde_stdc_visibility_patched = xyes ; then
+      KDE_CHECK_COMPILER_FLAG(fvisibility=hidden,
+      [
+        kde_have_gcc_visibility=yes
+        CXXFLAGS=&quot;$CXXFLAGS -fvisibility=hidden&quot;
+        KDE_CHECK_VISIBILITY_GCC_BUG
+        HAVE_GCC_VISIBILITY=1
+        AC_DEFINE_UNQUOTED(__KDE_HAVE_GCC_VISIBILITY, &quot;$HAVE_GCC_VISIBILITY&quot;, [define to 1 if -fvisibility is supported])
+      ])
+    fi
+  fi
+])
+
+AC_DEFUN([KDE_ADD_DEPENDENCIES],
+[
+   [A]M_DEPENDENCIES(CC)
+   [A]M_DEPENDENCIES(CXX)
+])
+
+dnl just a wrapper to clean up configure.in
+AC_DEFUN([KDE_PROG_LIBTOOL],
+[
+AC_REQUIRE([AC_CHECK_COMPILERS])
+AC_REQUIRE([AC_ENABLE_SHARED])
+AC_REQUIRE([AC_ENABLE_STATIC])
+
+AC_REQUIRE([AC_LIBTOOL_DLOPEN])
+AC_REQUIRE([KDE_CHECK_LIB64])
+
+AC_OBJEXT
+AC_EXEEXT
+
+AM_PROG_LIBTOOL
+AC_LIBTOOL_CXX
+
+LIBTOOL_SHELL=&quot;/bin/sh ./libtool&quot;
+#  LIBTOOL=&quot;$LIBTOOL --silent&quot;
+KDE_PLUGIN=&quot;-avoid-version -module -no-undefined \$(KDE_NO_UNDEFINED) \$(KDE_RPATH) \$(KDE_MT_LDFLAGS)&quot;
+AC_SUBST(KDE_PLUGIN)
+
+# we patch configure quite some so we better keep that consistent for incremental runs
+AC_SUBST(AUTOCONF,'$(SHELL) $(top_srcdir)/admin/cvs.sh configure || touch configure')
+])
+
+AC_DEFUN([KDE_CHECK_LIB64],
+[
+    kdelibsuff=&quot;$kde_libs_suffix&quot;
+    if test -z &quot;$kdelibsuff&quot;; then
+       kdelibsuff=&quot;auto&quot;
+    fi
+    AC_ARG_ENABLE(libsuffix,
+        AC_HELP_STRING([--enable-libsuffix],
+            [/lib directory suffix (64,32,none,auto[=default])]),
+            kdelibsuff=$enableval)
+    
+    if test &quot;$kdelibsuff&quot; = &quot;auto&quot;; then
+    
+cat &gt; conftest.c &lt;&lt; EOF
+#include &lt;stdio.h&gt;
+int main() {
+ return 0;
+}
+EOF
+        kdelibsuff=`$CC conftest.c -o conftest.out; ldd conftest.out | grep -E &quot;libc.so&quot;| grep -E -o &quot;/lib[[^\/]]*/&quot; | sed &quot;s/lib//&quot; | sed &quot;s/\/*//g&quot;`
+	rm -rf conftest.*
+    fi	
+	
+    if test &quot;$kdelibsuff&quot; = &quot;no&quot;; then
+       kdelibsuff=
+    fi    
+    if test -z &quot;$kdelibsuff&quot;; then
+        AC_MSG_RESULT([not using lib directory suffix])
+        AC_DEFINE(KDELIBSUFF, [&quot;&quot;], Suffix for lib directories)
+    else
+        if test &quot;$libdir&quot; = '${exec_prefix}/lib'; then
+            libdir=&quot;$libdir${kdelibsuff}&quot;
+            AC_SUBST([libdir], [&quot;$libdir&quot;])  dnl ugly hack for lib64 platforms
+        fi
+        AC_DEFINE_UNQUOTED(KDELIBSUFF, [&quot;${kdelibsuff}&quot;], Suffix for lib directories)
+        AC_MSG_RESULT([using lib directory suffix $kdelibsuff])
+    fi
+])
+
+AC_DEFUN([KDE_CHECK_TYPES],
+[  AC_CHECK_SIZEOF(int, 4)dnl
+   AC_CHECK_SIZEOF(short)dnl
+  AC_CHECK_SIZEOF(long, 4)dnl
+  AC_CHECK_SIZEOF(char *, 4)dnl
+])dnl
+
+dnl Not used - kept for compat only?
+AC_DEFUN([KDE_DO_IT_ALL],
+[
+AC_CANONICAL_SYSTEM
+AC_ARG_PROGRAM
+AM_INIT_AUTOMAKE($1, $2)
+AM_DISABLE_LIBRARIES
+AC_PREFIX_DEFAULT(${KDEDIR:-/usr/local/kde})
+AC_CHECK_COMPILERS
+KDE_PROG_LIBTOOL
+AM_KDE_WITH_NLS
+AC_PATH_KDE
+])
+
+AC_DEFUN([AC_CHECK_RPATH],
+[
+AC_MSG_CHECKING(for rpath)
+AC_ARG_ENABLE(rpath,
+      AC_HELP_STRING([--disable-rpath],[do not use the rpath feature of ld]),
+      USE_RPATH=$enableval, USE_RPATH=yes)
+
+if test -z &quot;$KDE_RPATH&quot; &amp;&amp; test &quot;$USE_RPATH&quot; = &quot;yes&quot;; then
+
+  KDE_RPATH=&quot;-R \$(libdir)&quot;
+
+  if test &quot;$kde_libraries&quot; != &quot;$libdir&quot;; then
+      KDE_RPATH=&quot;$KDE_RPATH -R \$(kde_libraries)&quot;
+  fi
+
+  if test -n &quot;$qt_libraries&quot;; then
+    KDE_RPATH=&quot;$KDE_RPATH -R \$(qt_libraries)&quot;
+  fi
+  dnl $x_libraries is set to /usr/lib in case
+  if test -n &quot;$X_LDFLAGS&quot;; then
+    X_RPATH=&quot;-R \$(x_libraries)&quot;
+    KDE_RPATH=&quot;$KDE_RPATH $X_RPATH&quot;
+  fi
+  if test -n &quot;$KDE_EXTRA_RPATH&quot;; then
+    KDE_RPATH=&quot;$KDE_RPATH \$(KDE_EXTRA_RPATH)&quot;
+  fi
+fi
+AC_SUBST(KDE_EXTRA_RPATH)
+AC_SUBST(KDE_RPATH)
+AC_SUBST(X_RPATH)
+AC_MSG_RESULT($USE_RPATH)
+])
+
+dnl Check for the type of the third argument of getsockname
+AC_DEFUN([AC_CHECK_SOCKLEN_T],
+[
+   AC_MSG_CHECKING(for socklen_t)
+   AC_CACHE_VAL(kde_cv_socklen_t,
+   [
+      AC_LANG_PUSH(C++)
+      kde_cv_socklen_t=no
+      AC_TRY_COMPILE([
+         #include &lt;sys/types.h&gt;
+         #include &lt;sys/socket.h&gt;
+      ],
+      [
+         socklen_t len;
+         getpeername(0,0,&amp;len);
+      ],
+      [
+         kde_cv_socklen_t=yes
+         kde_cv_socklen_t_equiv=socklen_t
+      ])
+      AC_LANG_POP(C++)
+   ])
+   AC_MSG_RESULT($kde_cv_socklen_t)
+   if test $kde_cv_socklen_t = no; then
+      AC_MSG_CHECKING([for socklen_t equivalent for socket functions])
+      AC_CACHE_VAL(kde_cv_socklen_t_equiv,
+      [
+         kde_cv_socklen_t_equiv=int
+         AC_LANG_PUSH(C++)
+         for t in int size_t unsigned long &quot;unsigned long&quot;; do
+            AC_TRY_COMPILE([
+               #include &lt;sys/types.h&gt;
+               #include &lt;sys/socket.h&gt;
+            ],
+            [
+               $t len;
+               getpeername(0,0,&amp;len);
+            ],
+            [
+               kde_cv_socklen_t_equiv=&quot;$t&quot;
+               break
+            ])
+         done
+         AC_LANG_POP(C++)
+      ])
+      AC_MSG_RESULT($kde_cv_socklen_t_equiv)
+   fi
+   AC_DEFINE_UNQUOTED(kde_socklen_t, $kde_cv_socklen_t_equiv,
+                     [type to use in place of socklen_t if not defined])
+   AC_DEFINE_UNQUOTED(ksize_t, $kde_cv_socklen_t_equiv,
+                     [type to use in place of socklen_t if not defined (deprecated, use kde_socklen_t)])
+])
+
+dnl This is a merge of some macros out of the gettext aclocal.m4
+dnl since we don't need anything, I took the things we need
+dnl the copyright for them is:
+dnl &gt;
+dnl Copyright (C) 1994, 1995, 1996, 1997, 1998 Free Software Foundation, Inc.
+dnl This Makefile.in is free software; the Free Software Foundation
+dnl gives unlimited permission to copy and/or distribute it,
+dnl with or without modifications, as long as this notice is preserved.
+
+dnl This program is distributed in the hope that it will be useful,
+dnl but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+dnl even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+dnl PARTICULAR PURPOSE.
+dnl &gt;
+dnl for this file it is relicensed under LGPL
+
+AC_DEFUN([AM_KDE_WITH_NLS],
+  [
+    dnl If we use NLS figure out what method
+
+    AM_PATH_PROG_WITH_TEST_KDE(MSGFMT, msgfmt,
+        [test -n &quot;`$ac_dir/$ac_word --version 2&gt;&amp;1 | grep 'GNU gettext'`&quot;], msgfmt)
+    AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
+
+     if test -z &quot;`$GMSGFMT --version 2&gt;&amp;1 | grep 'GNU gettext'`&quot;; then
+        AC_MSG_RESULT([found msgfmt program is not GNU msgfmt; ignore it])
+        GMSGFMT=&quot;:&quot;
+      fi
+      MSGFMT=$GMSGFMT
+      AC_SUBST(GMSGFMT)
+      AC_SUBST(MSGFMT)
+
+      AM_PATH_PROG_WITH_TEST_KDE(XGETTEXT, xgettext,
+	[test -z &quot;`$ac_dir/$ac_word -h 2&gt;&amp;1 | grep '(HELP)'`&quot;], :)
+
+      dnl Test whether we really found GNU xgettext.
+      if test &quot;$XGETTEXT&quot; != &quot;:&quot;; then
+	dnl If it is no GNU xgettext we define it as : so that the
+	dnl Makefiles still can work.
+	if $XGETTEXT --omit-header /dev/null 2&gt; /dev/null; then
+	  : ;
+	else
+	  AC_MSG_RESULT(
+	    [found xgettext programs is not GNU xgettext; ignore it])
+	  XGETTEXT=&quot;:&quot;
+	fi
+      fi
+     AC_SUBST(XGETTEXT)
+
+  ])
+
+# Search path for a program which passes the given test.
+# Ulrich Drepper &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">drepper at cygnus.com</A>&gt;, 1996.
+
+# serial 1
+# Stephan Kulow: I appended a _KDE against name conflicts
+
+dnl AM_PATH_PROG_WITH_TEST_KDE(VARIABLE, PROG-TO-CHECK-FOR,
+dnl   TEST-PERFORMED-ON-FOUND_PROGRAM [, VALUE-IF-NOT-FOUND [, PATH]])
+AC_DEFUN([AM_PATH_PROG_WITH_TEST_KDE],
+[# Extract the first word of &quot;$2&quot;, so it can be a program name with args.
+set dummy $2; ac_word=[$]2
+AC_MSG_CHECKING([for $ac_word])
+AC_CACHE_VAL(ac_cv_path_$1,
+[case &quot;[$]$1&quot; in
+  /*)
+  ac_cv_path_$1=&quot;[$]$1&quot; # Let the user override the test with a path.
+  ;;
+  *)
+  IFS=&quot;${IFS= 	}&quot;; ac_save_ifs=&quot;$IFS&quot;; IFS=&quot;${IFS}:&quot;
+  for ac_dir in ifelse([$5], , $PATH, [$5]); do
+    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
+    if test -f $ac_dir/$ac_word; then
+      if [$3]; then
+	ac_cv_path_$1=&quot;$ac_dir/$ac_word&quot;
+	break
+      fi
+    fi
+  done
+  IFS=&quot;$ac_save_ifs&quot;
+dnl If no 4th arg is given, leave the cache variable unset,
+dnl so AC_PATH_PROGS will keep looking.
+ifelse([$4], , , [  test -z &quot;[$]ac_cv_path_$1&quot; &amp;&amp; ac_cv_path_$1=&quot;$4&quot;
+])dnl
+  ;;
+esac])dnl
+$1=&quot;$ac_cv_path_$1&quot;
+if test -n &quot;[$]$1&quot;; then
+  AC_MSG_RESULT([$]$1)
+else
+  AC_MSG_RESULT(no)
+fi
+AC_SUBST($1)dnl
+])
+
+
+# Check whether LC_MESSAGES is available in &lt;locale.h&gt;.
+# Ulrich Drepper &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">drepper at cygnus.com</A>&gt;, 1995.
+
+# serial 1
+
+AC_DEFUN([AM_LC_MESSAGES],
+  [if test $ac_cv_header_locale_h = yes; then
+    AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,
+      [AC_TRY_LINK([#include &lt;locale.h&gt;], [return LC_MESSAGES],
+       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])
+    if test $am_cv_val_LC_MESSAGES = yes; then
+      AC_DEFINE(HAVE_LC_MESSAGES, 1, [Define if your locale.h file contains LC_MESSAGES])
+    fi
+  fi])
+
+dnl From Jim Meyering.
+dnl FIXME: migrate into libit.
+
+AC_DEFUN([AM_FUNC_OBSTACK],
+[AC_CACHE_CHECK([for obstacks], am_cv_func_obstack,
+ [AC_TRY_LINK([#include &quot;obstack.h&quot;],
+	      [struct obstack *mem;obstack_free(mem,(char *) 0)],
+	      am_cv_func_obstack=yes,
+	      am_cv_func_obstack=no)])
+ if test $am_cv_func_obstack = yes; then
+   AC_DEFINE(HAVE_OBSTACK)
+ else
+   LIBOBJS=&quot;$LIBOBJS obstack.o&quot;
+ fi
+])
+
+dnl From Jim Meyering.  Use this if you use the GNU error.[ch].
+dnl FIXME: Migrate into libit
+
+AC_DEFUN([AM_FUNC_ERROR_AT_LINE],
+[AC_CACHE_CHECK([for error_at_line], am_cv_lib_error_at_line,
+ [AC_TRY_LINK([],[error_at_line(0, 0, &quot;&quot;, 0, &quot;&quot;);],
+              am_cv_lib_error_at_line=yes,
+	      am_cv_lib_error_at_line=no)])
+ if test $am_cv_lib_error_at_line = no; then
+   LIBOBJS=&quot;$LIBOBJS error.o&quot;
+ fi
+ AC_SUBST(LIBOBJS)dnl
+])
+
+# Macro to add for using GNU gettext.
+# Ulrich Drepper &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">drepper at cygnus.com</A>&gt;, 1995.
+
+# serial 1
+# Stephan Kulow: I put a KDE in it to avoid name conflicts
+
+AC_DEFUN([AM_KDE_GNU_GETTEXT],
+  [AC_REQUIRE([AC_PROG_MAKE_SET])dnl
+   AC_REQUIRE([AC_PROG_RANLIB])dnl
+   AC_REQUIRE([AC_HEADER_STDC])dnl
+   AC_REQUIRE([AC_TYPE_OFF_T])dnl
+   AC_REQUIRE([AC_TYPE_SIZE_T])dnl
+   AC_REQUIRE([AC_FUNC_ALLOCA])dnl
+   AC_REQUIRE([AC_FUNC_MMAP])dnl
+   AC_REQUIRE([AM_KDE_WITH_NLS])dnl
+   AC_CHECK_HEADERS([limits.h locale.h nl_types.h string.h values.h alloca.h])
+   AC_CHECK_FUNCS([getcwd munmap putenv setlocale strchr strcasecmp \
+__argz_count __argz_stringify __argz_next])
+
+   AC_MSG_CHECKING(for stpcpy)
+   AC_CACHE_VAL(kde_cv_func_stpcpy,
+   [
+   kde_safe_cxxflags=$CXXFLAGS
+   CXXFLAGS=&quot;-Werror&quot;
+   AC_LANG_SAVE
+   AC_LANG_CPLUSPLUS
+   AC_TRY_COMPILE([
+   #include &lt;string.h&gt;
+   ],
+   [
+   char buffer[200];
+   stpcpy(buffer, buffer);
+   ],
+   kde_cv_func_stpcpy=yes,
+   kde_cv_func_stpcpy=no)
+   AC_LANG_RESTORE
+   CXXFLAGS=$kde_safe_cxxflags
+   ])
+   AC_MSG_RESULT($kde_cv_func_stpcpy)
+   if eval &quot;test \&quot;`echo $kde_cv_func_stpcpy`\&quot; = yes&quot;; then
+     AC_DEFINE(HAVE_STPCPY, 1, [Define if you have stpcpy])
+   fi
+
+   AM_LC_MESSAGES
+
+   if test &quot;x$CATOBJEXT&quot; != &quot;x&quot;; then
+     if test &quot;x$ALL_LINGUAS&quot; = &quot;x&quot;; then
+       LINGUAS=
+     else
+       AC_MSG_CHECKING(for catalogs to be installed)
+       NEW_LINGUAS=
+       for lang in ${LINGUAS=$ALL_LINGUAS}; do
+         case &quot;$ALL_LINGUAS&quot; in
+          *$lang*) NEW_LINGUAS=&quot;$NEW_LINGUAS $lang&quot; ;;
+         esac
+       done
+       LINGUAS=$NEW_LINGUAS
+       AC_MSG_RESULT($LINGUAS)
+     fi
+
+     dnl Construct list of names of catalog files to be constructed.
+     if test -n &quot;$LINGUAS&quot;; then
+       for lang in $LINGUAS; do CATALOGS=&quot;$CATALOGS $lang$CATOBJEXT&quot;; done
+     fi
+   fi
+
+  ])
+
+AC_DEFUN([AC_HAVE_XPM],
+ [AC_REQUIRE_CPP()dnl
+  AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+
+ test -z &quot;$XPM_LDFLAGS&quot; &amp;&amp; XPM_LDFLAGS=
+ test -z &quot;$XPM_INCLUDE&quot; &amp;&amp; XPM_INCLUDE=
+
+ AC_ARG_WITH(xpm,AC_HELP_STRING([--without-xpm],[disable color pixmap XPM tests]),
+	xpm_test=$withval, xpm_test=&quot;yes&quot;)
+ if test &quot;x$xpm_test&quot; = xno; then
+   ac_cv_have_xpm=no
+ else
+   AC_MSG_CHECKING(for XPM)
+   AC_CACHE_VAL(ac_cv_have_xpm,
+   [
+    ac_save_ldflags=&quot;$LDFLAGS&quot;
+    ac_save_cflags=&quot;$CFLAGS&quot;
+    if test &quot;x$kde_use_qt_emb&quot; != &quot;xyes&quot; &amp;&amp; test &quot;x$kde_use_qt_mac&quot; != &quot;xyes&quot;; then
+      LDFLAGS=&quot;$LDFLAGS $X_LDFLAGS $USER_LDFLAGS $LDFLAGS $XPM_LDFLAGS $all_libraries -lXpm -lX11 -lXext $LIBZ $LIBSOCKET&quot;
+    else
+      LDFLAGS=&quot;$LDFLAGS $X_LDFLAGS $USER_LDFLAGS $LDFLAGS $XPM_LDFLAGS $all_libraries -lXpm $LIBZ $LIBSOCKET&quot;
+    fi
+    CFLAGS=&quot;$CFLAGS $X_INCLUDES $USER_INCLUDES&quot;
+    test -n &quot;$XPM_INCLUDE&quot; &amp;&amp; CFLAGS=&quot;-I$XPM_INCLUDE $CFLAGS&quot;
+    AC_TRY_LINK([#include &lt;X11/xpm.h&gt;],[],
+	ac_cv_have_xpm=&quot;yes&quot;,ac_cv_have_xpm=&quot;no&quot;)
+    LDFLAGS=&quot;$ac_save_ldflags&quot;
+    CFLAGS=&quot;$ac_save_cflags&quot;
+   ])dnl
+
+  if test &quot;$ac_cv_have_xpm&quot; = no; then
+    AC_MSG_RESULT(no)
+    XPM_LDFLAGS=&quot;&quot;
+    XPMINC=&quot;&quot;
+    $2
+  else
+    AC_DEFINE(HAVE_XPM, 1, [Define if you have XPM support])
+    if test &quot;$XPM_LDFLAGS&quot; = &quot;&quot;; then
+       XPMLIB='-lXpm $(LIB_X11)'
+    else
+       XPMLIB=&quot;-L$XPM_LDFLAGS -lXpm &quot;'$(LIB_X11)'
+    fi
+    if test &quot;$XPM_INCLUDE&quot; = &quot;&quot;; then
+       XPMINC=&quot;&quot;
+    else
+       XPMINC=&quot;-I$XPM_INCLUDE&quot;
+    fi
+    AC_MSG_RESULT(yes)
+    $1
+  fi
+ fi
+ AC_SUBST(XPMINC)
+ AC_SUBST(XPMLIB)
+])
+
+AC_DEFUN([AC_HAVE_DPMS],
+ [AC_REQUIRE_CPP()dnl
+  AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+
+ test -z &quot;$DPMS_LDFLAGS&quot; &amp;&amp; DPMS_LDFLAGS=
+ test -z &quot;$DPMS_INCLUDE&quot; &amp;&amp; DPMS_INCLUDE=
+ DPMS_LIB=
+
+ AC_ARG_WITH(dpms,AC_HELP_STRING([--without-dpms],[disable DPMS power saving]),
+	dpms_test=$withval, dpms_test=&quot;yes&quot;)
+ if test &quot;x$dpms_test&quot; = xno; then
+   ac_cv_have_dpms=no
+ else
+   AC_MSG_CHECKING(for DPMS)
+   dnl Note: ac_cv_have_dpms can be no, yes, or -lXdpms.
+   dnl 'yes' means DPMS_LIB=&quot;&quot;, '-lXdpms' means DPMS_LIB=&quot;-lXdpms&quot;.
+   AC_CACHE_VAL(ac_cv_have_dpms,
+   [
+    if test &quot;x$kde_use_qt_emb&quot; = &quot;xyes&quot; || test &quot;x$kde_use_qt_mac&quot; = &quot;xyes&quot;; then
+      AC_MSG_RESULT(no)
+      ac_cv_have_dpms=&quot;no&quot;
+    else
+      ac_save_ldflags=&quot;$LDFLAGS&quot;
+      ac_save_cflags=&quot;$CFLAGS&quot;
+      ac_save_libs=&quot;$LIBS&quot;
+      LDFLAGS=&quot;$LDFLAGS $DPMS_LDFLAGS $all_libraries -lX11 -lXext $LIBSOCKET&quot;
+      CFLAGS=&quot;$CFLAGS $X_INCLUDES&quot;
+      test -n &quot;$DPMS_INCLUDE&quot; &amp;&amp; CFLAGS=&quot;-I$DPMS_INCLUDE $CFLAGS&quot;
+      AC_TRY_LINK([
+	  #include &lt;X11/Xproto.h&gt;
+	  #include &lt;X11/X.h&gt;
+	  #include &lt;X11/Xlib.h&gt;
+	  #include &lt;X11/extensions/dpms.h&gt;
+	  int foo_test_dpms()
+	  { return DPMSSetTimeouts( 0, 0, 0, 0 ); }],[],
+	  ac_cv_have_dpms=&quot;yes&quot;, [
+              LDFLAGS=&quot;$ac_save_ldflags&quot;
+              CFLAGS=&quot;$ac_save_cflags&quot;
+              LDFLAGS=&quot;$LDFLAGS $DPMS_LDFLAGS $all_libraries -lX11 -lXext $LIBSOCKET&quot;
+              LIBS=&quot;$LIBS -lXdpms&quot;
+              CFLAGS=&quot;$CFLAGS $X_INCLUDES&quot;
+              test -n &quot;$DPMS_INCLUDE&quot; &amp;&amp; CFLAGS=&quot;-I$DPMS_INCLUDE $CFLAGS&quot;
+              AC_TRY_LINK([
+	          #include &lt;X11/Xproto.h&gt;
+        	  #include &lt;X11/X.h&gt;
+        	  #include &lt;X11/Xlib.h&gt;
+        	  #include &lt;X11/extensions/dpms.h&gt;
+        	  int foo_test_dpms()
+        	  { return DPMSSetTimeouts( 0, 0, 0, 0 ); }],[],
+        	  [
+                  ac_cv_have_dpms=&quot;-lXdpms&quot;
+                  ],ac_cv_have_dpms=&quot;no&quot;)
+              ])
+      LDFLAGS=&quot;$ac_save_ldflags&quot;
+      CFLAGS=&quot;$ac_save_cflags&quot;
+      LIBS=&quot;$ac_save_libs&quot;
+    fi
+   ])dnl
+
+  if test &quot;$ac_cv_have_dpms&quot; = no; then
+    AC_MSG_RESULT(no)
+    DPMS_LDFLAGS=&quot;&quot;
+    DPMSINC=&quot;&quot;
+    $2
+  else
+    AC_DEFINE(HAVE_DPMS, 1, [Define if you have DPMS support])
+    if test &quot;$ac_cv_have_dpms&quot; = &quot;-lXdpms&quot;; then
+       DPMS_LIB=&quot;-lXdpms&quot;
+    fi
+    if test &quot;$DPMS_LDFLAGS&quot; = &quot;&quot;; then
+       DPMSLIB=&quot;$DPMS_LIB &quot;'$(LIB_X11)'
+    else
+       DPMSLIB=&quot;$DPMS_LDFLAGS $DPMS_LIB &quot;'$(LIB_X11)'
+    fi
+    if test &quot;$DPMS_INCLUDE&quot; = &quot;&quot;; then
+       DPMSINC=&quot;&quot;
+    else
+       DPMSINC=&quot;-I$DPMS_INCLUDE&quot;
+    fi
+    AC_MSG_RESULT(yes)
+    $1
+  fi
+ fi
+ ac_save_cflags=&quot;$CFLAGS&quot;
+ CFLAGS=&quot;$CFLAGS $X_INCLUDES&quot;
+ test -n &quot;$DPMS_INCLUDE&quot; &amp;&amp; CFLAGS=&quot;-I$DPMS_INCLUDE $CFLAGS&quot;
+ AH_TEMPLATE(HAVE_DPMSCAPABLE_PROTO,
+   [Define if you have the DPMSCapable prototype in &lt;X11/extensions/dpms.h&gt;])
+ AC_CHECK_DECL(DPMSCapable,
+   AC_DEFINE(HAVE_DPMSCAPABLE_PROTO),,
+   [#include &lt;X11/Xlib.h&gt;
+   #include &lt;X11/extensions/dpms.h&gt;])
+ AH_TEMPLATE(HAVE_DPMSINFO_PROTO,
+   [Define if you have the DPMSInfo prototype in &lt;X11/extensions/dpms.h&gt;])
+ AC_CHECK_DECL(DPMSInfo,
+   AC_DEFINE(HAVE_DPMSINFO_PROTO),,
+   [#include &lt;X11/Xlib.h&gt;
+   #include &lt;X11/extensions/dpms.h&gt;])
+ CFLAGS=&quot;$ac_save_cflags&quot;
+ AC_SUBST(DPMSINC)
+ AC_SUBST(DPMSLIB)
+])
+
+AC_DEFUN([AC_HAVE_GL],
+ [AC_REQUIRE_CPP()dnl
+  AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+
+ test -z &quot;$GL_LDFLAGS&quot; &amp;&amp; GL_LDFLAGS=
+ test -z &quot;$GL_INCLUDE&quot; &amp;&amp; GL_INCLUDE=
+
+ AC_ARG_WITH(gl,AC_HELP_STRING([--without-gl],[disable 3D GL modes]),
+	gl_test=$withval, gl_test=&quot;yes&quot;)
+ if test &quot;x$kde_use_qt_emb&quot; = &quot;xyes&quot;; then
+   # GL and Qt Embedded is a no-go for now.
+   ac_cv_have_gl=no
+ elif test &quot;x$gl_test&quot; = xno; then
+   ac_cv_have_gl=no
+ else
+   AC_MSG_CHECKING(for GL)
+   AC_CACHE_VAL(ac_cv_have_gl,
+   [
+    AC_LANG_SAVE
+    AC_LANG_CPLUSPLUS
+    ac_save_ldflags=$LDFLAGS
+    ac_save_cxxflags=$CXXFLAGS
+    ac_save_libs=$LIBS
+    LDFLAGS=&quot;$LDFLAGS $GL_LDFLAGS $X_LDFLAGS $all_libraries&quot;
+    LIBS=&quot;$LIBS -lGL -lGLU&quot;
+    test &quot;x$kde_use_qt_mac&quot; != xyes &amp;&amp; test &quot;x$kde_use_qt_emb&quot; != xyes &amp;&amp; LIBS=&quot;$LIBS -lX11&quot;
+    LIBS=&quot;$LIBS $LIB_XEXT -lm $LIBSOCKET&quot;
+    CXXFLAGS=&quot;$CFLAGS $X_INCLUDES&quot;
+    test -n &quot;$GL_INCLUDE&quot; &amp;&amp; CFLAGS=&quot;-I$GL_INCLUDE $CFLAGS&quot;
+    AC_TRY_LINK([#include &lt;GL/gl.h&gt;
+#include &lt;GL/glu.h&gt;
+], [],
+	ac_cv_have_gl=&quot;yes&quot;, ac_cv_have_gl=&quot;no&quot;)
+    AC_LANG_RESTORE
+    LDFLAGS=$ac_save_ldflags
+    CXXFLAGS=$ac_save_cxxflags
+    LIBS=$ac_save_libs
+   ])dnl
+
+  if test &quot;$ac_cv_have_gl&quot; = &quot;no&quot;; then
+    AC_MSG_RESULT(no)
+    GL_LDFLAGS=&quot;&quot;
+    GLINC=&quot;&quot;
+    $2
+  else
+    AC_DEFINE(HAVE_GL, 1, [Defines if you have GL (Mesa, OpenGL, ...)])
+    if test &quot;$GL_LDFLAGS&quot; = &quot;&quot;; then
+       GLLIB='-lGLU -lGL $(LIB_X11)'
+    else
+       GLLIB=&quot;$GL_LDFLAGS -lGLU -lGL &quot;'$(LIB_X11)'
+    fi
+    if test &quot;$GL_INCLUDE&quot; = &quot;&quot;; then
+       GLINC=&quot;&quot;
+    else
+       GLINC=&quot;-I$GL_INCLUDE&quot;
+    fi
+    AC_MSG_RESULT($ac_cv_have_gl)
+    $1
+  fi
+ fi
+ AC_SUBST(GLINC)
+ AC_SUBST(GLLIB)
+])
+
+
+ dnl shadow password and PAM magic - maintained by <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">ossi at kde.org</A>
+
+AC_DEFUN([KDE_PAM], [
+  AC_REQUIRE([KDE_CHECK_LIBDL])
+
+  want_pam=
+  AC_ARG_WITH(pam,
+    AC_HELP_STRING([--with-pam[=ARG]],[enable support for PAM: ARG=[yes|no|service name]]),
+    [ if test &quot;x$withval&quot; = &quot;xyes&quot;; then
+        want_pam=yes
+        pam_service=kde
+      elif test &quot;x$withval&quot; = &quot;xno&quot;; then
+        want_pam=no
+      else
+        want_pam=yes
+        pam_service=$withval
+      fi
+    ], [ pam_service=kde ])
+
+  use_pam=
+  PAMLIBS=
+  if test &quot;x$want_pam&quot; != xno; then
+    AC_CHECK_LIB(pam, pam_start, [
+      AC_CHECK_HEADER(security/pam_appl.h,
+        [ pam_header=security/pam_appl.h ],
+        [ AC_CHECK_HEADER(pam/pam_appl.h,
+            [ pam_header=pam/pam_appl.h ],
+            [
+    AC_MSG_WARN([PAM detected, but no headers found!
+Make sure you have the necessary development packages installed.])
+            ]
+          )
+        ]
+      )
+    ], , $LIBDL)
+    if test -z &quot;$pam_header&quot;; then
+      if test &quot;x$want_pam&quot; = xyes; then
+        AC_MSG_ERROR([--with-pam was specified, but cannot compile with PAM!])
+      fi
+    else
+      AC_DEFINE(HAVE_PAM, 1, [Defines if you have PAM (Pluggable Authentication Modules)])
+      PAMLIBS=&quot;$PAM_MISC_LIB -lpam $LIBDL&quot;
+      use_pam=yes
+
+      dnl darwin claims to be something special
+      if test &quot;$pam_header&quot; = &quot;pam/pam_appl.h&quot;; then
+        AC_DEFINE(HAVE_PAM_PAM_APPL_H, 1, [Define if your PAM headers are in pam/ instead of security/])
+      fi
+
+      dnl test whether struct pam_message is const (Linux) or not (Sun)
+      AC_MSG_CHECKING(for const pam_message)
+      AC_EGREP_HEADER([struct pam_message], $pam_header,
+        [ AC_EGREP_HEADER([const struct pam_message], $pam_header,
+                          [AC_MSG_RESULT([const: Linux-type PAM])],
+                          [AC_MSG_RESULT([nonconst: Sun-type PAM])
+                          AC_DEFINE(PAM_MESSAGE_NONCONST, 1, [Define if your PAM support takes non-const arguments (Solaris)])]
+                          )],
+        [AC_MSG_RESULT([not found - assume const, Linux-type PAM])])
+    fi
+  fi
+
+  AC_SUBST(PAMLIBS)
+])
+
+dnl DEF_PAM_SERVICE(arg name, full name, define name)
+AC_DEFUN([DEF_PAM_SERVICE], [
+  AC_ARG_WITH($1-pam,
+    AC_HELP_STRING([--with-$1-pam=[val]],[override PAM service from --with-pam for $2]),
+    [ if test &quot;x$use_pam&quot; = xyes; then
+        $3_PAM_SERVICE=$withval
+      else
+        AC_MSG_ERROR([Cannot use use --with-$1-pam, as no PAM was detected.
+You may want to enforce it by using --with-pam.])
+      fi
+    ],
+    [ if test &quot;x$use_pam&quot; = xyes; then
+        $3_PAM_SERVICE=&quot;$pam_service&quot;
+      fi
+    ])
+    if test -n &quot;$$3_PAM_SERVICE&quot;; then
+      AC_MSG_RESULT([The PAM service used by $2 will be $$3_PAM_SERVICE])
+      AC_DEFINE_UNQUOTED($3_PAM_SERVICE, &quot;$$3_PAM_SERVICE&quot;, [The PAM service to be used by $2])
+    fi
+    AC_SUBST($3_PAM_SERVICE)
+])
+
+AC_DEFUN([KDE_SHADOWPASSWD], [
+  AC_REQUIRE([KDE_PAM])
+
+  AC_CHECK_LIB(shadow, getspent,
+    [ LIBSHADOW=&quot;-lshadow&quot;
+      ac_use_shadow=yes
+    ],
+    [ dnl for UnixWare
+      AC_CHECK_LIB(gen, getspent,
+        [ LIBGEN=&quot;-lgen&quot;
+          ac_use_shadow=yes
+        ],
+        [ AC_CHECK_FUNC(getspent,
+            [ ac_use_shadow=yes ],
+            [ ac_use_shadow=no ])
+	])
+    ])
+  AC_SUBST(LIBSHADOW)
+  AC_SUBST(LIBGEN)
+
+  AC_MSG_CHECKING([for shadow passwords])
+
+  AC_ARG_WITH(shadow,
+    AC_HELP_STRING([--with-shadow],[If you want shadow password support]),
+    [ if test &quot;x$withval&quot; != &quot;xno&quot;; then
+        use_shadow=yes
+      else
+        use_shadow=no
+      fi
+    ], [
+      use_shadow=&quot;$ac_use_shadow&quot;
+    ])
+
+  if test &quot;x$use_shadow&quot; = xyes; then
+    AC_MSG_RESULT(yes)
+    AC_DEFINE(HAVE_SHADOW, 1, [Define if you use shadow passwords])
+  else
+    AC_MSG_RESULT(no)
+    LIBSHADOW=
+    LIBGEN=
+  fi
+
+  dnl finally make the relevant binaries setuid root, if we have shadow passwds.
+  dnl this still applies, if we could use it indirectly through pam.
+  if test &quot;x$use_shadow&quot; = xyes ||
+     ( test &quot;x$use_pam&quot; = xyes &amp;&amp; test &quot;x$ac_use_shadow&quot; = xyes ); then
+      case $host in
+      *-*-freebsd* | *-*-netbsd* | *-*-openbsd*)
+	SETUIDFLAGS=&quot;-m 4755 -o root&quot;;;
+      *)
+	SETUIDFLAGS=&quot;-m 4755&quot;;;
+      esac
+  fi
+  AC_SUBST(SETUIDFLAGS)
+
+])
+
+AC_DEFUN([KDE_PASSWDLIBS], [
+  AC_REQUIRE([KDE_MISC_TESTS]) dnl for LIBCRYPT
+  AC_REQUIRE([KDE_PAM])
+  AC_REQUIRE([KDE_SHADOWPASSWD])
+
+  if test &quot;x$use_pam&quot; = &quot;xyes&quot;; then
+    PASSWDLIBS=&quot;$PAMLIBS&quot;
+  else
+    PASSWDLIBS=&quot;$LIBCRYPT $LIBSHADOW $LIBGEN&quot;
+  fi
+
+  dnl FreeBSD uses a shadow-like setup, where /etc/passwd holds the users, but
+  dnl /etc/master.passwd holds the actual passwords.  /etc/master.passwd requires
+  dnl root to read, so kcheckpass needs to be root (even when using pam, since pam
+  dnl may need to read /etc/master.passwd).
+  case $host in
+  *-*-freebsd*)
+    SETUIDFLAGS=&quot;-m 4755 -o root&quot;
+    ;;
+  *)
+    ;;
+  esac
+
+  AC_SUBST(PASSWDLIBS)
+])
+
+AC_DEFUN([KDE_CHECK_LIBDL],
+[
+AC_CHECK_LIB(dl, dlopen, [
+LIBDL=&quot;-ldl&quot;
+ac_cv_have_dlfcn=yes
+])
+
+AC_CHECK_LIB(dld, shl_unload, [
+LIBDL=&quot;-ldld&quot;
+ac_cv_have_shload=yes
+])
+
+AC_SUBST(LIBDL)
+])
+
+AC_DEFUN([KDE_CHECK_DLOPEN],
+[
+KDE_CHECK_LIBDL
+AC_CHECK_HEADERS(dlfcn.h dl.h)
+if test &quot;$ac_cv_header_dlfcn_h&quot; = &quot;no&quot;; then
+  ac_cv_have_dlfcn=no
+fi
+
+if test &quot;$ac_cv_header_dl_h&quot; = &quot;no&quot;; then
+  ac_cv_have_shload=no
+fi
+
+dnl XXX why change enable_dlopen? its already set by autoconf's AC_ARG_ENABLE
+dnl (MM)
+AC_ARG_ENABLE(dlopen,
+AC_HELP_STRING([--disable-dlopen],[link statically [default=no]]),
+enable_dlopen=$enableval,
+enable_dlopen=yes)
+
+# override the user's opinion, if we know it better ;)
+if test &quot;$ac_cv_have_dlfcn&quot; = &quot;no&quot; &amp;&amp; test &quot;$ac_cv_have_shload&quot; = &quot;no&quot;; then
+  enable_dlopen=no
+fi
+
+if test &quot;$ac_cv_have_dlfcn&quot; = &quot;yes&quot;; then
+  AC_DEFINE_UNQUOTED(HAVE_DLFCN, 1, [Define if you have dlfcn])
+fi
+
+if test &quot;$ac_cv_have_shload&quot; = &quot;yes&quot;; then
+  AC_DEFINE_UNQUOTED(HAVE_SHLOAD, 1, [Define if you have shload])
+fi
+
+if test &quot;$enable_dlopen&quot; = no ; then
+  test -n &quot;$1&quot; &amp;&amp; eval $1
+else
+  test -n &quot;$2&quot; &amp;&amp; eval $2
+fi
+
+])
+
+AC_DEFUN([KDE_CHECK_DYNAMIC_LOADING],
+[
+KDE_CHECK_DLOPEN(libtool_enable_shared=yes, libtool_enable_static=no)
+KDE_PROG_LIBTOOL
+AC_MSG_CHECKING([dynamic loading])
+eval &quot;`egrep '^build_libtool_libs=' libtool`&quot;
+if test &quot;$build_libtool_libs&quot; = &quot;yes&quot; &amp;&amp; test &quot;$enable_dlopen&quot; = &quot;yes&quot;; then
+  dynamic_loading=yes
+  AC_DEFINE_UNQUOTED(HAVE_DYNAMIC_LOADING)
+else
+  dynamic_loading=no
+fi
+AC_MSG_RESULT($dynamic_loading)
+if test &quot;$dynamic_loading&quot; = &quot;yes&quot;; then
+  $1
+else
+  $2
+fi
+])
+
+AC_DEFUN([KDE_ADD_INCLUDES],
+[
+if test -z &quot;$1&quot;; then
+  test_include=&quot;Pix.h&quot;
+else
+  test_include=&quot;$1&quot;
+fi
+
+AC_MSG_CHECKING([for libg++ ($test_include)])
+
+AC_CACHE_VAL(kde_cv_libgpp_includes,
+[
+kde_cv_libgpp_includes=no
+
+   for ac_dir in               \
+                               \
+     /usr/include/g++          \
+     /usr/include              \
+     /usr/unsupported/include  \
+     /opt/include              \
+     $extra_include            \
+     ; \
+   do
+     if test -r &quot;$ac_dir/$test_include&quot;; then
+       kde_cv_libgpp_includes=$ac_dir
+       break
+     fi
+   done
+])
+
+AC_MSG_RESULT($kde_cv_libgpp_includes)
+if test &quot;$kde_cv_libgpp_includes&quot; != &quot;no&quot;; then
+  all_includes=&quot;-I$kde_cv_libgpp_includes $all_includes $USER_INCLUDES&quot;
+fi
+])
+])
+
+AC_DEFUN([KDE_CHECK_LIBPTHREAD],
+[
+  dnl This code is here specifically to handle the
+  dnl various flavors of threading library on FreeBSD
+  dnl 4-, 5-, and 6-, and the (weird) rules around it.
+  dnl There may be an environment PTHREAD_LIBS that
+  dnl specifies what to use; otherwise, search for it.
+  dnl -pthread is special cased and unsets LIBPTHREAD
+  dnl below if found.
+  LIBPTHREAD=&quot;&quot;
+
+  if test -n &quot;$PTHREAD_LIBS&quot;; then
+    if test &quot;x$PTHREAD_LIBS&quot; = &quot;x-pthread&quot; ; then
+      LIBPTHREAD=&quot;PTHREAD&quot;
+    else
+      PTHREAD_LIBS_save=&quot;$PTHREAD_LIBS&quot;
+      PTHREAD_LIBS=`echo &quot;$PTHREAD_LIBS_save&quot; | sed -e 's,^-l,,g'`
+      AC_MSG_CHECKING([for pthread_create in $PTHREAD_LIBS])
+      KDE_CHECK_LIB($PTHREAD_LIBS, pthread_create, [
+          LIBPTHREAD=&quot;$PTHREAD_LIBS_save&quot;])
+      PTHREAD_LIBS=&quot;$PTHREAD_LIBS_save&quot;
+    fi
+  fi
+
+  dnl Is this test really needed, in the face of the Tru64 test below?
+  if test -z &quot;$LIBPTHREAD&quot;; then
+    AC_CHECK_LIB(pthread, pthread_create, [LIBPTHREAD=&quot;-lpthread&quot;])
+  fi
+
+  dnl This is a special Tru64 check, see BR 76171 issue #18.
+  if test -z &quot;$LIBPTHREAD&quot; ; then
+    AC_MSG_CHECKING([for pthread_create in -lpthread])
+    kde_safe_libs=$LIBS
+    LIBS=&quot;$LIBS -lpthread&quot;
+    AC_TRY_LINK([#include &lt;pthread.h&gt;],[(void)pthread_create(0,0,0,0);],[
+        AC_MSG_RESULT(yes)
+        LIBPTHREAD=&quot;-lpthread&quot;],[
+	AC_MSG_RESULT(no)])
+    LIBS=$kde_safe_libs
+  fi
+
+  dnl Un-special-case for FreeBSD.
+  if test &quot;x$LIBPTHREAD&quot; = &quot;xPTHREAD&quot; ; then
+    LIBPTHREAD=&quot;&quot;
+  fi
+
+  AC_SUBST(LIBPTHREAD)
+])
+
+AC_DEFUN([KDE_CHECK_PTHREAD_OPTION],
+[
+      USE_THREADS=&quot;&quot;
+      if test -z &quot;$LIBPTHREAD&quot;; then
+        KDE_CHECK_COMPILER_FLAG(pthread,
+	  [USE_THREADS=&quot;-D_THREAD_SAFE&quot;
+	  CXXFLAGS=&quot;$CXXFLAGS -pthread&quot;
+	  ])
+      fi
+
+    AH_VERBATIM(__svr_define, [
+#if defined(__SVR4) &amp;&amp; !defined(__svr4__)
+#define __svr4__ 1
+#endif
+])
+    case $host_os in
+ 	solaris*)
+		KDE_CHECK_COMPILER_FLAG(mt, [USE_THREADS=&quot;-mt&quot;])
+                CPPFLAGS=&quot;$CPPFLAGS -D_REENTRANT -D_POSIX_PTHREAD_SEMANTICS -DUSE_SOLARIS -DSVR4&quot;
+    		;;
+        freebsd*)
+                CPPFLAGS=&quot;$CPPFLAGS -D_THREAD_SAFE $PTHREAD_CFLAGS&quot;
+                ;;
+        aix*)
+                CPPFLAGS=&quot;$CPPFLAGS -D_THREAD_SAFE&quot;
+                LIBPTHREAD=&quot;$LIBPTHREAD -lc_r&quot;
+                ;;
+        linux*) CPPFLAGS=&quot;$CPPFLAGS -D_REENTRANT&quot;
+                if test &quot;$CXX&quot; = &quot;KCC&quot;; then
+                  CXXFLAGS=&quot;$CXXFLAGS --thread_safe&quot;
+		  NOOPT_CXXFLAGS=&quot;$NOOPT_CXXFLAGS --thread_safe&quot;
+                fi
+                ;;
+	*)
+		;;
+    esac
+    AC_SUBST(USE_THREADS)
+    AC_SUBST(LIBPTHREAD)
+])
+
+AC_DEFUN([KDE_CHECK_THREADING],
+[
+  AC_REQUIRE([KDE_CHECK_LIBPTHREAD])
+  AC_REQUIRE([KDE_CHECK_PTHREAD_OPTION])
+  dnl default is yes if libpthread is found and no if no libpthread is available
+  if test -z &quot;$LIBPTHREAD&quot;; then
+    if test -z &quot;$USE_THREADS&quot;; then
+      kde_check_threading_default=no
+    else
+      kde_check_threading_default=yes
+    fi
+  else
+    kde_check_threading_default=yes
+  fi
+  AC_ARG_ENABLE(threading,AC_HELP_STRING([--disable-threading],[disables threading even if libpthread found]),
+   kde_use_threading=$enableval, kde_use_threading=$kde_check_threading_default)
+  if test &quot;x$kde_use_threading&quot; = &quot;xyes&quot;; then
+    AC_DEFINE(HAVE_LIBPTHREAD, 1, [Define if you have a working libpthread (will enable threaded code)])
+  fi
+])
+
+AC_DEFUN([KDE_TRY_LINK_PYTHON],
+[
+if test &quot;$kde_python_link_found&quot; = no; then
+
+if test &quot;$1&quot; = normal; then
+  AC_MSG_CHECKING(if a Python application links)
+else
+  AC_MSG_CHECKING(if Python depends on $2)
+fi
+
+AC_CACHE_VAL(kde_cv_try_link_python_$1,
+[
+kde_save_cflags=&quot;$CFLAGS&quot;
+CFLAGS=&quot;$CFLAGS $PYTHONINC&quot;
+kde_save_libs=&quot;$LIBS&quot;
+LIBS=&quot;$LIBS $LIBPYTHON $2 $LIBDL $LIBSOCKET&quot;
+kde_save_ldflags=&quot;$LDFLAGS&quot;
+LDFLAGS=&quot;$LDFLAGS $PYTHONLIB&quot;
+
+AC_TRY_LINK(
+[
+#include &lt;Python.h&gt;
+],[
+	PySys_SetArgv(1, 0);
+],
+	[kde_cv_try_link_python_$1=yes],
+	[kde_cv_try_link_python_$1=no]
+)
+CFLAGS=&quot;$kde_save_cflags&quot;
+LIBS=&quot;$kde_save_libs&quot;
+LDFLAGS=&quot;$kde_save_ldflags&quot;
+])
+
+if test &quot;$kde_cv_try_link_python_$1&quot; = &quot;yes&quot;; then
+  AC_MSG_RESULT(yes)
+  kde_python_link_found=yes
+  if test ! &quot;$1&quot; = normal; then
+    LIBPYTHON=&quot;$LIBPYTHON $2&quot;
+  fi
+  $3
+else
+  AC_MSG_RESULT(no)
+  $4
+fi
+
+fi
+
+])
+
+AC_DEFUN([KDE_CHECK_PYTHON_DIR],
+[
+AC_MSG_CHECKING([for Python directory])
+
+AC_CACHE_VAL(kde_cv_pythondir,
+[
+  if test -z &quot;$PYTHONDIR&quot;; then
+    kde_cv_pythondir=/usr/local
+  else
+    kde_cv_pythondir=&quot;$PYTHONDIR&quot;
+  fi
+])
+
+AC_ARG_WITH(pythondir,
+AC_HELP_STRING([--with-pythondir=pythondir],[use python installed in pythondir]),
+[
+  ac_python_dir=$withval
+], ac_python_dir=$kde_cv_pythondir
+)
+
+AC_MSG_RESULT($ac_python_dir)
+])
+
+AC_DEFUN([KDE_CHECK_PYTHON_INTERN],
+[
+AC_REQUIRE([KDE_CHECK_LIBDL])
+AC_REQUIRE([KDE_CHECK_LIBPTHREAD])
+AC_REQUIRE([KDE_CHECK_PYTHON_DIR])
+
+if test -z &quot;$1&quot;; then
+  version=&quot;1.5&quot;
+else
+  version=&quot;$1&quot;
+fi
+
+AC_MSG_CHECKING([for Python$version])
+
+python_incdirs=&quot;$ac_python_dir/include /usr/include /usr/local/include/ $kde_extra_includes&quot;
+AC_FIND_FILE(Python.h, $python_incdirs, python_incdir)
+if test ! -r $python_incdir/Python.h; then
+  AC_FIND_FILE(python$version/Python.h, $python_incdirs, python_incdir)
+  python_incdir=$python_incdir/python$version
+  if test ! -r $python_incdir/Python.h; then
+    python_incdir=no
+  fi
+fi
+
+PYTHONINC=-I$python_incdir
+
+python_libdirs=&quot;$ac_python_dir/lib$kdelibsuff /usr/lib$kdelibsuff /usr/local /usr/lib$kdelibsuff $kde_extra_libs&quot;
+AC_FIND_FILE(libpython$version.so, $python_libdirs, python_libdir)
+if test ! -r $python_libdir/libpython$version.so; then
+  AC_FIND_FILE(libpython$version.a, $python_libdirs, python_libdir)
+  if test ! -r $python_libdir/libpython$version.a; then
+    AC_FIND_FILE(python$version/config/libpython$version.a, $python_libdirs, python_libdir)
+    python_libdir=$python_libdir/python$version/config
+    if test ! -r $python_libdir/libpython$version.a; then
+      python_libdir=no
+    fi
+  fi
+fi
+
+PYTHONLIB=-L$python_libdir
+kde_orig_LIBPYTHON=$LIBPYTHON
+if test -z &quot;$LIBPYTHON&quot;; then
+  LIBPYTHON=-lpython$version
+fi
+
+AC_FIND_FILE(python$version/copy.py, $python_libdirs, python_moddir)
+python_moddir=$python_moddir/python$version
+if test ! -r $python_moddir/copy.py; then
+  python_moddir=no
+fi
+
+PYTHONMODDIR=$python_moddir
+
+AC_MSG_RESULT(header $python_incdir library $python_libdir modules $python_moddir)
+
+if test x$python_incdir = xno ||  test x$python_libdir = xno ||  test x$python_moddir = xno; then
+   LIBPYTHON=$kde_orig_LIBPYTHON
+   test &quot;x$PYTHONLIB&quot; = &quot;x-Lno&quot; &amp;&amp; PYTHONLIB=&quot;&quot;
+   test &quot;x$PYTHONINC&quot; = &quot;x-Ino&quot; &amp;&amp; PYTHONINC=&quot;&quot;
+   $2
+else
+  dnl Note: this test is very weak
+  kde_python_link_found=no
+  KDE_TRY_LINK_PYTHON(normal)
+  KDE_TRY_LINK_PYTHON(m, -lm)
+  KDE_TRY_LINK_PYTHON(pthread, $LIBPTHREAD)
+  KDE_TRY_LINK_PYTHON(tcl, -ltcl)
+  KDE_TRY_LINK_PYTHON(db2, -ldb2)
+  KDE_TRY_LINK_PYTHON(m_and_thread, [$LIBPTHREAD -lm])
+  KDE_TRY_LINK_PYTHON(m_and_thread_and_util, [$LIBPTHREAD -lm -lutil])
+  KDE_TRY_LINK_PYTHON(m_and_thread_and_db3, [$LIBPTHREAD -lm -ldb-3 -lutil])
+  KDE_TRY_LINK_PYTHON(pthread_and_db3, [$LIBPTHREAD -ldb-3])
+  KDE_TRY_LINK_PYTHON(m_and_thread_and_db, [$LIBPTHREAD -lm -ldb -ltermcap -lutil])
+  KDE_TRY_LINK_PYTHON(pthread_and_dl, [$LIBPTHREAD $LIBDL -lutil -lreadline -lncurses -lm])
+  KDE_TRY_LINK_PYTHON(pthread_and_panel_curses, [$LIBPTHREAD $LIBDL -lm -lpanel -lcurses])
+  KDE_TRY_LINK_PYTHON(m_and_thread_and_db_special, [$LIBPTHREAD -lm -ldb -lutil], [],
+	[AC_MSG_WARN([it seems, Python depends on another library.
+    Please set LIBPYTHON to '-lpython$version -lotherlib' before calling configure to fix this
+    and contact the authors to let them know about this problem])
+	])
+
+  LIBPYTHON=&quot;$LIBPYTHON $LIBDL $LIBSOCKET&quot;
+  AC_SUBST(PYTHONINC)
+  AC_SUBST(PYTHONLIB)
+  AC_SUBST(LIBPYTHON)
+  AC_SUBST(PYTHONMODDIR)
+  AC_DEFINE(HAVE_PYTHON, 1, [Define if you have the development files for python])
+fi
+
+])
+
+
+AC_DEFUN([KDE_CHECK_PYTHON],
+[
+  KDE_CHECK_PYTHON_INTERN(&quot;2.4&quot;,
+   [KDE_CHECK_PYTHON_INTERN(&quot;2.3&quot;,
+     [KDE_CHECK_PYTHON_INTERN(&quot;2.2&quot;,
+       [KDE_CHECK_PYTHON_INTERN(&quot;2.1&quot;,
+         [KDE_CHECK_PYTHON_INTERN(&quot;2.0&quot;,
+           [KDE_CHECK_PYTHON_INTERN($1, $2) ])
+         ])
+       ])
+     ])
+  ])
+])
+
+AC_DEFUN([KDE_CHECK_STL],
+[
+    AC_LANG_SAVE
+    AC_LANG_CPLUSPLUS
+    ac_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+    CXXFLAGS=&quot;`echo $CXXFLAGS | sed s/-fno-exceptions//`&quot;
+
+    AC_MSG_CHECKING([if C++ programs can be compiled])
+    AC_CACHE_VAL(kde_cv_stl_works,
+    [
+      AC_TRY_COMPILE([
+#include &lt;string&gt;
+using namespace std;
+],[
+  string astring=&quot;Hallo Welt.&quot;;
+  astring.erase(0, 6); // now astring is &quot;Welt&quot;
+  return 0;
+], kde_cv_stl_works=yes,
+   kde_cv_stl_works=no)
+])
+
+   AC_MSG_RESULT($kde_cv_stl_works)
+
+   if test &quot;$kde_cv_stl_works&quot; = &quot;yes&quot;; then
+     # back compatible
+	 AC_DEFINE_UNQUOTED(HAVE_SGI_STL, 1, [Define if you have a STL implementation by SGI])
+   else
+	 AC_MSG_ERROR([Your Installation isn't able to compile simple C++ programs.
+Check config.log for details - if you're using a Linux distribution you might miss
+a package named similar to libstdc++-dev.])
+   fi
+
+   CXXFLAGS=&quot;$ac_save_CXXFLAGS&quot;
+   AC_LANG_RESTORE
+])
+
+AC_DEFUN([AC_FIND_QIMGIO],
+   [AC_REQUIRE([AC_FIND_JPEG])
+AC_REQUIRE([KDE_CHECK_EXTRA_LIBS])
+AC_MSG_CHECKING([for qimgio])
+AC_CACHE_VAL(ac_cv_lib_qimgio,
+[
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+ac_save_LIBS=&quot;$LIBS&quot;
+ac_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+LIBS=&quot;$all_libraries -lqimgio -lpng -lz $LIBJPEG $LIBQT&quot;
+CXXFLAGS=&quot;$CXXFLAGS -I$qt_incdir $all_includes&quot;
+AC_TRY_RUN(dnl
+[
+#include &lt;qimageio.h&gt;
+#include &lt;qstring.h&gt;
+int main() {
+		QString t = &quot;hallo&quot;;
+		t.fill('t');
+		qInitImageIO();
+}
+],
+            ac_cv_lib_qimgio=yes,
+            ac_cv_lib_qimgio=no,
+	    ac_cv_lib_qimgio=no)
+LIBS=&quot;$ac_save_LIBS&quot;
+CXXFLAGS=&quot;$ac_save_CXXFLAGS&quot;
+AC_LANG_RESTORE
+])dnl
+if eval &quot;test \&quot;`echo $ac_cv_lib_qimgio`\&quot; = yes&quot;; then
+  LIBQIMGIO=&quot;-lqimgio -lpng -lz $LIBJPEG&quot;
+  AC_MSG_RESULT(yes)
+  AC_DEFINE_UNQUOTED(HAVE_QIMGIO, 1, [Define if you have the Qt extension qimgio available])
+  AC_SUBST(LIBQIMGIO)
+else
+  AC_MSG_RESULT(not found)
+fi
+])
+
+AC_DEFUN([AM_DISABLE_LIBRARIES],
+[
+    AC_PROVIDE([AM_ENABLE_STATIC])
+    AC_PROVIDE([AM_ENABLE_SHARED])
+    enable_static=no
+    enable_shared=yes
+])
+
+
+AC_DEFUN([AC_CHECK_UTMP_FILE],
+[
+    AC_MSG_CHECKING([for utmp file])
+
+    AC_CACHE_VAL(kde_cv_utmp_file,
+    [
+    kde_cv_utmp_file=no
+
+    for ac_file in    \
+                      \
+	/var/run/utmp \
+	/var/adm/utmp \
+	/etc/utmp     \
+     ; \
+    do
+     if test -r &quot;$ac_file&quot;; then
+       kde_cv_utmp_file=$ac_file
+       break
+     fi
+    done
+    ])
+
+    if test &quot;$kde_cv_utmp_file&quot; != &quot;no&quot;; then
+	AC_DEFINE_UNQUOTED(UTMP, &quot;$kde_cv_utmp_file&quot;, [Define the file for utmp entries])
+	$1
+	AC_MSG_RESULT($kde_cv_utmp_file)
+    else
+    	$2
+	AC_MSG_RESULT([non found])
+    fi
+])
+
+
+AC_DEFUN([KDE_CREATE_SUBDIRSLIST],
+[
+
+DO_NOT_COMPILE=&quot;$DO_NOT_COMPILE CVS debian bsd-port admin&quot;
+TOPSUBDIRS=&quot;&quot;
+
+if test ! -s $srcdir/subdirs; then
+  dnl Note: Makefile.common creates subdirs, so this is just a fallback
+  files=`cd $srcdir &amp;&amp; ls -1`
+  dirs=`for i in $files; do if test -d $i; then echo $i; fi; done`
+  for i in $dirs; do
+    echo $i &gt;&gt; $srcdir/subdirs
+  done
+fi
+
+ac_topsubdirs=
+if test -s $srcdir/inst-apps; then
+  ac_topsubdirs=&quot;`cat $srcdir/inst-apps`&quot;
+elif test -s $srcdir/subdirs; then
+  ac_topsubdirs=&quot;`cat $srcdir/subdirs`&quot;
+fi
+
+for i in $ac_topsubdirs; do
+  AC_MSG_CHECKING([if $i should be compiled])
+  if test -d $srcdir/$i; then
+    install_it=&quot;yes&quot;
+    for j in $DO_NOT_COMPILE; do
+      if test $i = $j; then
+        install_it=&quot;no&quot;
+      fi
+    done
+  else
+    install_it=&quot;no&quot;
+  fi
+  AC_MSG_RESULT($install_it)
+  vari=`echo $i | sed -e 's,[[-+.@]],_,g'`
+  if test $install_it = &quot;yes&quot;; then
+    TOPSUBDIRS=&quot;$TOPSUBDIRS $i&quot;
+    eval &quot;$vari&quot;&quot;_SUBDIR_included=yes&quot;
+  else
+    eval &quot;$vari&quot;&quot;_SUBDIR_included=no&quot;
+  fi
+done
+
+AC_SUBST(TOPSUBDIRS)
+])
+
+AC_DEFUN([KDE_CHECK_NAMESPACES],
+[
+AC_MSG_CHECKING(whether C++ compiler supports namespaces)
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+AC_TRY_COMPILE([
+],
+[
+namespace Foo {
+  extern int i;
+  namespace Bar {
+    extern int i;
+  }
+}
+
+int Foo::i = 0;
+int Foo::Bar::i = 1;
+],[
+  AC_MSG_RESULT(yes)
+  AC_DEFINE(HAVE_NAMESPACES)
+], [
+AC_MSG_RESULT(no)
+])
+AC_LANG_RESTORE
+])
+
+dnl ------------------------------------------------------------------------
+dnl Check for S_ISSOCK macro. Doesn't exist on Unix SCO. <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">faure at kde.org</A>
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([AC_CHECK_S_ISSOCK],
+[
+AC_MSG_CHECKING(for S_ISSOCK)
+AC_CACHE_VAL(ac_cv_have_s_issock,
+[
+AC_TRY_LINK(
+[
+#include &lt;sys/stat.h&gt;
+],
+[
+struct stat buff;
+int b = S_ISSOCK( buff.st_mode );
+],
+ac_cv_have_s_issock=yes,
+ac_cv_have_s_issock=no)
+])
+AC_MSG_RESULT($ac_cv_have_s_issock)
+if test &quot;$ac_cv_have_s_issock&quot; = &quot;yes&quot;; then
+  AC_DEFINE_UNQUOTED(HAVE_S_ISSOCK, 1, [Define if sys/stat.h declares S_ISSOCK.])
+fi
+
+AH_VERBATIM(_ISSOCK,
+[
+#ifndef HAVE_S_ISSOCK
+#define HAVE_S_ISSOCK
+#define S_ISSOCK(mode) (1==0)
+#endif
+])
+
+])
+
+dnl ------------------------------------------------------------------------
+dnl Check for MAXPATHLEN macro, defines KDEMAXPATHLEN. <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">faure at kde.org</A>
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([AC_CHECK_KDEMAXPATHLEN],
+[
+AC_MSG_CHECKING(for MAXPATHLEN)
+AC_CACHE_VAL(ac_cv_maxpathlen,
+[
+cat &gt; conftest.$ac_ext &lt;&lt;EOF
+#ifdef STDC_HEADERS
+# include &lt;stdlib.h&gt;
+#endif
+#include &lt;stdio.h&gt;
+#include &lt;sys/param.h&gt;
+#ifndef MAXPATHLEN
+#define MAXPATHLEN 1024
+#endif
+
+KDE_HELLO MAXPATHLEN
+
+EOF
+
+ac_try=&quot;$ac_cpp conftest.$ac_ext 2&gt;/dev/null | grep '^KDE_HELLO' &gt;conftest.out&quot;
+
+if AC_TRY_EVAL(ac_try) &amp;&amp; test -s conftest.out; then
+    ac_cv_maxpathlen=`sed 's#KDE_HELLO ##' conftest.out`
+else
+    ac_cv_maxpathlen=1024
+fi
+
+rm conftest.*
+
+])
+AC_MSG_RESULT($ac_cv_maxpathlen)
+AC_DEFINE_UNQUOTED(KDEMAXPATHLEN,$ac_cv_maxpathlen, [Define a safe value for MAXPATHLEN] )
+])
+
+AC_DEFUN([KDE_CHECK_HEADER],
+[
+   kde_safe_cppflags=$CPPFLAGS
+   CPPFLAGS=&quot;$CPPFLAGS $all_includes&quot;
+   AC_LANG_SAVE
+   AC_LANG_CPLUSPLUS
+   AC_CHECK_HEADER([$1], [$2], [$3], [$4])
+   AC_LANG_RESTORE
+   CPPFLAGS=$kde_safe_cppflags
+])
+
+AC_DEFUN([KDE_CHECK_HEADERS],
+[
+   AH_CHECK_HEADERS([$1])
+   AC_LANG_SAVE
+   kde_safe_cppflags=$CPPFLAGS
+   CPPFLAGS=&quot;$CPPFLAGS $all_includes&quot;
+   AC_LANG_CPLUSPLUS
+   AC_CHECK_HEADERS([$1], [$2], [$3], [$4])
+   CPPFLAGS=$kde_safe_cppflags
+   AC_LANG_RESTORE
+])
+
+AC_DEFUN([KDE_FAST_CONFIGURE],
+[
+  dnl makes configure fast (needs perl)
+  AC_ARG_ENABLE(fast-perl, AC_HELP_STRING([--disable-fast-perl],[disable fast Makefile generation (needs perl)]),
+      with_fast_perl=$enableval, with_fast_perl=yes)
+])
+
+AC_DEFUN([KDE_CONF_FILES],
+[
+  val=
+  if test -f $srcdir/configure.files ; then
+    val=`sed -e 's%^%\$(top_srcdir)/%' $srcdir/configure.files`
+  fi
+  CONF_FILES=
+  if test -n &quot;$val&quot; ; then
+    for i in $val ; do
+      CONF_FILES=&quot;$CONF_FILES $i&quot;
+    done
+  fi
+  AC_SUBST(CONF_FILES)
+])dnl
+
+dnl This sets the prefix, for arts and kdelibs
+dnl Do NOT use in any other module.
+dnl It only looks at --prefix, KDEDIR and falls back to /usr/local/kde
+AC_DEFUN([KDE_SET_PREFIX_CORE],
+[
+  unset CDPATH
+  dnl make $KDEDIR the default for the installation
+  AC_PREFIX_DEFAULT(${KDEDIR:-/usr/local/kde})
+
+  if test &quot;x$prefix&quot; = &quot;xNONE&quot;; then
+    prefix=$ac_default_prefix
+    ac_configure_args=&quot;$ac_configure_args --prefix=$prefix&quot;
+  fi
+  # And delete superfluous '/' to make compares easier
+  prefix=`echo &quot;$prefix&quot; | sed 's,//*,/,g' | sed -e 's,/$,,'`
+  exec_prefix=`echo &quot;$exec_prefix&quot; | sed 's,//*,/,g' | sed -e 's,/$,,'`
+
+  kde_libs_prefix='$(prefix)'
+  kde_libs_htmldir='$(kde_htmldir)'
+  AC_SUBST(kde_libs_prefix)
+  AC_SUBST(kde_libs_htmldir)
+  KDE_FAST_CONFIGURE
+  KDE_CONF_FILES
+])
+
+
+AC_DEFUN([KDE_SET_PREFIX],
+[
+  unset CDPATH
+  dnl We can't give real code to that macro, only a value.
+  dnl It only matters for --help, since we set the prefix in this function anyway.
+  AC_PREFIX_DEFAULT(${KDEDIR:-the kde prefix})
+
+  KDE_SET_DEFAULT_BINDIRS
+  if test &quot;x$prefix&quot; = &quot;xNONE&quot;; then
+    dnl no prefix given: look for kde-config in the PATH and deduce the prefix from it
+    KDE_FIND_PATH(kde-config, KDECONFIG, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(kde-config)], [], prepend)
+  else
+    dnl prefix given: look for kde-config, preferrably in prefix, otherwise in PATH
+    kde_save_PATH=&quot;$PATH&quot;
+    PATH=&quot;$exec_prefix/bin:$prefix/bin:$PATH&quot;
+    KDE_FIND_PATH(kde-config, KDECONFIG, [$kde_default_bindirs], [KDE_MISSING_PROG_ERROR(kde-config)], [], prepend)
+    PATH=&quot;$kde_save_PATH&quot;
+  fi
+
+  kde_libs_prefix=`$KDECONFIG --prefix`
+  if test -z &quot;$kde_libs_prefix&quot; || test ! -x &quot;$kde_libs_prefix&quot;; then
+       AC_MSG_ERROR([$KDECONFIG --prefix outputed the non existant prefix '$kde_libs_prefix' for kdelibs.
+                    This means it has been moved since you installed it.
+                    This won't work. Please recompile kdelibs for the new prefix.
+                    ])
+  fi
+  kde_libs_htmldir=`$KDECONFIG --install html --expandvars`
+  kde_libs_suffix=`$KDECONFIG --libsuffix`
+
+  AC_MSG_CHECKING([where to install])
+  if test &quot;x$prefix&quot; = &quot;xNONE&quot;; then
+    prefix=$kde_libs_prefix
+    AC_MSG_RESULT([$prefix (as returned by kde-config)])
+  else
+    dnl --prefix was given. Compare prefixes and warn (in configure.in.bot.end) if different
+    given_prefix=$prefix
+    AC_MSG_RESULT([$prefix (as requested)])
+  fi
+
+  # And delete superfluous '/' to make compares easier
+  prefix=`echo &quot;$prefix&quot; | sed 's,//*,/,g' | sed -e 's,/$,,'`
+  exec_prefix=`echo &quot;$exec_prefix&quot; | sed 's,//*,/,g' | sed -e 's,/$,,'`
+  given_prefix=`echo &quot;$given_prefix&quot; | sed 's,//*,/,g' | sed -e 's,/$,,'`
+
+  AC_SUBST(KDECONFIG)
+  AC_SUBST(kde_libs_prefix)
+  AC_SUBST(kde_libs_htmldir)
+
+  KDE_FAST_CONFIGURE
+  KDE_CONF_FILES
+])
+
+pushdef([AC_PROG_INSTALL],
+[
+  dnl our own version, testing for a -p flag
+  popdef([AC_PROG_INSTALL])
+  dnl as AC_PROG_INSTALL works as it works we first have
+  dnl to save if the user didn't specify INSTALL, as the
+  dnl autoconf one overwrites INSTALL and we have no chance to find
+  dnl out afterwards
+  test -n &quot;$INSTALL&quot; &amp;&amp; kde_save_INSTALL_given=$INSTALL
+  test -n &quot;$INSTALL_PROGRAM&quot; &amp;&amp; kde_save_INSTALL_PROGRAM_given=$INSTALL_PROGRAM
+  test -n &quot;$INSTALL_SCRIPT&quot; &amp;&amp; kde_save_INSTALL_SCRIPT_given=$INSTALL_SCRIPT
+  AC_PROG_INSTALL
+
+  if test -z &quot;$kde_save_INSTALL_given&quot; ; then
+    # OK, user hasn't given any INSTALL, autoconf found one for us
+    # now we test, if it supports the -p flag
+    AC_MSG_CHECKING(for -p flag to install)
+    rm -f confinst.$$.* &gt; /dev/null 2&gt;&amp;1
+    echo &quot;Testtest&quot; &gt; confinst.$$.orig
+    ac_res=no
+    if ${INSTALL} -p confinst.$$.orig confinst.$$.new &gt; /dev/null 2&gt;&amp;1 ; then
+      if test -f confinst.$$.new ; then
+        # OK, -p seems to do no harm to install
+	INSTALL=&quot;${INSTALL} -p&quot;
+	ac_res=yes
+      fi
+    fi
+    rm -f confinst.$$.*
+    AC_MSG_RESULT($ac_res)
+  fi
+  dnl the following tries to resolve some signs and wonders coming up
+  dnl with different autoconf/automake versions
+  dnl e.g.:
+  dnl  *automake 1.4 install-strip sets A_M_INSTALL_PROGRAM_FLAGS to -s
+  dnl   and has INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(A_M_INSTALL_PROGRAM_FLAGS)
+  dnl   it header-vars.am, so there the actual INSTALL_PROGRAM gets the -s
+  dnl  *automake 1.4a (and above) use INSTALL_STRIP_FLAG and only has
+  dnl   INSTALL_PROGRAM = @INSTALL_PROGRAM@ there, but changes the
+  dnl   <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">install- at DIR</A>@PROGRAMS targets to explicitly use that flag
+  dnl  *autoconf 2.13 is dumb, and thinks it can use INSTALL_PROGRAM as
+  dnl   INSTALL_SCRIPT, which breaks with automake &lt;= 1.4
+  dnl  *autoconf &gt;2.13 (since 10.Apr 1999) has not that failure
+  dnl  *sometimes KDE does not use the <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">install- at DIR</A>@PROGRAM targets from
+  dnl   automake (due to broken Makefile.am or whatever) to install programs,
+  dnl   and so does not see the -s flag in automake &gt; 1.4
+  dnl to clean up that mess we:
+  dnl  +set INSTALL_PROGRAM to use INSTALL_STRIP_FLAG
+  dnl   which cleans KDE's program with automake &gt; 1.4;
+  dnl  +set INSTALL_SCRIPT to only use INSTALL, to clean up autoconf's problems
+  dnl   with automake&lt;=1.4
+  dnl  note that dues to this sometimes two '-s' flags are used (if KDE
+  dnl   properly uses <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">install- at DIR</A>@PROGRAMS, but I don't care
+  dnl
+  dnl And to all this comes, that I even can't write in comments variable
+  dnl  names used by automake, because it is so stupid to think I wanted to
+  dnl  _use_ them, therefor I have written A_M_... instead of AM_
+  dnl hmm, I wanted to say something ... ahh yes: Arghhh.
+
+  if test -z &quot;$kde_save_INSTALL_PROGRAM_given&quot; ; then
+    INSTALL_PROGRAM='${INSTALL} $(INSTALL_STRIP_FLAG)'
+  fi
+  if test -z &quot;$kde_save_INSTALL_SCRIPT_given&quot; ; then
+    INSTALL_SCRIPT='${INSTALL}'
+  fi
+])dnl
+
+AC_DEFUN([KDE_LANG_CPLUSPLUS],
+[AC_LANG_CPLUSPLUS
+ac_link='rm -rf SunWS_cache; ${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1&gt;&amp;AC_FD_CC'
+pushdef([AC_LANG_CPLUSPLUS], [popdef([AC_LANG_CPLUSPLUS]) KDE_LANG_CPLUSPLUS])
+])
+
+pushdef([AC_LANG_CPLUSPLUS],
+[popdef([AC_LANG_CPLUSPLUS])
+KDE_LANG_CPLUSPLUS
+])
+
+AC_DEFUN([KDE_CHECK_LONG_LONG],
+[
+AC_MSG_CHECKING(for long long)
+AC_CACHE_VAL(kde_cv_c_long_long,
+[
+  AC_LANG_SAVE
+  AC_LANG_CPLUSPLUS
+  AC_TRY_LINK([], [
+  long long foo = 0;
+  foo = foo+1;
+  ],
+  kde_cv_c_long_long=yes, kde_cv_c_long_long=no)
+  AC_LANG_RESTORE
+])
+AC_MSG_RESULT($kde_cv_c_long_long)
+if test &quot;$kde_cv_c_long_long&quot; = yes; then
+   AC_DEFINE(HAVE_LONG_LONG, 1, [Define if you have long long as datatype])
+fi
+])
+
+AC_DEFUN([KDE_CHECK_LIB],
+[
+     kde_save_LDFLAGS=&quot;$LDFLAGS&quot;
+     dnl AC_CHECK_LIB modifies LIBS, so save it here
+     kde_save_LIBS=&quot;$LIBS&quot;
+     LDFLAGS=&quot;$LDFLAGS $all_libraries&quot;
+     case $host_os in
+      aix*) LDFLAGS=&quot;-brtl $LDFLAGS&quot;
+	test &quot;$GCC&quot; = yes &amp;&amp; LDFLAGS=&quot;-Wl,$LDFLAGS&quot;
+	;;
+     esac
+     AC_CHECK_LIB($1, $2, $3, $4, $5)
+     LDFLAGS=&quot;$kde_save_LDFLAGS&quot;
+     LIBS=&quot;$kde_save_LIBS&quot;
+])
+
+AC_DEFUN([KDE_JAVA_PREFIX],
+[
+	dir=`dirname &quot;$1&quot;`
+	base=`basename &quot;$1&quot;`
+	list=`ls -1 $dir 2&gt; /dev/null`
+	for entry in $list; do
+		if test -d $dir/$entry/bin; then
+			case $entry in
+			   $base)
+				javadirs=&quot;$javadirs $dir/$entry/bin&quot;
+				;;
+			esac
+		elif test -d $dir/$entry/jre/bin; then
+			case $entry in
+			   $base)
+				javadirs=&quot;$javadirs $dir/$entry/jre/bin&quot;
+				;;
+			esac
+		fi
+	done
+])
+
+dnl KDE_CHEC_JAVA_DIR(onlyjre)
+AC_DEFUN([KDE_CHECK_JAVA_DIR],
+[
+
+AC_ARG_WITH(java,
+AC_HELP_STRING([--with-java=javadir],[use java installed in javadir, --without-java disables]),
+[  ac_java_dir=$withval
+], ac_java_dir=&quot;&quot;
+)
+
+AC_MSG_CHECKING([for Java])
+
+dnl at this point ac_java_dir is either a dir, 'no' to disable, or '' to say look in $PATH
+if test &quot;x$ac_java_dir&quot; = &quot;xno&quot;; then
+   kde_java_bindir=no
+   kde_java_includedir=no
+   kde_java_libjvmdir=no
+   kde_java_libgcjdir=no
+   kde_java_libhpidir=no
+else
+  if test &quot;x$ac_java_dir&quot; = &quot;x&quot;; then
+
+
+      dnl No option set -&gt; collect list of candidate paths
+      if test -n &quot;$JAVA_HOME&quot;; then
+        KDE_JAVA_PREFIX($JAVA_HOME)
+      fi
+      KDE_JAVA_PREFIX(/usr/j2se)
+      KDE_JAVA_PREFIX(/usr/lib/j2se)
+      KDE_JAVA_PREFIX(/usr/j*dk*)
+      KDE_JAVA_PREFIX(/usr/lib/j*dk*)
+      KDE_JAVA_PREFIX(/opt/j*sdk*)
+      KDE_JAVA_PREFIX(/usr/lib/java*)
+      KDE_JAVA_PREFIX(/usr/java*)
+      KDE_JAVA_PREFIX(/usr/java/j*dk*)
+      KDE_JAVA_PREFIX(/usr/java/j*re*)
+      KDE_JAVA_PREFIX(/usr/lib/SunJava2*)
+      KDE_JAVA_PREFIX(/usr/lib/SunJava*)
+      KDE_JAVA_PREFIX(/usr/lib/IBMJava2*)
+      KDE_JAVA_PREFIX(/usr/lib/IBMJava*)
+      KDE_JAVA_PREFIX(/opt/java*)
+
+      kde_cv_path=&quot;NONE&quot;
+      kde_save_IFS=$IFS
+      IFS=':'
+      for dir in $PATH; do
+	  if test -d &quot;$dir&quot;; then
+	      javadirs=&quot;$javadirs $dir&quot;
+	  fi
+      done
+      IFS=$kde_save_IFS
+      jredirs=
+
+      dnl Now javadirs contains a list of paths that exist, all ending with bin/
+      for dir in $javadirs; do
+          dnl Check for the java executable
+	  if test -x &quot;$dir/java&quot;; then
+	      dnl And also check for a libjvm.so somewhere under there
+	      dnl Since we have to go to the parent dir, /usr/bin is excluded, /usr is too big.
+              if test &quot;$dir&quot; != &quot;/usr/bin&quot;; then
+                  libjvmdir=`find $dir/.. -name libjvm.so | sed 's,libjvm.so,,'|head -n 1`
+		  if test ! -f $libjvmdir/libjvm.so; then continue; fi
+		  jredirs=&quot;$jredirs $dir&quot;
+	      fi
+	  fi
+      done
+
+      dnl Now jredirs contains a reduced list, of paths where both java and ../**/libjvm.so was found
+      JAVAC=
+      JAVA=
+      kde_java_bindir=no
+      for dir in $jredirs; do
+	  JAVA=&quot;$dir/java&quot;
+	  kde_java_bindir=$dir
+	  if test -x &quot;$dir/javac&quot;; then
+		JAVAC=&quot;$dir/javac&quot;
+                break
+	  fi
+      done
+
+      if test -n &quot;$JAVAC&quot;; then
+          dnl this substitution might not work - well, we test for jni.h below
+          kde_java_includedir=`echo $JAVAC | sed -e 's,bin/javac$,include/,'`
+      else
+          kde_java_includedir=no
+      fi
+  else
+    dnl config option set
+    kde_java_bindir=$ac_java_dir/bin
+    if test -x $ac_java_dir/bin/java &amp;&amp; test ! -x $ac_java_dir/bin/javac; then
+	kde_java_includedir=no
+    else
+        kde_java_includedir=$ac_java_dir/include
+    fi
+  fi
+fi
+
+dnl At this point kde_java_bindir and kde_java_includedir are either set or &quot;no&quot;
+if test &quot;x$kde_java_bindir&quot; != &quot;xno&quot;; then
+
+  dnl Look for libjvm.so
+  kde_java_libjvmdir=`find $kde_java_bindir/.. -name libjvm.so | sed 's,libjvm.so,,'|head -n 1`
+  dnl Look for libgcj.so
+  kde_java_libgcjdir=`find $kde_java_bindir/.. -name libgcj.so | sed 's,libgcj.so,,'|head -n 1`
+  dnl Look for libhpi.so and avoid green threads
+  kde_java_libhpidir=`find $kde_java_bindir/.. -name libhpi.so | grep -v green | sed 's,libhpi.so,,' | head -n 1`
+
+  dnl Now check everything's fine under there
+  dnl the include dir is our flag for having the JDK
+  if test -d &quot;$kde_java_includedir&quot;; then
+    if test ! -x &quot;$kde_java_bindir/javac&quot;; then
+      AC_MSG_ERROR([javac not found under $kde_java_bindir - it seems you passed a wrong --with-java.])
+    fi
+    if test ! -x &quot;$kde_java_bindir/javah&quot;; then
+      AC_MSG_ERROR([javah not found under $kde_java_bindir. javac was found though! Use --with-java or --without-java.])
+    fi
+    if test ! -x &quot;$kde_java_bindir/jar&quot;; then
+      AC_MSG_ERROR([jar not found under $kde_java_bindir. javac was found though! Use --with-java or --without-java.])
+    fi
+    if test ! -r &quot;$kde_java_includedir/jni.h&quot;; then
+      AC_MSG_ERROR([jni.h not found under $kde_java_includedir. Use --with-java or --without-java.])
+    fi
+
+    jni_includes=&quot;-I$kde_java_includedir&quot;
+    dnl Strange thing, jni.h requires jni_md.h which is under genunix here..
+    dnl and under linux here..
+
+    dnl not needed for gcj
+
+    if test &quot;x$kde_java_libgcjdir&quot; = &quot;x&quot;; then
+      test -d &quot;$kde_java_includedir/linux&quot; &amp;&amp; jni_includes=&quot;$jni_includes -I$kde_java_includedir/linux&quot;
+      test -d &quot;$kde_java_includedir/solaris&quot; &amp;&amp; jni_includes=&quot;$jni_includes -I$kde_java_includedir/solaris&quot;
+      test -d &quot;$kde_java_includedir/genunix&quot; &amp;&amp; jni_includes=&quot;$jni_includes -I$kde_java_includedir/genunix&quot;
+    fi
+
+  else
+    JAVAC=
+    jni_includes=
+  fi
+
+  if test &quot;x$kde_java_libgcjdir&quot; = &quot;x&quot;; then
+     if test ! -r &quot;$kde_java_libjvmdir/libjvm.so&quot;; then
+        AC_MSG_ERROR([libjvm.so not found under $kde_java_libjvmdir. Use --without-java.])
+     fi
+  else
+     if test ! -r &quot;$kde_java_libgcjdir/libgcj.so&quot;; then
+        AC_MSG_ERROR([libgcj.so not found under $kde_java_libgcjdir. Use --without-java.])
+     fi
+  fi
+
+  if test ! -x &quot;$kde_java_bindir/java&quot;; then
+      AC_MSG_ERROR([java not found under $kde_java_bindir. javac was found though! Use --with-java or --without-java.])
+  fi
+
+  dnl not needed for gcj compile
+
+  if test &quot;x$kde_java_libgcjdir&quot; = &quot;x&quot;; then
+      if test ! -r &quot;$kde_java_libhpidir/libhpi.so&quot;; then
+        AC_MSG_ERROR([libhpi.so not found under $kde_java_libhpidir. Use --without-java.])
+      fi
+  fi
+
+  if test -n &quot;$jni_includes&quot;; then
+    dnl Check for JNI version
+    AC_LANG_SAVE
+    AC_LANG_CPLUSPLUS
+    ac_cxxflags_safe=&quot;$CXXFLAGS&quot;
+    CXXFLAGS=&quot;$CXXFLAGS $all_includes $jni_includes&quot;
+
+    AC_TRY_COMPILE([
+  #include &lt;jni.h&gt;
+	      ],
+	      [
+  #ifndef JNI_VERSION_1_2
+  Syntax Error
+  #endif
+	      ],[ kde_jni_works=yes ],
+	      [ kde_jni_works=no ])
+
+    if test $kde_jni_works = no; then
+      AC_MSG_ERROR([Incorrect version of $kde_java_includedir/jni.h.
+		    You need to have Java Development Kit (JDK) version 1.2.
+
+		    Use --with-java to specify another location.
+		    Use --without-java to configure without java support.
+		    Or download a newer JDK and try again.
+		    See e.g. <A HREF="http://java.sun.com/products/jdk/1.2">http://java.sun.com/products/jdk/1.2</A> ])
+    fi
+
+    CXXFLAGS=&quot;$ac_cxxflags_safe&quot;
+    AC_LANG_RESTORE
+
+    dnl All tests ok, inform and subst the variables
+
+    JAVAC=$kde_java_bindir/javac
+    JAVAH=$kde_java_bindir/javah
+    JAR=$kde_java_bindir/jar
+    AC_DEFINE_UNQUOTED(PATH_JAVA, &quot;$kde_java_bindir/java&quot;, [Define where your java executable is])
+    if test &quot;x$kde_java_libgcjdir&quot; = &quot;x&quot;; then
+      JVMLIBS=&quot;-L$kde_java_libjvmdir -ljvm -L$kde_java_libhpidir -lhpi&quot;
+    else
+      JVMLIBS=&quot;-L$kde_java_libgcjdir -lgcj&quot;
+    fi
+    AC_MSG_RESULT([java JDK in $kde_java_bindir])
+
+  else
+      AC_DEFINE_UNQUOTED(PATH_JAVA, &quot;$kde_java_bindir/java&quot;, [Define where your java executable is])
+      AC_MSG_RESULT([java JRE in $kde_java_bindir])
+  fi
+elif test -d &quot;/Library/Java/Home&quot;; then
+  kde_java_bindir=&quot;/Library/Java/Home/bin&quot;
+  jni_includes=&quot;-I/Library/Java/Home/include&quot;
+
+  JAVAC=$kde_java_bindir/javac
+  JAVAH=$kde_java_bindir/javah
+  JAR=$kde_java_bindir/jar
+  JVMLIBS=&quot;-Wl,-framework,JavaVM&quot;
+
+  AC_DEFINE_UNQUOTED(PATH_JAVA, &quot;$kde_java_bindir/java&quot;, [Define where your java executable is])
+  AC_MSG_RESULT([Apple Java Framework])
+else
+  AC_MSG_RESULT([none found])
+fi
+
+AC_SUBST(JAVAC)
+AC_SUBST(JAVAH)
+AC_SUBST(JAR)
+AC_SUBST(JVMLIBS)
+AC_SUBST(jni_includes)
+
+# for backward compat
+kde_cv_java_includedir=$kde_java_includedir
+kde_cv_java_bindir=$kde_java_bindir
+])
+
+dnl this is a redefinition of autoconf 2.5x's AC_FOREACH.
+dnl When the argument list becomes big, as in KDE for AC_OUTPUT in
+dnl big packages, m4_foreach is dog-slow.  So use our own version of
+dnl it.  (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">matz at kde.org</A>)
+m4_define([mm_foreach],
+[m4_pushdef([$1])_mm_foreach($@)m4_popdef([$1])])
+m4_define([mm_car], [[$1]])
+m4_define([mm_car2], [[$@]])
+m4_define([_mm_foreach],
+[m4_if(m4_quote($2), [], [],
+       [m4_define([$1], mm_car($2))$3[]_mm_foreach([$1],
+                                                   mm_car2(m4_shift($2)),
+                                                   [$3])])])
+m4_define([AC_FOREACH],
+[mm_foreach([$1], m4_split(m4_normalize([$2])), [$3])])
+
+AC_DEFUN([KDE_NEED_FLEX],
+[
+kde_libs_safe=$LIBS
+LIBS=&quot;$LIBS $USER_LDFLAGS&quot;
+AM_PROG_LEX
+LIBS=$kde_libs_safe
+if test -z &quot;$LEXLIB&quot;; then
+    AC_MSG_ERROR([You need to have flex installed.])
+fi
+AC_SUBST(LEXLIB)
+])
+
+AC_DEFUN([AC_PATH_QTOPIA],
+[
+  dnl TODO: use AC_CACHE_VAL
+
+  if test -z &quot;$1&quot;; then
+    qtopia_minver_maj=1
+    qtopia_minver_min=5
+    qtopia_minver_pat=0
+  else
+    qtopia_minver_maj=`echo &quot;$1&quot; | sed -e &quot;s/^\(.*\)\..*\..*$/\1/&quot;`
+    qtopia_minver_min=`echo &quot;$1&quot; | sed -e &quot;s/^.*\.\(.*\)\..*$/\1/&quot;`
+    qtopia_minver_pat=`echo &quot;$1&quot; | sed -e &quot;s/^.*\..*\.\(.*\)$/\1/&quot;`
+  fi
+
+  qtopia_minver=&quot;$qtopia_minver_maj$qtopia_minver_min$qtopia_minver_pat&quot;
+  qtopia_minverstr=&quot;$qtopia_minver_maj.$qtopia_minver_min.$qtopia_minver_pat&quot;
+
+  AC_REQUIRE([AC_PATH_QT])
+
+  AC_MSG_CHECKING([for Qtopia])
+
+  LIB_QTOPIA=&quot;-lqpe&quot;
+  AC_SUBST(LIB_QTOPIA)
+
+  kde_qtopia_dirs=&quot;$QPEDIR /opt/Qtopia&quot;
+
+  ac_qtopia_incdir=NO
+
+  AC_ARG_WITH(qtopia-dir,
+              AC_HELP_STRING([--with-qtopia-dir=DIR],[where the root of Qtopia is installed]),
+              [  ac_qtopia_incdir=&quot;$withval&quot;/include] )
+
+  qtopia_incdirs=&quot;&quot;
+  for dir in $kde_qtopia_dirs; do
+    qtopia_incdirs=&quot;$qtopia_incdirs $dir/include&quot;
+  done
+
+  if test ! &quot;$ac_qtopia_incdir&quot; = &quot;NO&quot;; then
+    qtopia_incdirs=&quot;$ac_qtopia_incdir $qtopia_incdirs&quot;
+  fi
+
+  qtopia_incdir=&quot;&quot;
+  AC_FIND_FILE(qpe/qpeapplication.h, $qtopia_incdirs, qtopia_incdir)
+  ac_qtopia_incdir=&quot;$qtopia_incdir&quot;
+
+  if test -z &quot;$qtopia_incdir&quot;; then
+    AC_MSG_ERROR([Cannot find Qtopia headers. Please check your installation.])
+  fi
+
+  qtopia_ver_maj=`cat $qtopia_incdir/qpe/version.h | sed -n -e 's,.*QPE_VERSION &quot;\(.*\)\..*\..*&quot;.*,\1,p'`;
+  qtopia_ver_min=`cat $qtopia_incdir/qpe/version.h | sed -n -e 's,.*QPE_VERSION &quot;.*\.\(.*\)\..*&quot;.*,\1,p'`;
+  qtopia_ver_pat=`cat $qtopia_incdir/qpe/version.h | sed -n -e 's,.*QPE_VERSION &quot;.*\..*\.\(.*\)&quot;.*,\1,p'`;
+
+  qtopia_ver=&quot;$qtopia_ver_maj$qtopia_ver_min$qtopia_ver_pat&quot;
+  qtopia_verstr=&quot;$qtopia_ver_maj.$qtopia_ver_min.$qtopia_ver_pat&quot;
+  if test &quot;$qtopia_ver&quot; -lt &quot;$qtopia_minver&quot;; then
+    AC_MSG_ERROR([found Qtopia version $qtopia_verstr but version $qtopia_minverstr
+is required.])
+  fi
+
+  AC_LANG_SAVE
+  AC_LANG_CPLUSPLUS
+
+  ac_cxxflags_safe=&quot;$CXXFLAGS&quot;
+  ac_ldflags_safe=&quot;$LDFLAGS&quot;
+  ac_libs_safe=&quot;$LIBS&quot;
+
+  CXXFLAGS=&quot;$CXXFLAGS -I$qtopia_incdir $all_includes&quot;
+  LDFLAGS=&quot;$LDFLAGS $QT_LDFLAGS $all_libraries $USER_LDFLAGS $KDE_MT_LDFLAGS&quot;
+  LIBS=&quot;$LIBS $LIB_QTOPIA $LIBQT&quot;
+
+  cat &gt; conftest.$ac_ext &lt;&lt;EOF
+#include &quot;confdefs.h&quot;
+#include &lt;qpe/qpeapplication.h&gt;
+#include &lt;qpe/version.h&gt;
+
+int main( int argc, char **argv )
+{
+    QPEApplication app( argc, argv );
+    return 0;
+}
+EOF
+
+  if AC_TRY_EVAL(ac_link) &amp;&amp; test -s conftest; then
+    rm -f conftest*
+  else
+    rm -f conftest*
+    AC_MSG_ERROR([Cannot link small Qtopia Application. For more details look at
+the end of config.log])
+  fi
+
+  CXXFLAGS=&quot;$ac_cxxflags_safe&quot;
+  LDFLAGS=&quot;$ac_ldflags_safe&quot;
+  LIBS=&quot;$ac_libs_safe&quot;
+
+  AC_LANG_RESTORE
+
+  QTOPIA_INCLUDES=&quot;-I$qtopia_incdir&quot;
+  AC_SUBST(QTOPIA_INCLUDES)
+
+  AC_MSG_RESULT([found version $qtopia_verstr with headers at $qtopia_incdir])
+])
+
+
+AC_DEFUN([KDE_INIT_DOXYGEN],
+[
+AC_MSG_CHECKING([for Qt docs])
+kde_qtdir=
+if test &quot;${with_qt_dir+set}&quot; = set; then
+  kde_qtdir=&quot;$with_qt_dir&quot;
+fi
+
+AC_FIND_FILE(qsql.html, [ $kde_qtdir/doc/html $QTDIR/doc/html /usr/share/doc/packages/qt3/html /usr/lib/qt/doc /usr/lib/qt3/doc /usr/lib/qt3/doc/html /usr/doc/qt3/html /usr/doc/qt3 /usr/share/doc/qt3-doc /usr/share/qt3/doc/html /usr/X11R6/share/doc/qt/html ], QTDOCDIR)
+AC_MSG_RESULT($QTDOCDIR)
+
+AC_SUBST(QTDOCDIR)
+
+KDE_FIND_PATH(dot, DOT, [], [])
+if test -n &quot;$DOT&quot;; then
+  KDE_HAVE_DOT=&quot;YES&quot;
+else
+  KDE_HAVE_DOT=&quot;NO&quot;
+fi
+AC_SUBST(KDE_HAVE_DOT)
+KDE_FIND_PATH(doxygen, DOXYGEN, [], [])
+AC_SUBST(DOXYGEN)
+
+DOXYGEN_PROJECT_NAME=&quot;$1&quot;
+DOXYGEN_PROJECT_NUMBER=&quot;$2&quot;
+AC_SUBST(DOXYGEN_PROJECT_NAME)
+AC_SUBST(DOXYGEN_PROJECT_NUMBER)
+
+KDE_HAS_DOXYGEN=no
+if test -n &quot;$DOXYGEN&quot; &amp;&amp; test -x &quot;$DOXYGEN&quot; &amp;&amp; test -f $QTDOCDIR/qsql.html; then
+  KDE_HAS_DOXYGEN=yes
+fi
+AC_SUBST(KDE_HAS_DOXYGEN)
+
+])
+
+
+AC_DEFUN([AC_FIND_BZIP2],
+[
+AC_MSG_CHECKING([for bzDecompress in libbz2])
+AC_CACHE_VAL(ac_cv_lib_bzip2,
+[
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+kde_save_LIBS=&quot;$LIBS&quot;
+LIBS=&quot;$all_libraries $USER_LDFLAGS -lbz2 $LIBSOCKET&quot;
+kde_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+CXXFLAGS=&quot;$CXXFLAGS $all_includes $USER_INCLUDES&quot;
+AC_TRY_LINK(dnl
+[
+#define BZ_NO_STDIO
+#include&lt;bzlib.h&gt;
+],
+            [ bz_stream s; (void) bzDecompress(&amp;s); ],
+            eval &quot;ac_cv_lib_bzip2='-lbz2'&quot;,
+            eval &quot;ac_cv_lib_bzip2=no&quot;)
+LIBS=&quot;$kde_save_LIBS&quot;
+CXXFLAGS=&quot;$kde_save_CXXFLAGS&quot;
+AC_LANG_RESTORE
+])dnl
+AC_MSG_RESULT($ac_cv_lib_bzip2)
+
+if test ! &quot;$ac_cv_lib_bzip2&quot; = no; then
+  BZIP2DIR=bzip2
+
+  LIBBZ2=&quot;$ac_cv_lib_bzip2&quot;
+  AC_SUBST(LIBBZ2)
+
+else
+
+   cxx_shared_flag=
+   ld_shared_flag=
+   KDE_CHECK_COMPILER_FLAG(shared, [
+	ld_shared_flag=&quot;-shared&quot;
+   ])
+   KDE_CHECK_COMPILER_FLAG(fPIC, [
+        cxx_shared_flag=&quot;-fPIC&quot;
+   ])
+
+   AC_MSG_CHECKING([for BZ2_bzDecompress in (shared) libbz2])
+   AC_CACHE_VAL(ac_cv_lib_bzip2_prefix,
+   [
+   AC_LANG_SAVE
+   AC_LANG_CPLUSPLUS
+   kde_save_LIBS=&quot;$LIBS&quot;
+   LIBS=&quot;$all_libraries $USER_LDFLAGS $ld_shared_flag -lbz2 $LIBSOCKET&quot;
+   kde_save_CXXFLAGS=&quot;$CXXFLAGS&quot;
+   CXXFLAGS=&quot;$CFLAGS $cxx_shared_flag $all_includes $USER_INCLUDES&quot;
+
+   AC_TRY_LINK(dnl
+   [
+   #define BZ_NO_STDIO
+   #include&lt;bzlib.h&gt;
+   ],
+               [ bz_stream s; (void) BZ2_bzDecompress(&amp;s); ],
+               eval &quot;ac_cv_lib_bzip2_prefix='-lbz2'&quot;,
+               eval &quot;ac_cv_lib_bzip2_prefix=no&quot;)
+   LIBS=&quot;$kde_save_LIBS&quot;
+   CXXFLAGS=&quot;$kde_save_CXXFLAGS&quot;
+   AC_LANG_RESTORE
+   ])dnl
+
+   AC_MSG_RESULT($ac_cv_lib_bzip2_prefix)
+
+   if test ! &quot;$ac_cv_lib_bzip2_prefix&quot; = no; then
+     BZIP2DIR=bzip2
+
+     LIBBZ2=&quot;$ac_cv_lib_bzip2_prefix&quot;
+     AC_SUBST(LIBBZ2)
+
+     AC_DEFINE(NEED_BZ2_PREFIX, 1, [Define if the libbz2 functions need the BZ2_ prefix])
+   dnl else, we just ignore this
+   fi
+
+fi
+AM_CONDITIONAL(include_BZIP2, test -n &quot;$BZIP2DIR&quot;)
+])
+
+dnl ------------------------------------------------------------------------
+dnl Try to find the SSL headers and libraries.
+dnl $(SSL_LDFLAGS) will be -Lsslliblocation (if needed)
+dnl and $(SSL_INCLUDES) will be -Isslhdrlocation (if needed)
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN([KDE_CHECK_SSL],
+[
+LIBSSL=&quot;-lssl -lcrypto&quot;
+AC_REQUIRE([KDE_CHECK_LIB64])
+
+ac_ssl_includes=NO ac_ssl_libraries=NO
+ssl_libraries=&quot;&quot;
+ssl_includes=&quot;&quot;
+AC_ARG_WITH(ssl-dir,
+    AC_HELP_STRING([--with-ssl-dir=DIR],[where the root of OpenSSL is installed]),
+    [  ac_ssl_includes=&quot;$withval&quot;/include
+       ac_ssl_libraries=&quot;$withval&quot;/lib$kdelibsuff
+    ])
+
+want_ssl=yes
+AC_ARG_WITH(ssl,
+    AC_HELP_STRING([--without-ssl],[disable SSL checks]),
+    [want_ssl=$withval])
+
+if test $want_ssl = yes; then
+
+AC_MSG_CHECKING(for OpenSSL)
+
+AC_CACHE_VAL(ac_cv_have_ssl,
+[#try to guess OpenSSL locations
+
+  ssl_incdirs=&quot;/usr/include /usr/local/include /usr/ssl/include /usr/local/ssl/include $prefix/include $kde_extra_includes&quot;
+  ssl_incdirs=&quot;$ac_ssl_includes $ssl_incdirs&quot;
+  AC_FIND_FILE(openssl/ssl.h, $ssl_incdirs, ssl_incdir)
+  ac_ssl_includes=&quot;$ssl_incdir&quot;
+
+  ssl_libdirs=&quot;/usr/lib$kdelibsuff /usr/local/lib$kdelibsuff /usr/ssl/lib$kdelibsuff /usr/local/ssl/lib$kdelibsuff $libdir $prefix/lib$kdelibsuff $exec_prefix/lib$kdelibsuff $kde_extra_libs&quot;
+  if test ! &quot;$ac_ssl_libraries&quot; = &quot;NO&quot;; then
+    ssl_libdirs=&quot;$ac_ssl_libraries $ssl_libdirs&quot;
+  fi
+
+  test=NONE
+  ssl_libdir=NONE
+  for dir in $ssl_libdirs; do
+    try=&quot;ls -1 $dir/libssl*&quot;
+    if test=`eval $try 2&gt; /dev/null`; then ssl_libdir=$dir; break; else echo &quot;tried $dir&quot; &gt;&amp;AC_FD_CC ; fi
+  done
+
+  ac_ssl_libraries=&quot;$ssl_libdir&quot;
+
+  ac_ldflags_safe=&quot;$LDFLAGS&quot;
+  ac_libs_safe=&quot;$LIBS&quot;
+
+  LDFLAGS=&quot;$LDFLAGS -L$ssl_libdir $all_libraries&quot;
+  LIBS=&quot;$LIBS $LIBSSL -lRSAglue -lrsaref&quot;
+
+  AC_TRY_LINK(,void RSAPrivateEncrypt(void);RSAPrivateEncrypt();,
+  ac_ssl_rsaref=&quot;yes&quot;
+  ,
+  ac_ssl_rsaref=&quot;no&quot;
+  )
+
+  LDFLAGS=&quot;$ac_ldflags_safe&quot;
+  LIBS=&quot;$ac_libs_safe&quot;
+
+  if test &quot;$ac_ssl_includes&quot; = NO || test &quot;$ac_ssl_libraries&quot; = NO; then
+    have_ssl=no
+  else
+    have_ssl=yes;
+  fi
+
+  ])
+
+  eval &quot;$ac_cv_have_ssl&quot;
+
+  AC_MSG_RESULT([libraries $ac_ssl_libraries, headers $ac_ssl_includes])
+
+  AC_MSG_CHECKING([whether OpenSSL uses rsaref])
+  AC_MSG_RESULT($ac_ssl_rsaref)
+
+  AC_MSG_CHECKING([for easter eggs])
+  AC_MSG_RESULT([none found])
+
+else
+  have_ssl=no
+fi
+
+if test &quot;$have_ssl&quot; = yes; then
+  AC_MSG_CHECKING(for OpenSSL version)
+  dnl Check for SSL version
+  AC_CACHE_VAL(ac_cv_ssl_version,
+  [
+
+    cat &gt;conftest.$ac_ext &lt;&lt;EOF
+#include &lt;openssl/opensslv.h&gt;
+#include &lt;stdio.h&gt;
+    int main() {
+
+#ifndef OPENSSL_VERSION_NUMBER
+      printf(&quot;ssl_version=\\&quot;error\\&quot;\n&quot;);
+#else
+      if (OPENSSL_VERSION_NUMBER &lt; 0x00906000)
+        printf(&quot;ssl_version=\\&quot;old\\&quot;\n&quot;);
+      else
+        printf(&quot;ssl_version=\\&quot;ok\\&quot;\n&quot;);
+#endif
+     return (0);
+    }
+EOF
+
+    ac_save_CPPFLAGS=$CPPFLAGS
+    if test &quot;$ac_ssl_includes&quot; != &quot;/usr/include&quot;; then
+        CPPFLAGS=&quot;$CPPFLAGS -I$ac_ssl_includes&quot;
+    fi
+
+    if AC_TRY_EVAL(ac_link); then
+
+      if eval `./conftest 2&gt;&amp;5`; then
+        if test $ssl_version = error; then
+          AC_MSG_ERROR([$ssl_incdir/openssl/opensslv.h doesn't define OPENSSL_VERSION_NUMBER !])
+        else
+          if test $ssl_version = old; then
+            AC_MSG_WARN([OpenSSL version too old. Upgrade to 0.9.6 at least, see <A HREF="http://www.openssl.org.">http://www.openssl.org.</A> SSL support disabled.])
+            have_ssl=no
+          fi
+        fi
+        ac_cv_ssl_version=&quot;ssl_version=$ssl_version&quot;
+      else
+        AC_MSG_ERROR([Your system couldn't run a small SSL test program.
+        Check config.log, and if you can't figure it out, send a mail to
+        David Faure &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">faure at kde.org</A>&gt;, attaching your config.log])
+      fi
+
+    else
+      AC_MSG_ERROR([Your system couldn't link a small SSL test program.
+      Check config.log, and if you can't figure it out, send a mail to
+      David Faure &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">faure at kde.org</A>&gt;, attaching your config.log])
+    fi
+    CPPFLAGS=$ac_save_CPPFLAGS
+
+  ])
+
+  eval &quot;$ac_cv_ssl_version&quot;
+  AC_MSG_RESULT($ssl_version)
+fi
+
+if test &quot;$have_ssl&quot; != yes; then
+  LIBSSL=&quot;&quot;;
+else
+  AC_DEFINE(HAVE_SSL, 1, [If we are going to use OpenSSL])
+  ac_cv_have_ssl=&quot;have_ssl=yes \
+    ac_ssl_includes=$ac_ssl_includes ac_ssl_libraries=$ac_ssl_libraries ac_ssl_rsaref=$ac_ssl_rsaref&quot;
+
+
+  ssl_libraries=&quot;$ac_ssl_libraries&quot;
+  ssl_includes=&quot;$ac_ssl_includes&quot;
+
+  if test &quot;$ac_ssl_rsaref&quot; = yes; then
+    LIBSSL=&quot;-lssl -lcrypto -lRSAglue -lrsaref&quot;
+  fi
+
+  if test $ssl_version = &quot;old&quot;; then
+    AC_DEFINE(HAVE_OLD_SSL_API, 1, [Define if you have OpenSSL &lt; 0.9.6])
+  fi
+fi
+
+SSL_INCLUDES=
+
+if test &quot;$ssl_includes&quot; = &quot;/usr/include&quot;; then
+  if test -f /usr/kerberos/include/krb5.h; then
+	SSL_INCLUDES=&quot;-I/usr/kerberos/include&quot;
+  fi
+elif test  &quot;$ssl_includes&quot; != &quot;/usr/local/include&quot; &amp;&amp; test -n &quot;$ssl_includes&quot;; then
+  SSL_INCLUDES=&quot;-I$ssl_includes&quot;
+fi
+
+if test &quot;$ssl_libraries&quot; = &quot;/usr/lib&quot; || test &quot;$ssl_libraries&quot; = &quot;/usr/local/lib&quot; || test -z &quot;$ssl_libraries&quot; || test &quot;$ssl_libraries&quot; = &quot;NONE&quot;; then
+ SSL_LDFLAGS=&quot;&quot;
+else
+ SSL_LDFLAGS=&quot;-L$ssl_libraries -R$ssl_libraries&quot;
+fi
+
+AC_SUBST(SSL_INCLUDES)
+AC_SUBST(SSL_LDFLAGS)
+AC_SUBST(LIBSSL)
+])
+
+AC_DEFUN([KDE_CHECK_STRLCPY],
+[
+  AC_REQUIRE([AC_CHECK_STRLCAT])
+  AC_REQUIRE([AC_CHECK_STRLCPY])
+  AC_CHECK_SIZEOF(size_t)
+  AC_CHECK_SIZEOF(unsigned long)
+
+  AC_MSG_CHECKING([sizeof size_t == sizeof unsigned long])
+  AC_TRY_COMPILE(,[
+    #if SIZEOF_SIZE_T != SIZEOF_UNSIGNED_LONG
+       choke me
+    #endif
+    ],AC_MSG_RESULT([yes]),[
+      AC_MSG_RESULT(no)
+      AC_MSG_ERROR([
+       Apparently on your system our assumption sizeof size_t == sizeof unsigned long
+       does not apply. Please mail <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">kde-devel at kde.org</A> with a description of your system!
+      ])
+  ])
+])
+
+AC_DEFUN([KDE_CHECK_BINUTILS],
+[
+  AC_MSG_CHECKING([if ld supports unversioned version maps])
+
+  kde_save_LDFLAGS=&quot;$LDFLAGS&quot;
+  LDFLAGS=&quot;$LDFLAGS -Wl,--version-script=conftest.map&quot;
+  echo &quot;{ local: extern \&quot;C++\&quot; { foo }; };&quot; &gt; conftest.map
+  AC_TRY_LINK([int foo;],
+[
+#ifdef __INTEL_COMPILER
+icc apparently does not support libtools version-info and version-script
+at the same time. Dunno where the bug is, but until somebody figured out,
+better disable the optional version scripts.
+#endif
+
+  foo = 42;
+], kde_supports_versionmaps=yes, kde_supports_versionmaps=no)
+  LDFLAGS=&quot;$kde_save_LDFLAGS&quot;
+  rm -f conftest.map
+  AM_CONDITIONAL(include_VERSION_SCRIPT,
+    [test &quot;$kde_supports_versionmaps&quot; = &quot;yes&quot; &amp;&amp; test &quot;$kde_use_debug_code&quot; = &quot;no&quot;])
+
+  AC_MSG_RESULT($kde_supports_versionmaps)
+])
+
+AC_DEFUN([AM_PROG_OBJC],[
+AC_CHECK_PROGS(OBJC, gcc, gcc)
+test -z &quot;$OBJC&quot; &amp;&amp; AC_MSG_ERROR([no acceptable objective-c gcc found in \$PATH])
+if test &quot;x${OBJCFLAGS-unset}&quot; = xunset; then
+   OBJCFLAGS=&quot;-g -O2&quot;
+fi
+AC_SUBST(OBJCFLAGS)
+_AM_IF_OPTION([no-dependencies],, [_AM_DEPENDENCIES(OBJC)])
+])
+
+AC_DEFUN([KDE_CHECK_PERL],
+[
+	KDE_FIND_PATH(perl, PERL, [$bindir $exec_prefix/bin $prefix/bin], [
+		    AC_MSG_ERROR([No Perl found in your $PATH.
+We need perl to generate some code.])
+	])
+    AC_SUBST(PERL)
+])
+
+AC_DEFUN([KDE_CHECK_LARGEFILE],
+[
+AC_SYS_LARGEFILE
+if test &quot;$ac_cv_sys_file_offset_bits&quot; != no; then
+  CPPFLAGS=&quot;$CPPFLAGS -D_FILE_OFFSET_BITS=$ac_cv_sys_file_offset_bits&quot;
+fi
+
+if test &quot;x$ac_cv_sys_large_files&quot; != &quot;xno&quot;; then
+  CPPFLAGS=&quot;$CPPFLAGS -D_LARGE_FILES=1&quot;
+fi
+
+])
+
+dnl A small extension to PKG_CHECK_MODULES (defined in pkg.m4.in)
+dnl which allows to search for libs that get installed into the KDE prefix.
+dnl
+dnl Syntax:  KDE_PKG_CHECK_MODULES(KSTUFF, libkexif &gt;= 0.2 glib = 1.3.4, action-if, action-not)
+dnl defines KSTUFF_LIBS, KSTUFF_CFLAGS, see pkg-config man page
+dnl also defines KSTUFF_PKG_ERRORS on error
+AC_DEFUN([KDE_PKG_CHECK_MODULES], [
+
+   PKG_CONFIG_PATH=&quot;$prefix/lib/pkgconfig:$PKG_CONFIG_PATH&quot;
+   if test &quot;$prefix&quot; != &quot;$kde_libs_prefix&quot;; then
+       PKG_CONFIG_PATH=&quot;$kde_libs_prefix/lib/pkgconfig:$PKG_CONFIG_PATH&quot;
+   fi
+   export PKG_CONFIG_PATH
+   PKG_CHECK_MODULES([$1],[$2],[$3],[$4])
+])
+
+
+dnl Check for PIE support in the compiler and linker
+AC_DEFUN([KDE_CHECK_PIE_SUPPORT],
+[
+  AC_CACHE_CHECK([for PIE support], kde_cv_val_pie_support,
+  [
+    AC_LANG_SAVE
+    AC_LANG_CPLUSPLUS
+    safe_CXXFLAGS=$CXXFLAGS
+    safe_LDFLAGS=$LDFLAGS
+    CXXFLAGS=&quot;$CXXFLAGS -fPIE&quot;
+    LDFLAGS=&quot;$LDFLAGS -pie&quot;
+
+    AC_TRY_LINK([int foo;], [], [kde_cv_val_pie_support=yes], [kde_cv_val_pie_support=no])
+
+    CXXFLAGS=$safe_CXXFLAGS
+    LDFLAGS=$safe_LDFLAGS
+    AC_LANG_RESTORE
+  ])
+
+  AC_MSG_CHECKING(if enabling -pie/fPIE support)
+
+  AC_ARG_ENABLE(pie,
+    AC_HELP_STRING([--enable-pie],[platform supports PIE linking [default=detect]]),
+      [kde_has_pie_support=$enableval],
+      [kde_has_pie_support=detect])
+
+  if test &quot;$kde_has_pie_support&quot; = &quot;detect&quot;; then
+    kde_has_pie_support=$kde_cv_val_pie_support
+  fi
+
+  AC_MSG_RESULT([$kde_has_pie_support])
+
+  KDE_USE_FPIE=&quot;&quot;
+  KDE_USE_PIE=&quot;&quot;
+
+  AC_SUBST([KDE_USE_FPIE])
+  AC_SUBST([KDE_USE_PIE])
+
+  if test &quot;$kde_has_pie_support&quot; = &quot;yes&quot;; then
+    KDE_USE_FPIE=&quot;-fPIE&quot;
+    KDE_USE_PIE=&quot;-pie&quot;
+  fi
+])

Added: trunk/admin/bcheck.pl
===================================================================
--- trunk/admin/bcheck.pl	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/bcheck.pl	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,157 @@
+#!/usr/bin/perl -w
+
+use DB_File;
+use Fcntl ':flock';
+
+if (!defined($ARGV[0])) {
+    print &quot;usage: requires .class dump as parameter!\n&quot;;
+    exit;
+}
+
+sub bailout
+{
+    untie %bcheckdb if(defined(%bcheckdb));
+
+    if(defined(MYLOCK)) {
+        flock MYLOCK, LOCK_UN;
+        close(MYLOCK);
+    }
+
+    print @_;
+    exit 5;
+}
+
+sub ask_user
+{
+    my ($dbkey, $dbchunk) = @_;
+
+    if (defined($ENV{&quot;BCHECK_UPDATE&quot;})) {
+        $bcheckdb{$dbkey} = $dbchunk;
+        return;
+    }
+
+    &amp;bailout(&quot;BC problem detected&quot;) if (! -t STDIN);
+
+    print &quot;(I)gnore / (Q)uit / (U)pdate: &quot;;
+
+    my $key;
+    while(defined(read STDIN, $key, 1)) {
+        $key = lc($key);
+
+        print &quot;got: &gt;$key&lt;\n&quot;;
+
+        return if ($key eq 'i');
+
+        &amp;bailout(&quot;BC problem. aborted&quot;) if ($key eq 'q');
+
+        if ($key eq 'u') {
+            $bcheckdb{$dbkey} = $dbchunk;
+            return;
+        }
+        print &quot;\n(I)gnore / (Q)uit / (U)pdate: &quot;;
+    }
+}
+
+sub diff_chunk($$)
+{
+    my ($oldl, $newl) = @_;
+    my @old = split /^/m, $oldl;
+    my @new = split /^/m, $newl;
+    my $haschanges = 0;
+    my $max = $#old &gt; $#new ? $#old : $#new;
+
+    die &quot;whoops. key different&quot; if ($old[0] ne $new[0]);
+
+    if ($#old != $#new) {
+        warn (&quot;Structural difference.\n&quot;);
+        print @old;
+        print &quot;-----------------------------------------------\n&quot;;
+        print @new;
+        $haschanges = 1;
+        return $haschanges;
+    }
+
+    print $old[0];
+
+    my ($class) = ($old[0] =~ /^(?:Class |Vtable for )(\S+)/);
+
+    my $c = 1;
+    while ($c &lt; $max) {
+        my ($o, $n) = ($old[$c], $new[$c]);
+        chomp $o;
+        chomp $n;
+        $c++;
+        next if ($o eq $n);
+
+        if(defined($class) and $n =~ /^(\d+\s+)\w+(::\S+\s*.*)$/) {
+            next if ($n eq &quot;$1$class$2&quot;);
+        }
+
+        $haschanges = 1;
+
+        print &quot;-$o\n+$n\n\n&quot;;
+    }
+
+    return $haschanges;
+}
+
+local $dblock = $ENV{&quot;HOME&quot;} . &quot;/bcheck.lock&quot;;
+my $dbfile = $ENV{&quot;HOME&quot;} . &quot;/bcheck.db&quot;;
+my $cdump  = $ARGV[0];
+
+die &quot;file $cdump is not readable: $!&quot; if (! -f $cdump);
+
+# make sure the advisory lock exists
+open(MYLOCK, &quot;&gt;$dblock&quot;);
+print MYLOCK &quot;&quot;;
+
+flock MYLOCK, LOCK_EX;
+
+tie %bcheckdb, 'DB_File', $dbfile;
+
+my $chunk = &quot;&quot;;
+
+open (IN, &quot;&lt;$cdump&quot;) or die &quot;cannot open $cdump: $!&quot;;
+while (&lt;IN&gt;) {
+
+    chop;
+
+    s/0x[0-9a-fA-F]+/0x......../g;
+    s/base size=/size=/g;
+    s/\(\)\s*$//g;
+    s/base align=/align=/g;
+
+    $chunk .= $_ . &quot;\n&quot;;
+
+    if(/^\s*$/) {
+        my @lines = split /^/m, $chunk;
+        my $key = $lines[0];
+        chomp $key;
+
+        if($key !~ /&lt;anonymous struct&gt;/ &amp;&amp;
+           $key !~ /&lt;anonymous union&gt;/) {
+            if(defined($bcheckdb{$key})) {
+                my $dbversion = $bcheckdb{$key};
+
+                if($dbversion ne $chunk) {
+                     &amp;ask_user($key, $chunk) if(&amp;diff_chunk($dbversion, $chunk));
+                }
+            }
+            else {
+                $bcheckdb{$key} = $chunk;
+                print &quot;NEW: $key\n&quot;;
+            }
+        }
+
+        $chunk = &quot;&quot;;
+        next;
+    }
+
+}
+close(IN);
+
+untie %bcheckdb;
+flock MYLOCK, LOCK_UN;
+close(MYLOCK);
+
+exit 0;

Added: trunk/admin/compile
===================================================================
--- trunk/admin/compile	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/compile	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,142 @@
+#! /bin/sh
+# Wrapper for compilers which do not understand `-c -o'.
+
+scriptversion=2005-05-14.22
+
+# Copyright (C) 1999, 2000, 2003, 2004, 2005 Free Software Foundation, Inc.
+# Written by Tom Tromey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">tromey at cygnus.com</A>&gt;.
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+# This file is maintained in Automake, please report
+# bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt; or send patches to
+# &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">automake-patches at gnu.org</A>&gt;.
+
+case $1 in
+  '')
+     echo &quot;$0: No command.  Try \`$0 --help' for more information.&quot; 1&gt;&amp;2
+     exit 1;
+     ;;
+  -h | --h*)
+    cat &lt;&lt;\EOF
+Usage: compile [--help] [--version] PROGRAM [ARGS]
+
+Wrapper for compilers which do not understand `-c -o'.
+Remove `-o dest.o' from ARGS, run PROGRAM with the remaining
+arguments, and rename the output as expected.
+
+If you are trying to build a whole package this is not the
+right script to run: please start by reading the file `INSTALL'.
+
+Report bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt;.
+EOF
+    exit $?
+    ;;
+  -v | --v*)
+    echo &quot;compile $scriptversion&quot;
+    exit $?
+    ;;
+esac
+
+ofile=
+cfile=
+eat=
+
+for arg
+do
+  if test -n &quot;$eat&quot;; then
+    eat=
+  else
+    case $1 in
+      -o)
+	# configure might choose to run compile as `compile cc -o foo foo.c'.
+	# So we strip `-o arg' only if arg is an object.
+	eat=1
+	case $2 in
+	  *.o | *.obj)
+	    ofile=$2
+	    ;;
+	  *)
+	    set x &quot;$@&quot; -o &quot;$2&quot;
+	    shift
+	    ;;
+	esac
+	;;
+      *.c)
+	cfile=$1
+	set x &quot;$@&quot; &quot;$1&quot;
+	shift
+	;;
+      *)
+	set x &quot;$@&quot; &quot;$1&quot;
+	shift
+	;;
+    esac
+  fi
+  shift
+done
+
+if test -z &quot;$ofile&quot; || test -z &quot;$cfile&quot;; then
+  # If no `-o' option was seen then we might have been invoked from a
+  # pattern rule where we don't need one.  That is ok -- this is a
+  # normal compilation that the losing compiler can handle.  If no
+  # `.c' file was seen then we are probably linking.  That is also
+  # ok.
+  exec &quot;$@&quot;
+fi
+
+# Name of file we expect compiler to create.
+cofile=`echo &quot;$cfile&quot; | sed -e 's|^.*/||' -e 's/\.c$/.o/'`
+
+# Create the lock directory.
+# Note: use `[/.-]' here to ensure that we don't use the same name
+# that we are using for the .o file.  Also, base the name on the expected
+# object file name, since that is what matters with a parallel build.
+lockdir=`echo &quot;$cofile&quot; | sed -e 's|[/.-]|_|g'`.d
+while true; do
+  if mkdir &quot;$lockdir&quot; &gt;/dev/null 2&gt;&amp;1; then
+    break
+  fi
+  sleep 1
+done
+# FIXME: race condition here if user kills between mkdir and trap.
+trap &quot;rmdir '$lockdir'; exit 1&quot; 1 2 15
+
+# Run the compile.
+&quot;$@&quot;
+ret=$?
+
+if test -f &quot;$cofile&quot;; then
+  mv &quot;$cofile&quot; &quot;$ofile&quot;
+elif test -f &quot;${cofile}bj&quot;; then
+  mv &quot;${cofile}bj&quot; &quot;$ofile&quot;
+fi
+
+rmdir &quot;$lockdir&quot;
+exit $ret
+
+# Local Variables:
+# mode: shell-script
+# sh-indentation: 2
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;scriptversion=&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d.%02H&quot;
+# time-stamp-end: &quot;$&quot;
+# End:


Property changes on: trunk/admin/compile
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/conf.change.pl
===================================================================
--- trunk/admin/conf.change.pl	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/conf.change.pl	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,191 @@
+#!/usr/bin/env perl
+
+# this script patches a config.status file, to use our own perl script
+# in the main loop
+# we do it this way to circumvent hacking (and thereby including)
+# autoconf function (which are GPL) into our LGPL acinclude.m4.in
+# written by Michael Matz &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">matz at kde.org</A>&gt;
+# adapted by Dirk Mueller &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">mueller at kde.org</A>&gt;
+#
+#   This file is free software; you can redistribute it and/or
+#   modify it under the terms of the GNU Library General Public
+#   License as published by the Free Software Foundation; either
+#   version 2 of the License, or (at your option) any later version.
+
+#   This library is distributed in the hope that it will be useful,
+#   but WITHOUT ANY WARRANTY; without even the implied warranty of
+#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+#   Library General Public License for more details.
+
+#   You should have received a copy of the GNU Library General Public License
+#   along with this library; see the file COPYING.LIB.  If not, write to
+#   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+#   Boston, MA 02110-1301, USA.
+
+# we have to change two places
+# 1. the splitting of the substitutions into chunks of 90 (or even 48 in
+#    later autoconf's
+# 2. the big main loop which patches all Makefile.in's
+
+use strict;
+use File::Basename;
+
+my $ac_aux_dir = dirname($0);
+my ($flag);
+my $ac_version = 0;
+my $vpath_seen = 0;
+$flag = 0;
+
+while (&lt;&gt;) {
+# usage of $flag: 0 -- we have seen nothing yet
+#   1 -- we are in (1)
+#   2 -- we have ended (1)
+#   3 -- we are in (2)
+#   4 -- we ended (2)
+
+    if ($flag == 4) {
+        print;
+    } elsif ($flag == 0) {
+# 1. begins with (including): &quot;ac_max_sed_\S+\s*=\s*[0-9]+...&quot;
+#    ends with (excluding) &quot;CONFIG_FILE=...&quot;
+#    in later autoconf (2.14.1) there is no CONFIG_FILES= line,
+#    but instead the (2) directly follow (1)
+        if (/^\s*ac_max_sed_([a-z]+).*=\s*([0-9]+)/ ) {
+	    $flag = 1;
+	    if ($1 eq 'lines') {
+                # lets hope its different with 2141, 
+                # wasn't able to verify that
+              if ($2 eq '48') {
+                $ac_version = 250;
+              }
+              else {
+	        $ac_version = 2141;
+              }
+	    } elsif ($1 eq 'cmds') {
+	        $ac_version = 213;
+	    }
+	    # hmm, we don't know the autoconf version, but we try anyway
+	} else {
+	    print;
+	}
+    } elsif ($flag == 1) {
+        if (/^\s*CONFIG_FILES=/ &amp;&amp; ($ac_version != 250)) {
+	     print;
+	     $flag = 2;
+	} elsif (/^\s*for\s+ac_file\s+in\s+.*CONFIG_FILES/ ) {
+	     $flag = 3;
+	}
+    } elsif ($flag == 2) {
+# 2. begins with: &quot;for ac_file in.*CONFIG_FILES&quot;  (the next 'for' after (1))
+#    end with: &quot;rm -f conftest.s\*&quot;
+# on autoconf 250, it ends with '# CONFIG_HEADER section'
+#
+# gg: if a post-processing commands section is found first, 
+#    stop there and insert a new loop to honor the case/esac.
+# (pattern: /^\s+#\sRun the commands associated with the file./)
+
+	if (/^\s*for\s+ac_file\s+in\s+.*CONFIG_FILES/ ) {
+	    $flag = 3;
+	} else {
+	    print;
+	}
+    } elsif ($flag == 3) {
+        if (/^\s*rm\s+-f\s+conftest/ ) {
+	    $flag = 4;
+	    &amp;insert_main_loop();
+	} elsif (/^\s*rm\s+-f\s+.*ac_cs_root/ ) {
+	    $flag = 4;
+	    &amp;insert_main_loop();
+	    #die &quot;hhhhhhh&quot;;
+	    if ($ac_version != 2141) {
+	        print STDERR &quot;hmm, don't know autoconf version\n&quot;;
+	    }
+        } elsif (/^\#\s*CONFIG_(HEADER|COMMANDS) section.*|^\s+#\s(Run) the commands associated/) {
+          $flag = 4;
+          my $commands = defined $2;
+          &amp;insert_main_loop();
+          $commands &amp;&amp; insert_command_loop();
+          if($ac_version != 250) {
+            print STDERR &quot;hmm, something went wrong :-(\n&quot;;
+          }
+	} elsif (/VPATH/ ) {
+	    $vpath_seen = 1;
+	}
+    }
+}
+
+die &quot;wrong input (flag != 4)&quot; unless $flag == 4;
+print STDERR &quot;hmm, don't know autoconf version\n&quot; unless $ac_version;
+
+sub insert_main_loop {
+
+  if ($ac_version == 250) {
+    &amp;insert_main_loop_250();
+  }
+  else {
+    &amp;insert_main_loop_213();
+  }
+}
+
+sub insert_main_loop_250 {
+
+  print &lt;&lt;EOF;
+  #echo Doing the fast build of Makefiles -- autoconf $ac_version
+EOF
+    if ($vpath_seen) {
+        print &lt;&lt;EOF;
+        # VPATH subst was seen in original config.status main loop
+  echo '/^[ 	]*VPATH[ 	]*=[^:]*\$/d' &gt;&gt;\$tmp/subs.sed
+EOF
+      }
+  print &lt;&lt;EOF;
+  rm -f \$tmp/subs.files
+  for ac_file in .. \$CONFIG_FILES ; do
+      if test &quot;x\$ac_file&quot; != x..; then
+          echo \$ac_file &gt;&gt; \$tmp/subs.files
+      fi
+  done
+  if test -f \$tmp/subs.files ; then
+      perl $ac_aux_dir/config.pl &quot;\$tmp/subs.sed&quot; &quot;\$tmp/subs.files&quot; &quot;\$srcdir&quot; &quot;\$INSTALL&quot;
+  fi
+  rm -f \$tmp/subs.files
+
+fi
+EOF
+  return;
+}
+
+sub insert_main_loop_213 {
+    print &lt;&lt;EOF;
+#echo Doing the fast build of Makefiles -- autoconf $ac_version
+if test &quot;x\$ac_cs_root&quot; = &quot;x&quot; ; then
+    ac_cs_root=conftest
+fi
+EOF
+    if ($vpath_seen) {
+      print &lt;&lt;EOF;
+# VPATH subst was seen in original config.status main loop
+echo '/^[ 	]*VPATH[ 	]*=[^:]*\$/d' &gt;&gt; \$ac_cs_root.subs
+EOF
+    }
+    print &lt;&lt;EOF;
+rm -f \$ac_cs_root.sacfiles
+for ac_file in .. \$CONFIG_FILES ; do
+    if test &quot;x\$ac_file&quot; != x..; then
+        echo \$ac_file &gt;&gt; \$ac_cs_root.sacfiles
+    fi
+done
+if test -f \$ac_cs_root.sacfiles ; then
+    perl $ac_aux_dir/config.pl &quot;\$ac_cs_root.subs&quot; &quot;\$ac_cs_root.sacfiles&quot; &quot;\$ac_given_srcdir&quot; &quot;\$ac_given_INSTALL&quot;
+fi
+rm -f \$ac_cs_root.s*
+
+EOF
+    return;
+}
+
+sub insert_command_loop {
+    print &lt;&lt;EOF;
+  for ac_file in .. \$CONFIG_FILES ; do
+EOF
+}

Added: trunk/admin/config.guess
===================================================================
--- trunk/admin/config.guess	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/config.guess	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,1464 @@
+#! /bin/sh
+# Attempt to guess a canonical system name.
+#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
+
+timestamp='2005-06-30'
+
+# This file is free software; you can redistribute it and/or modify it
+# under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+# General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
+#
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+
+# Originally written by Per Bothner &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">per at bothner.com</A>&gt;.
+# Please send patches to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">config-patches at gnu.org</A>&gt;.  Submit a context
+# diff and a properly formatted ChangeLog entry.
+#
+# This script attempts to guess a canonical system name similar to
+# config.sub.  If it succeeds, it prints the system name on stdout, and
+# exits with 0.  Otherwise, it exits with 1.
+#
+# The plan is that this can be called by configure scripts if you
+# don't specify an explicit build system type.
+
+me=`echo &quot;$0&quot; | sed -e 's,.*/,,'`
+
+usage=&quot;\
+Usage: $0 [OPTION]
+
+Output the configuration name of the system \`$me' is run on.
+
+Operation modes:
+  -h, --help         print this help, then exit
+  -t, --time-stamp   print date of last modification, then exit
+  -v, --version      print version number, then exit
+
+Report bugs and patches to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">config-patches at gnu.org</A>&gt;.&quot;
+
+version=&quot;\
+GNU config.guess ($timestamp)
+
+Originally written by Per Bothner.
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+Free Software Foundation, Inc.
+
+This is free software; see the source for copying conditions.  There is NO
+warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&quot;
+
+help=&quot;
+Try \`$me --help' for more information.&quot;
+
+# Parse command line
+while test $# -gt 0 ; do
+  case $1 in
+    --time-stamp | --time* | -t )
+       echo &quot;$timestamp&quot; ; exit ;;
+    --version | -v )
+       echo &quot;$version&quot; ; exit ;;
+    --help | --h* | -h )
+       echo &quot;$usage&quot;; exit ;;
+    -- )     # Stop option processing
+       shift; break ;;
+    - )	# Use stdin as input.
+       break ;;
+    -* )
+       echo &quot;$me: invalid option $1$help&quot; &gt;&amp;2
+       exit 1 ;;
+    * )
+       break ;;
+  esac
+done
+
+if test $# != 0; then
+  echo &quot;$me: too many arguments$help&quot; &gt;&amp;2
+  exit 1
+fi
+
+trap 'exit 1' 1 2 15
+
+# CC_FOR_BUILD -- compiler used by this script. Note that the use of a
+# compiler to aid in system detection is discouraged as it requires
+# temporary files to be created and, as you can see below, it is a
+# headache to deal with in a portable fashion.
+
+# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
+# use `HOST_CC' if defined, but it is deprecated.
+
+# Portable tmp directory creation inspired by the Autoconf team.
+
+set_cc_for_build='
+trap &quot;exitcode=\$?; (rm -f \$tmpfiles 2&gt;/dev/null; rmdir \$tmp 2&gt;/dev/null) &amp;&amp; exit \$exitcode&quot; 0 ;
+trap &quot;rm -f \$tmpfiles 2&gt;/dev/null; rmdir \$tmp 2&gt;/dev/null; exit 1&quot; 1 2 13 15 ;
+: ${TMPDIR=/tmp} ;
+ { tmp=`(umask 077 &amp;&amp; mktemp -d -q &quot;$TMPDIR/cgXXXXXX&quot;) 2&gt;/dev/null` &amp;&amp; test -n &quot;$tmp&quot; &amp;&amp; test -d &quot;$tmp&quot; ; } ||
+ { test -n &quot;$RANDOM&quot; &amp;&amp; tmp=$TMPDIR/cg$$-$RANDOM &amp;&amp; (umask 077 &amp;&amp; mkdir $tmp) ; } ||
+ { tmp=$TMPDIR/cg-$$ &amp;&amp; (umask 077 &amp;&amp; mkdir $tmp) &amp;&amp; echo &quot;Warning: creating insecure temp directory&quot; &gt;&amp;2 ; } ||
+ { echo &quot;$me: cannot create a temporary directory in $TMPDIR&quot; &gt;&amp;2 ; exit 1 ; } ;
+dummy=$tmp/dummy ;
+tmpfiles=&quot;$dummy.c $dummy.o $dummy.rel $dummy&quot; ;
+case $CC_FOR_BUILD,$HOST_CC,$CC in
+ ,,)    echo &quot;int x;&quot; &gt; $dummy.c ;
+	for c in cc gcc c89 c99 ; do
+	  if ($c -c -o $dummy.o $dummy.c) &gt;/dev/null 2&gt;&amp;1 ; then
+	     CC_FOR_BUILD=&quot;$c&quot;; break ;
+	  fi ;
+	done ;
+	if test x&quot;$CC_FOR_BUILD&quot; = x ; then
+	  CC_FOR_BUILD=no_compiler_found ;
+	fi
+	;;
+ ,,*)   CC_FOR_BUILD=$CC ;;
+ ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+esac ;'
+
+# This is needed to find uname on a Pyramid OSx when run in the BSD universe.
+# (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">ghazi at noc.rutgers.edu</A> 1994-08-24)
+if (test -f /.attbin/uname) &gt;/dev/null 2&gt;&amp;1 ; then
+	PATH=$PATH:/.attbin ; export PATH
+fi
+
+UNAME_MACHINE=`(uname -m) 2&gt;/dev/null` || UNAME_MACHINE=unknown
+UNAME_RELEASE=`(uname -r) 2&gt;/dev/null` || UNAME_RELEASE=unknown
+UNAME_SYSTEM=`(uname -s) 2&gt;/dev/null`  || UNAME_SYSTEM=unknown
+UNAME_VERSION=`(uname -v) 2&gt;/dev/null` || UNAME_VERSION=unknown
+
+# Note: order is significant - the case branches are not exclusive.
+
+case &quot;${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}&quot; in
+    *:NetBSD:*:*)
+	# NetBSD (nbsd) targets should (where applicable) match one or
+	# more of the tupples: *-*-netbsdelf*, *-*-netbsdaout*,
+	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
+	# switched to ELF, *-*-netbsd* would select the old
+	# object file format.  This provides both forward
+	# compatibility and a consistent mechanism for selecting the
+	# object file format.
+	#
+	# Note: NetBSD doesn't particularly care about the vendor
+	# portion of the name.  We always set it to &quot;unknown&quot;.
+	sysctl=&quot;sysctl -n hw.machine_arch&quot;
+	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2&gt;/dev/null || \
+	    /usr/sbin/$sysctl 2&gt;/dev/null || echo unknown)`
+	case &quot;${UNAME_MACHINE_ARCH}&quot; in
+	    armeb) machine=armeb-unknown ;;
+	    arm*) machine=arm-unknown ;;
+	    sh3el) machine=shl-unknown ;;
+	    sh3eb) machine=sh-unknown ;;
+	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
+	esac
+	# The Operating System including object format, if it has switched
+	# to ELF recently, or will in the future.
+	case &quot;${UNAME_MACHINE_ARCH}&quot; in
+	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
+		eval $set_cc_for_build
+		if echo __ELF__ | $CC_FOR_BUILD -E - 2&gt;/dev/null \
+			| grep __ELF__ &gt;/dev/null
+		then
+		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
+		    # Return netbsd for either.  FIX?
+		    os=netbsd
+		else
+		    os=netbsdelf
+		fi
+		;;
+	    *)
+	        os=netbsd
+		;;
+	esac
+	# The OS release
+	# Debian GNU/NetBSD machines have a different userland, and
+	# thus, need a distinct triplet. However, they do not need
+	# kernel version information, so it can be replaced with a
+	# suitable tag, in the style of linux-gnu.
+	case &quot;${UNAME_VERSION}&quot; in
+	    Debian*)
+		release='-gnu'
+		;;
+	    *)
+		release=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\./'`
+		;;
+	esac
+	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
+	# contains redundant information, the shorter form:
+	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
+	echo &quot;${machine}-${os}${release}&quot;
+	exit ;;
+    *:OpenBSD:*:*)
+	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
+	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    *:ekkoBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+	exit ;;
+    macppc:MirBSD:*:*)
+	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
+	exit ;;
+    *:MirBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+	exit ;;
+    alpha:OSF1:*:*)
+	case $UNAME_RELEASE in
+	*4.0)
+		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
+		;;
+	*5.*)
+	        UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
+		;;
+	esac
+	# According to Compaq, /usr/sbin/psrinfo has been available on
+	# OSF/1 and Tru64 systems produced since 1995.  I hope that
+	# covers most systems running today.  This code pipes the CPU
+	# types through head -n 1, so we only detect the type of CPU 0.
+	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
+	case &quot;$ALPHA_CPU_TYPE&quot; in
+	    &quot;EV4 (21064)&quot;)
+		UNAME_MACHINE=&quot;alpha&quot; ;;
+	    &quot;EV4.5 (21064)&quot;)
+		UNAME_MACHINE=&quot;alpha&quot; ;;
+	    &quot;LCA4 (21066/21068)&quot;)
+		UNAME_MACHINE=&quot;alpha&quot; ;;
+	    &quot;EV5 (21164)&quot;)
+		UNAME_MACHINE=&quot;alphaev5&quot; ;;
+	    &quot;EV5.6 (21164A)&quot;)
+		UNAME_MACHINE=&quot;alphaev56&quot; ;;
+	    &quot;EV5.6 (21164PC)&quot;)
+		UNAME_MACHINE=&quot;alphapca56&quot; ;;
+	    &quot;EV5.7 (21164PC)&quot;)
+		UNAME_MACHINE=&quot;alphapca57&quot; ;;
+	    &quot;EV6 (21264)&quot;)
+		UNAME_MACHINE=&quot;alphaev6&quot; ;;
+	    &quot;EV6.7 (21264A)&quot;)
+		UNAME_MACHINE=&quot;alphaev67&quot; ;;
+	    &quot;EV6.8CB (21264C)&quot;)
+		UNAME_MACHINE=&quot;alphaev68&quot; ;;
+	    &quot;EV6.8AL (21264B)&quot;)
+		UNAME_MACHINE=&quot;alphaev68&quot; ;;
+	    &quot;EV6.8CX (21264D)&quot;)
+		UNAME_MACHINE=&quot;alphaev68&quot; ;;
+	    &quot;EV6.9A (21264/EV69A)&quot;)
+		UNAME_MACHINE=&quot;alphaev69&quot; ;;
+	    &quot;EV7 (21364)&quot;)
+		UNAME_MACHINE=&quot;alphaev7&quot; ;;
+	    &quot;EV7.9 (21364A)&quot;)
+		UNAME_MACHINE=&quot;alphaev79&quot; ;;
+	esac
+	# A Pn.n version is a patched version.
+	# A Vn.n version is a released version.
+	# A Tn.n version is a released field test version.
+	# A Xn.n version is an unreleased experimental baselevel.
+	# 1.2 uses &quot;1.2&quot; for uname -r.
+	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+	exit ;;
+    Alpha\ *:Windows_NT*:*)
+	# How do we know it's Interix rather than the generic POSIX subsystem?
+	# Should we change UNAME_MACHINE based on the output of uname instead
+	# of the specific Alpha model?
+	echo alpha-pc-interix
+	exit ;;
+    21064:Windows_NT:50:3)
+	echo alpha-dec-winnt3.5
+	exit ;;
+    Amiga*:UNIX_System_V:4.0:*)
+	echo m68k-unknown-sysv4
+	exit ;;
+    *:[Aa]miga[Oo][Ss]:*:*)
+	echo ${UNAME_MACHINE}-unknown-amigaos
+	exit ;;
+    *:[Mm]orph[Oo][Ss]:*:*)
+	echo ${UNAME_MACHINE}-unknown-morphos
+	exit ;;
+    *:OS/390:*:*)
+	echo i370-ibm-openedition
+	exit ;;
+    *:z/VM:*:*)
+	echo s390-ibm-zvmoe
+	exit ;;
+    *:OS400:*:*)
+        echo powerpc-ibm-os400
+	exit ;;
+    arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
+	echo arm-acorn-riscix${UNAME_RELEASE}
+	exit ;;
+    arm:riscos:*:*|arm:RISCOS:*:*)
+	echo arm-unknown-riscos
+	exit ;;
+    SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
+	echo hppa1.1-hitachi-hiuxmpp
+	exit ;;
+    Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
+	# <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">akee at wpdis03.wpafb.af.mil</A> (Earle F. Ake) contributed MIS and NILE.
+	if test &quot;`(/bin/universe) 2&gt;/dev/null`&quot; = att ; then
+		echo pyramid-pyramid-sysv3
+	else
+		echo pyramid-pyramid-bsd
+	fi
+	exit ;;
+    NILE*:*:*:dcosx)
+	echo pyramid-pyramid-svr4
+	exit ;;
+    DRS?6000:unix:4.0:6*)
+	echo sparc-icl-nx6
+	exit ;;
+    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
+	case `/usr/bin/uname -p` in
+	    sparc) echo sparc-icl-nx7; exit ;;
+	esac ;;
+    sun4H:SunOS:5.*:*)
+	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
+	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    i86pc:SunOS:5.*:*)
+	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    sun4*:SunOS:6*:*)
+	# According to config.sub, this is the proper way to canonicalize
+	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
+	# it's likely to be more like Solaris than SunOS4.
+	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    sun4*:SunOS:*:*)
+	case &quot;`/usr/bin/arch -k`&quot; in
+	    Series*|S4*)
+		UNAME_RELEASE=`uname -v`
+		;;
+	esac
+	# Japanese Language versions have a version number like `4.1.3-JL'.
+	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
+	exit ;;
+    sun3*:SunOS:*:*)
+	echo m68k-sun-sunos${UNAME_RELEASE}
+	exit ;;
+    sun*:*:4.2BSD:*)
+	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2&gt;/dev/null`
+	test &quot;x${UNAME_RELEASE}&quot; = &quot;x&quot; &amp;&amp; UNAME_RELEASE=3
+	case &quot;`/bin/arch`&quot; in
+	    sun3)
+		echo m68k-sun-sunos${UNAME_RELEASE}
+		;;
+	    sun4)
+		echo sparc-sun-sunos${UNAME_RELEASE}
+		;;
+	esac
+	exit ;;
+    aushp:SunOS:*:*)
+	echo sparc-auspex-sunos${UNAME_RELEASE}
+	exit ;;
+    # The situation for MiNT is a little confusing.  The machine name
+    # can be virtually everything (everything which is not
+    # &quot;atarist&quot; or &quot;atariste&quot; at least should have a processor
+    # &gt; m68000).  The system name ranges from &quot;MiNT&quot; over &quot;FreeMiNT&quot;
+    # to the lowercase version &quot;mint&quot; (or &quot;freemint&quot;).  Finally
+    # the system name &quot;TOS&quot; denotes a system which is actually not
+    # MiNT.  But MiNT is downward compatible to TOS, so this should
+    # be no problem.
+    atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
+        echo m68k-atari-mint${UNAME_RELEASE}
+	exit ;;
+    atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
+	echo m68k-atari-mint${UNAME_RELEASE}
+        exit ;;
+    *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
+        echo m68k-atari-mint${UNAME_RELEASE}
+	exit ;;
+    milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
+        echo m68k-milan-mint${UNAME_RELEASE}
+        exit ;;
+    hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
+        echo m68k-hades-mint${UNAME_RELEASE}
+        exit ;;
+    *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
+        echo m68k-unknown-mint${UNAME_RELEASE}
+        exit ;;
+    m68k:machten:*:*)
+	echo m68k-apple-machten${UNAME_RELEASE}
+	exit ;;
+    powerpc:machten:*:*)
+	echo powerpc-apple-machten${UNAME_RELEASE}
+	exit ;;
+    RISC*:Mach:*:*)
+	echo mips-dec-mach_bsd4.3
+	exit ;;
+    RISC*:ULTRIX:*:*)
+	echo mips-dec-ultrix${UNAME_RELEASE}
+	exit ;;
+    VAX*:ULTRIX*:*:*)
+	echo vax-dec-ultrix${UNAME_RELEASE}
+	exit ;;
+    2020:CLIX:*:* | 2430:CLIX:*:*)
+	echo clipper-intergraph-clix${UNAME_RELEASE}
+	exit ;;
+    mips:*:*:UMIPS | mips:*:*:RISCos)
+	eval $set_cc_for_build
+	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
+#ifdef __cplusplus
+#include &lt;stdio.h&gt;  /* for printf() prototype */
+	int main (int argc, char *argv[]) {
+#else
+	int main (argc, argv) int argc; char *argv[]; {
+#endif
+	#if defined (host_mips) &amp;&amp; defined (MIPSEB)
+	#if defined (SYSTYPE_SYSV)
+	  printf (&quot;mips-mips-riscos%ssysv\n&quot;, argv[1]); exit (0);
+	#endif
+	#if defined (SYSTYPE_SVR4)
+	  printf (&quot;mips-mips-riscos%ssvr4\n&quot;, argv[1]); exit (0);
+	#endif
+	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
+	  printf (&quot;mips-mips-riscos%sbsd\n&quot;, argv[1]); exit (0);
+	#endif
+	#endif
+	  exit (-1);
+	}
+EOF
+	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp;
+	  dummyarg=`echo &quot;${UNAME_RELEASE}&quot; | sed -n 's/\([0-9]*\).*/\1/p'` &amp;&amp;
+	  SYSTEM_NAME=`$dummy $dummyarg` &amp;&amp;
+	    { echo &quot;$SYSTEM_NAME&quot;; exit; }
+	echo mips-mips-riscos${UNAME_RELEASE}
+	exit ;;
+    Motorola:PowerMAX_OS:*:*)
+	echo powerpc-motorola-powermax
+	exit ;;
+    Motorola:*:4.3:PL8-*)
+	echo powerpc-harris-powermax
+	exit ;;
+    Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
+	echo powerpc-harris-powermax
+	exit ;;
+    Night_Hawk:Power_UNIX:*:*)
+	echo powerpc-harris-powerunix
+	exit ;;
+    m88k:CX/UX:7*:*)
+	echo m88k-harris-cxux7
+	exit ;;
+    m88k:*:4*:R4*)
+	echo m88k-motorola-sysv4
+	exit ;;
+    m88k:*:3*:R3*)
+	echo m88k-motorola-sysv3
+	exit ;;
+    AViiON:dgux:*:*)
+        # DG/UX returns AViiON for all architectures
+        UNAME_PROCESSOR=`/usr/bin/uname -p`
+	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
+	then
+	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
+	       [ ${TARGET_BINARY_INTERFACE}x = x ]
+	    then
+		echo m88k-dg-dgux${UNAME_RELEASE}
+	    else
+		echo m88k-dg-dguxbcs${UNAME_RELEASE}
+	    fi
+	else
+	    echo i586-dg-dgux${UNAME_RELEASE}
+	fi
+ 	exit ;;
+    M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
+	echo m88k-dolphin-sysv3
+	exit ;;
+    M88*:*:R3*:*)
+	# Delta 88k system running SVR3
+	echo m88k-motorola-sysv3
+	exit ;;
+    XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
+	echo m88k-tektronix-sysv3
+	exit ;;
+    Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
+	echo m68k-tektronix-bsd
+	exit ;;
+    *:IRIX*:*:*)
+	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
+	exit ;;
+    ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
+	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+	exit ;;               # Note that: echo &quot;'`uname -s`'&quot; gives 'AIX '
+    i*86:AIX:*:*)
+	echo i386-ibm-aix
+	exit ;;
+    ia64:AIX:*:*)
+	if [ -x /usr/bin/oslevel ] ; then
+		IBM_REV=`/usr/bin/oslevel`
+	else
+		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+	fi
+	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
+	exit ;;
+    *:AIX:2:3)
+	if grep bos325 /usr/include/stdio.h &gt;/dev/null 2&gt;&amp;1; then
+		eval $set_cc_for_build
+		sed 's/^		//' &lt;&lt; EOF &gt;$dummy.c
+		#include &lt;sys/systemcfg.h&gt;
+
+		main()
+			{
+			if (!__power_pc())
+				exit(1);
+			puts(&quot;powerpc-ibm-aix3.2.5&quot;);
+			exit(0);
+			}
+EOF
+		if $CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; SYSTEM_NAME=`$dummy`
+		then
+			echo &quot;$SYSTEM_NAME&quot;
+		else
+			echo rs6000-ibm-aix3.2.5
+		fi
+	elif grep bos324 /usr/include/stdio.h &gt;/dev/null 2&gt;&amp;1; then
+		echo rs6000-ibm-aix3.2.4
+	else
+		echo rs6000-ibm-aix3.2
+	fi
+	exit ;;
+    *:AIX:*:[45])
+	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' &gt;/dev/null 2&gt;&amp;1; then
+		IBM_ARCH=rs6000
+	else
+		IBM_ARCH=powerpc
+	fi
+	if [ -x /usr/bin/oslevel ] ; then
+		IBM_REV=`/usr/bin/oslevel`
+	else
+		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+	fi
+	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
+	exit ;;
+    *:AIX:*:*)
+	echo rs6000-ibm-aix
+	exit ;;
+    ibmrt:4.4BSD:*|romp-ibm:BSD:*)
+	echo romp-ibm-bsd4.4
+	exit ;;
+    ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
+	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
+	exit ;;                             # report: romp-ibm BSD 4.3
+    *:BOSX:*:*)
+	echo rs6000-bull-bosx
+	exit ;;
+    DPX/2?00:B.O.S.:*:*)
+	echo m68k-bull-sysv3
+	exit ;;
+    9000/[34]??:4.3bsd:1.*:*)
+	echo m68k-hp-bsd
+	exit ;;
+    hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
+	echo m68k-hp-bsd4.4
+	exit ;;
+    9000/[34678]??:HP-UX:*:*)
+	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+	case &quot;${UNAME_MACHINE}&quot; in
+	    9000/31? )            HP_ARCH=m68000 ;;
+	    9000/[34]?? )         HP_ARCH=m68k ;;
+	    9000/[678][0-9][0-9])
+		if [ -x /usr/bin/getconf ]; then
+		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2&gt;/dev/null`
+                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2&gt;/dev/null`
+                    case &quot;${sc_cpu_version}&quot; in
+                      523) HP_ARCH=&quot;hppa1.0&quot; ;; # CPU_PA_RISC1_0
+                      528) HP_ARCH=&quot;hppa1.1&quot; ;; # CPU_PA_RISC1_1
+                      532)                      # CPU_PA_RISC2_0
+                        case &quot;${sc_kernel_bits}&quot; in
+                          32) HP_ARCH=&quot;hppa2.0n&quot; ;;
+                          64) HP_ARCH=&quot;hppa2.0w&quot; ;;
+			  '') HP_ARCH=&quot;hppa2.0&quot; ;;   # HP-UX 10.20
+                        esac ;;
+                    esac
+		fi
+		if [ &quot;${HP_ARCH}&quot; = &quot;&quot; ]; then
+		    eval $set_cc_for_build
+		    sed 's/^              //' &lt;&lt; EOF &gt;$dummy.c
+
+              #define _HPUX_SOURCE
+              #include &lt;stdlib.h&gt;
+              #include &lt;unistd.h&gt;
+
+              int main ()
+              {
+              #if defined(_SC_KERNEL_BITS)
+                  long bits = sysconf(_SC_KERNEL_BITS);
+              #endif
+                  long cpu  = sysconf (_SC_CPU_VERSION);
+
+                  switch (cpu)
+              	{
+              	case CPU_PA_RISC1_0: puts (&quot;hppa1.0&quot;); break;
+              	case CPU_PA_RISC1_1: puts (&quot;hppa1.1&quot;); break;
+              	case CPU_PA_RISC2_0:
+              #if defined(_SC_KERNEL_BITS)
+              	    switch (bits)
+              		{
+              		case 64: puts (&quot;hppa2.0w&quot;); break;
+              		case 32: puts (&quot;hppa2.0n&quot;); break;
+              		default: puts (&quot;hppa2.0&quot;); break;
+              		} break;
+              #else  /* !defined(_SC_KERNEL_BITS) */
+              	    puts (&quot;hppa2.0&quot;); break;
+              #endif
+              	default: puts (&quot;hppa1.0&quot;); break;
+              	}
+                  exit (0);
+              }
+EOF
+		    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2&gt;/dev/null) &amp;&amp; HP_ARCH=`$dummy`
+		    test -z &quot;$HP_ARCH&quot; &amp;&amp; HP_ARCH=hppa
+		fi ;;
+	esac
+	if [ ${HP_ARCH} = &quot;hppa2.0w&quot; ]
+	then
+	    # avoid double evaluation of $set_cc_for_build
+	    test -n &quot;$CC_FOR_BUILD&quot; || eval $set_cc_for_build
+
+	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+	    # generating 64-bit code.  GNU and HP use different nomenclature:
+	    #
+	    # $ CC_FOR_BUILD=cc ./config.guess
+	    # =&gt; hppa2.0w-hp-hpux11.23
+	    # $ CC_FOR_BUILD=&quot;cc +DA2.0w&quot; ./config.guess
+	    # =&gt; hppa64-hp-hpux11.23
+
+	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2&gt;/dev/null) |
+		grep __LP64__ &gt;/dev/null
+	    then
+		HP_ARCH=&quot;hppa2.0w&quot;
+	    else
+		HP_ARCH=&quot;hppa64&quot;
+	    fi
+	fi
+	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
+	exit ;;
+    ia64:HP-UX:*:*)
+	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
+	echo ia64-hp-hpux${HPUX_REV}
+	exit ;;
+    3050*:HI-UX:*:*)
+	eval $set_cc_for_build
+	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
+	#include &lt;unistd.h&gt;
+	int
+	main ()
+	{
+	  long cpu = sysconf (_SC_CPU_VERSION);
+	  /* The order matters, because CPU_IS_HP_MC68K erroneously returns
+	     true for CPU_PA_RISC1_0.  CPU_IS_PA_RISC returns correct
+	     results, however.  */
+	  if (CPU_IS_PA_RISC (cpu))
+	    {
+	      switch (cpu)
+		{
+		  case CPU_PA_RISC1_0: puts (&quot;hppa1.0-hitachi-hiuxwe2&quot;); break;
+		  case CPU_PA_RISC1_1: puts (&quot;hppa1.1-hitachi-hiuxwe2&quot;); break;
+		  case CPU_PA_RISC2_0: puts (&quot;hppa2.0-hitachi-hiuxwe2&quot;); break;
+		  default: puts (&quot;hppa-hitachi-hiuxwe2&quot;); break;
+		}
+	    }
+	  else if (CPU_IS_HP_MC68K (cpu))
+	    puts (&quot;m68k-hitachi-hiuxwe2&quot;);
+	  else puts (&quot;unknown-hitachi-hiuxwe2&quot;);
+	  exit (0);
+	}
+EOF
+	$CC_FOR_BUILD -o $dummy $dummy.c &amp;&amp; SYSTEM_NAME=`$dummy` &amp;&amp;
+		{ echo &quot;$SYSTEM_NAME&quot;; exit; }
+	echo unknown-hitachi-hiuxwe2
+	exit ;;
+    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
+	echo hppa1.1-hp-bsd
+	exit ;;
+    9000/8??:4.3bsd:*:*)
+	echo hppa1.0-hp-bsd
+	exit ;;
+    *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
+	echo hppa1.0-hp-mpeix
+	exit ;;
+    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
+	echo hppa1.1-hp-osf
+	exit ;;
+    hp8??:OSF1:*:*)
+	echo hppa1.0-hp-osf
+	exit ;;
+    i*86:OSF1:*:*)
+	if [ -x /usr/sbin/sysversion ] ; then
+	    echo ${UNAME_MACHINE}-unknown-osf1mk
+	else
+	    echo ${UNAME_MACHINE}-unknown-osf1
+	fi
+	exit ;;
+    parisc*:Lites*:*:*)
+	echo hppa1.1-hp-lites
+	exit ;;
+    C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
+	echo c1-convex-bsd
+        exit ;;
+    C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
+	if getsysinfo -f scalar_acc
+	then echo c32-convex-bsd
+	else echo c2-convex-bsd
+	fi
+        exit ;;
+    C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
+	echo c34-convex-bsd
+        exit ;;
+    C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
+	echo c38-convex-bsd
+        exit ;;
+    C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
+	echo c4-convex-bsd
+        exit ;;
+    CRAY*Y-MP:*:*:*)
+	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*[A-Z]90:*:*:*)
+	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
+	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
+	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
+	      -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*TS:*:*:*)
+	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*T3E:*:*:*)
+	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    CRAY*SV1:*:*:*)
+	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    *:UNICOS/mp:*:*)
+	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
+    F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
+	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+        FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
+        echo &quot;${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}&quot;
+        exit ;;
+    5000:UNIX_System_V:4.*:*)
+        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+        FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+        echo &quot;sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}&quot;
+	exit ;;
+    i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
+	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
+	exit ;;
+    sparc*:BSD/OS:*:*)
+	echo sparc-unknown-bsdi${UNAME_RELEASE}
+	exit ;;
+    *:BSD/OS:*:*)
+	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
+	exit ;;
+    *:FreeBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	exit ;;
+    i*:CYGWIN*:*)
+	echo ${UNAME_MACHINE}-pc-cygwin
+	exit ;;
+    i*:MINGW*:*)
+	echo ${UNAME_MACHINE}-pc-mingw32
+	exit ;;
+    i*:windows32*:*)
+    	# uname -m includes &quot;-pc&quot; on this system.
+    	echo ${UNAME_MACHINE}-mingw32
+	exit ;;
+    i*:PW*:*)
+	echo ${UNAME_MACHINE}-pc-pw32
+	exit ;;
+    x86:Interix*:[34]*)
+	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
+	exit ;;
+    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
+	echo i${UNAME_MACHINE}-pc-mks
+	exit ;;
+    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
+	# How do we know it's Interix rather than the generic POSIX subsystem?
+	# It also conflicts with pre-2.0 versions of AT&amp;T UWIN. Should we
+	# UNAME_MACHINE based on the output of uname instead of i386?
+	echo i586-pc-interix
+	exit ;;
+    i*:UWIN*:*)
+	echo ${UNAME_MACHINE}-pc-uwin
+	exit ;;
+    amd64:CYGWIN*:*:*)
+	echo x86_64-unknown-cygwin
+	exit ;;
+    p*:CYGWIN*:*)
+	echo powerpcle-unknown-cygwin
+	exit ;;
+    prep*:SunOS:5.*:*)
+	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	exit ;;
+    *:GNU:*:*)
+	# the GNU system
+	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
+	exit ;;
+    *:GNU/*:*:*)
+	# other systems with GNU libc and userland
+	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+	exit ;;
+    i*86:Minix:*:*)
+	echo ${UNAME_MACHINE}-pc-minix
+	exit ;;
+    arm*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    cris:Linux:*:*)
+	echo cris-axis-linux-gnu
+	exit ;;
+    crisv32:Linux:*:*)
+	echo crisv32-axis-linux-gnu
+	exit ;;
+    frv:Linux:*:*)
+    	echo frv-unknown-linux-gnu
+	exit ;;
+    ia64:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    m32r*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    m68*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    mips:Linux:*:*)
+	eval $set_cc_for_build
+	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
+	#undef CPU
+	#undef mips
+	#undef mipsel
+	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+	CPU=mipsel
+	#else
+	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+	CPU=mips
+	#else
+	CPU=
+	#endif
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^CPU=`
+	test x&quot;${CPU}&quot; != x &amp;&amp; { echo &quot;${CPU}-unknown-linux-gnu&quot;; exit; }
+	;;
+    mips64:Linux:*:*)
+	eval $set_cc_for_build
+	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
+	#undef CPU
+	#undef mips64
+	#undef mips64el
+	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+	CPU=mips64el
+	#else
+	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
+	CPU=mips64
+	#else
+	CPU=
+	#endif
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^CPU=`
+	test x&quot;${CPU}&quot; != x &amp;&amp; { echo &quot;${CPU}-unknown-linux-gnu&quot;; exit; }
+	;;
+    ppc:Linux:*:*)
+	echo powerpc-unknown-linux-gnu
+	exit ;;
+    ppc64:Linux:*:*)
+	echo powerpc64-unknown-linux-gnu
+	exit ;;
+    alpha:Linux:*:*)
+	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' &lt; /proc/cpuinfo` in
+	  EV5)   UNAME_MACHINE=alphaev5 ;;
+	  EV56)  UNAME_MACHINE=alphaev56 ;;
+	  PCA56) UNAME_MACHINE=alphapca56 ;;
+	  PCA57) UNAME_MACHINE=alphapca56 ;;
+	  EV6)   UNAME_MACHINE=alphaev6 ;;
+	  EV67)  UNAME_MACHINE=alphaev67 ;;
+	  EV68*) UNAME_MACHINE=alphaev68 ;;
+        esac
+	objdump --private-headers /bin/sh | grep ld.so.1 &gt;/dev/null
+	if test &quot;$?&quot; = 0 ; then LIBC=&quot;libc1&quot; ; else LIBC=&quot;&quot; ; fi
+	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+	exit ;;
+    parisc:Linux:*:* | hppa:Linux:*:*)
+	# Look for CPU level
+	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2&gt;/dev/null | cut -d' ' -f2` in
+	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
+	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
+	  *)    echo hppa-unknown-linux-gnu ;;
+	esac
+	exit ;;
+    parisc64:Linux:*:* | hppa64:Linux:*:*)
+	echo hppa64-unknown-linux-gnu
+	exit ;;
+    s390:Linux:*:* | s390x:Linux:*:*)
+	echo ${UNAME_MACHINE}-ibm-linux
+	exit ;;
+    sh64*:Linux:*:*)
+    	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    sh*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    sparc:Linux:*:* | sparc64:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
+    x86_64:Linux:*:*)
+	echo x86_64-unknown-linux-gnu
+	exit ;;
+    i*86:Linux:*:*)
+	# The BFD linker knows what the default object file format is, so
+	# first see if it will tell us. cd to the root directory to prevent
+	# problems with other programs or directories called `ld' in the path.
+	# Set LC_ALL=C to ensure ld outputs messages in English.
+	ld_supported_targets=`cd /; LC_ALL=C ld --help 2&gt;&amp;1 \
+			 | sed -ne '/supported targets:/!d
+				    s/[ 	][ 	]*/ /g
+				    s/.*supported targets: *//
+				    s/ .*//
+				    p'`
+        case &quot;$ld_supported_targets&quot; in
+	  elf32-i386)
+		TENTATIVE=&quot;${UNAME_MACHINE}-pc-linux-gnu&quot;
+		;;
+	  a.out-i386-linux)
+		echo &quot;${UNAME_MACHINE}-pc-linux-gnuaout&quot;
+		exit ;;
+	  coff-i386)
+		echo &quot;${UNAME_MACHINE}-pc-linux-gnucoff&quot;
+		exit ;;
+	  &quot;&quot;)
+		# Either a pre-BFD a.out linker (linux-gnuoldld) or
+		# one that does not give us useful --help.
+		echo &quot;${UNAME_MACHINE}-pc-linux-gnuoldld&quot;
+		exit ;;
+	esac
+	# Determine whether the default compiler is a.out or elf
+	eval $set_cc_for_build
+	sed 's/^	//' &lt;&lt; EOF &gt;$dummy.c
+	#include &lt;features.h&gt;
+	#ifdef __ELF__
+	# ifdef __GLIBC__
+	#  if __GLIBC__ &gt;= 2
+	LIBC=gnu
+	#  else
+	LIBC=gnulibc1
+	#  endif
+	# else
+	LIBC=gnulibc1
+	# endif
+	#else
+	#ifdef __INTEL_COMPILER
+	LIBC=gnu
+	#else
+	LIBC=gnuaout
+	#endif
+	#endif
+	#ifdef __dietlibc__
+	LIBC=dietlibc
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2&gt;/dev/null | grep ^LIBC=`
+	test x&quot;${LIBC}&quot; != x &amp;&amp; {
+		echo &quot;${UNAME_MACHINE}-pc-linux-${LIBC}&quot;
+		exit
+	}
+	test x&quot;${TENTATIVE}&quot; != x &amp;&amp; { echo &quot;${TENTATIVE}&quot;; exit; }
+	;;
+    i*86:DYNIX/ptx:4*:*)
+	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
+	# earlier versions are messed up and put the nodename in both
+	# sysname and nodename.
+	echo i386-sequent-sysv4
+	exit ;;
+    i*86:UNIX_SV:4.2MP:2.*)
+        # Unixware is an offshoot of SVR4, but it has its own version
+        # number series starting with 2...
+        # I am not positive that other SVR4 systems won't match this,
+	# I just have to hope.  -- rms.
+        # Use sysv4.2uw... so that sysv4* matches it.
+	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
+	exit ;;
+    i*86:OS/2:*:*)
+	# If we were able to find `uname', then EMX Unix compatibility
+	# is probably installed.
+	echo ${UNAME_MACHINE}-pc-os2-emx
+	exit ;;
+    i*86:XTS-300:*:STOP)
+	echo ${UNAME_MACHINE}-unknown-stop
+	exit ;;
+    i*86:atheos:*:*)
+	echo ${UNAME_MACHINE}-unknown-atheos
+	exit ;;
+    i*86:syllable:*:*)
+	echo ${UNAME_MACHINE}-pc-syllable
+	exit ;;
+    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
+	echo i386-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    i*86:*DOS:*:*)
+	echo ${UNAME_MACHINE}-pc-msdosdjgpp
+	exit ;;
+    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
+	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
+	if grep Novell /usr/include/link.h &gt;/dev/null 2&gt;/dev/null; then
+		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
+	else
+		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
+	fi
+	exit ;;
+    i*86:*:5:[678]*)
+    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
+	case `/bin/uname -X | grep &quot;^Machine&quot;` in
+	    *486*)	     UNAME_MACHINE=i486 ;;
+	    *Pentium)	     UNAME_MACHINE=i586 ;;
+	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
+	esac
+	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+	exit ;;
+    i*86:*:3.2:*)
+	if test -f /usr/options/cb.name; then
+		UNAME_REL=`sed -n 's/.*Version //p' &lt;/usr/options/cb.name`
+		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
+	elif /bin/uname -X 2&gt;/dev/null &gt;/dev/null ; then
+		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
+		(/bin/uname -X|grep i80486 &gt;/dev/null) &amp;&amp; UNAME_MACHINE=i486
+		(/bin/uname -X|grep '^Machine.*Pentium' &gt;/dev/null) \
+			&amp;&amp; UNAME_MACHINE=i586
+		(/bin/uname -X|grep '^Machine.*Pent *II' &gt;/dev/null) \
+			&amp;&amp; UNAME_MACHINE=i686
+		(/bin/uname -X|grep '^Machine.*Pentium Pro' &gt;/dev/null) \
+			&amp;&amp; UNAME_MACHINE=i686
+		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
+	else
+		echo ${UNAME_MACHINE}-pc-sysv32
+	fi
+	exit ;;
+    pc:*:*:*)
+	# Left here for compatibility:
+        # uname -m prints for DJGPP always 'pc', but it prints nothing about
+        # the processor, so we play safe by assuming i386.
+	echo i386-pc-msdosdjgpp
+        exit ;;
+    Intel:Mach:3*:*)
+	echo i386-pc-mach3
+	exit ;;
+    paragon:*:*:*)
+	echo i860-intel-osf1
+	exit ;;
+    i860:*:4.*:*) # i860-SVR4
+	if grep Stardent /usr/include/sys/uadmin.h &gt;/dev/null 2&gt;&amp;1 ; then
+	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
+	else # Add other i860-SVR4 vendors below as they are discovered.
+	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
+	fi
+	exit ;;
+    mini*:CTIX:SYS*5:*)
+	# &quot;miniframe&quot;
+	echo m68010-convergent-sysv
+	exit ;;
+    mc68k:UNIX:SYSTEM5:3.51m)
+	echo m68k-convergent-sysv
+	exit ;;
+    M680?0:D-NIX:5.3:*)
+	echo m68k-diab-dnix
+	exit ;;
+    M68*:*:R3V[5678]*:*)
+	test -r /sysV68 &amp;&amp; { echo 'm68k-motorola-sysv'; exit; } ;;
+    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
+	OS_REL=''
+	test -r /etc/.relid \
+	&amp;&amp; OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' &lt; /etc/.relid`
+	/bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \
+	  &amp;&amp; { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+	/bin/uname -p 2&gt;/dev/null | /bin/grep entium &gt;/dev/null \
+	  &amp;&amp; { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+    3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
+        /bin/uname -p 2&gt;/dev/null | grep 86 &gt;/dev/null \
+          &amp;&amp; { echo i486-ncr-sysv4; exit; } ;;
+    m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
+	echo m68k-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    mc68030:UNIX_System_V:4.*:*)
+	echo m68k-atari-sysv4
+	exit ;;
+    TSUNAMI:LynxOS:2.*:*)
+	echo sparc-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    rs6000:LynxOS:2.*:*)
+	echo rs6000-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
+	echo powerpc-unknown-lynxos${UNAME_RELEASE}
+	exit ;;
+    SM[BE]S:UNIX_SV:*:*)
+	echo mips-dde-sysv${UNAME_RELEASE}
+	exit ;;
+    RM*:ReliantUNIX-*:*:*)
+	echo mips-sni-sysv4
+	exit ;;
+    RM*:SINIX-*:*:*)
+	echo mips-sni-sysv4
+	exit ;;
+    *:SINIX-*:*:*)
+	if uname -p 2&gt;/dev/null &gt;/dev/null ; then
+		UNAME_MACHINE=`(uname -p) 2&gt;/dev/null`
+		echo ${UNAME_MACHINE}-sni-sysv4
+	else
+		echo ns32k-sni-sysv
+	fi
+	exit ;;
+    PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+                      # says &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">Richard.M.Bartel at ccMail.Census.GOV</A>&gt;
+        echo i586-unisys-sysv4
+        exit ;;
+    *:UNIX_System_V:4*:FTX*)
+	# From Gerald Hewes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">hewes at openmarket.com</A>&gt;.
+	# How about differentiating between stratus architectures? -djm
+	echo hppa1.1-stratus-sysv4
+	exit ;;
+    *:*:*:FTX*)
+	# From <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">seanf at swdc.stratus.com.</A>
+	echo i860-stratus-sysv4
+	exit ;;
+    i*86:VOS:*:*)
+	# From <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">Paul.Green at stratus.com.</A>
+	echo ${UNAME_MACHINE}-stratus-vos
+	exit ;;
+    *:VOS:*:*)
+	# From <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">Paul.Green at stratus.com.</A>
+	echo hppa1.1-stratus-vos
+	exit ;;
+    mc68*:A/UX:*:*)
+	echo m68k-apple-aux${UNAME_RELEASE}
+	exit ;;
+    news*:NEWS-OS:6*:*)
+	echo mips-sony-newsos6
+	exit ;;
+    R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
+	if [ -d /usr/nec ]; then
+	        echo mips-nec-sysv${UNAME_RELEASE}
+	else
+	        echo mips-unknown-sysv${UNAME_RELEASE}
+	fi
+        exit ;;
+    BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
+	echo powerpc-be-beos
+	exit ;;
+    BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
+	echo powerpc-apple-beos
+	exit ;;
+    BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
+	echo i586-pc-beos
+	exit ;;
+    SX-4:SUPER-UX:*:*)
+	echo sx4-nec-superux${UNAME_RELEASE}
+	exit ;;
+    SX-5:SUPER-UX:*:*)
+	echo sx5-nec-superux${UNAME_RELEASE}
+	exit ;;
+    SX-6:SUPER-UX:*:*)
+	echo sx6-nec-superux${UNAME_RELEASE}
+	exit ;;
+    Power*:Rhapsody:*:*)
+	echo powerpc-apple-rhapsody${UNAME_RELEASE}
+	exit ;;
+    *:Rhapsody:*:*)
+	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
+	exit ;;
+    *:Darwin:*:*)
+	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+	case $UNAME_PROCESSOR in
+	    *86) UNAME_PROCESSOR=i686 ;;
+	    unknown) UNAME_PROCESSOR=powerpc ;;
+	esac
+	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+	exit ;;
+    *:procnto*:*:* | *:QNX:[0123456789]*:*)
+	UNAME_PROCESSOR=`uname -p`
+	if test &quot;$UNAME_PROCESSOR&quot; = &quot;x86&quot;; then
+		UNAME_PROCESSOR=i386
+		UNAME_MACHINE=pc
+	fi
+	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
+	exit ;;
+    *:QNX:*:4*)
+	echo i386-pc-qnx
+	exit ;;
+    NSE-?:NONSTOP_KERNEL:*:*)
+	echo nse-tandem-nsk${UNAME_RELEASE}
+	exit ;;
+    NSR-?:NONSTOP_KERNEL:*:*)
+	echo nsr-tandem-nsk${UNAME_RELEASE}
+	exit ;;
+    *:NonStop-UX:*:*)
+	echo mips-compaq-nonstopux
+	exit ;;
+    BS2000:POSIX*:*:*)
+	echo bs2000-siemens-sysv
+	exit ;;
+    DS/*:UNIX_System_V:*:*)
+	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
+	exit ;;
+    *:Plan9:*:*)
+	# &quot;uname -m&quot; is not consistent, so use $cputype instead. 386
+	# is converted to i386 for consistency with other x86
+	# operating systems.
+	if test &quot;$cputype&quot; = &quot;386&quot;; then
+	    UNAME_MACHINE=i386
+	else
+	    UNAME_MACHINE=&quot;$cputype&quot;
+	fi
+	echo ${UNAME_MACHINE}-unknown-plan9
+	exit ;;
+    *:TOPS-10:*:*)
+	echo pdp10-unknown-tops10
+	exit ;;
+    *:TENEX:*:*)
+	echo pdp10-unknown-tenex
+	exit ;;
+    KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
+	echo pdp10-dec-tops20
+	exit ;;
+    XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
+	echo pdp10-xkl-tops20
+	exit ;;
+    *:TOPS-20:*:*)
+	echo pdp10-unknown-tops20
+	exit ;;
+    *:ITS:*:*)
+	echo pdp10-unknown-its
+	exit ;;
+    SEI:*:*:SEIUX)
+        echo mips-sei-seiux${UNAME_RELEASE}
+	exit ;;
+    *:DragonFly:*:*)
+	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	exit ;;
+    *:*VMS:*:*)
+    	UNAME_MACHINE=`(uname -p) 2&gt;/dev/null`
+	case &quot;${UNAME_MACHINE}&quot; in
+	    A*) echo alpha-dec-vms ; exit ;;
+	    I*) echo ia64-dec-vms ; exit ;;
+	    V*) echo vax-dec-vms ; exit ;;
+	esac ;;
+    *:XENIX:*:SysV)
+	echo i386-pc-xenix
+	exit ;;
+    i*86:skyos:*:*)
+	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+	exit ;;
+esac
+
+#echo '(No uname command or uname output not recognized.)' 1&gt;&amp;2
+#echo &quot;${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}&quot; 1&gt;&amp;2
+
+eval $set_cc_for_build
+cat &gt;$dummy.c &lt;&lt;EOF
+#ifdef _SEQUENT_
+# include &lt;sys/types.h&gt;
+# include &lt;sys/utsname.h&gt;
+#endif
+main ()
+{
+#if defined (sony)
+#if defined (MIPSEB)
+  /* BFD wants &quot;bsd&quot; instead of &quot;newsos&quot;.  Perhaps BFD should be changed,
+     I don't know....  */
+  printf (&quot;mips-sony-bsd\n&quot;); exit (0);
+#else
+#include &lt;sys/param.h&gt;
+  printf (&quot;m68k-sony-newsos%s\n&quot;,
+#ifdef NEWSOS4
+          &quot;4&quot;
+#else
+	  &quot;&quot;
+#endif
+         ); exit (0);
+#endif
+#endif
+
+#if defined (__arm) &amp;&amp; defined (__acorn) &amp;&amp; defined (__unix)
+  printf (&quot;arm-acorn-riscix\n&quot;); exit (0);
+#endif
+
+#if defined (hp300) &amp;&amp; !defined (hpux)
+  printf (&quot;m68k-hp-bsd\n&quot;); exit (0);
+#endif
+
+#if defined (NeXT)
+#if !defined (__ARCHITECTURE__)
+#define __ARCHITECTURE__ &quot;m68k&quot;
+#endif
+  int version;
+  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2&gt;/dev/null`;
+  if (version &lt; 4)
+    printf (&quot;%s-next-nextstep%d\n&quot;, __ARCHITECTURE__, version);
+  else
+    printf (&quot;%s-next-openstep%d\n&quot;, __ARCHITECTURE__, version);
+  exit (0);
+#endif
+
+#if defined (MULTIMAX) || defined (n16)
+#if defined (UMAXV)
+  printf (&quot;ns32k-encore-sysv\n&quot;); exit (0);
+#else
+#if defined (CMU)
+  printf (&quot;ns32k-encore-mach\n&quot;); exit (0);
+#else
+  printf (&quot;ns32k-encore-bsd\n&quot;); exit (0);
+#endif
+#endif
+#endif
+
+#if defined (__386BSD__)
+  printf (&quot;i386-pc-bsd\n&quot;); exit (0);
+#endif
+
+#if defined (sequent)
+#if defined (i386)
+  printf (&quot;i386-sequent-dynix\n&quot;); exit (0);
+#endif
+#if defined (ns32000)
+  printf (&quot;ns32k-sequent-dynix\n&quot;); exit (0);
+#endif
+#endif
+
+#if defined (_SEQUENT_)
+    struct utsname un;
+
+    uname(&amp;un);
+
+    if (strncmp(un.version, &quot;V2&quot;, 2) == 0) {
+	printf (&quot;i386-sequent-ptx2\n&quot;); exit (0);
+    }
+    if (strncmp(un.version, &quot;V1&quot;, 2) == 0) { /* XXX is V1 correct? */
+	printf (&quot;i386-sequent-ptx1\n&quot;); exit (0);
+    }
+    printf (&quot;i386-sequent-ptx\n&quot;); exit (0);
+
+#endif
+
+#if defined (vax)
+# if !defined (ultrix)
+#  include &lt;sys/param.h&gt;
+#  if defined (BSD)
+#   if BSD == 43
+      printf (&quot;vax-dec-bsd4.3\n&quot;); exit (0);
+#   else
+#    if BSD == 199006
+      printf (&quot;vax-dec-bsd4.3reno\n&quot;); exit (0);
+#    else
+      printf (&quot;vax-dec-bsd\n&quot;); exit (0);
+#    endif
+#   endif
+#  else
+    printf (&quot;vax-dec-bsd\n&quot;); exit (0);
+#  endif
+# else
+    printf (&quot;vax-dec-ultrix\n&quot;); exit (0);
+# endif
+#endif
+
+#if defined (alliant) &amp;&amp; defined (i860)
+  printf (&quot;i860-alliant-bsd\n&quot;); exit (0);
+#endif
+
+  exit (1);
+}
+EOF
+
+$CC_FOR_BUILD -o $dummy $dummy.c 2&gt;/dev/null &amp;&amp; SYSTEM_NAME=`$dummy` &amp;&amp;
+	{ echo &quot;$SYSTEM_NAME&quot;; exit; }
+
+# Apollos put the system type in the environment.
+
+test -d /usr/apollo &amp;&amp; { echo ${ISP}-apollo-${SYSTYPE}; exit; }
+
+# Convex versions that predate uname can use getsysinfo(1)
+
+if [ -x /usr/convex/getsysinfo ]
+then
+    case `getsysinfo -f cpu_type` in
+    c1*)
+	echo c1-convex-bsd
+	exit ;;
+    c2*)
+	if getsysinfo -f scalar_acc
+	then echo c32-convex-bsd
+	else echo c2-convex-bsd
+	fi
+	exit ;;
+    c34*)
+	echo c34-convex-bsd
+	exit ;;
+    c38*)
+	echo c38-convex-bsd
+	exit ;;
+    c4*)
+	echo c4-convex-bsd
+	exit ;;
+    esac
+fi
+
+cat &gt;&amp;2 &lt;&lt;EOF
+$0: unable to guess system type
+
+This script, last modified $timestamp, has failed to recognize
+the operating system you are using. It is advised that you
+download the most up to date version of the config scripts from
+
+  <A HREF="http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess">http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess</A>
+and
+  <A HREF="http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub">http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub</A>
+
+If the version you run ($0) is already up to date, please
+send the following data and any information you think might be
+pertinent to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">config-patches at gnu.org</A>&gt; in order to provide the needed
+information to handle your system.
+
+config.guess timestamp = $timestamp
+
+uname -m = `(uname -m) 2&gt;/dev/null || echo unknown`
+uname -r = `(uname -r) 2&gt;/dev/null || echo unknown`
+uname -s = `(uname -s) 2&gt;/dev/null || echo unknown`
+uname -v = `(uname -v) 2&gt;/dev/null || echo unknown`
+
+/usr/bin/uname -p = `(/usr/bin/uname -p) 2&gt;/dev/null`
+/bin/uname -X     = `(/bin/uname -X) 2&gt;/dev/null`
+
+hostinfo               = `(hostinfo) 2&gt;/dev/null`
+/bin/universe          = `(/bin/universe) 2&gt;/dev/null`
+/usr/bin/arch -k       = `(/usr/bin/arch -k) 2&gt;/dev/null`
+/bin/arch              = `(/bin/arch) 2&gt;/dev/null`
+/usr/bin/oslevel       = `(/usr/bin/oslevel) 2&gt;/dev/null`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2&gt;/dev/null`
+
+UNAME_MACHINE = ${UNAME_MACHINE}
+UNAME_RELEASE = ${UNAME_RELEASE}
+UNAME_SYSTEM  = ${UNAME_SYSTEM}
+UNAME_VERSION = ${UNAME_VERSION}
+EOF
+
+exit 1
+
+# Local variables:
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;timestamp='&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d&quot;
+# time-stamp-end: &quot;'&quot;
+# End:


Property changes on: trunk/admin/config.guess
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/config.pl
===================================================================
--- trunk/admin/config.pl	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/config.pl	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,238 @@
+#!/usr/bin/env perl
+# a script for use by autoconf to make the Makefiles
+# from the Makefile.in's
+#
+# the original autoconf mechanism first splits all substitutions into groups
+# of ca. 90, and than invokes sed for _every_ Makefile.in and every group
+# (so around 2-3 times per Makefile.in). So this takes forever, as sed
+# has to recompile the regexps every time.
+#
+# this script does better. It changes all Makefile.ins in one process.
+# in kdelibs the time for building Makefile went down from 2:59 min to 13 sec!
+#
+# written by Michael Matz &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">matz at kde.org</A>&gt;
+# adapted by Dirk Mueller &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">mueller at kde.org</A>&gt;
+
+#   This file is free software; you can redistribute it and/or
+#   modify it under the terms of the GNU Library General Public
+#   License as published by the Free Software Foundation; either
+#   version 2 of the License, or (at your option) any later version.
+
+#   This library is distributed in the hope that it will be useful,
+#   but WITHOUT ANY WARRANTY; without even the implied warranty of
+#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+#   Library General Public License for more details.
+
+#   You should have received a copy of the GNU Library General Public License
+#   along with this library; see the file COPYING.LIB.  If not, write to
+#   the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+#   Boston, MA 02110-1301, USA.
+
+use strict;
+
+use File::Path;
+
+my $ac_subs=$ARGV[0];
+my $ac_sacfiles = $ARGV[1];
+my $ac_given_srcdir=$ARGV[2];
+my $ac_given_INSTALL=$ARGV[3];
+
+my @comp_match;
+my @comp_subs;
+
+#print &quot;ac_subs=$ac_subs\n&quot;;
+#print &quot;ac_sacfiles=$ac_sacfiles\n&quot;;
+#print &quot;ac_given_srcdir=$ac_given_srcdir\n&quot;;
+#print &quot;ac_given_INSTALL=$ac_given_INSTALL\n&quot;;
+
+my $configure_input;
+my ($srcdir, $top_srcdir);
+my $INSTALL;
+my $bad_perl = ($] &lt; 5.005);
+my $created_file_count = 0;
+
+open(CF, &quot;&lt; $ac_subs&quot;) || die &quot;can't open $ac_subs: $!&quot;;
+my @subs = &lt;CF&gt;;
+my $pat;
+close(CF);
+chomp @subs;
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at comp_match</A>=();
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at comp_subs</A>=();
+
+if ($bad_perl) {
+    print &quot;Using perl older than version 5.005\n&quot;;
+    foreach $pat (@subs) {
+	if (  ($pat =~ m/s%([^%]*)%([^%]*)%g/ )
+	   || ($pat =~ m/s%([^%]*)%([^%]*)%;t/ )
+           || ($pat =~ m/s,([^,]*),(.*),;t/)
+	   || ($pat =~ m%s/([^/]*)/([^/]*)/g% )
+	   || ($pat =~ m%s/([^/]*)/([^/]*)/;t% )
+	   ) {
+            # form : s%bla%blubb%g
+            # or     s%bla%blubb%;t t   (autoconf &gt; 2.13 and &lt; 2.52 ?)
+            # or     s,bla,blubb,;t t   (autoconf 2.52)
+            my $srch = $1;
+            my $repl = $2;
+            $repl =~ s/\\(.)/$1/g;
+	    push @comp_subs, make_closure($srch, $repl);
+
+	} elsif ( ($pat =~ /%([^%]*)%d/ )
+	   || ($pat =~ m%/([^/]*)/d% )
+	   ) {
+	    push @comp_subs, make_closure($1, &quot;&quot;);
+	} else {
+	    die &quot;Uhh. Malformed pattern in $ac_subs ($pat)&quot;
+		unless ( $pat =~ /^\s*$/ );   # ignore white lines
+	}
+    }
+} else {
+    foreach $pat (@subs) {
+       if ( ($pat =~ /s%([^%]*)%([^%]*)%g/ ) ||
+            ($pat =~ /s%([^%]*)%([^%]*)%;t/ ) ||
+            ($pat =~ /s,([^,]*),(.*),;t/) ) {
+         # form : s%bla%blubb%g
+         # or     s%bla%blubb%;t t   (autoconf &gt; 2.13 and &lt; 2.52 ?)
+         # or     s,bla,blubb,;t t   (autoconf 2.52)
+         my $srch = $1;
+         my $repl = $2;
+         push @comp_match, eval &quot;qr/\Q$srch\E/&quot;;  # compile match pattern
+         $repl =~ s/\\(.)/$1/g;
+         push @comp_subs, $repl;
+      } elsif ( ($pat =~ /%([^%]*)%d/ )
+                || ($pat =~ m%/([^/]*)/d% )
+              ) {
+        push @comp_match, eval &quot;qr/\Q$1\E/&quot;;
+        push @comp_subs, &quot;&quot;;
+      } else {
+          die &quot;Uhh. Malformed pattern in $ac_subs ($pat)&quot;
+          unless ( $pat =~ /^\s*$/ );   # ignore white lines
+      }
+    }
+}
+undef @subs;
+
+# read the list of files to be patched, form:
+# ./Makefile arts/Makefile arts/examples/Makefile arts/flow/Makefile
+
+open(CF, &quot;&lt; $ac_sacfiles&quot;) || die &quot;can't open $ac_sacfiles: $!&quot;;
+my @ac_files = &lt;CF&gt;;
+close(CF);
+chomp @ac_files;
+
+
+my $ac_file;
+foreach $ac_file (@ac_files) {
+    next if $ac_file =~ /\.\./;
+    next if $ac_file =~ /^\s*$/;
+    my $ac_file_in;
+    my ($ac_dir, $ac_dots, $ac_dir_suffix);
+
+    if ($ac_file =~ /.*:.*/ ) {
+	($ac_file_in = $ac_file) =~ s%[^:]*:%%;
+	$ac_file =~ s%:.*%%;
+    } else {
+	$ac_file_in = $ac_file.&quot;.in&quot;;
+    }
+
+# Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.
+
+# Remove last slash and all that follows it.  Not all systems have dirname.
+    ($ac_dir = $ac_file) =~ s%/[^/][^/]*$%%;
+    if ( ($ac_dir ne $ac_file) &amp;&amp; ($ac_dir ne &quot;.&quot;)) {
+# The file is in a subdirectory.
+	if (! -d &quot;$ac_dir&quot;) { mkpath &quot;$ac_dir&quot;, 0, 0777; }
+	($ac_dir_suffix = $ac_dir) =~ s%^./%%;
+	$ac_dir_suffix=&quot;/&quot;.$ac_dir_suffix;
+# A &quot;../&quot; for each directory in $ac_dir_suffix.
+	($ac_dots = $ac_dir_suffix) =~ s%/[^/]*%../%g;
+    } else {
+	$ac_dir_suffix=&quot;&quot;;
+	$ac_dots=&quot;&quot;;
+    }
+
+    if ($ac_given_srcdir eq &quot;.&quot;) {
+	$srcdir=&quot;.&quot;;
+	if ($ac_dots) {
+	    ( $top_srcdir = $ac_dots) =~ s%/$%%;
+	} else { $top_srcdir=&quot;.&quot;; }
+    } elsif ($ac_given_srcdir =~ m%^/%) {
+	$srcdir=$ac_given_srcdir.$ac_dir_suffix;
+	$top_srcdir = $ac_given_srcdir;
+    } else {
+	$srcdir = $ac_dots.$ac_given_srcdir.$ac_dir_suffix;
+	$top_srcdir = $ac_dots.$ac_given_srcdir;
+    }
+
+    if ($ac_given_INSTALL) {
+	if ($ac_given_INSTALL =~ m%^/% ) {
+	    $INSTALL = $ac_given_INSTALL;
+	} else {
+	    $INSTALL = $ac_dots.$ac_given_INSTALL;
+	}
+    }
+
+    print &quot;fast creating $ac_file\n&quot;;
+    unlink $ac_file;
+    my $ac_comsub=&quot;&quot;;
+    my $fname=$ac_file_in;
+    $fname =~ s%.*/%%;
+    $configure_input=&quot;$ac_file.  Generated from $fname by config.pl.&quot;;
+
+    my $ac_file_inputs;
+    ($ac_file_inputs = $ac_file_in) =~ s%^%$ac_given_srcdir/%;
+    $ac_file_inputs =~ s%:% $ac_given_srcdir/%g;
+
+    patch_file($ac_file, $ac_file_inputs);
+    ++$created_file_count;
+}
+
+print &quot;config.pl: fast created $created_file_count file(s).\n&quot;;
+
+sub patch_file {
+    my ($outf, $infiles) = @_;
+    my $filedata;
+    my @infiles=split(' ', $infiles);
+    my $i=0;
+    my $name;
+
+    foreach $name (@infiles) {
+	if (open(CF, &quot;&lt; $name&quot;)) {
+	    while (&lt;CF&gt;) {
+		$filedata .= $_;
+	    }
+	    close(CF);
+	} else {
+	    print STDERR &quot;can't open $name: $!&quot;.&quot;\n&quot;;
+	}
+    }
+
+    $filedata =~ s%\@configure_input\@%$configure_input%g;
+    $filedata =~ s%\@srcdir\@%$srcdir%g;
+    $filedata =~ s%\@top_srcdir\@%$top_srcdir%g;
+    $filedata =~ s%\@INSTALL\@%$INSTALL%g;
+
+    if ($bad_perl) {
+	while ($i &lt;= $#comp_subs) {
+	    my $ref = $comp_subs[$i];
+	    &amp;$ref(\$filedata);
+	    $i++;
+	}
+    } else {
+	while ($i &lt;= $#comp_match) {
+	    $filedata =~ s/$comp_match[$i]/$comp_subs[$i]/g;
+	    $i++;
+	}
+    }
+    open(CF, &quot;&gt; $outf&quot;) || die &quot;can't create $outf: $!&quot;;
+    print CF $filedata;
+    close(CF);
+}
+
+sub make_closure {
+    my ($pat, $sub) = @_;
+    my $ret = eval &quot;return sub { my \$ref=shift; \$\$ref =~ s%\Q$pat\E%\Q$sub\E%g; }&quot;;
+    if ($@) {
+        print &quot;can't create CODE: $@\n&quot;;
+    }
+    return $ret;
+}

Added: trunk/admin/config.sub
===================================================================
--- trunk/admin/config.sub	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/config.sub	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,1575 @@
+#! /bin/sh
+# Configuration validation subroutine script.
+#   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
+
+timestamp='2005-07-01'
+
+# This file is (in principle) common to ALL GNU software.
+# The presence of a machine in this file suggests that SOME GNU software
+# can handle that machine.  It does not imply ALL GNU software can.
+#
+# This file is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
+#
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+
+# Please send patches to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">config-patches at gnu.org</A>&gt;.  Submit a context
+# diff and a properly formatted ChangeLog entry.
+#
+# Configuration subroutine to validate and canonicalize a configuration type.
+# Supply the specified configuration type as an argument.
+# If it is invalid, we print an error message on stderr and exit with code 1.
+# Otherwise, we print the canonical config type on stdout and succeed.
+
+# This file is supposed to be the same for all GNU packages
+# and recognize all the CPU types, system types and aliases
+# that are meaningful with *any* GNU software.
+# Each package is responsible for reporting which valid configurations
+# it does not support.  The user should be able to distinguish
+# a failure to support a valid configuration from a meaningless
+# configuration.
+
+# The goal of this file is to map all the various variations of a given
+# machine specification into a single specification in the form:
+#	CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM
+# or in some cases, the newer four-part form:
+#	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
+# It is wrong to echo any other type of specification.
+
+me=`echo &quot;$0&quot; | sed -e 's,.*/,,'`
+
+usage=&quot;\
+Usage: $0 [OPTION] CPU-MFR-OPSYS
+       $0 [OPTION] ALIAS
+
+Canonicalize a configuration name.
+
+Operation modes:
+  -h, --help         print this help, then exit
+  -t, --time-stamp   print date of last modification, then exit
+  -v, --version      print version number, then exit
+
+Report bugs and patches to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">config-patches at gnu.org</A>&gt;.&quot;
+
+version=&quot;\
+GNU config.sub ($timestamp)
+
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
+Free Software Foundation, Inc.
+
+This is free software; see the source for copying conditions.  There is NO
+warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&quot;
+
+help=&quot;
+Try \`$me --help' for more information.&quot;
+
+# Parse command line
+while test $# -gt 0 ; do
+  case $1 in
+    --time-stamp | --time* | -t )
+       echo &quot;$timestamp&quot; ; exit ;;
+    --version | -v )
+       echo &quot;$version&quot; ; exit ;;
+    --help | --h* | -h )
+       echo &quot;$usage&quot;; exit ;;
+    -- )     # Stop option processing
+       shift; break ;;
+    - )	# Use stdin as input.
+       break ;;
+    -* )
+       echo &quot;$me: invalid option $1$help&quot;
+       exit 1 ;;
+
+    *local*)
+       # First pass through any local machine types.
+       echo $1
+       exit ;;
+
+    * )
+       break ;;
+  esac
+done
+
+case $# in
+ 0) echo &quot;$me: missing argument$help&quot; &gt;&amp;2
+    exit 1;;
+ 1) ;;
+ *) echo &quot;$me: too many arguments$help&quot; &gt;&amp;2
+    exit 1;;
+esac
+
+# Separate what the user gave into CPU-COMPANY and OS or KERNEL-OS (if any).
+# Here we must recognize all the valid KERNEL-OS combinations.
+maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
+case $maybe_os in
+  nto-qnx* | linux-gnu* | linux-dietlibc | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | \
+  kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+    os=-$maybe_os
+    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
+    ;;
+  *)
+    basic_machine=`echo $1 | sed 's/-[^-]*$//'`
+    if [ $basic_machine != $1 ]
+    then os=`echo $1 | sed 's/.*-/-/'`
+    else os=; fi
+    ;;
+esac
+
+### Let's recognize common machines as not being operating systems so
+### that things like config.sub decstation-3100 work.  We also
+### recognize some manufacturers as not being operating systems, so we
+### can provide default operating systems below.
+case $os in
+	-sun*os*)
+		# Prevent following clause from handling this invalid input.
+		;;
+	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
+	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
+	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
+	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
+	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
+	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
+	-apple | -axis | -knuth | -cray)
+		os=
+		basic_machine=$1
+		;;
+	-sim | -cisco | -oki | -wec | -winbond)
+		os=
+		basic_machine=$1
+		;;
+	-scout)
+		;;
+	-wrs)
+		os=-vxworks
+		basic_machine=$1
+		;;
+	-chorusos*)
+		os=-chorusos
+		basic_machine=$1
+		;;
+ 	-chorusrdb)
+ 		os=-chorusrdb
+		basic_machine=$1
+ 		;;
+	-hiux*)
+		os=-hiuxwe2
+		;;
+	-sco5)
+		os=-sco3.2v5
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco4)
+		os=-sco3.2v4
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco3.2.[4-9]*)
+		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco3.2v[4-9]*)
+		# Don't forget version if it is 3.2v4 or newer.
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-sco*)
+		os=-sco3.2v2
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-udk*)
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-isc)
+		os=-isc2.2
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-clix*)
+		basic_machine=clipper-intergraph
+		;;
+	-isc*)
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
+	-lynx*)
+		os=-lynxos
+		;;
+	-ptx*)
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-sequent/'`
+		;;
+	-windowsnt*)
+		os=`echo $os | sed -e 's/windowsnt/winnt/'`
+		;;
+	-psos*)
+		os=-psos
+		;;
+	-mint | -mint[0-9]*)
+		basic_machine=m68k-atari
+		os=-mint
+		;;
+esac
+
+# Decode aliases for certain CPU-COMPANY combinations.
+case $basic_machine in
+	# Recognize the basic CPU types without company name.
+	# Some are omitted here because they have special meanings below.
+	1750a | 580 \
+	| a29k \
+	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
+	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
+	| am33_2.0 \
+	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+	| bfin \
+	| c4x | clipper \
+	| d10v | d30v | dlx | dsp16xx \
+	| fr30 | frv \
+	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+	| i370 | i860 | i960 | ia64 \
+	| ip2k | iq2000 \
+	| m32r | m32rle | m68000 | m68k | m88k | maxq | mcore \
+	| mips | mipsbe | mipseb | mipsel | mipsle \
+	| mips16 \
+	| mips64 | mips64el \
+	| mips64vr | mips64vrel \
+	| mips64orion | mips64orionel \
+	| mips64vr4100 | mips64vr4100el \
+	| mips64vr4300 | mips64vr4300el \
+	| mips64vr5000 | mips64vr5000el \
+	| mips64vr5900 | mips64vr5900el \
+	| mipsisa32 | mipsisa32el \
+	| mipsisa32r2 | mipsisa32r2el \
+	| mipsisa64 | mipsisa64el \
+	| mipsisa64r2 | mipsisa64r2el \
+	| mipsisa64sb1 | mipsisa64sb1el \
+	| mipsisa64sr71k | mipsisa64sr71kel \
+	| mipstx39 | mipstx39el \
+	| mn10200 | mn10300 \
+	| ms1 \
+	| msp430 \
+	| ns16k | ns32k \
+	| or32 \
+	| pdp10 | pdp11 | pj | pjl \
+	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
+	| pyramid \
+	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+	| sh64 | sh64le \
+	| sparc | sparc64 | sparc64b | sparc86x | sparclet | sparclite \
+	| sparcv8 | sparcv9 | sparcv9b \
+	| strongarm \
+	| tahoe | thumb | tic4x | tic80 | tron \
+	| v850 | v850e \
+	| we32k \
+	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
+	| z8k)
+		basic_machine=$basic_machine-unknown
+		;;
+	m32c)
+		basic_machine=$basic_machine-unknown
+		;;
+	m6811 | m68hc11 | m6812 | m68hc12)
+		# Motorola 68HC11/12.
+		basic_machine=$basic_machine-unknown
+		os=-none
+		;;
+	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
+		;;
+
+	# We use `pc' rather than `unknown'
+	# because (1) that's what they normally are, and
+	# (2) the word &quot;unknown&quot; tends to confuse beginning users.
+	i*86 | x86_64)
+	  basic_machine=$basic_machine-pc
+	  ;;
+	# Object if more than one company name word.
+	*-*-*)
+		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1&gt;&amp;2
+		exit 1
+		;;
+	# Recognize the basic CPU types with company name.
+	580-* \
+	| a29k-* \
+	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
+	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
+	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
+	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
+	| avr-* \
+	| bfin-* | bs2000-* \
+	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
+	| clipper-* | craynv-* | cydra-* \
+	| d10v-* | d30v-* | dlx-* \
+	| elxsi-* \
+	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
+	| h8300-* | h8500-* \
+	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
+	| i*86-* | i860-* | i960-* | ia64-* \
+	| ip2k-* | iq2000-* \
+	| m32r-* | m32rle-* \
+	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* \
+	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
+	| mips16-* \
+	| mips64-* | mips64el-* \
+	| mips64vr-* | mips64vrel-* \
+	| mips64orion-* | mips64orionel-* \
+	| mips64vr4100-* | mips64vr4100el-* \
+	| mips64vr4300-* | mips64vr4300el-* \
+	| mips64vr5000-* | mips64vr5000el-* \
+	| mips64vr5900-* | mips64vr5900el-* \
+	| mipsisa32-* | mipsisa32el-* \
+	| mipsisa32r2-* | mipsisa32r2el-* \
+	| mipsisa64-* | mipsisa64el-* \
+	| mipsisa64r2-* | mipsisa64r2el-* \
+	| mipsisa64sb1-* | mipsisa64sb1el-* \
+	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
+	| mipstx39-* | mipstx39el-* \
+	| mmix-* \
+	| ms1-* \
+	| msp430-* \
+	| none-* | np1-* | ns16k-* | ns32k-* \
+	| orion-* \
+	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
+	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
+	| pyramid-* \
+	| romp-* | rs6000-* \
+	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
+	| sparc-* | sparc64-* | sparc64b-* | sparc86x-* | sparclet-* \
+	| sparclite-* \
+	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
+	| tahoe-* | thumb-* \
+	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+	| tron-* \
+	| v850-* | v850e-* | vax-* \
+	| we32k-* \
+	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
+	| xstormy16-* | xtensa-* \
+	| ymp-* \
+	| z8k-*)
+		;;
+	m32c-*)
+		;;
+	# Recognize the various machine names and aliases which stand
+	# for a CPU type and a company and sometimes even an OS.
+	386bsd)
+		basic_machine=i386-unknown
+		os=-bsd
+		;;
+	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
+		basic_machine=m68000-att
+		;;
+	3b*)
+		basic_machine=we32k-att
+		;;
+	a29khif)
+		basic_machine=a29k-amd
+		os=-udi
+		;;
+    	abacus)
+		basic_machine=abacus-unknown
+		;;
+	adobe68k)
+		basic_machine=m68010-adobe
+		os=-scout
+		;;
+	alliant | fx80)
+		basic_machine=fx80-alliant
+		;;
+	altos | altos3068)
+		basic_machine=m68k-altos
+		;;
+	am29k)
+		basic_machine=a29k-none
+		os=-bsd
+		;;
+	amd64)
+		basic_machine=x86_64-pc
+		;;
+	amd64-*)
+		basic_machine=x86_64-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	amdahl)
+		basic_machine=580-amdahl
+		os=-sysv
+		;;
+	amiga | amiga-*)
+		basic_machine=m68k-unknown
+		;;
+	amigaos | amigados)
+		basic_machine=m68k-unknown
+		os=-amigaos
+		;;
+	amigaunix | amix)
+		basic_machine=m68k-unknown
+		os=-sysv4
+		;;
+	apollo68)
+		basic_machine=m68k-apollo
+		os=-sysv
+		;;
+	apollo68bsd)
+		basic_machine=m68k-apollo
+		os=-bsd
+		;;
+	aux)
+		basic_machine=m68k-apple
+		os=-aux
+		;;
+	balance)
+		basic_machine=ns32k-sequent
+		os=-dynix
+		;;
+	c90)
+		basic_machine=c90-cray
+		os=-unicos
+		;;
+	convex-c1)
+		basic_machine=c1-convex
+		os=-bsd
+		;;
+	convex-c2)
+		basic_machine=c2-convex
+		os=-bsd
+		;;
+	convex-c32)
+		basic_machine=c32-convex
+		os=-bsd
+		;;
+	convex-c34)
+		basic_machine=c34-convex
+		os=-bsd
+		;;
+	convex-c38)
+		basic_machine=c38-convex
+		os=-bsd
+		;;
+	cray | j90)
+		basic_machine=j90-cray
+		os=-unicos
+		;;
+	craynv)
+		basic_machine=craynv-cray
+		os=-unicosmp
+		;;
+	cr16c)
+		basic_machine=cr16c-unknown
+		os=-elf
+		;;
+	crds | unos)
+		basic_machine=m68k-crds
+		;;
+	crisv32 | crisv32-* | etraxfs*)
+		basic_machine=crisv32-axis
+		;;
+	cris | cris-* | etrax*)
+		basic_machine=cris-axis
+		;;
+	crx)
+		basic_machine=crx-unknown
+		os=-elf
+		;;
+	da30 | da30-*)
+		basic_machine=m68k-da30
+		;;
+	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
+		basic_machine=mips-dec
+		;;
+	decsystem10* | dec10*)
+		basic_machine=pdp10-dec
+		os=-tops10
+		;;
+	decsystem20* | dec20*)
+		basic_machine=pdp10-dec
+		os=-tops20
+		;;
+	delta | 3300 | motorola-3300 | motorola-delta \
+	      | 3300-motorola | delta-motorola)
+		basic_machine=m68k-motorola
+		;;
+	delta88)
+		basic_machine=m88k-motorola
+		os=-sysv3
+		;;
+	djgpp)
+		basic_machine=i586-pc
+		os=-msdosdjgpp
+		;;
+	dpx20 | dpx20-*)
+		basic_machine=rs6000-bull
+		os=-bosx
+		;;
+	dpx2* | dpx2*-bull)
+		basic_machine=m68k-bull
+		os=-sysv3
+		;;
+	ebmon29k)
+		basic_machine=a29k-amd
+		os=-ebmon
+		;;
+	elxsi)
+		basic_machine=elxsi-elxsi
+		os=-bsd
+		;;
+	encore | umax | mmax)
+		basic_machine=ns32k-encore
+		;;
+	es1800 | OSE68k | ose68k | ose | OSE)
+		basic_machine=m68k-ericsson
+		os=-ose
+		;;
+	fx2800)
+		basic_machine=i860-alliant
+		;;
+	genix)
+		basic_machine=ns32k-ns
+		;;
+	gmicro)
+		basic_machine=tron-gmicro
+		os=-sysv
+		;;
+	go32)
+		basic_machine=i386-pc
+		os=-go32
+		;;
+	h3050r* | hiux*)
+		basic_machine=hppa1.1-hitachi
+		os=-hiuxwe2
+		;;
+	h8300hms)
+		basic_machine=h8300-hitachi
+		os=-hms
+		;;
+	h8300xray)
+		basic_machine=h8300-hitachi
+		os=-xray
+		;;
+	h8500hms)
+		basic_machine=h8500-hitachi
+		os=-hms
+		;;
+	harris)
+		basic_machine=m88k-harris
+		os=-sysv3
+		;;
+	hp300-*)
+		basic_machine=m68k-hp
+		;;
+	hp300bsd)
+		basic_machine=m68k-hp
+		os=-bsd
+		;;
+	hp300hpux)
+		basic_machine=m68k-hp
+		os=-hpux
+		;;
+	hp3k9[0-9][0-9] | hp9[0-9][0-9])
+		basic_machine=hppa1.0-hp
+		;;
+	hp9k2[0-9][0-9] | hp9k31[0-9])
+		basic_machine=m68000-hp
+		;;
+	hp9k3[2-9][0-9])
+		basic_machine=m68k-hp
+		;;
+	hp9k6[0-9][0-9] | hp6[0-9][0-9])
+		basic_machine=hppa1.0-hp
+		;;
+	hp9k7[0-79][0-9] | hp7[0-79][0-9])
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k78[0-9] | hp78[0-9])
+		# FIXME: really hppa2.0-hp
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
+		# FIXME: really hppa2.0-hp
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k8[0-9][13679] | hp8[0-9][13679])
+		basic_machine=hppa1.1-hp
+		;;
+	hp9k8[0-9][0-9] | hp8[0-9][0-9])
+		basic_machine=hppa1.0-hp
+		;;
+	hppa-next)
+		os=-nextstep3
+		;;
+	hppaosf)
+		basic_machine=hppa1.1-hp
+		os=-osf
+		;;
+	hppro)
+		basic_machine=hppa1.1-hp
+		os=-proelf
+		;;
+	i370-ibm* | ibm*)
+		basic_machine=i370-ibm
+		;;
+# I'm not sure what &quot;Sysv32&quot; means.  Should this be sysv3.2?
+	i*86v32)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-sysv32
+		;;
+	i*86v4*)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-sysv4
+		;;
+	i*86v)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-sysv
+		;;
+	i*86sol2)
+		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
+		os=-solaris2
+		;;
+	i386mach)
+		basic_machine=i386-mach
+		os=-mach
+		;;
+	i386-vsta | vsta)
+		basic_machine=i386-unknown
+		os=-vsta
+		;;
+	iris | iris4d)
+		basic_machine=mips-sgi
+		case $os in
+		    -irix*)
+			;;
+		    *)
+			os=-irix4
+			;;
+		esac
+		;;
+	isi68 | isi)
+		basic_machine=m68k-isi
+		os=-sysv
+		;;
+	m88k-omron*)
+		basic_machine=m88k-omron
+		;;
+	magnum | m3230)
+		basic_machine=mips-mips
+		os=-sysv
+		;;
+	merlin)
+		basic_machine=ns32k-utek
+		os=-sysv
+		;;
+	mingw32)
+		basic_machine=i386-pc
+		os=-mingw32
+		;;
+	miniframe)
+		basic_machine=m68000-convergent
+		;;
+	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
+		basic_machine=m68k-atari
+		os=-mint
+		;;
+	mips3*-*)
+		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
+		;;
+	mips3*)
+		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
+		;;
+	monitor)
+		basic_machine=m68k-rom68k
+		os=-coff
+		;;
+	morphos)
+		basic_machine=powerpc-unknown
+		os=-morphos
+		;;
+	msdos)
+		basic_machine=i386-pc
+		os=-msdos
+		;;
+	mvs)
+		basic_machine=i370-ibm
+		os=-mvs
+		;;
+	ncr3000)
+		basic_machine=i486-ncr
+		os=-sysv4
+		;;
+	netbsd386)
+		basic_machine=i386-unknown
+		os=-netbsd
+		;;
+	netwinder)
+		basic_machine=armv4l-rebel
+		os=-linux
+		;;
+	news | news700 | news800 | news900)
+		basic_machine=m68k-sony
+		os=-newsos
+		;;
+	news1000)
+		basic_machine=m68030-sony
+		os=-newsos
+		;;
+	news-3600 | risc-news)
+		basic_machine=mips-sony
+		os=-newsos
+		;;
+	necv70)
+		basic_machine=v70-nec
+		os=-sysv
+		;;
+	next | m*-next )
+		basic_machine=m68k-next
+		case $os in
+		    -nextstep* )
+			;;
+		    -ns2*)
+		      os=-nextstep2
+			;;
+		    *)
+		      os=-nextstep3
+			;;
+		esac
+		;;
+	nh3000)
+		basic_machine=m68k-harris
+		os=-cxux
+		;;
+	nh[45]000)
+		basic_machine=m88k-harris
+		os=-cxux
+		;;
+	nindy960)
+		basic_machine=i960-intel
+		os=-nindy
+		;;
+	mon960)
+		basic_machine=i960-intel
+		os=-mon960
+		;;
+	nonstopux)
+		basic_machine=mips-compaq
+		os=-nonstopux
+		;;
+	np1)
+		basic_machine=np1-gould
+		;;
+	nsr-tandem)
+		basic_machine=nsr-tandem
+		;;
+	op50n-* | op60c-*)
+		basic_machine=hppa1.1-oki
+		os=-proelf
+		;;
+	openrisc | openrisc-*)
+		basic_machine=or32-unknown
+		;;
+	os400)
+		basic_machine=powerpc-ibm
+		os=-os400
+		;;
+	OSE68000 | ose68000)
+		basic_machine=m68000-ericsson
+		os=-ose
+		;;
+	os68k)
+		basic_machine=m68k-none
+		os=-os68k
+		;;
+	pa-hitachi)
+		basic_machine=hppa1.1-hitachi
+		os=-hiuxwe2
+		;;
+	paragon)
+		basic_machine=i860-intel
+		os=-osf
+		;;
+	pbd)
+		basic_machine=sparc-tti
+		;;
+	pbb)
+		basic_machine=m68k-tti
+		;;
+	pc532 | pc532-*)
+		basic_machine=ns32k-pc532
+		;;
+	pentium | p5 | k5 | k6 | nexgen | viac3)
+		basic_machine=i586-pc
+		;;
+	pentiumpro | p6 | 6x86 | athlon | athlon_*)
+		basic_machine=i686-pc
+		;;
+	pentiumii | pentium2 | pentiumiii | pentium3)
+		basic_machine=i686-pc
+		;;
+	pentium4)
+		basic_machine=i786-pc
+		;;
+	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pentiumpro-* | p6-* | 6x86-* | athlon-*)
+		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
+		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pentium4-*)
+		basic_machine=i786-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	pn)
+		basic_machine=pn-gould
+		;;
+	power)	basic_machine=power-ibm
+		;;
+	ppc)	basic_machine=powerpc-unknown
+		;;
+	ppc-*)	basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ppcle | powerpclittle | ppc-le | powerpc-little)
+		basic_machine=powerpcle-unknown
+		;;
+	ppcle-* | powerpclittle-*)
+		basic_machine=powerpcle-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ppc64)	basic_machine=powerpc64-unknown
+		;;
+	ppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ppc64le | powerpc64little | ppc64-le | powerpc64-little)
+		basic_machine=powerpc64le-unknown
+		;;
+	ppc64le-* | powerpc64little-*)
+		basic_machine=powerpc64le-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
+	ps2)
+		basic_machine=i386-ibm
+		;;
+	pw32)
+		basic_machine=i586-unknown
+		os=-pw32
+		;;
+	rom68k)
+		basic_machine=m68k-rom68k
+		os=-coff
+		;;
+	rm[46]00)
+		basic_machine=mips-siemens
+		;;
+	rtpc | rtpc-*)
+		basic_machine=romp-ibm
+		;;
+	s390 | s390-*)
+		basic_machine=s390-ibm
+		;;
+	s390x | s390x-*)
+		basic_machine=s390x-ibm
+		;;
+	sa29200)
+		basic_machine=a29k-amd
+		os=-udi
+		;;
+	sb1)
+		basic_machine=mipsisa64sb1-unknown
+		;;
+	sb1el)
+		basic_machine=mipsisa64sb1el-unknown
+		;;
+	sei)
+		basic_machine=mips-sei
+		os=-seiux
+		;;
+	sequent)
+		basic_machine=i386-sequent
+		;;
+	sh)
+		basic_machine=sh-hitachi
+		os=-hms
+		;;
+	sh64)
+		basic_machine=sh64-unknown
+		;;
+	sparclite-wrs | simso-wrs)
+		basic_machine=sparclite-wrs
+		os=-vxworks
+		;;
+	sps7)
+		basic_machine=m68k-bull
+		os=-sysv2
+		;;
+	spur)
+		basic_machine=spur-unknown
+		;;
+	st2000)
+		basic_machine=m68k-tandem
+		;;
+	stratus)
+		basic_machine=i860-stratus
+		os=-sysv4
+		;;
+	sun2)
+		basic_machine=m68000-sun
+		;;
+	sun2os3)
+		basic_machine=m68000-sun
+		os=-sunos3
+		;;
+	sun2os4)
+		basic_machine=m68000-sun
+		os=-sunos4
+		;;
+	sun3os3)
+		basic_machine=m68k-sun
+		os=-sunos3
+		;;
+	sun3os4)
+		basic_machine=m68k-sun
+		os=-sunos4
+		;;
+	sun4os3)
+		basic_machine=sparc-sun
+		os=-sunos3
+		;;
+	sun4os4)
+		basic_machine=sparc-sun
+		os=-sunos4
+		;;
+	sun4sol2)
+		basic_machine=sparc-sun
+		os=-solaris2
+		;;
+	sun3 | sun3-*)
+		basic_machine=m68k-sun
+		;;
+	sun4)
+		basic_machine=sparc-sun
+		;;
+	sun386 | sun386i | roadrunner)
+		basic_machine=i386-sun
+		;;
+	sv1)
+		basic_machine=sv1-cray
+		os=-unicos
+		;;
+	symmetry)
+		basic_machine=i386-sequent
+		os=-dynix
+		;;
+	t3e)
+		basic_machine=alphaev5-cray
+		os=-unicos
+		;;
+	t90)
+		basic_machine=t90-cray
+		os=-unicos
+		;;
+	tic54x | c54x*)
+		basic_machine=tic54x-unknown
+		os=-coff
+		;;
+	tic55x | c55x*)
+		basic_machine=tic55x-unknown
+		os=-coff
+		;;
+	tic6x | c6x*)
+		basic_machine=tic6x-unknown
+		os=-coff
+		;;
+	tx39)
+		basic_machine=mipstx39-unknown
+		;;
+	tx39el)
+		basic_machine=mipstx39el-unknown
+		;;
+	toad1)
+		basic_machine=pdp10-xkl
+		os=-tops20
+		;;
+	tower | tower-32)
+		basic_machine=m68k-ncr
+		;;
+	tpf)
+		basic_machine=s390x-ibm
+		os=-tpf
+		;;
+	udi29k)
+		basic_machine=a29k-amd
+		os=-udi
+		;;
+	ultra3)
+		basic_machine=a29k-nyu
+		os=-sym1
+		;;
+	v810 | necv810)
+		basic_machine=v810-nec
+		os=-none
+		;;
+	vaxv)
+		basic_machine=vax-dec
+		os=-sysv
+		;;
+	vms)
+		basic_machine=vax-dec
+		os=-vms
+		;;
+	vpp*|vx|vx-*)
+		basic_machine=f301-fujitsu
+		;;
+	vxworks960)
+		basic_machine=i960-wrs
+		os=-vxworks
+		;;
+	vxworks68)
+		basic_machine=m68k-wrs
+		os=-vxworks
+		;;
+	vxworks29k)
+		basic_machine=a29k-wrs
+		os=-vxworks
+		;;
+	w65*)
+		basic_machine=w65-wdc
+		os=-none
+		;;
+	w89k-*)
+		basic_machine=hppa1.1-winbond
+		os=-proelf
+		;;
+	xbox)
+		basic_machine=i686-pc
+		os=-mingw32
+		;;
+	xps | xps100)
+		basic_machine=xps100-honeywell
+		;;
+	ymp)
+		basic_machine=ymp-cray
+		os=-unicos
+		;;
+	z8k-*-coff)
+		basic_machine=z8k-unknown
+		os=-sim
+		;;
+	none)
+		basic_machine=none-none
+		os=-none
+		;;
+
+# Here we handle the default manufacturer of certain CPU types.  It is in
+# some cases the only manufacturer, in others, it is the most popular.
+	w89k)
+		basic_machine=hppa1.1-winbond
+		;;
+	op50n)
+		basic_machine=hppa1.1-oki
+		;;
+	op60c)
+		basic_machine=hppa1.1-oki
+		;;
+	romp)
+		basic_machine=romp-ibm
+		;;
+	mmix)
+		basic_machine=mmix-knuth
+		;;
+	rs6000)
+		basic_machine=rs6000-ibm
+		;;
+	vax)
+		basic_machine=vax-dec
+		;;
+	pdp10)
+		# there are many clones, so DEC is not a safe bet
+		basic_machine=pdp10-unknown
+		;;
+	pdp11)
+		basic_machine=pdp11-dec
+		;;
+	we32k)
+		basic_machine=we32k-att
+		;;
+	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
+		basic_machine=sh-unknown
+		;;
+	sparc | sparcv8 | sparcv9 | sparcv9b)
+		basic_machine=sparc-sun
+		;;
+	cydra)
+		basic_machine=cydra-cydrome
+		;;
+	orion)
+		basic_machine=orion-highlevel
+		;;
+	orion105)
+		basic_machine=clipper-highlevel
+		;;
+	mac | mpw | mac-mpw)
+		basic_machine=m68k-apple
+		;;
+	pmac | pmac-mpw)
+		basic_machine=powerpc-apple
+		;;
+	*-unknown)
+		# Make sure to match an already-canonicalized machine name.
+		;;
+	*)
+		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1&gt;&amp;2
+		exit 1
+		;;
+esac
+
+# Here we canonicalize certain aliases for manufacturers.
+case $basic_machine in
+	*-digital*)
+		basic_machine=`echo $basic_machine | sed 's/digital.*/dec/'`
+		;;
+	*-commodore*)
+		basic_machine=`echo $basic_machine | sed 's/commodore.*/cbm/'`
+		;;
+	*)
+		;;
+esac
+
+# Decode manufacturer-specific aliases for certain operating systems.
+
+if [ x&quot;$os&quot; != x&quot;&quot; ]
+then
+case $os in
+        # First match some system type aliases
+        # that might get confused with valid system types.
+	# -solaris* is a basic system type, with this one exception.
+	-solaris1 | -solaris1.*)
+		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+		;;
+	-solaris)
+		os=-solaris2
+		;;
+	-svr4*)
+		os=-sysv4
+		;;
+	-unixware*)
+		os=-sysv4.2uw
+		;;
+	-gnu/linux*)
+		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
+		;;
+	# First accept the basic system types.
+	# The portable systems comes first.
+	# Each alternative MUST END IN A *, to match a version number.
+	# -sysv* is not here because it comes later, after sysvr4.
+	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
+	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -sunos | -sunos[34]*\
+	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
+	      | -aos* \
+	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
+	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
+	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* | -openbsd* \
+	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
+	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
+	      | -chorusos* | -chorusrdb* \
+	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
+	      | -mingw32* | -linux-gnu* | -linux-uclibc* | -uxpv* | -beos* | -mpeix* | -udk* \
+	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
+	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
+	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
+	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
+	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
+	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* | -skyos*)
+	# Remember, each alternative MUST END IN *, to match a version number.
+		;;
+	-qnx*)
+		case $basic_machine in
+		    x86-* | i*86-*)
+			;;
+		    *)
+			os=-nto$os
+			;;
+		esac
+		;;
+	-nto-qnx*)
+		;;
+	-nto*)
+		os=`echo $os | sed -e 's|nto|nto-qnx|'`
+		;;
+	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
+	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
+		;;
+	-mac*)
+		os=`echo $os | sed -e 's|mac|macos|'`
+		;;
+	-linux-dietlibc)
+		os=-linux-dietlibc
+		;;
+	-linux*)
+		os=`echo $os | sed -e 's|linux|linux-gnu|'`
+		;;
+	-sunos5*)
+		os=`echo $os | sed -e 's|sunos5|solaris2|'`
+		;;
+	-sunos6*)
+		os=`echo $os | sed -e 's|sunos6|solaris3|'`
+		;;
+	-opened*)
+		os=-openedition
+		;;
+        -os400*)
+		os=-os400
+		;;
+	-wince*)
+		os=-wince
+		;;
+	-osfrose*)
+		os=-osfrose
+		;;
+	-osf*)
+		os=-osf
+		;;
+	-utek*)
+		os=-bsd
+		;;
+	-dynix*)
+		os=-bsd
+		;;
+	-acis*)
+		os=-aos
+		;;
+	-atheos*)
+		os=-atheos
+		;;
+	-syllable*)
+		os=-syllable
+		;;
+	-386bsd)
+		os=-bsd
+		;;
+	-ctix* | -uts*)
+		os=-sysv
+		;;
+	-nova*)
+		os=-rtmk-nova
+		;;
+	-ns2 )
+		os=-nextstep2
+		;;
+	-nsk*)
+		os=-nsk
+		;;
+	# Preserve the version number of sinix5.
+	-sinix5.*)
+		os=`echo $os | sed -e 's|sinix|sysv|'`
+		;;
+	-sinix*)
+		os=-sysv4
+		;;
+        -tpf*)
+		os=-tpf
+		;;
+	-triton*)
+		os=-sysv3
+		;;
+	-oss*)
+		os=-sysv3
+		;;
+	-svr4)
+		os=-sysv4
+		;;
+	-svr3)
+		os=-sysv3
+		;;
+	-sysvr4)
+		os=-sysv4
+		;;
+	# This must come after -sysvr4.
+	-sysv*)
+		;;
+	-ose*)
+		os=-ose
+		;;
+	-es1800*)
+		os=-ose
+		;;
+	-xenix)
+		os=-xenix
+		;;
+	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+		os=-mint
+		;;
+	-aros*)
+		os=-aros
+		;;
+	-kaos*)
+		os=-kaos
+		;;
+	-zvmoe)
+		os=-zvmoe
+		;;
+	-none)
+		;;
+	*)
+		# Get rid of the `-' at the beginning of $os.
+		os=`echo $os | sed 's/[^-]*-//'`
+		echo Invalid configuration \`$1\': system \`$os\' not recognized 1&gt;&amp;2
+		exit 1
+		;;
+esac
+else
+
+# Here we handle the default operating systems that come with various machines.
+# The value should be what the vendor currently ships out the door with their
+# machine or put another way, the most popular os provided with the machine.
+
+# Note that if you're going to try to match &quot;-MANUFACTURER&quot; here (say,
+# &quot;-sun&quot;), then you have to tell the case statement up towards the top
+# that MANUFACTURER isn't an operating system.  Otherwise, code above
+# will signal an error saying that MANUFACTURER isn't an operating
+# system, and we'll never get to this point.
+
+case $basic_machine in
+	*-acorn)
+		os=-riscix1.2
+		;;
+	arm*-rebel)
+		os=-linux
+		;;
+	arm*-semi)
+		os=-aout
+		;;
+    c4x-* | tic4x-*)
+        os=-coff
+        ;;
+	# This must come before the *-dec entry.
+	pdp10-*)
+		os=-tops20
+		;;
+	pdp11-*)
+		os=-none
+		;;
+	*-dec | vax-*)
+		os=-ultrix4.2
+		;;
+	m68*-apollo)
+		os=-domain
+		;;
+	i386-sun)
+		os=-sunos4.0.2
+		;;
+	m68000-sun)
+		os=-sunos3
+		# This also exists in the configure program, but was not the
+		# default.
+		# os=-sunos4
+		;;
+	m68*-cisco)
+		os=-aout
+		;;
+	mips*-cisco)
+		os=-elf
+		;;
+	mips*-*)
+		os=-elf
+		;;
+	or32-*)
+		os=-coff
+		;;
+	*-tti)	# must be before sparc entry or we get the wrong os.
+		os=-sysv3
+		;;
+	sparc-* | *-sun)
+		os=-sunos4.1.1
+		;;
+	*-be)
+		os=-beos
+		;;
+	*-ibm)
+		os=-aix
+		;;
+    	*-knuth)
+		os=-mmixware
+		;;
+	*-wec)
+		os=-proelf
+		;;
+	*-winbond)
+		os=-proelf
+		;;
+	*-oki)
+		os=-proelf
+		;;
+	*-hp)
+		os=-hpux
+		;;
+	*-hitachi)
+		os=-hiux
+		;;
+	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
+		os=-sysv
+		;;
+	*-cbm)
+		os=-amigaos
+		;;
+	*-dg)
+		os=-dgux
+		;;
+	*-dolphin)
+		os=-sysv3
+		;;
+	m68k-ccur)
+		os=-rtu
+		;;
+	m88k-omron*)
+		os=-luna
+		;;
+	*-next )
+		os=-nextstep
+		;;
+	*-sequent)
+		os=-ptx
+		;;
+	*-crds)
+		os=-unos
+		;;
+	*-ns)
+		os=-genix
+		;;
+	i370-*)
+		os=-mvs
+		;;
+	*-next)
+		os=-nextstep3
+		;;
+	*-gould)
+		os=-sysv
+		;;
+	*-highlevel)
+		os=-bsd
+		;;
+	*-encore)
+		os=-bsd
+		;;
+	*-sgi)
+		os=-irix
+		;;
+	*-siemens)
+		os=-sysv4
+		;;
+	*-masscomp)
+		os=-rtu
+		;;
+	f30[01]-fujitsu | f700-fujitsu)
+		os=-uxpv
+		;;
+	*-rom68k)
+		os=-coff
+		;;
+	*-*bug)
+		os=-coff
+		;;
+	*-apple)
+		os=-macos
+		;;
+	*-atari*)
+		os=-mint
+		;;
+	*)
+		os=-none
+		;;
+esac
+fi
+
+# Here we handle the case where we know the os, and the CPU type, but not the
+# manufacturer.  We pick the logical manufacturer.
+vendor=unknown
+case $basic_machine in
+	*-unknown)
+		case $os in
+			-riscix*)
+				vendor=acorn
+				;;
+			-sunos*)
+				vendor=sun
+				;;
+			-aix*)
+				vendor=ibm
+				;;
+			-beos*)
+				vendor=be
+				;;
+			-hpux*)
+				vendor=hp
+				;;
+			-mpeix*)
+				vendor=hp
+				;;
+			-hiux*)
+				vendor=hitachi
+				;;
+			-unos*)
+				vendor=crds
+				;;
+			-dgux*)
+				vendor=dg
+				;;
+			-luna*)
+				vendor=omron
+				;;
+			-genix*)
+				vendor=ns
+				;;
+			-mvs* | -opened*)
+				vendor=ibm
+				;;
+			-os400*)
+				vendor=ibm
+				;;
+			-ptx*)
+				vendor=sequent
+				;;
+			-tpf*)
+				vendor=ibm
+				;;
+			-vxsim* | -vxworks* | -windiss*)
+				vendor=wrs
+				;;
+			-aux*)
+				vendor=apple
+				;;
+			-hms*)
+				vendor=hitachi
+				;;
+			-mpw* | -macos*)
+				vendor=apple
+				;;
+			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+				vendor=atari
+				;;
+			-vos*)
+				vendor=stratus
+				;;
+		esac
+		basic_machine=`echo $basic_machine | sed &quot;s/unknown/$vendor/&quot;`
+		;;
+esac
+
+echo $basic_machine$os
+exit
+
+# Local variables:
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;timestamp='&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d&quot;
+# time-stamp-end: &quot;'&quot;
+# End:


Property changes on: trunk/admin/config.sub
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/configure.in.bot.end
===================================================================
--- trunk/admin/configure.in.bot.end	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/configure.in.bot.end	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,45 @@
+# Check if KDE_SET_PREFIX was called, and --prefix was passed to configure
+if test -n &quot;$kde_libs_prefix&quot; -a -n &quot;$given_prefix&quot;; then
+  # And if so, warn when they don't match
+  if test &quot;$kde_libs_prefix&quot; != &quot;$given_prefix&quot;; then
+    # And if kde doesn't know about the prefix yet
+    echo &quot;:&quot;`kde-config --path exe`&quot;:&quot; | grep &quot;:$given_prefix/bin/:&quot; 2&gt;&amp;1 &gt;/dev/null
+    if test $? -ne 0; then
+      echo &quot;&quot;
+      echo &quot;Warning: you chose to install this package in $given_prefix,&quot;
+      echo &quot;but KDE was found in $kde_libs_prefix.&quot;
+      echo &quot;For this to work, you will need to tell KDE about the new prefix, by ensuring&quot;
+      echo &quot;that KDEDIRS contains it, e.g. export KDEDIRS=$given_prefix:$kde_libs_prefix&quot;
+      echo &quot;Then restart KDE.&quot;
+      echo &quot;&quot;
+    fi
+  fi
+fi
+
+if test x$GXX = &quot;xyes&quot; -a x$kde_have_gcc_visibility = &quot;xyes&quot; -a x$kde_cv_val_qt_gcc_visibility_patched = &quot;xno&quot;; then
+  echo &quot;&quot;
+  echo &quot;Your GCC supports symbol visibility, but the patch for Qt supporting visibility&quot;
+  echo &quot;was not included. Therefore, GCC symbol visibility support remains disabled.&quot;
+  echo &quot;&quot;
+  echo &quot;For better performance, consider including the Qt visibility supporting patch&quot;
+  echo &quot;located at:&quot;
+  echo &quot;&quot;
+  echo &quot;<A HREF="http://bugs.kde.org/show_bug.cgi?id=109386">http://bugs.kde.org/show_bug.cgi?id=109386</A>&quot;
+  echo &quot;&quot;
+  echo &quot;and recompile all of Qt and KDE. Note, this is entirely optional and&quot;
+  echo &quot;everything will continue to work just fine without it.&quot;
+  echo &quot;&quot;
+fi
+
+if test &quot;$all_tests&quot; = &quot;bad&quot;; then
+  if test ! &quot;$cache_file&quot; = &quot;/dev/null&quot;; then
+    echo &quot;&quot;
+    echo &quot;Please remove the file $cache_file after changing your setup&quot;
+    echo &quot;so that configure will find the changes next time.&quot;
+    echo &quot;&quot;
+  fi
+else
+  echo &quot;&quot;
+  echo &quot;Good - your configure finished. Start make now&quot;
+  echo &quot;&quot;
+fi

Added: trunk/admin/configure.in.min
===================================================================
--- trunk/admin/configure.in.min	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/configure.in.min	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,57 @@
+dnl    This file is part of the KDE libraries/packages
+dnl    Copyright (C) 2001 Stephan Kulow (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">coolo at kde.org</A>)
+ 
+dnl    This file is free software; you can redistribute it and/or
+dnl    modify it under the terms of the GNU Library General Public
+dnl    License as published by the Free Software Foundation; either
+dnl    version 2 of the License, or (at your option) any later version.
+ 
+dnl    This library is distributed in the hope that it will be useful,
+dnl    but WITHOUT ANY WARRANTY; without even the implied warranty of
+dnl    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+dnl    Library General Public License for more details.
+ 
+dnl    You should have received a copy of the GNU Library General Public License
+dnl    along with this library; see the file COPYING.LIB.  If not, write to
+dnl    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+dnl    Boston, MA 02110-1301, USA.
+
+# Original Author was <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">Kalle at kde.org</A>
+# I lifted it in some mater. (Stephan Kulow)
+# I used much code from Janos Farkas
+
+dnl Process this file with autoconf to produce a configure script.
+
+AC_INIT(acinclude.m4) dnl a source file from your sub dir
+
+dnl This is so we can use kde-common
+AC_CONFIG_AUX_DIR(admin)
+
+dnl This ksh/zsh feature conflicts with `cd blah ; pwd`
+unset CDPATH
+
+dnl Checking host/target/build systems, for make, install etc.
+AC_CANONICAL_SYSTEM 
+dnl Perform program name transformation
+AC_ARG_PROGRAM
+
+dnl Automake doc recommends to do this only here. (Janos)
+AM_INIT_AUTOMAKE(@MODULENAME@, @VERSION@) dnl searches for some needed programs
+
+KDE_SET_PREFIX
+
+dnl generate the config header
+AM_CONFIG_HEADER(config.h) dnl at the distribution this done
+
+dnl Checks for programs.
+AC_CHECK_COMPILERS
+AC_ENABLE_SHARED(yes)
+AC_ENABLE_STATIC(no)
+KDE_PROG_LIBTOOL
+
+dnl for NLS support. Call them in this order!
+dnl WITH_NLS is for the po files
+AM_KDE_WITH_NLS
+
+dnl KDE_USE_QT
+AC_PATH_KDE

Added: trunk/admin/cvs.sh
===================================================================
--- trunk/admin/cvs.sh	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/cvs.sh	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,529 @@
+#! /bin/sh
+#
+# cvs.sh
+#
+# This file contains support code from Makefile.common
+# It defines a shell function for each known target
+# and then does a case to call the correct function.
+
+unset MAKEFLAGS
+
+call_and_fix_autoconf()
+{
+  $AUTOCONF || exit 1
+  if test -r configure.in.in ; then
+    perl -pi -e &quot;print \&quot;if test \\\&quot;x\\\$with_fast_perl\\\&quot; = \\\&quot;xyes\\\&quot;; then\
+    \\n  perl -i.bak \\\$ac_aux_dir/conf.change.pl \\\$CONFIG_STATUS\
+    \\\\\\n    || mv \\\$CONFIG_STATUS.bak \\\$CONFIG_STATUS\
+    \\n  rm -f \\\$CONFIG_STATUS.bak\\nfi\
+    \\n\&quot; if /^\\s*chmod\\s+.*\\+x\\s+.*CONFIG_STATUS/; s,^#line.*LINENO.*\$,/* \$&amp; */, ;&quot; configure
+  fi
+}
+
+strip_makefile()
+{
+  if test ! -f $makefile_wo; then
+    perl -e '$in=0; while ( &lt;&gt; ) { $in = 1 if ($_ =~ m/^if / ); print $_ unless ($in || $_ =~ m/^include /); $in = 0 if ($_ =~ m/^endif/); }' &lt; $makefile_am &gt; $makefile_wo
+  fi
+}
+
+check_autotool_versions()
+{
+required_autoconf_version=&quot;2.53 or newer&quot;
+AUTOCONF_VERSION=`$AUTOCONF --version | head -n 1`
+case $AUTOCONF_VERSION in
+  Autoconf*2.5* | autoconf*2.5* | Autoconf*2.6* | autoconf*2.6* ) : ;;
+  &quot;&quot; )
+    echo &quot;*** AUTOCONF NOT FOUND!.&quot;
+    echo &quot;*** KDE requires autoconf $required_autoconf_version&quot;
+    exit 1
+    ;;
+  * )
+    echo &quot;*** YOU'RE USING $AUTOCONF_VERSION.&quot;
+    echo &quot;*** KDE requires autoconf $required_autoconf_version&quot;
+    exit 1
+    ;;
+esac
+
+AUTOHEADER_VERSION=`$AUTOHEADER --version | head -n 1`
+case $AUTOHEADER_VERSION in
+  Autoheader*2.5* | autoheader*2.5* | Autoheader*2.6* | autoheader*2.6* ) : ;;
+  &quot;&quot; )
+    echo &quot;*** AUTOHEADER NOT FOUND!.&quot;
+    echo &quot;*** KDE requires autoheader $required_autoconf_version&quot;
+    exit 1
+    ;;
+  * )
+    echo &quot;*** YOU'RE USING $AUTOHEADER_VERSION.&quot;
+    echo &quot;*** KDE requires autoheader $required_autoconf_version&quot;
+    exit 1
+    ;;
+esac
+
+AUTOMAKE_STRING=`$AUTOMAKE --version | head -n 1`
+}
+
+cvs()
+{
+check_autotool_versions
+acinclude_m4 
+
+### Make new subdirs and configure.in.
+### The make calls could be optimized away here,
+### with a little thought.
+if test -r configure.in.in; then
+    rm -f configure.in
+    echo &quot;*** Creating list of subdirectories&quot;
+    create_subdirs
+
+    if test -r Makefile.am.in; then
+        echo &quot;*** Creating Makefile.am&quot;
+        if grep '\$(top_srcdir)/Makefile.am:' $makefile_am &gt;/dev/null; then 
+            strip_makefile
+            $MAKE -f $makefile_wo top_srcdir=. ./Makefile.am || exit 1
+        else
+            Makefile_am
+        fi
+     fi
+     configure_files
+     echo &quot;*** Creating configure.in&quot;
+     if grep '\$(top_srcdir)/configure.in:' $makefile_am &gt;/dev/null; then 
+       strip_makefile
+       $MAKE -f $makefile_wo top_srcdir=. ./configure.in || exit 1
+     else
+       configure_in
+     fi
+fi
+
+echo &quot;*** Creating aclocal.m4&quot;
+ACLOCALFLAGS=&quot;$ACLOCALFLAGS `grep '^ACLOCAL_AMFLAGS' ./Makefile.am | sed 's/[^=]*=//'`&quot;
+$ACLOCAL $ACLOCALFLAGS || exit 1
+echo &quot;*** Creating configure&quot;
+call_and_fix_autoconf
+
+if egrep &quot;^AM_CONFIG_HEADER&quot; configure.in &gt;/dev/null 2&gt;&amp;1; then
+  echo &quot;*** Creating config.h template&quot;
+  $AUTOHEADER || exit 1
+fi
+
+echo &quot;*** Creating Makefile templates&quot;
+$AUTOMAKE || exit 1
+
+if test &quot;$UNSERMAKE&quot; = no; then
+  echo &quot;*** Postprocessing Makefile templates&quot;
+  perl -w admin/am_edit || exit 1
+fi
+
+if egrep &quot;^cvs-local:&quot; $makefile_am &gt;/dev/null; then \
+  strip_makefile
+  $MAKE -f $makefile_wo cvs-local top_srcdir=. || exit 1
+fi
+
+echo &quot;*** Creating date/time stamp&quot;
+touch stamp-h.in
+
+echo &quot;*** Finished&quot;
+echo &quot;    Don't forget to run ./configure&quot;
+echo &quot;    If you haven't done so in a while, run ./configure --help&quot;
+}
+
+dist()
+{
+check_autotool_versions
+
+###
+### First build all of the files necessary to do just &quot;make&quot;
+###
+acinclude_m4
+if test -r configure.in.in; then
+  rm -f configure.in
+  create_subdirs
+
+  if test -r Makefile.am.in; then
+    if grep '\$(top_srcdir)/Makefile.am:' $makefile_am &gt;/dev/null; then 
+      strip_makefile
+      $MAKE -f $makefile_wo top_srcdir=. ./Makefile.am || exit 1
+    else
+      Makefile_am
+    fi
+  fi
+  configure_files
+  if grep '\$(top_srcdir)/configure.in:' $makefile_am &gt;/dev/null; then 
+    strip_makefile
+    $MAKE -f $makefile_wo top_srcdir=. ./configure.in || exit 1
+  else
+    configure_in
+  fi
+fi
+$ACLOCAL $ACLOCALFLAGS
+if egrep &quot;^AM_CONFIG_HEADER&quot; configure.in &gt;/dev/null 2&gt;&amp;1; then
+  echo &quot;*** Creating config.h template&quot;
+  $AUTOHEADER || exit 1
+fi
+$AUTOMAKE --foreign || exit 1
+if test &quot;$UNSERMAKE&quot; = no; then
+  echo &quot;*** Postprocessing Makefile templates&quot;
+  perl -w admin/am_edit || exit 1
+fi
+call_and_fix_autoconf
+touch stamp-h.in
+if grep &quot;^cvs-local:&quot; $makefile_am &gt;/dev/null; then
+  strip_makefile
+  $MAKE -f $makefile_wo cvs-local top_srcdir=.
+fi
+
+###
+### Then make messages
+###
+if test -d po; then
+ LIST=`find ./po -name &quot;*.po&quot;`
+ for i in $LIST; do
+  file2=`echo $i | sed -e &quot;s#\.po#\.gmo#&quot;`
+  msgfmt -o $file2 $i || touch $file2
+ done
+fi
+if grep &quot;^cvs-dist-local:&quot; $makefile_am &gt;/dev/null; then
+  strip_makefile
+  $MAKE -f $makefile_wo cvs-dist-local top_srcdir=.
+fi
+}
+
+subdir_dist()
+{
+$ACLOCAL $ACLOCALFLAGS
+$AUTOHEADER
+$AUTOMAKE
+AUTOMAKE_STRING=`$AUTOMAKE --version | head -n 1`
+case $AUTOMAKE_STRING in
+  *unsermake* ) :
+    ;;
+  *)
+     perl -w ../admin/am_edit --path=../admin
+esac
+call_and_fix_autoconf
+touch stamp-h.in
+}
+
+configure_in()
+{
+rm -f configure.in configure.in.new
+kde_use_qt_param=
+test -f configure.files || { echo &quot;need configure.files for configure.in&quot;; exit 1; }
+list=`fgrep -v &quot;configure.in.bot&quot; &lt; configure.files | fgrep -v &quot;configure.in.mid&quot;`
+: &gt; configure.in.new
+for file in $list; do 
+  echo &quot;dnl =======================================================&quot; &gt;&gt; configure.in.new
+  echo &quot;dnl FILE: $file&quot; &gt;&gt; configure.in.new
+  echo &quot;dnl =======================================================&quot; &gt;&gt; configure.in.new
+  echo &quot;&quot; &gt;&gt; configure.in.new
+  cat $file &gt;&gt; configure.in.new
+done
+echo &quot;KDE_CREATE_SUBDIRSLIST&quot; &gt;&gt; configure.in.new
+if test -f Makefile.am.in; then
+  subdirs=`cat subdirs`
+  for dir in $subdirs; do
+    vdir=`echo $dir | sed -e 's,[-+.@],_,g'`
+    echo &quot;AM_CONDITIONAL($vdir&quot;&quot;_SUBDIR_included, test \&quot;x\$$vdir&quot;&quot;_SUBDIR_included\&quot; = xyes)&quot; &gt;&gt; configure.in.new
+    if test -f &quot;$dir/configure.in&quot;; then
+        echo &quot;if test \&quot;x\$$vdir&quot;&quot;_SUBDIR_included\&quot; = xyes; then &quot; &gt;&gt; configure.in.new
+        echo &quot;  AC_CONFIG_SUBDIRS($dir)&quot; &gt;&gt; configure.in.new
+        echo &quot;fi&quot; &gt;&gt; configure.in.new
+    fi
+  done
+fi
+
+echo &quot;AC_CONFIG_FILES([ Makefile ])&quot; &gt;&gt; configure.in.new
+
+if test -f inst-apps; then
+    topleveldirs=`cat inst-apps`
+else
+    topleveldirs=
+    for dir in `ls -1d * | sort`; do
+	if test &quot;$dir&quot; != &quot;debian&quot; &amp;&amp; test -d $dir; then
+	    topleveldirs=&quot;$topleveldirs $dir&quot;
+	fi
+    done
+fi
+
+for topleveldir in $topleveldirs; do 
+  if test -f $topleveldir/configure.in; then
+	continue
+  fi
+  if test -f $topleveldir/Makefile.am; then :; else
+	continue
+  fi
+
+  mfs=`find $topleveldir -follow -name Makefile.am -print | fgrep -v &quot;/.&quot; | \
+       sed -e 's#\./##; s#/Makefile.am$##' | sort | sed -e 's#$#/Makefile#'`
+  for i in $mfs; do
+     echo &quot;AC_CONFIG_FILES([ $i ])&quot; &gt;&gt; configure.in.new
+  done
+done
+
+files=`cat configure.files`
+list=`egrep '^dnl AC_OUTPUT\(.*\)' $files | sed -e &quot;s#^.*dnl AC_OUTPUT(\(.*\))#\1#&quot;`
+for file in $list; do 
+    echo &quot;AC_CONFIG_FILES([ $file ])&quot; &gt;&gt;  configure.in.new
+done
+
+midfiles=`cat configure.files | fgrep &quot;configure.in.mid&quot;`
+test -n &quot;$midfiles&quot; &amp;&amp; cat $midfiles &gt;&gt; configure.in.new
+
+echo &quot;AC_OUTPUT&quot; &gt;&gt; configure.in.new
+modulename=
+if test -f configure.in.in; then
+   if head -n 2 configure.in.in | egrep &quot;^#MIN_CONFIG\(.*\)$&quot; &gt; /dev/null; then
+      kde_use_qt_param=`cat configure.in.in | sed -n -e &quot;s/#MIN_CONFIG(\(.*\))/\1/p&quot;`
+   fi
+   if head -n 2 configure.in.in | egrep &quot;^#MIN_CONFIG&quot; &gt; /dev/null; then
+      line=`grep &quot;^AM_INIT_AUTOMAKE(&quot; configure.in.in`
+      if test -n &quot;$line&quot;; then
+	  modulename=`echo $line | sed -e &quot;s#AM_INIT_AUTOMAKE(\([^,]*\),.*#\1#&quot;`
+	  VERSION=`echo $line | sed -e &quot;s#AM_INIT_AUTOMAKE([^,]*, *\([^)]*\)).*#\1#&quot;`
+      fi
+      sed -e &quot;s#AM_INIT_AUTOMAKE([^@].*#dnl PACKAGE set before#&quot; \
+          configure.in.new &gt; configure.in &amp;&amp; mv configure.in configure.in.new
+   fi
+fi
+if test -z &quot;$VERSION&quot; || test &quot;$VERSION&quot; = &quot;@VERSION@&quot;; then
+     VERSION=&quot;\&quot;3.9.02\&quot;&quot;
+fi
+if test -z &quot;$modulename&quot; || test &quot;$modulename&quot; = &quot;@MODULENAME@&quot;; then
+   modulename=`pwd`; 
+   modulename=`basename $modulename`
+   esc_VERSION=`echo $VERSION | sed -e &quot;s#[^.0-9a-zA-Z]##g&quot;`
+   modulename=`echo $modulename | sed -e &quot;s#-$esc_VERSION##&quot;`   
+
+fi
+if test -n &quot;$kde_use_qt_param&quot;; then
+      sed -e &quot;s#^dnl KDE_USE_QT#KDE_USE_QT($kde_use_qt_param)#&quot; \
+      	configure.in.new &gt; configure.in &amp;&amp; mv configure.in configure.in.new
+fi
+sed -e &quot;s#@MODULENAME@#$modulename#&quot; configure.in.new |
+	sed -e &quot;s#@VERSION@#$VERSION#&quot; &gt; configure.in
+botfiles=`cat configure.files | egrep &quot;configure.in.bot&quot;`
+test -n &quot;$botfiles&quot; &amp;&amp; cat $botfiles &gt;&gt; configure.in
+cat $admindir/configure.in.bot.end &gt;&gt; configure.in
+rm -f configure.in.new
+}
+
+configure_files()
+{
+echo &quot;*** Creating configure.files&quot;
+admindir=NO
+for i in . .. ../.. ../../..; do
+  if test -x $i/admin; then admindir=$i/admin; break; fi
+done
+rm -f configure.files
+touch configure.files
+if test -f configure.in.in &amp;&amp; head -n 2 configure.in.in | grep &quot;^#MIN_CONFIG&quot; &gt; /dev/null; then
+	echo $admindir/configure.in.min &gt;&gt; configure.files
+fi
+test -f configure.in.in &amp;&amp; echo configure.in.in &gt;&gt; configure.files
+# we collect files in the subdirs and do some sorting tricks, so subsubdirs come after subdirs
+if test -f inst-apps; then
+   inst=`cat inst-apps`
+   list=&quot;&quot;
+   for i in $inst; do
+      list=&quot;$list `find $i/ -follow -name &quot;configure.in.in&quot; -o -name &quot;configure.in.bot&quot; -o -name &quot;configure.in.mid&quot; | \
+		sed -e &quot;s,/configure,/aaaconfigure,&quot; | sort | sed -e &quot;s,/aaaconfigure,/configure,&quot;`&quot;
+   done
+else
+   list=`find . -follow -name &quot;configure.in.in&quot; -o -name &quot;configure.in.bot&quot; -o -name &quot;configure.in.mid&quot; | \
+		sed -e &quot;s,/configure,/aaaconfigure,&quot; | sort | sed -e &quot;s,/aaaconfigure,/configure,&quot;`
+fi
+for i in $list; do if test -f $i &amp;&amp; test `dirname $i` != &quot;.&quot; ; then
+  echo $i &gt;&gt; configure.files
+fi; done
+test -f configure.in.mid &amp;&amp; echo configure.in.mid &gt;&gt; configure.files
+test -f configure.in.bot &amp;&amp; echo configure.in.bot &gt;&gt; configure.files
+if test ! -s configure.files; then
+   echo &quot;There are no files to build a configure. Please check your checkout.&quot;
+   exit 1
+fi
+}
+
+create_subdirs()
+{
+if grep '\$(top_srcdir)/subdirs:' $makefile_am &gt;/dev/null; then 
+    # as many modules contain rules to create subdirs without any
+    # dependencies make won't create it unless there is no file.
+    # so we check if that's a dummy rule or one that works
+    rm -f subdirs.cvs.sh.$$
+    if test -f subdirs; then
+	mv subdirs subdirs.cvs.sh.$$
+    fi
+    strip_makefile
+    $MAKE -f $makefile_wo top_srcdir=. ./subdirs || exit 1
+    if test -f subdirs.cvs.sh.$$; then
+	if test -s subdirs; then
+	    rm subdirs.cvs.sh.$$ 
+	else
+	    mv subdirs.cvs.sh.$$ subdirs
+	fi
+    fi
+else
+    subdirs
+fi
+}
+
+subdirs()
+{
+dirs=
+idirs=
+if test -f inst-apps; then
+   idirs=`cat inst-apps`
+else
+   idirs=`ls -1 | sort`
+fi
+
+compilefirst=`sed -ne 's#^COMPILE_FIRST[ ]*=[ ]*##p' $makefile_am | head -n 1`
+compilelast=`sed -ne 's#^COMPILE_LAST[ ]*=[ ]*##p' $makefile_am | head -n 1`
+for i in $idirs; do
+    if test -f $i/Makefile.am; then
+       case &quot; $compilefirst $compilelast &quot; in
+         *&quot; $i &quot;*) ;;
+         *) dirs=&quot;$dirs $i&quot;
+       esac
+    fi
+done
+
+: &gt; ./_SUBDIRS
+
+for d in $compilefirst; do
+   echo $d &gt;&gt; ./_SUBDIRS
+done
+
+(for d in $dirs; do 
+   list=`sed -ne &quot;s#^COMPILE_BEFORE_$d&quot;&quot;[ ]*=[ ]*##p&quot; $makefile_am | head -n 1`
+   for s in $list; do
+      echo $s $d
+   done
+   list=`sed -ne &quot;s#^COMPILE_AFTER_$d&quot;&quot;[ ]*=[ ]*##p&quot; $makefile_am | head -n 1`
+   for s in $list; do
+      echo $d $s
+   done
+   echo $d $d
+done ) | tsort &gt;&gt; ./_SUBDIRS
+
+for d in $compilelast; do
+   echo $d &gt;&gt; ./_SUBDIRS
+done
+
+if test -r subdirs &amp;&amp; cmp -s subdirs _SUBDIRS; then
+    rm -f _SUBDIRS
+fi
+test -r _SUBDIRS &amp;&amp; mv _SUBDIRS subdirs || true
+}
+
+Makefile_am()
+{
+if test -f Makefile.am.in; then
+  compilefirst=`sed -ne 's#^COMPILE_FIRST[ ]*=[ ]*##p' $makefile_am | head -n 1`
+  compilelast=`sed -ne 's#^COMPILE_LAST[ ]*=[ ]*##p' $makefile_am | head -n 1`
+
+  idirs=
+  dirs=
+  if test -f inst-apps; then
+     idirs=`cat inst-apps`
+  else
+     idirs=`cat subdirs`
+  fi
+  for i in $idirs; do
+    case &quot; $compilefirst $compilelast &quot; in
+      *&quot; $i &quot;*) ;;
+      *) dirs=&quot;$dirs $i&quot;
+    esac
+  done
+
+  adds=`fgrep '$(top_srcdir)/acinclude.m4:' Makefile.am.in | sed -e 's,^[^:]*: *,,; s,\$(top_srcdir)/,,g'`
+  if echo &quot;$adds&quot; | fgrep &quot;*&quot; &gt;/dev/null ; then
+    adds=`ls -d -1 $adds 2&gt;/dev/null`
+    fgrep -v  '$(top_srcdir)/acinclude.m4:' Makefile.am.in &gt; Makefile.am.in.adds
+    str='$(top_srcdir)/acinclude.m4:'
+    for add in $adds; do 
+	str=&quot;$str \$(top_srcdir)/$add&quot;
+    done
+    echo $str &gt;&gt; Makefile.am.in.adds
+  else
+    cat Makefile.am.in &gt; Makefile.am.in.adds
+  fi
+
+  cat Makefile.am.in.adds | \
+      sed -e 's,^\s*\(COMPILE_BEFORE.*\),# \1,' | \
+      sed -e 's,^\s*\(COMPILE_AFTER.*\),# \1,' &gt; Makefile.am
+    echo &quot;SUBDIRS=&quot;'$(TOPSUBDIRS)' &gt;&gt; Makefile.am
+  rm Makefile.am.in.adds
+fi
+}
+
+acinclude_m4()
+{
+  echo &quot;*** Creating acinclude.m4&quot;
+  adds=
+  if grep '\$(top_srcdir)/acinclude.m4:' $makefile_am &gt;/dev/null; then 
+    strip_makefile
+    rm -f acinclude.m4
+    adds=`grep '\$(top_srcdir)/acinclude.m4:' $makefile_wo | sed -e 's,^[^:]*: *,,; s,\$(top_srcdir),.,g'`
+    if echo $adds | fgrep &quot;*&quot; &gt;/dev/null ; then
+      adds=`ls -d -1 $adds 2&gt;/dev/null`
+    else
+      $MAKE -f $makefile_wo top_srcdir=. ./acinclude.m4 || exit 1
+    fi
+  else
+    rm -f acinclude.m4
+  fi
+  # if it wasn't created up to now, then we do it better
+  if test ! -f acinclude.m4; then
+     cat admin/acinclude.m4.in admin/libtool.m4.in admin/pkg.m4.in $adds &gt; acinclude.m4
+  fi
+  cat admin/phpize.m4.in &gt;&gt; acinclude.m4
+}
+
+# Make sure that sorting is always done the same way
+LC_ALL=C
+export LC_ALL
+unset LANG || :
+unset LC_CTYPE || :
+unset LANGUAGE || :
+
+unset CDPATH || :
+admindir=`echo &quot;$0&quot; | sed 's%[\\/][^\\/][^\\/]*$%%'`
+test &quot;x$admindir&quot; = &quot;x$0&quot; &amp;&amp; admindir=.
+
+test &quot;x$MAKE&quot; = x &amp;&amp; MAKE=make
+makefile_am=Makefile.am
+makefile_wo=Makefile.am.wo
+if test -f Makefile.am.in; then
+  makefile_am=Makefile.am.in
+  makefile_wo=Makefile.am.in.wo
+  rm -f $makefile_wo
+fi
+
+# Call script to find autoconf and friends.  Uses eval since the script outputs
+# sh-compatible code.
+eval `$admindir/detect-autoconf.pl`
+
+###
+### Main
+###
+
+arg=`echo $1 | tr .- __`
+case $arg in
+  cvs | dist | subdir_dist | configure_in | configure_files | subdirs | \
+  Makefile_am | acinclude_m4 ) $arg ;;
+  configure ) call_and_fix_autoconf ;;
+  * ) echo &quot;Usage: cvs.sh &lt;target&gt;&quot;
+      echo &quot;Target can be one of:&quot;
+      echo &quot;    cvs svn dist&quot;
+      echo &quot;    configure.in configure.files&quot;
+      echo &quot;&quot;
+      echo &quot;Usage: anything but $1&quot;
+      exit 1 ;;
+esac
+
+if test -f $makefile_wo; then
+  rm $makefile_wo
+fi
+
+exit 0


Property changes on: trunk/admin/cvs.sh
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/debianrules
===================================================================
--- trunk/admin/debianrules	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/debianrules	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,43 @@
+#!/usr/bin/perl -w
+
+use Shell qw(mv cp mkdir rm) ;
+use File::Find;
+use Cwd;
+
+$origPwd = `pwd`;
+chomp $origPwd;
+
+$kde_prefix	=	&quot;/usr&quot;;
+$sysconfdir	=	&quot;/etc&quot;;
+$kde_includedir	=	&quot;$kde_prefix/include/kde&quot;;
+$infodir	=	&quot;$kde_prefix/share/info&quot;;
+$mandir		=	&quot;$kde_prefix/share/man&quot;;
+$qtdir		=	&quot;/usr/share/qt3&quot;;
+
+$kde_cgidir	=	&quot;$kde_prefix/lib/cgi-bin&quot;;
+$kde_confdir	=	&quot;$sysconfdir/kde3&quot;;
+$kde_htmldir	=	&quot;$kde_prefix/share/doc/kde/HTML&quot;;
+
+if (defined $ENV{DEB_BUILD_OPTIONS} &amp;&amp;
+    $ENV{DEB_BUILD_OPTIONS} =~ /\bnostrip\b/) {
+	$enable_debug=&quot;--enable-debug=full&quot;;
+} else {
+	$enable_debug=&quot;--disable-debug&quot;;
+}
+
+if (@ARGV &amp;&amp; $ARGV[0] eq 'echodirs') {
+  print STDOUT &quot;export kde_prefix=$kde_prefix\n&quot;;
+  print STDOUT &quot;export sysconfdir=$sysconfdir\n&quot;;
+  print STDOUT &quot;export kde_includedir=$kde_includedir\n&quot;;
+  print STDOUT &quot;export infodir=$infodir\n&quot;;
+  print STDOUT &quot;export mandir=$mandir\n&quot;;
+  print STDOUT &quot;export qtdir=$qtdir\n&quot;;
+
+  print STDOUT &quot;export kde_cgidir=$kde_cgidir\n&quot;;
+  print STDOUT &quot;export kde_confdir=$kde_confdir\n&quot;;
+  print STDOUT &quot;export kde_htmldir=$kde_htmldir\n&quot;;
+
+  print STDOUT &quot;configkde=$enable_debug --disable-rpath --prefix=\$(kde_prefix) --sysconfdir=\$(sysconfdir) --includedir=\$(kde_includedir) --infodir=\$(infodir) --mandir=\$(mandir) --with-qt-dir=\$(qtdir)\n&quot;;
+
+  exit
+}


Property changes on: trunk/admin/debianrules
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/depcomp
===================================================================
--- trunk/admin/depcomp	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/depcomp	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,530 @@
+#! /bin/sh
+# depcomp - compile a program generating dependencies as side-effects
+
+scriptversion=2005-07-09.11
+
+# Copyright (C) 1999, 2000, 2003, 2004, 2005 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
+# 02110-1301, USA.
+
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+# Originally written by Alexandre Oliva &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">oliva at dcc.unicamp.br</A>&gt;.
+
+case $1 in
+  '')
+     echo &quot;$0: No command.  Try \`$0 --help' for more information.&quot; 1&gt;&amp;2
+     exit 1;
+     ;;
+  -h | --h*)
+    cat &lt;&lt;\EOF
+Usage: depcomp [--help] [--version] PROGRAM [ARGS]
+
+Run PROGRAMS ARGS to compile a file, generating dependencies
+as side-effects.
+
+Environment variables:
+  depmode     Dependency tracking mode.
+  source      Source file read by `PROGRAMS ARGS'.
+  object      Object file output by `PROGRAMS ARGS'.
+  DEPDIR      directory where to store dependencies.
+  depfile     Dependency file to output.
+  tmpdepfile  Temporary file to use when outputing dependencies.
+  libtool     Whether libtool is used (yes/no).
+
+Report bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt;.
+EOF
+    exit $?
+    ;;
+  -v | --v*)
+    echo &quot;depcomp $scriptversion&quot;
+    exit $?
+    ;;
+esac
+
+if test -z &quot;$depmode&quot; || test -z &quot;$source&quot; || test -z &quot;$object&quot;; then
+  echo &quot;depcomp: Variables source, object and depmode must be set&quot; 1&gt;&amp;2
+  exit 1
+fi
+
+# Dependencies for sub/bar.o or sub/bar.obj go into sub/.deps/bar.Po.
+depfile=${depfile-`echo &quot;$object&quot; |
+  sed 's|[^\\/]*$|'${DEPDIR-.deps}'/&amp;|;s|\.\([^.]*\)$|.P\1|;s|Pobj$|Po|'`}
+tmpdepfile=${tmpdepfile-`echo &quot;$depfile&quot; | sed 's/\.\([^.]*\)$/.T\1/'`}
+
+rm -f &quot;$tmpdepfile&quot;
+
+# Some modes work just like other modes, but use different flags.  We
+# parameterize here, but still list the modes in the big case below,
+# to make depend.m4 easier to write.  Note that we *cannot* use a case
+# here, because this file can only contain one case statement.
+if test &quot;$depmode&quot; = hp; then
+  # HP compiler uses -M and no extra arg.
+  gccflag=-M
+  depmode=gcc
+fi
+
+if test &quot;$depmode&quot; = dashXmstdout; then
+   # This is just like dashmstdout with a different argument.
+   dashmflag=-xM
+   depmode=dashmstdout
+fi
+
+case &quot;$depmode&quot; in
+gcc3)
+## gcc 3 implements dependency tracking that does exactly what
+## we want.  Yay!  Note: for some reason libtool 1.4 doesn't like
+## it if -MD -MP comes after the -MF stuff.  Hmm.
+  &quot;$@&quot; -MT &quot;$object&quot; -MD -MP -MF &quot;$tmpdepfile&quot;
+  stat=$?
+  if test $stat -eq 0; then :
+  else
+    rm -f &quot;$tmpdepfile&quot;
+    exit $stat
+  fi
+  mv &quot;$tmpdepfile&quot; &quot;$depfile&quot;
+  ;;
+
+gcc)
+## There are various ways to get dependency output from gcc.  Here's
+## why we pick this rather obscure method:
+## - Don't want to use -MD because we'd like the dependencies to end
+##   up in a subdir.  Having to rename by hand is ugly.
+##   (We might end up doing this anyway to support other compilers.)
+## - The DEPENDENCIES_OUTPUT environment variable makes gcc act like
+##   -MM, not -M (despite what the docs say).
+## - Using -M directly means running the compiler twice (even worse
+##   than renaming).
+  if test -z &quot;$gccflag&quot;; then
+    gccflag=-MD,
+  fi
+  &quot;$@&quot; -Wp,&quot;$gccflag$tmpdepfile&quot;
+  stat=$?
+  if test $stat -eq 0; then :
+  else
+    rm -f &quot;$tmpdepfile&quot;
+    exit $stat
+  fi
+  rm -f &quot;$depfile&quot;
+  echo &quot;$object : \\&quot; &gt; &quot;$depfile&quot;
+  alpha=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
+## The second -e expression handles DOS-style file names with drive letters.
+  sed -e 's/^[^:]*: / /' \
+      -e 's/^['$alpha']:\/[^:]*: / /' &lt; &quot;$tmpdepfile&quot; &gt;&gt; &quot;$depfile&quot;
+## This next piece of magic avoids the `deleted header file' problem.
+## The problem is that when a header file which appears in a .P file
+## is deleted, the dependency causes make to die (because there is
+## typically no way to rebuild the header).  We avoid this by adding
+## dummy dependencies for each header file.  Too bad gcc doesn't do
+## this for us directly.
+  tr ' ' '
+' &lt; &quot;$tmpdepfile&quot; |
+## Some versions of gcc put a space before the `:'.  On the theory
+## that the space means something, we add a space to the output as
+## well.
+## Some versions of the HPUX 10.20 sed can't process this invocation
+## correctly.  Breaking it into two sed invocations is a workaround.
+    sed -e 's/^\\$//' -e '/^$/d' -e '/:$/d' | sed -e 's/$/ :/' &gt;&gt; &quot;$depfile&quot;
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+hp)
+  # This case exists only to let depend.m4 do its work.  It works by
+  # looking at the text of this script.  This case will never be run,
+  # since it is checked for above.
+  exit 1
+  ;;
+
+sgi)
+  if test &quot;$libtool&quot; = yes; then
+    &quot;$@&quot; &quot;-Wp,-MDupdate,$tmpdepfile&quot;
+  else
+    &quot;$@&quot; -MDupdate &quot;$tmpdepfile&quot;
+  fi
+  stat=$?
+  if test $stat -eq 0; then :
+  else
+    rm -f &quot;$tmpdepfile&quot;
+    exit $stat
+  fi
+  rm -f &quot;$depfile&quot;
+
+  if test -f &quot;$tmpdepfile&quot;; then  # yes, the sourcefile depend on other files
+    echo &quot;$object : \\&quot; &gt; &quot;$depfile&quot;
+
+    # Clip off the initial element (the dependent).  Don't try to be
+    # clever and replace this with sed code, as IRIX sed won't handle
+    # lines with more than a fixed number of characters (4096 in
+    # IRIX 6.2 sed, 8192 in IRIX 6.5).  We also remove comment lines;
+    # the IRIX cc adds comments like `#:fec' to the end of the
+    # dependency line.
+    tr ' ' '
+' &lt; &quot;$tmpdepfile&quot; \
+    | sed -e 's/^.*\.<A HREF="o://">o://</A>' -e 's/#.*$//' -e '/^$/ d' | \
+    tr '
+' ' ' &gt;&gt; $depfile
+    echo &gt;&gt; $depfile
+
+    # The second pass generates a dummy entry for each header file.
+    tr ' ' '
+' &lt; &quot;$tmpdepfile&quot; \
+   | sed -e 's/^.*\.<A HREF="o://">o://</A>' -e 's/#.*$//' -e '/^$/ d' -e 's/$/:/' \
+   &gt;&gt; $depfile
+  else
+    # The sourcefile does not contain any dependencies, so just
+    # store a dummy comment line, to avoid errors with the Makefile
+    # &quot;include basename.Plo&quot; scheme.
+    echo &quot;#dummy&quot; &gt; &quot;$depfile&quot;
+  fi
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+aix)
+  # The C for AIX Compiler uses -M and outputs the dependencies
+  # in a .u file.  In older versions, this file always lives in the
+  # current directory.  Also, the AIX compiler puts `$object:' at the
+  # start of each line; $object doesn't have directory information.
+  # Version 6 uses the directory in both cases.
+  stripped=`echo &quot;$object&quot; | sed 's/\(.*\)\..*$/\1/'`
+  tmpdepfile=&quot;$stripped.u&quot;
+  if test &quot;$libtool&quot; = yes; then
+    &quot;$@&quot; -Wc,-M
+  else
+    &quot;$@&quot; -M
+  fi
+  stat=$?
+
+  if test -f &quot;$tmpdepfile&quot;; then :
+  else
+    stripped=`echo &quot;$stripped&quot; | sed 's,^.*/,,'`
+    tmpdepfile=&quot;$stripped.u&quot;
+  fi
+
+  if test $stat -eq 0; then :
+  else
+    rm -f &quot;$tmpdepfile&quot;
+    exit $stat
+  fi
+
+  if test -f &quot;$tmpdepfile&quot;; then
+    outname=&quot;$stripped.o&quot;
+    # Each line is of the form `foo.o: dependent.h'.
+    # Do two passes, one to just change these to
+    # `$object: dependent.h' and one to simply `dependent.h:'.
+    sed -e &quot;s,^$outname:,$object :,&quot; &lt; &quot;$tmpdepfile&quot; &gt; &quot;$depfile&quot;
+    sed -e &quot;s,^$outname: \(.*\)$,\1:,&quot; &lt; &quot;$tmpdepfile&quot; &gt;&gt; &quot;$depfile&quot;
+  else
+    # The sourcefile does not contain any dependencies, so just
+    # store a dummy comment line, to avoid errors with the Makefile
+    # &quot;include basename.Plo&quot; scheme.
+    echo &quot;#dummy&quot; &gt; &quot;$depfile&quot;
+  fi
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+icc)
+  # Intel's C compiler understands `-MD -MF file'.  However on
+  #    icc -MD -MF foo.d -c -o sub/foo.o sub/foo.c
+  # ICC 7.0 will fill foo.d with something like
+  #    foo.o: sub/foo.c
+  #    foo.o: sub/foo.h
+  # which is wrong.  We want:
+  #    sub/foo.o: sub/foo.c
+  #    sub/foo.o: sub/foo.h
+  #    sub/foo.c:
+  #    sub/foo.h:
+  # ICC 7.1 will output
+  #    foo.o: sub/foo.c sub/foo.h
+  # and will wrap long lines using \ :
+  #    foo.o: sub/foo.c ... \
+  #     sub/foo.h ... \
+  #     ...
+
+  &quot;$@&quot; -MD -MF &quot;$tmpdepfile&quot;
+  stat=$?
+  if test $stat -eq 0; then :
+  else
+    rm -f &quot;$tmpdepfile&quot;
+    exit $stat
+  fi
+  rm -f &quot;$depfile&quot;
+  # Each line is of the form `foo.o: dependent.h',
+  # or `foo.o: dep1.h dep2.h \', or ` dep3.h dep4.h \'.
+  # Do two passes, one to just change these to
+  # `$object: dependent.h' and one to simply `dependent.h:'.
+  sed &quot;s,^[^:]*:,$object :,&quot; &lt; &quot;$tmpdepfile&quot; &gt; &quot;$depfile&quot;
+  # Some versions of the HPUX 10.20 sed can't process this invocation
+  # correctly.  Breaking it into two sed invocations is a workaround.
+  sed 's,^[^:]*: \(.*\)$,\1,;s/^\\$//;/^$/d;/:$/d' &lt; &quot;$tmpdepfile&quot; |
+    sed -e 's/$/ :/' &gt;&gt; &quot;$depfile&quot;
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+tru64)
+   # The Tru64 compiler uses -MD to generate dependencies as a side
+   # effect.  `cc -MD -o foo.o ...' puts the dependencies into `foo.o.d'.
+   # At least on Alpha/Redhat 6.1, Compaq CCC V6.2-504 seems to put
+   # dependencies in `foo.d' instead, so we check for that too.
+   # Subdirectories are respected.
+   dir=`echo &quot;$object&quot; | sed -e 's|/[^/]*$|/|'`
+   test &quot;x$dir&quot; = &quot;x$object&quot; &amp;&amp; dir=
+   base=`echo &quot;$object&quot; | sed -e 's|^.*/||' -e 's/\.o$//' -e 's/\.lo$//'`
+
+   if test &quot;$libtool&quot; = yes; then
+      # With Tru64 cc, shared objects can also be used to make a
+      # static library.  This mecanism is used in libtool 1.4 series to
+      # handle both shared and static libraries in a single compilation.
+      # With libtool 1.4, dependencies were output in $dir.libs/$base.lo.d.
+      #
+      # With libtool 1.5 this exception was removed, and libtool now
+      # generates 2 separate objects for the 2 libraries.  These two
+      # compilations output dependencies in in $dir.libs/$base.o.d and
+      # in $dir$base.o.d.  We have to check for both files, because
+      # one of the two compilations can be disabled.  We should prefer
+      # $dir$base.o.d over $dir.libs/$base.o.d because the latter is
+      # automatically cleaned when .libs/ is deleted, while ignoring
+      # the former would cause a distcleancheck panic.
+      tmpdepfile1=$dir.libs/$base.lo.d   # libtool 1.4
+      tmpdepfile2=$dir$base.o.d          # libtool 1.5
+      tmpdepfile3=$dir.libs/$base.o.d    # libtool 1.5
+      tmpdepfile4=$dir.libs/$base.d      # Compaq CCC V6.2-504
+      &quot;$@&quot; -Wc,-MD
+   else
+      tmpdepfile1=$dir$base.o.d
+      tmpdepfile2=$dir$base.d
+      tmpdepfile3=$dir$base.d
+      tmpdepfile4=$dir$base.d
+      &quot;$@&quot; -MD
+   fi
+
+   stat=$?
+   if test $stat -eq 0; then :
+   else
+      rm -f &quot;$tmpdepfile1&quot; &quot;$tmpdepfile2&quot; &quot;$tmpdepfile3&quot; &quot;$tmpdepfile4&quot;
+      exit $stat
+   fi
+
+   for tmpdepfile in &quot;$tmpdepfile1&quot; &quot;$tmpdepfile2&quot; &quot;$tmpdepfile3&quot; &quot;$tmpdepfile4&quot;
+   do
+     test -f &quot;$tmpdepfile&quot; &amp;&amp; break
+   done
+   if test -f &quot;$tmpdepfile&quot;; then
+      sed -e &quot;s,^.*\.[a-z]*:,$object:,&quot; &lt; &quot;$tmpdepfile&quot; &gt; &quot;$depfile&quot;
+      # That's a tab and a space in the [].
+      sed -e 's,^.*\.[a-z]*:[	 ]*,,' -e 's,$,:,' &lt; &quot;$tmpdepfile&quot; &gt;&gt; &quot;$depfile&quot;
+   else
+      echo &quot;#dummy&quot; &gt; &quot;$depfile&quot;
+   fi
+   rm -f &quot;$tmpdepfile&quot;
+   ;;
+
+#nosideeffect)
+  # This comment above is used by automake to tell side-effect
+  # dependency tracking mechanisms from slower ones.
+
+dashmstdout)
+  # Important note: in order to support this mode, a compiler *must*
+  # always write the preprocessed file to stdout, regardless of -o.
+  &quot;$@&quot; || exit $?
+
+  # Remove the call to Libtool.
+  if test &quot;$libtool&quot; = yes; then
+    while test $1 != '--mode=compile'; do
+      shift
+    done
+    shift
+  fi
+
+  # Remove `-o $object'.
+  IFS=&quot; &quot;
+  for arg
+  do
+    case $arg in
+    -o)
+      shift
+      ;;
+    $object)
+      shift
+      ;;
+    *)
+      set fnord &quot;$@&quot; &quot;$arg&quot;
+      shift # fnord
+      shift # $arg
+      ;;
+    esac
+  done
+
+  test -z &quot;$dashmflag&quot; &amp;&amp; dashmflag=-M
+  # Require at least two characters before searching for `:'
+  # in the target name.  This is to cope with DOS-style filenames:
+  # a dependency such as `c:/foo/bar' could be seen as target `c' otherwise.
+  &quot;$@&quot; $dashmflag |
+    sed 's:^[  ]*[^: ][^:][^:]*\:[    ]*:'&quot;$object&quot;'\: :' &gt; &quot;$tmpdepfile&quot;
+  rm -f &quot;$depfile&quot;
+  cat &lt; &quot;$tmpdepfile&quot; &gt; &quot;$depfile&quot;
+  tr ' ' '
+' &lt; &quot;$tmpdepfile&quot; | \
+## Some versions of the HPUX 10.20 sed can't process this invocation
+## correctly.  Breaking it into two sed invocations is a workaround.
+    sed -e 's/^\\$//' -e '/^$/d' -e '/:$/d' | sed -e 's/$/ :/' &gt;&gt; &quot;$depfile&quot;
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+dashXmstdout)
+  # This case only exists to satisfy depend.m4.  It is never actually
+  # run, as this mode is specially recognized in the preamble.
+  exit 1
+  ;;
+
+makedepend)
+  &quot;$@&quot; || exit $?
+  # Remove any Libtool call
+  if test &quot;$libtool&quot; = yes; then
+    while test $1 != '--mode=compile'; do
+      shift
+    done
+    shift
+  fi
+  # X makedepend
+  shift
+  cleared=no
+  for arg in &quot;$@&quot;; do
+    case $cleared in
+    no)
+      set &quot;&quot;; shift
+      cleared=yes ;;
+    esac
+    case &quot;$arg&quot; in
+    -D*|-I*)
+      set fnord &quot;$@&quot; &quot;$arg&quot;; shift ;;
+    # Strip any option that makedepend may not understand.  Remove
+    # the object too, otherwise makedepend will parse it as a source file.
+    -*|$object)
+      ;;
+    *)
+      set fnord &quot;$@&quot; &quot;$arg&quot;; shift ;;
+    esac
+  done
+  obj_suffix=&quot;`echo $object | sed 's/^.*\././'`&quot;
+  touch &quot;$tmpdepfile&quot;
+  ${MAKEDEPEND-makedepend} -o&quot;$obj_suffix&quot; -f&quot;$tmpdepfile&quot; &quot;$@&quot;
+  rm -f &quot;$depfile&quot;
+  cat &lt; &quot;$tmpdepfile&quot; &gt; &quot;$depfile&quot;
+  sed '1,2d' &quot;$tmpdepfile&quot; | tr ' ' '
+' | \
+## Some versions of the HPUX 10.20 sed can't process this invocation
+## correctly.  Breaking it into two sed invocations is a workaround.
+    sed -e 's/^\\$//' -e '/^$/d' -e '/:$/d' | sed -e 's/$/ :/' &gt;&gt; &quot;$depfile&quot;
+  rm -f &quot;$tmpdepfile&quot; &quot;$tmpdepfile&quot;.bak
+  ;;
+
+cpp)
+  # Important note: in order to support this mode, a compiler *must*
+  # always write the preprocessed file to stdout.
+  &quot;$@&quot; || exit $?
+
+  # Remove the call to Libtool.
+  if test &quot;$libtool&quot; = yes; then
+    while test $1 != '--mode=compile'; do
+      shift
+    done
+    shift
+  fi
+
+  # Remove `-o $object'.
+  IFS=&quot; &quot;
+  for arg
+  do
+    case $arg in
+    -o)
+      shift
+      ;;
+    $object)
+      shift
+      ;;
+    *)
+      set fnord &quot;$@&quot; &quot;$arg&quot;
+      shift # fnord
+      shift # $arg
+      ;;
+    esac
+  done
+
+  &quot;$@&quot; -E |
+    sed -n -e '/^# [0-9][0-9]* &quot;\([^&quot;]*\)&quot;.*/ s:: \1 \\:p' \
+       -e '/^#line [0-9][0-9]* &quot;\([^&quot;]*\)&quot;.*/ s:: \1 \\:p' |
+    sed '$ s: \\$::' &gt; &quot;$tmpdepfile&quot;
+  rm -f &quot;$depfile&quot;
+  echo &quot;$object : \\&quot; &gt; &quot;$depfile&quot;
+  cat &lt; &quot;$tmpdepfile&quot; &gt;&gt; &quot;$depfile&quot;
+  sed &lt; &quot;$tmpdepfile&quot; '/^$/d;s/^ //;s/ \\$//;s/$/ :/' &gt;&gt; &quot;$depfile&quot;
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+msvisualcpp)
+  # Important note: in order to support this mode, a compiler *must*
+  # always write the preprocessed file to stdout, regardless of -o,
+  # because we must use -o when running libtool.
+  &quot;$@&quot; || exit $?
+  IFS=&quot; &quot;
+  for arg
+  do
+    case &quot;$arg&quot; in
+    &quot;-Gm&quot;|&quot;/Gm&quot;|&quot;-Gi&quot;|&quot;/Gi&quot;|&quot;-ZI&quot;|&quot;/ZI&quot;)
+	set fnord &quot;$@&quot;
+	shift
+	shift
+	;;
+    *)
+	set fnord &quot;$@&quot; &quot;$arg&quot;
+	shift
+	shift
+	;;
+    esac
+  done
+  &quot;$@&quot; -E |
+  sed -n '/^#line [0-9][0-9]* &quot;\([^&quot;]*\)&quot;/ s::echo &quot;`cygpath -u \\&quot;\1\\&quot;`&quot;:p' | sort | uniq &gt; &quot;$tmpdepfile&quot;
+  rm -f &quot;$depfile&quot;
+  echo &quot;$object : \\&quot; &gt; &quot;$depfile&quot;
+  . &quot;$tmpdepfile&quot; | sed 's% %\\ %g' | sed -n '/^\(.*\)$/ s::	\1 \\:p' &gt;&gt; &quot;$depfile&quot;
+  echo &quot;	&quot; &gt;&gt; &quot;$depfile&quot;
+  . &quot;$tmpdepfile&quot; | sed 's% %\\ %g' | sed -n '/^\(.*\)$/ s::\1\::p' &gt;&gt; &quot;$depfile&quot;
+  rm -f &quot;$tmpdepfile&quot;
+  ;;
+
+none)
+  exec &quot;$@&quot;
+  ;;
+
+*)
+  echo &quot;Unknown depmode $depmode&quot; 1&gt;&amp;2
+  exit 1
+  ;;
+esac
+
+exit 0
+
+# Local Variables:
+# mode: shell-script
+# sh-indentation: 2
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;scriptversion=&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d.%02H&quot;
+# time-stamp-end: &quot;$&quot;
+# End:


Property changes on: trunk/admin/depcomp
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/deps.am
===================================================================
--- trunk/admin/deps.am	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/deps.am	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,19 @@
+$(top_srcdir)/acinclude.m4: $(top_srcdir)/admin/acinclude.m4.in $(top_srcdir)/admin/libtool.m4.in $(top_srcdir)/admin/cvs.sh $(top_srcdir)/admin/pkg.m4.in
+	@cd $(top_srcdir) &amp;&amp; $(SHELL) admin/cvs.sh acinclude_m4
+
+$(top_srcdir)/configure.in: $(top_srcdir)/subdirs $(top_srcdir)/configure.files $(top_srcdir)/admin/cvs.sh
+	@cd $(top_srcdir) &amp;&amp; $(SHELL) admin/cvs.sh configure_in
+
+$(top_srcdir)/configure.files: $(top_srcdir)/subdirs $(CONF_FILES)
+	@cd $(top_srcdir) &amp;&amp; $(SHELL) admin/cvs.sh configure.files $(top_srcdir)/admin/cvs.sh
+
+$(top_srcdir)/Makefile.am: $(top_srcdir)/Makefile.am.in $(top_srcdir)/subdirs $(top_srcdir)/admin/cvs.sh
+	@cd $(top_srcdir) &amp;&amp; $(SHELL) admin/cvs.sh Makefile_am
+
+$(top_srcdir)/subdirs: $(top_srcdir)/Makefile.am.in $(top_srcdir)/admin/cvs.sh
+	@cd $(top_srcdir) &amp;&amp; $(SHELL) admin/cvs.sh subdirs
+
+# defining default rules for files that may not be present
+$(top_srcdir)/Makefile.am.in:
+$(CONF_FILES):
+

Added: trunk/admin/detect-autoconf.pl
===================================================================
--- trunk/admin/detect-autoconf.pl	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/detect-autoconf.pl	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,173 @@
+#!/usr/bin/env perl
+
+# Try to locate best version of auto*
+# By Michael Pyne &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">michael.pyne at kdemail.net</A>&gt;
+#
+# Copyright (c) 2005.
+# This code is public domain.  You may use it however you like (including
+# relicensing).
+
+# Emulate the 'which' program.
+sub which
+{
+    my $prog = shift;
+    my @paths = split(/:/, $ENV{'PATH'});
+
+    for $path (@paths)
+    {
+	return &quot;$path/$prog&quot; if -x &quot;$path/$prog&quot;;
+    }
+
+    return &quot;&quot;;
+}
+
+# Subroutine to determine the highest installed version of the given program,
+# searching from the given paths.
+sub findBest
+{
+    my ($program, @paths) = @_;
+    my $best_version_found = '0'; # Deliberately a string.
+    my %versions;
+    my %minimumVersions = (
+ 	'autoconf' =&gt; '2.5',
+	'automake' =&gt; '1.6',
+    );
+
+    # Allow user to use environment variable to override search.
+    return $ENV{uc $program} if $ENV{uc $program};
+
+    for $prefix (@paths)
+    {
+	@files = glob &quot;$prefix/$program*&quot;;
+	for $file (@files)
+	{
+	    # Don't check non-executable scripts.
+	    next unless -x $file;
+
+	    ($version) = $file =~ /$program-?(.*)$/;
+	    $version =~ s/-|\.//g;
+
+	    # Special case some programs to make sure it has a minimum version.
+	    if (not $version and exists $minimumVersions{$program})
+	    {
+		my $min_version = $minimumVersions{$program};
+		my $versionOutput = `$program --version 2&gt;/dev/null | head -n 1`;
+
+		# If we can't run the script to get the version it likely won't work later.
+		next unless $versionOutput; 
+
+		# Use number.number for version (we don't need the excess in general).
+		($versionOutput) = ($versionOutput =~ /(\d\.\d)/);
+
+		# Use lt to do lexicographical comparison of strings (which should be
+		# equivalent and doesn't involve issues with floating point conversions).
+		if (not $versionOutput or $versionOutput lt $min_version)
+		{
+		    next;
+		}
+	    }
+
+	    # If no version suffix then use it in favor of a versioned autotool
+	    # since the ever-popular WANT_AUTOFOO should then work (in theory).
+	    return $file unless $version;
+
+	    # Emulate 'which', and abort if we've already seen this version.
+	    next if exists $versions{$version};
+
+	    # Save filename of program.
+	    $versions{$version} = $file;
+
+	    # Use string comparison so that e.g. 253a will be &gt; 253 but &lt; 254.
+	    if ($version gt $best_version_found)
+	    {
+		$best_version_found = $version;
+	    }
+	}
+    }
+
+    return $versions{$best_version_found};
+}
+
+# Find an appropriate &quot;which&quot; program for later use by the shell script calling
+# us.
+sub findWhich
+{
+    for $candidate ('type -p', 'which', 'type')
+    {
+	$test = `$candidate sh 2&gt;/dev/null`;
+	chomp $test;
+
+	return $candidate if -x $test;
+    }
+}
+
+# Uses which() to find a program unless the user provided its path in the
+# environment (the upper case program name is searched).
+sub findProgram
+{
+    $suffix = &quot;&quot;; # For use if @_ has only one param.
+    my ($program, $suffix) = @_;
+
+    return $ENV{uc $program} if $ENV{uc $program};
+    return which(&quot;$program$suffix&quot;);
+}
+
+# SCRIPT STARTS.
+
+# Search in path.
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at paths</A> = split(/:/, $ENV{'PATH'});
+
+# Make sure at least /usr/bin and /usr/local/bin are in this search.
+unshift @paths, '/usr/local/bin' unless grep $_ eq '/usr/local/bin', @paths;
+unshift @paths, '/usr/bin' unless grep $_ eq '/usr/bin', @paths;
+
+$autoconf = findBest('autoconf', @paths);
+($autoconf_suffix) = $autoconf =~ /.*autoconf(.*)$/;
+
+# Find matching autoconf companions.
+$autoheader = findProgram('autoheader', $autoconf_suffix);
+$autom4te = findProgram('autom4te', $autoconf_suffix);
+
+# Get best automake, and look for unsermake to possibly override it.
+$automake = findBest('automake', @paths);
+$unsermake = &quot;&quot;;
+# backward compatible: if $UNSERMAKE points to a path, use it
+$unsermake = findProgram('unsermake') if (defined($ENV{'UNSERMAKE'}) and $ENV{'UNSERMAKE'} =~ /\//);
+# new compatible: if it says 'yes', use the one from path
+$unsermake = which('unsermake') if ($ENV{'UNSERMAKE'} ne 'no');
+
+($automake_suffix) = $automake =~ /.*automake(.*)$/;
+
+# Use unsermake if we found it.
+$automake = &quot;$unsermake -c&quot; if $unsermake;
+
+# Find matching automake companions.
+$aclocal = findProgram('aclocal', $automake_suffix);
+
+$which = findWhich();
+
+# Make sure we have all of the needed programs.
+for $i (qw'autoconf autoheader autom4te automake aclocal')
+{
+    unless(${$i})
+    {
+	print &quot;# Unable to find $i!!\n&quot;;
+	exit 1;
+    }
+}
+
+# Print results in eval-able form.
+print &lt;&lt;EOF;
+AUTOCONF=&quot;$autoconf&quot;
+AUTOHEADER=&quot;$autoheader&quot;
+AUTOM4TE=&quot;$autom4te&quot;
+
+AUTOMAKE=&quot;$automake&quot;
+ACLOCAL=&quot;$aclocal&quot;
+
+WHICH=&quot;$which&quot;
+
+export AUTOCONF AUTOHEADER AUTOM4TE AUTOMAKE ACLOCAL WHICH
+EOF
+
+exit 0;


Property changes on: trunk/admin/detect-autoconf.pl
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/doxygen.sh
===================================================================
--- trunk/admin/doxygen.sh	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/doxygen.sh	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,908 @@
+#! /bin/sh
+#
+# doxygen.sh Copyright (C) 2005 by Adriaan de Groot
+#            Based on some code from Doxyfile.am, among other things.
+# License:   GPL version 2.
+#            See file COPYING in kdelibs for details.
+
+echo &quot;*** doxygen.sh&quot;
+
+# Recurse handling is a little complicated, since normally
+# subdir (given on the command-line) processing doesn't recurse
+# but you can force it to do so.
+recurse=1
+recurse_given=NO
+use_modulename=1
+cleanup=YES
+
+while test -n &quot;$1&quot; ; do
+case &quot;x$1&quot; in
+&quot;x--no-cleanup&quot; )
+	cleanup=NO
+	;;
+&quot;x--no-recurse&quot; )
+	recurse=0
+	recurse_given=YES
+	;;
+&quot;x--recurse&quot; )
+	recurse=1
+	recurse_given=YES
+	;;
+&quot;x--no-modulename&quot; )
+	use_modulename=0
+	;;
+&quot;x--modulename&quot; )
+	use_modulename=1
+	;;
+&quot;x--help&quot; )
+	echo &quot;doxygen.sh usage:&quot;
+	echo &quot;doxygen.sh [--options] &lt;srcdir&gt; [&lt;subdir&gt;]&quot;
+	echo &quot;  --no-cleanup     Do not remove Doxyfile and other cruft from build&quot;
+	echo &quot;  --no-recurse     Build only the given top-level directory&quot;
+	echo &quot;  --no-modulename  Build in apidocs/, not apidocs-module/&quot;
+	echo &quot;  --doxdatadir=dir Use dir as the source of global Doxygen files&quot;
+	echo &quot;  --installdir=dir Use dir as target to install to&quot;
+	exit 2
+	;;
+x--doxdatadir=* )
+	DOXDATA=`echo $1 | sed -e 's+--doxdatadir=++'`
+	;;
+x--installdir=*)
+	PREFIX=`echo $1 | sed -e 's+--installdir=++'`
+	;;
+x--* )
+	echo &quot;Unknown option: $1&quot;
+	exit 1
+	;;
+* )
+	top_srcdir=&quot;$1&quot;
+	break
+	;;
+esac
+shift
+done
+
+
+### Sanity check the mandatory &quot;top srcdir&quot; argument.
+if test -z &quot;$top_srcdir&quot; ; then
+	echo &quot;Usage: doxygen.sh &lt;top_srcdir&gt;&quot;
+	exit 1
+fi
+if test ! -d &quot;$top_srcdir&quot; ; then
+	echo &quot;top_srcdir ($top_srcdir) is not a directory.&quot;
+	exit 1
+fi
+
+### Normalize top_srcdir so it is an absolute path.
+if expr &quot;x$top_srcdir&quot; : &quot;x/&quot; &gt; /dev/null ; then
+	# top_srcdir is absolute already
+	:
+else
+	top_srcdir=`cd &quot;$top_srcdir&quot; 2&gt; /dev/null &amp;&amp; pwd`
+	if test ! -d &quot;$top_srcdir&quot; ; then
+		echo &quot;top_srcdir ($top_srcdir) is not a directory.&quot;
+		exit 1
+	fi
+fi
+
+
+
+### Sanity check and guess QTDOCDIR.
+if test -z &quot;$QTDOCDIR&quot; ; then
+	if test -z &quot;$QTDIR&quot; ; then
+		for i in /usr/X11R6/share/doc/qt/html
+		do
+			QTDOCDIR=&quot;$i&quot;
+			test -d &quot;$QTDOCDIR&quot; &amp;&amp; break
+		done
+	else
+		for i in share/doc/qt/html doc/html
+		do
+			QTDOCDIR=&quot;$QTDIR/$i&quot;
+			test -d &quot;$QTDOCDIR&quot; &amp;&amp; break
+		done
+	fi
+fi
+if test -z &quot;$QTDOCDIR&quot;  || test ! -d &quot;$QTDOCDIR&quot; ; then
+	if test -z &quot;$QTDOCDIR&quot; ; then
+		echo &quot;* QTDOCDIR could not be guessed.&quot;
+	else
+		echo &quot;* QTDOCDIR does not name a directory.&quot;
+	fi
+	if test -z &quot;$QTDOCTAG&quot; ; then
+		echo &quot;* QTDOCDIR set to \&quot;\&quot;&quot;
+		QTDOCDIR=&quot;&quot;
+	else
+		echo &quot;* But I'll use $QTDOCDIR anyway because of QTDOCTAG.&quot;
+	fi
+fi
+
+### Get the &quot;top srcdir&quot;, also its name, and handle the case that subdir &quot;.&quot;
+### is given (which would be top_srcdir then, so it's equal to none-given
+### but no recursion either).
+###
+# top_srcdir=&quot;$1&quot; # Already set by options processing
+module_name=`basename &quot;$top_srcdir&quot;`
+subdir=&quot;$2&quot;
+if test &quot;x.&quot; = &quot;x$subdir&quot; ; then
+	subdir=&quot;&quot;
+	if test &quot;x$recurse_given&quot; = &quot;xNO&quot; ; then
+		recurse=0
+	fi
+fi
+if test &quot;x&quot; != &quot;x$subdir&quot; ; then
+	# If no recurse option given explicitly, default to
+	# no recurse when processing subdirs given on the command-line.
+	if test &quot;x$recurse_given&quot; = &quot;xNO&quot; ; then
+		recurse=0
+	fi
+fi
+
+if test -z &quot;$DOXDATA&quot; || test ! -d &quot;$DOXDATA&quot; ; then
+	if test -n &quot;$DOXDATA&quot; ; then
+		echo &quot;* \$DOXDATA is '$DOXDATA' which does not name a directory&quot;
+	fi
+	DOXDATA=&quot;$top_srcdir/doc/common&quot;
+fi
+
+if test ! -d &quot;$DOXDATA&quot; ; then
+	echo &quot;* \$DOXDATA does not name a directory ( or is unset ), tried \&quot;$DOXDATA\&quot;&quot;
+	exit 1
+fi
+
+if test -n &quot;$PREFIX&quot; &amp;&amp; test ! -d &quot;$PREFIX&quot; ; then
+	echo &quot;* \$PREFIX does not name a directory, tried \&quot;$PREFIX\&quot;&quot;
+	echo &quot;* \$PREFIX is disabled.&quot;
+	PREFIX=&quot;&quot;
+fi
+
+### We need some values from top-level files, which
+### are not preserved between invocations of this
+### script, so factor it out for easy use.
+create_doxyfile_in() 
+{
+	VERSION=`grep '^/.*DOXYGEN_VERSION' &quot;$top_srcdir/Mainpage.dox&quot; | sed -e 's+.*=++'`
+	NAME=`grep '^/.*DOXYGEN_NAME' &quot;$top_srcdir/Mainpage.dox&quot; | sed -e 's+.*=++'`
+	echo &quot;PROJECT_NUMBER = $VERSION&quot; &gt; Doxyfile.in
+	echo &quot;PROJECT_NAME = $NAME&quot; &gt;&gt; Doxyfile.in
+}
+
+apidoxdir=&quot;$module_name&quot;-apidocs
+test &quot;x$use_modulename&quot; = &quot;x0&quot; &amp;&amp; apidoxdir=&quot;apidocs&quot;
+
+### If we're making the top subdir, create the structure
+### for the apidox and initialize it. Otherwise, just use the
+### structure assumed to be there.
+if test -z &quot;$subdir&quot; ; then
+	if test ! -d &quot;$apidoxdir&quot; ; then
+		mkdir &quot;$apidoxdir&quot; &gt; /dev/null 2&gt;&amp;1
+	fi
+	cd &quot;$apidoxdir&quot; &gt; /dev/null 2&gt;&amp;1 || { 
+		echo &quot;Cannot create and cd into $apidoxdir&quot;
+		exit 1
+	}
+
+	test -f &quot;Doxyfile.in&quot; || create_doxyfile_in
+
+	# Copy in logos and the like
+	for i in &quot;favicon.ico&quot; &quot;kde_gear_64.png&quot;
+	do
+		cp &quot;$DOXDATA/$i&quot; . &gt; /dev/null 2&gt; /dev/null
+	done
+	for i in &quot;$top_srcdir/doc/api/Dox-&quot;*.png
+	do
+		T=`basename &quot;$i&quot; | sed -e 's+Dox-++'`
+		test -f &quot;$i&quot; &amp;&amp; cp &quot;$i&quot; &quot;./$T&quot; &gt; /dev/null 2&gt; /dev/null
+	done
+
+	top_builddir=&quot;.&quot;
+	srcdir=&quot;$1&quot;
+	subdir=&quot;.&quot;
+else
+	cd &quot;$apidoxdir&quot; &gt; /dev/null 2&gt;&amp;1 || {
+		echo &quot;Cannot cd into $apidoxdir -- maybe you need to&quot;
+		echo &quot;build the top-level dox first.&quot;
+		exit 1
+	}
+
+	if test &quot;x1&quot; = &quot;x$recurse&quot; ; then
+		# OK, so --recurse was requested
+		if test ! -f &quot;subdirs.top&quot; ; then
+			echo &quot;* No subdirs.top available in the $apidoxdir.&quot;
+			echo &quot;* The --recurse option will be ignored.&quot;
+			recurse=0
+		fi
+	fi
+fi
+
+### Read a single line (TODO: support \ continuations) from the Makefile.am.
+### Used to extract variable assignments from it.
+extract_line()
+{
+	file=&quot;$2&quot; ; test -z &quot;$file&quot; &amp;&amp; file=&quot;$srcdir/Makefile.am&quot;
+	test -f &quot;$file&quot; || return
+	pattern=`echo &quot;$1&quot; | tr + .`
+	grep &quot;^$1&quot; &quot;$file&quot; | \
+		sed -e &quot;s+$pattern.*=\s*++&quot;
+}
+
+### Handle the COMPILE_{FIRST,LAST,BEFORE,AFTER} part of Makefile.am
+### in the toplevel. Copied from admin/cvs.sh. Licence presumed LGPL).
+create_subdirs()
+{
+echo &quot;* Sorting top-level subdirs&quot;
+dirs=
+idirs=
+if test -f &quot;$top_srcdir/inst-apps&quot;; then
+   idirs=`cat &quot;$top_srcdir/&quot;inst-apps`
+else
+   idirs=`cd &quot;$top_srcdir&quot; &amp;&amp; ls -1 | sort`
+fi
+
+compilefirst=&quot;&quot;
+compilelast=&quot;&quot;
+if test -f &quot;$top_srcdir/&quot;Makefile.am.in ; then
+	compilefirst=`sed -ne 's#^COMPILE_FIRST[ ]*=[ ]*##p' &quot;$top_srcdir/&quot;Makefile.am.in | head -n 1`
+	compilelast=`sed -ne 's#^COMPILE_LAST[ ]*=[ ]*##p' &quot;$top_srcdir/&quot;Makefile.am.in | head -n 1`
+fi
+for i in $idirs; do
+    if test -f &quot;$top_srcdir/$i&quot;/Makefile.am; then
+       case &quot; $compilefirst $compilelast &quot; in
+         *&quot; $i &quot;*) ;;
+         *) dirs=&quot;$dirs $i&quot;
+       esac
+    fi
+done
+
+: &gt; ./_SUBDIRS
+
+for d in $compilefirst; do
+   echo $d &gt;&gt; ./_SUBDIRS
+done
+
+(for d in $dirs; do
+   list=&quot;&quot;
+   if test -f &quot;$top_srcdir/&quot;Makefile.am.in ; then
+	   list=`sed -ne &quot;s#^COMPILE_BEFORE_$d&quot;&quot;[ ]*=[ ]*##p&quot; &quot;$top_srcdir/&quot;Makefile.am.in | head -n 1`
+   fi
+   for s in $list; do
+      echo $s $d
+   done
+   list=&quot;&quot;
+   if test -f &quot;$top_srcdir/&quot;Makefile.am.in ; then
+	   list=`sed -ne &quot;s#^COMPILE_AFTER_$d&quot;&quot;[ ]*=[ ]*##p&quot; &quot;$top_srcdir/&quot;Makefile.am.in | head -n 1`
+   fi
+   for s in $list; do
+      echo $d $s
+   done
+   echo $d $d
+done ) | tsort &gt;&gt; ./_SUBDIRS
+
+for d in $compilelast; do
+   echo $d &gt;&gt; ./_SUBDIRS
+done
+
+test -r _SUBDIRS &amp;&amp; mv _SUBDIRS subdirs.top || true
+}
+
+
+### Add HTML header, footer, CSS tags to Doxyfile.
+### Assumes $subdir is set. Argument is a string
+### to stick in front of the file if needed.
+apidox_htmlfiles()
+{
+	dox_header=&quot;$top_srcdir/doc/api/$1header.html&quot;
+	dox_footer=&quot;$top_srcdir/doc/api/$1footer.html&quot;
+	dox_css=&quot;$top_srcdir/doc/api/doxygen.css&quot;
+	test -f &quot;$dox_header&quot; || dox_header=&quot;$DOXDATA/$1header.html&quot;
+	test -f &quot;$dox_footer&quot; || dox_footer=&quot;$DOXDATA/$1footer.html&quot;
+	test -f &quot;$dox_css&quot; || dox_css=&quot;$DOXDATA/doxygen.css&quot;
+
+	echo &quot;HTML_HEADER            = $dox_header&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot; ; \
+	echo &quot;HTML_FOOTER            = $dox_footer&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot; ; \
+	echo &quot;HTML_STYLESHEET        = $dox_css&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+}
+
+apidox_specials()
+{
+	line=`extract_line DOXYGEN_PROJECTNAME &quot;$1&quot;`
+	test -n &quot;$line&quot; &amp;&amp; echo &quot;PROJECT_NAME = \&quot;$line\&quot;&quot; &gt;&gt; &quot;$2&quot;
+}
+
+apidox_local()
+{
+	for i in &quot;$top_srcdir/doc/api/Doxyfile.local&quot;
+	do
+		if test -f &quot;$i&quot; ; then
+			cat &quot;$i&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+			break
+		fi
+	done
+}
+
+### Post-process HTML files by substituting in the menu files
+#
+# In non-top directories, both &lt;!-- menu --&gt; and &lt;!-- gmenu --&gt;
+# are calculated and replaced. Top directories get an empty &lt;!-- menu --&gt;
+# if any.
+doxyndex()
+{
+	# Special case top-level to have an empty MENU.
+	if test &quot;x$subdir&quot; = &quot;x.&quot; ; then
+		MENU=&quot;&quot;
+		htmldir=&quot;.&quot;
+		htmltop=&quot;$top_builddir&quot; # Just ., presumably
+		echo &quot;* Post-processing top-level files&quot;
+	else
+		MENU=&quot;&lt;ul&gt;&quot;
+		htmldir=&quot;$subdir/html&quot;
+		htmltop=&quot;$top_builddir..&quot; # top_builddir ends with /
+		echo &quot;* Post-processing files in $htmldir&quot;
+
+		# Build a little PHP file that maps class names to file
+		# names, for the quick-class-picker functionality.
+		# (The quick-class-picker is disabled due to styling
+		# problems in IE &amp; FF).
+		(
+		echo &quot;&lt;?php \$map = array(&quot;;  \
+		for htmlfile in `find $htmldir/ -type f -name &quot;class[A-Z]*.html&quot; | grep -v &quot;\-members.html$&quot;`; do
+			classname=`echo $htmlfile | sed -e &quot;s,.*/class\\(.*\\).html,\1,&quot; -e &quot;s,_1_1,::,g&quot; -e &quot;s,_01, ,g&quot; -e &quot;s,_4,&gt;,g&quot; -e &quot;s+_00+,+g&quot; -e &quot;s+_3+&lt;+g&quot; | tr &quot;[A-Z]&quot; &quot;[a-z]&quot;`
+			echo &quot;  \&quot;$classname\&quot; =&gt; \&quot;$htmlfile\&quot;,&quot;
+		done | sort ; \
+		echo &quot;) ?&gt;&quot;
+		) &gt; &quot;$subdir/classmap.inc&quot;
+
+		# This is a list of pairs, with / separators so we can use
+		# basename and dirname (a crude shell hack) to split them
+		# into parts. For each, if the file part exists (as a html
+		# file) tack it onto the MENU variable as a &lt;li&gt; with link.
+		for i in &quot;Main Page/index&quot; \
+			&quot;Modules/modules&quot; \
+			&quot;Namespace List/namespaces&quot; \
+			&quot;Class Hierarchy/hierarchy&quot; \
+			&quot;Alphabetical List/classes&quot; \
+			&quot;Class List/annotated&quot; \
+			&quot;File List/files&quot; \
+			&quot;Directories/dirs&quot; \
+			&quot;Namespace Members/namespacemembers&quot; \
+			&quot;Class Members/functions&quot; \
+			&quot;Related Pages/pages&quot;
+		do
+			NAME=`dirname &quot;$i&quot;`
+			FILE=`basename &quot;$i&quot;`
+			test -f &quot;$htmldir/$FILE.html&quot; &amp;&amp; MENU=&quot;$MENU&lt;li&gt;&lt;a href=\&quot;$FILE.html\&quot;&gt;$NAME&lt;/a&gt;&lt;/li&gt;&quot;
+		done
+
+		MENU=&quot;$MENU&lt;/ul&gt;&quot;
+	fi
+
+
+	# Get the list of global Menu entries.
+	GMENU=`cat subdirs | tr -d '\n'`
+
+	PMENU=`grep '&lt;!-- pmenu' &quot;$htmldir/index.html&quot; | sed -e 's+.*pmenu *++' -e 's+ *--&gt;++' | awk '{ c=split($0,a,&quot;/&quot;); for (j=1; j&lt;=c; j++) { printf &quot; / &lt;a href=\&quot;&quot;; if (j==c) { printf(&quot;.&quot;); } for (k=j; k&lt;c; k++) { printf &quot;../&quot;; } if (j&lt;c) { printf(&quot;../html/index.html&quot;); } printf &quot;\&quot;&gt;%s&lt;/a&gt;\n&quot; , a[j]; } }' | tr -d '\n'`
+
+	# Map the PHP file into HTML options so that
+	# it can be substituted in for the quick-class-picker.
+	CMENU=&quot;&quot;
+	# For now, leave the CMENU disabled
+	CMENUBEGIN=&quot;&lt;!--&quot;
+	CMENUEND=&quot;--&gt;&quot;
+
+	if test &quot;x$subdir&quot; = &quot;x.&quot; ; then
+		# Disable CMENU on toplevel anyway
+		CMENUBEGIN=&quot;&lt;!--&quot;
+		CMENUEND=&quot;--&gt;&quot;
+	else
+		test -f &quot;$subdir/classmap.inc&quot; &amp;&amp; \
+		CMENU=`grep '=&gt;' &quot;$subdir/classmap.inc&quot; | sed -e 's+&quot;\([^&quot;]*\)&quot; =&gt; &quot;'&quot;$subdir/html/&quot;'\([^&quot;]*\)&quot;+&lt;option value=&quot;\2&quot;&gt;\1&lt;\/option&gt;+' | tr -d '\n'`
+
+		if test -f &quot;$subdir/classmap.inc&quot; &amp;&amp; grep &quot;=&gt;&quot; &quot;$subdir/classmap.inc&quot; &gt; /dev/null 2&gt;&amp;1 ; then
+			# Keep the menu, it's useful
+			:
+		else
+			CMENUBEGIN=&quot;&lt;!--&quot;
+			CMENUEND=&quot;--&gt;&quot;
+		fi
+	fi
+
+	# Now substitute in the MENU in every file. This depends
+	# on HTML_HEADER (ie. header.html) containing the
+	# &lt;!-- menu --&gt; comment.
+	for i in &quot;$htmldir&quot;/*.html
+	do
+		if test -f &quot;$i&quot; ; then
+			sed -e &quot;s+&lt;!-- menu --&gt;+$MENU+&quot; \
+				-e &quot;s+&lt;!-- gmenu --&gt;+$GMENU+&quot; \
+				-e &quot;s+&lt;!-- pmenu.*--&gt;+$PMENU+&quot; \
+				-e &quot;s+&lt;!-- cmenu.begin --&gt;+$CMENUBEGIN+&quot; \
+				-e &quot;s+&lt;!-- cmenu.end --&gt;+$CMENUEND+&quot; \
+				&lt; &quot;$i&quot;  | sed -e &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">s+ at topdir</A>@+$htmltop+g&quot; &gt; &quot;$i.new&quot; &amp;&amp; mv &quot;$i.new&quot; &quot;$i&quot;
+			sed -e &quot;s+&lt;!-- cmenu --&gt;+$CMENU+&quot; &lt; &quot;$i&quot; &gt; &quot;$i.new&quot;
+			test -s &quot;$i.new&quot; &amp;&amp; mv &quot;$i.new&quot; &quot;$i&quot;
+		fi
+	done
+
+	# For each class, post-process it to check for bc-ness
+	for i in &quot;$htmldir&quot;/class*.html
+	do
+		test &quot;$htmldir/classes.html&quot; = &quot;$i&quot; &amp;&amp; continue
+		if test -f &quot;$i&quot; ; then
+			grep -l 'bc.html#_bc' &quot;$i&quot; &gt; /dev/null ||
+			{ sed -e 's+&lt;!-- BC --&gt;+&lt;div class=&quot;bic&quot;&gt;This class is not guaranteed to be binary compatible across releases.&lt;/div&gt;+' &quot;$i&quot; &gt; &quot;$i.new&quot; ; test -s &quot;$i.new&quot; &amp;&amp; mv &quot;$i.new&quot; &quot;$i&quot; ; }
+		fi
+	done
+}
+
+
+
+
+
+
+### Handle the Doxygen processing of a toplevel directory.
+apidox_toplevel()
+{
+	echo &quot;&quot;
+	echo &quot;*** Creating API documentation main page for $module_name&quot;
+	echo &quot;*&quot;
+	rm -f &quot;Doxyfile&quot;
+	for i in &quot;$top_srcdir/doc/api/Doxyfile.global&quot; \
+		&quot;$top_srcdir/admin/Doxyfile.global&quot; \
+		&quot;$DOXDATA/Doxyfile.global&quot;
+	do
+		if test -f &quot;$i&quot; ; then
+			cp &quot;$i&quot; Doxyfile
+			break
+		fi
+	done
+
+	if test ! -f &quot;Doxyfile&quot; ; then
+		echo &quot;* Cannot create Doxyfile.&quot;
+		exit 1
+	fi
+
+	cat &quot;$top_builddir/Doxyfile.in&quot; &gt;&gt; Doxyfile
+
+
+	{
+		echo &quot;INPUT                  = $top_srcdir&quot;
+		echo &quot;DOTFILE_DIRS           = $top_srcdir&quot;
+		echo &quot;OUTPUT_DIRECTORY       = $top_builddir&quot;
+		echo &quot;FILE_PATTERNS          = *.dox&quot;
+		echo &quot;RECURSIVE              = NO&quot;
+		echo &quot;ALPHABETICAL_INDEX     = NO&quot;
+		echo &quot;HTML_OUTPUT            = .&quot; 
+	} &gt;&gt; Doxyfile
+	apidox_htmlfiles &quot;main&quot;
+
+	# KDevelop has a top-level Makefile.am with settings.
+	for i in &quot;$top_srcdir/Makefile.am.in&quot; &quot;$top_srcdir/Makefile.am&quot;
+	do
+		if test -f &quot;$i&quot; ; then
+			grep '^DOXYGEN_SET_' &quot;$i&quot; | \
+				sed -e 's+DOXYGEN_SET_++' -e &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">s+ at topdir</A>@+$top_srcdir+&quot; &gt;&gt; Doxyfile
+			apidox_specials &quot;$srcdir/Makefile.am&quot; &quot;$subdir/Doxyfile&quot;
+
+			break
+		fi
+	done
+
+	apidox_local
+
+	doxygen Doxyfile
+
+	( cd &quot;$top_srcdir&quot; &amp;&amp; grep -l '^include.*Doxyfile.am' `find . -name Makefile.am` ) | sed -e 's+/Makefile.am$++' -e 's+^\./++' | sort &gt; subdirs.in
+	for i in `cat subdirs.in`
+	do
+		test &quot;x.&quot; = &quot;x$i&quot; &amp;&amp; continue;
+
+		dir=`dirname &quot;$i&quot;`
+		file=`basename &quot;$i&quot;`
+		if test &quot;x.&quot; = &quot;x$dir&quot; ; then
+			dir=&quot;&quot;
+		else
+			dir=&quot;$dir/&quot;
+		fi
+		indent=`echo &quot;$dir&quot; | sed -e 's+[^/]*/+\&nbsp;\&nbsp;+g' | sed -e 's+&amp;+\\\&amp;+g'`
+		entryname=`extract_line DOXYGEN_SET_PROJECT_NAME &quot;$top_srcdir/$dir/$file/Makefile.am&quot;`
+		test -z &quot;$entryname&quot; &amp;&amp; entryname=&quot;$file&quot;
+
+		if grep DOXYGEN_EMPTY &quot;$top_srcdir/$dir/$file/Makefile.am&quot; &gt; /dev/null 2&gt;&amp;1 ; then
+			echo &quot;&lt;li&gt;$indent$file&lt;/li&gt;&quot;
+		else
+			echo &quot;&lt;li&gt;$indent&lt;a href=\&quot;@topdir@/$dir$file/html/index.html\&quot;&gt;$entryname&lt;/a&gt;&lt;/li&gt;&quot;
+		fi
+	done &gt; subdirs
+
+	doxyndex
+}
+
+### Handle the Doxygen processing of a non-toplevel directory.
+apidox_subdir()
+{
+	echo &quot;&quot;
+	echo &quot;*** Creating apidox in $subdir&quot;
+	echo &quot;*&quot;
+	rm -f &quot;$subdir/Doxyfile&quot;
+	if test ! -d &quot;$top_srcdir/$subdir&quot; ; then
+		echo &quot;* No source (sub)directory $subdir&quot;
+		return
+	fi
+	for i in &quot;$top_srcdir/doc/api/Doxyfile.global&quot; \
+		&quot;$top_srcdir/admin/Doxyfile.global&quot; \
+		&quot;$DOXDATA/Doxyfile.global&quot;
+	do
+		if test -f &quot;$i&quot; ; then
+			cp &quot;$i&quot; &quot;$subdir/Doxyfile&quot;
+			break
+		fi
+	done
+
+
+	test -f &quot;Doxyfile.in&quot; || create_doxyfile_in
+	cat &quot;Doxyfile.in&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+
+	{
+	echo &quot;PROJECT_NAME           = \&quot;$subdir\&quot;&quot;
+	if test -d &quot;$top_srcdir/doc/common&quot; ; then
+		echo &quot;INPUT                  = $top_srcdir/doc/common $srcdir&quot;
+	else
+		echo &quot;INPUT                  = $srcdir&quot;
+	fi
+	echo &quot;DOTFILE_DIRS           = $top_srcdir $srcdir&quot;
+	echo &quot;OUTPUT_DIRECTORY       = .&quot;
+	if grep -l &quot;$subdir/&quot; subdirs.in &gt; /dev/null 2&gt;&amp;1 ; then
+		echo &quot;RECURSIVE              = NO&quot;
+	fi
+	echo &quot;HTML_OUTPUT            = $subdir/html&quot;
+	echo &quot;GENERATE_TAGFILE       = $subdir/$subdirname.tag&quot;
+	test -d &quot;$top_srcdir/doc/api&quot; &amp;&amp; \
+		echo &quot;IMAGE_PATH             = $top_srcdir/doc/api&quot;
+	} &gt;&gt; &quot;$subdir/Doxyfile&quot;
+
+	apidox_htmlfiles &quot;&quot;
+
+	# Makefile.ams may contain overrides to our settings,
+	# so copy them in.
+	grep '^DOXYGEN_SET_' &quot;$srcdir/Makefile.am&quot; | \
+		sed -e 's+DOXYGEN_SET_++' &gt;&gt; &quot;$subdir/Doxyfile&quot;
+	apidox_specials &quot;$srcdir/Makefile.am&quot; &quot;$subdir/Doxyfile&quot;
+
+	excludes=`extract_line DOXYGEN_EXCLUDE`
+	if test -n &quot;$excludes&quot;; then
+		patterns=&quot;&quot;
+		dirs=&quot;&quot;
+		for item in `echo &quot;$excludes&quot;`; do
+			if test -d &quot;$top_srcdir/$subdir/$item&quot;; then
+				dirs=&quot;$dirs $top_srcdir/$subdir/$item/&quot;
+			else
+				patterns=&quot;$patterns $item&quot;
+			fi
+		done
+		echo &quot;EXCLUDE_PATTERNS      += $patterns&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+		echo &quot;EXCLUDE               += $dirs&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+	fi
+
+	echo &quot;TAGFILES = \\&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+	## For now, don't support \ continued references lines
+	tags=`extract_line DOXYGEN_REFERENCES`
+	for i in $tags qt ; do
+		tagsubdir=`dirname $i` ; tag=`basename $i`
+		tagpath=&quot;&quot;
+		not_found=&quot;&quot;
+
+		if test &quot;x$tagsubdir&quot; = &quot;x.&quot; ; then
+			tagsubdir=&quot;&quot;
+		else
+			tagsubdir=&quot;$tagsubdir/&quot;
+		fi
+
+		# Find location of tag file
+		if test -f &quot;$tagsubdir$tag/$tag.tag&quot; ; then
+			file=&quot;$tagsubdir$tag/$tag.tag&quot;
+			loc=&quot;$tagsubdir$tag/html&quot;
+		else
+			# This checks for dox built with_out_ --no-modulename
+			# in the same build dir as this dox run was started in.
+			file=`ls -1 ../*-apidocs/&quot;$tagsubdir$tag/$tag.tag&quot; 2&gt; /dev/null`
+
+			if test -n &quot;$file&quot; ; then
+				loc=`echo &quot;$file&quot; | sed -e &quot;s/$tag.tag\$/html/&quot;`
+			else
+				# If the tag file doesn't exist yet, but should
+				# because we have the right dirs here, queue
+				# this directory for re-processing later.
+				if test -d &quot;$top_srcdir/$tagsubdir$tag&quot; ; then
+					echo &quot;* Need to re-process $subdir for tag $i&quot;
+					echo &quot;$subdir&quot; &gt;&gt; &quot;subdirs.later&quot;
+				else
+					# Re-check in $PREFIX if needed.
+					test -n &quot;$PREFIX&quot; &amp;&amp; \
+					file=`cd &quot;$PREFIX&quot; &amp;&amp; \
+					ls -1 *-apidocs/&quot;$tagsubdir$tag/$tag.tag&quot; 2&gt; /dev/null`
+
+					# If something is found, patch it up. The location must be
+					# relative to the installed location of the dox and the
+					# file must be absolute.
+					if test -n &quot;$file&quot; ; then
+						loc=`echo &quot;../$file&quot; | sed -e &quot;s/$tag.tag\$/html/&quot;`
+						file=&quot;$PREFIX/$file&quot;
+						echo &quot;* Tags for $tagsubdir$tag will only work when installed.&quot;
+						not_found=&quot;YES&quot;
+					fi
+				fi
+			fi
+		fi
+		if test &quot;$tag&quot; = &quot;qt&quot; ; then
+			if test -z &quot;$QTDOCDIR&quot; ; then
+				echo &quot;  $file&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+			else
+				if test -z &quot;$file&quot; ; then
+					# Really no Qt tags
+					echo &quot;&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+				else
+					echo &quot;  $file=$QTDOCDIR&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+				fi
+			fi
+		else
+			if test -n &quot;$file&quot;  ; then
+				test -z &quot;$not_found&quot; &amp;&amp; echo &quot;* Found tag $file&quot;
+				echo &quot;  $file=../$top_builddir$loc \\&quot; &gt;&gt; &quot;$subdir/Doxyfile&quot;
+			fi
+		fi
+	done
+
+	apidox_local
+
+	if grep '^DOXYGEN_EMPTY' &quot;$srcdir/Makefile.am&quot; &gt; /dev/null 2&gt;&amp;1 ; then
+		# This directory is empty, so don't process it, but
+		# *do* handle subdirs that might have dox.
+		:
+	else
+		# Regular processing
+		doxygen &quot;$subdir/Doxyfile&quot;
+		doxyndex
+	fi
+}
+
+### Run a given subdir by setting up global variables first.
+do_subdir()
+{
+	subdir=`echo &quot;$1&quot; | sed -e 's+/$++'`
+	srcdir=&quot;$top_srcdir/$subdir&quot;
+	subdirname=`basename &quot;$subdir&quot;`
+	mkdir -p &quot;$subdir&quot; 2&gt; /dev/null
+	if test ! -d &quot;$subdir&quot; ; then
+		echo &quot;Can't create dox subdirectory $subdir&quot;
+		return
+	fi
+	top_builddir=`echo &quot;/$subdir&quot; | sed -e 's+/[^/]*+../+g'`
+	apidox_subdir
+}
+
+
+### Create installdox-slow in the toplevel
+create_installdox()
+{
+# Fix up the installdox script so it accepts empty args
+#
+# This code is copied from the installdox generated by Doxygen,
+# copyright by Dimitri van Heesch and released under the GPL.
+# This does a _slow_ update of the dox, because it loops
+# over the given substitutions instead of assuming all the
+# needed ones are given.
+#
+cat &lt;&lt;\EOF
+#! /usr/bin/env perl
+
+%subst = () ;
+$quiet   = 0;
+
+if (open(F,&quot;search.cfg&quot;))
+{
+  $_=&lt;F&gt; ; s/[ \t\n]*$//g ; $subst{&quot;_doc&quot;} = $_;
+  $_=&lt;F&gt; ; s/[ \t\n]*$//g ; $subst{&quot;_cgi&quot;} = $_;
+}
+
+while ( @ARGV ) {
+  $_ = shift @ARGV;
+  if ( s/^-// ) {
+    if ( /^l(.*)/ ) {
+      $v = ($1 eq &quot;&quot;) ? shift @ARGV : $1;
+      ($v =~ /\/$/) || ($v .= &quot;/&quot;);
+      $_ = $v;
+      if ( /(.+)\@(.+)/ ) {
+          $subst{$1} = $2;
+      } else {
+        print STDERR &quot;Argument $_ is invalid for option -l\n&quot;;
+        &amp;usage();
+      }
+    }
+    elsif ( /^q/ ) {
+      $quiet = 1;
+    }
+    elsif ( /^\?|^h/ ) {
+      &amp;usage();
+    }
+    else {
+      print STDERR &quot;Illegal option -$_\n&quot;;
+      &amp;usage();
+    }
+  }
+  else {
+    push (@files, $_ );
+  }
+}
+
+
+if ( ! @files ) {
+  if (opendir(D,&quot;.&quot;)) {
+    foreach $file ( readdir(D) ) {
+      $match = &quot;.html&quot;;
+      next if ( $file =~ /^\.\.?$/ );
+      ($file =~ /$match/) &amp;&amp; (push @files, $file);
+      ($file =~ &quot;tree.js&quot;) &amp;&amp; (push @files, $file);
+    }
+    closedir(D);
+  }
+}
+
+if ( ! @files ) {
+  print STDERR &quot;Warning: No input files given and none found!\n&quot;;
+}
+
+foreach $f (@files)
+{
+  if ( ! $quiet ) {
+    print &quot;Editing: $f...\n&quot;;
+  }
+  $oldf = $f;
+  $f   .= &quot;.bak&quot;;
+  unless (rename $oldf,$f) {
+    print STDERR &quot;Error: cannot rename file $oldf\n&quot;;
+    exit 1;
+  }
+  if (open(F,&quot;&lt;$f&quot;)) {
+    unless (open(G,&quot;&gt;$oldf&quot;)) {
+      print STDERR &quot;Error: opening file $oldf for writing\n&quot;;
+      exit 1;
+    }
+    if ($oldf ne &quot;tree.js&quot;) {
+      while (&lt;F&gt;) {
+	foreach $sub (keys %subst) {
+          s/doxygen\=\&quot;$sub\:([^ \&quot;\t\&gt;\&lt;]*)\&quot; (href|src)=\&quot;\1/doxygen\=\&quot;$sub:$subst{$sub}\&quot; \2=\&quot;$subst{$sub}/g;
+          print G &quot;$_&quot;;
+	}
+      }
+    }
+    else {
+      while (&lt;F&gt;) {
+	foreach $sub (keys %subst) {
+          s/\&quot;$sub\:([^ \&quot;\t\&gt;\&lt;]*)\&quot;, \&quot;\1/\&quot;$sub:$subst{$sub}\&quot; ,\&quot;$subst{$sub}/g;
+          print G &quot;$_&quot;;
+	}
+      }
+    }
+  }
+  else {
+    print STDERR &quot;Warning file $f does not exist\n&quot;;
+  }
+  unlink $f;
+}
+
+sub usage {
+  print STDERR &quot;Usage: installdox [options] [html-file [html-file ...]]\n&quot;;
+  print STDERR &quot;Options:\n&quot;;
+  print STDERR &quot;     -l tagfile\@linkName   tag file + URL or directory \n&quot;;
+  print STDERR &quot;     -q                    Quiet mode\n\n&quot;;
+  exit 1;
+}
+EOF
+}
+
+# Do only the subdirs that match the RE passed in as $1
+do_subdirs_re()
+{
+	RE=`echo &quot;$1&quot; | sed -e 's+/$++'`
+
+	# Here's a queue of dirs to re-process later when
+	# all the rest have been done already.
+	&gt; subdirs.later
+
+	# subdirs.top lists _all_ subdirs of top in the order they
+	# should be handled; subdirs.in lists those dirs that contain
+	# dox. So the intersection of the two is the ordered list
+	# of top-level subdirs that contain dox.
+	#
+	# subdirs.top also doesn't contain &quot;.&quot;, so that special
+	# case can be ignored in the loop.
+
+
+	(
+	for i in `grep &quot;^$RE&quot; subdirs.top`
+	do
+		if test &quot;x$i&quot; = &quot;x.&quot; ; then
+			continue
+		fi
+		# Calculate intersection of this element and the
+		# set of dox dirs.
+		if grep &quot;^$i\$&quot; subdirs.in &gt; /dev/null 2&gt;&amp;1 ; then
+			echo &quot;$i&quot;
+			mkdir -p &quot;$i&quot; 2&gt; /dev/null
+
+			# Handle the subdirs of this one
+			for j in `grep &quot;$i/&quot; subdirs.in`
+			do
+				echo &quot;$j&quot;
+				mkdir -p &quot;$j&quot; 2&gt; /dev/null
+			done
+		fi
+	done
+
+	# Now we still need to handle whatever is left
+	for i in `cat subdirs.in`
+	do
+		test -d &quot;$i&quot; || echo &quot;$i&quot;
+		mkdir -p &quot;$i&quot; 2&gt; /dev/null
+	done
+	) &gt; subdirs.sort
+	for i in `cat subdirs.sort`
+	do
+		do_subdir &quot;$i&quot;
+	done
+
+	if test -s &quot;subdirs.later&quot; ; then
+		sort subdirs.later | uniq &gt; subdirs.sort
+		for i in `cat subdirs.sort`
+		do
+			: &gt; subdirs.later
+			echo &quot;*** Reprocessing $i&quot;
+			do_subdir &quot;$i&quot;
+			test -s &quot;subdirs.later&quot; &amp;&amp; echo &quot;* Some tag files were still not found.&quot;
+		done
+	fi
+}
+
+if test &quot;x.&quot; = &quot;x$top_builddir&quot; ; then
+	apidox_toplevel
+	create_subdirs
+	create_installdox &gt; installdox-slow
+	if test &quot;x$recurse&quot; = &quot;x1&quot; ; then
+		if test &quot;x$module_name&quot; = &quot;xkdelibs&quot; ; then
+			if test -z &quot;$QTDOCTAG&quot; &amp;&amp; test -d &quot;$QTDOCDIR&quot; &amp;&amp; \
+				test ! -f &quot;qt/qt.tag&quot; ; then
+				# Special case: create a qt tag file.
+				echo &quot;*** Creating a tag file for the Qt library:&quot;
+				mkdir qt
+				doxytag -t qt/qt.tag &quot;$QTDOCDIR&quot; &gt; /dev/null 2&gt;&amp;1
+			fi
+		fi
+		if test -n &quot;$QTDOCTAG&quot; &amp;&amp; test -r &quot;$QTDOCTAG&quot; ; then
+			echo &quot;*** Copying tag file for the Qt library:&quot;
+			mkdir qt
+			cp &quot;$QTDOCTAG&quot; qt/qt.tag
+		fi
+
+		do_subdirs_re &quot;.&quot;
+
+	fi
+else
+	if test &quot;x$recurse&quot; = &quot;x1&quot; ; then
+		do_subdirs_re &quot;$subdir&quot;
+	else
+		do_subdir &quot;$subdir&quot;
+	fi
+fi
+
+
+# At the end of a run, clean up stuff.
+if test &quot;YES&quot; = &quot;$cleanup&quot; ; then
+	rm -f subdirs.in  subdirs.later subdirs.sort subdirs.top Doxyfile.in
+	rm -f `find . -name Doxyfile`
+	rm -f qt/qt.tag
+	rmdir qt &gt; /dev/null 2&gt;&amp;1
+fi
+
+
+exit 0
+

Added: trunk/admin/install-sh
===================================================================
--- trunk/admin/install-sh	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/install-sh	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,401 @@
+#!/bin/sh
+# install - install a program, script, or datafile
+
+scriptversion=2005-11-07.23
+
+# This originates from X11R5 (mit/util/scripts/install.sh), which was
+# later released in X11R6 (xc/config/util/install.sh) with the
+# following copyright and license.
+#
+# Copyright (C) 1994 X Consortium
+#
+# Permission is hereby granted, free of charge, to any person obtaining a copy
+# of this software and associated documentation files (the &quot;Software&quot;), to
+# deal in the Software without restriction, including without limitation the
+# rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
+# sell copies of the Software, and to permit persons to whom the Software is
+# furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included in
+# all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
+# X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
+# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNEC-
+# TION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+#
+# Except as contained in this notice, the name of the X Consortium shall not
+# be used in advertising or otherwise to promote the sale, use or other deal-
+# ings in this Software without prior written authorization from the X Consor-
+# tium.
+#
+#
+# FSF changes to this file are in the public domain.
+#
+# Calling this script install-sh is preferred over install.sh, to prevent
+# `make' implicit rules from creating a file called install from it
+# when there is no Makefile.
+#
+# This script is compatible with the BSD install script, but was written
+# from scratch.  It can only install one file at a time, a restriction
+# shared with many OS's install programs.
+
+# set DOITPROG to echo to test this script
+
+# Don't use :- since 4.3BSD and earlier shells don't like it.
+doit=&quot;${DOITPROG-}&quot;
+
+# put in absolute paths if you don't have them in your path; or use env. vars.
+
+mvprog=&quot;${MVPROG-mv}&quot;
+cpprog=&quot;${CPPROG-cp}&quot;
+chmodprog=&quot;${CHMODPROG-chmod}&quot;
+chownprog=&quot;${CHOWNPROG-chown}&quot;
+chgrpprog=&quot;${CHGRPPROG-chgrp}&quot;
+stripprog=&quot;${STRIPPROG-strip}&quot;
+rmprog=&quot;${RMPROG-rm}&quot;
+mkdirprog=&quot;${MKDIRPROG-mkdir}&quot;
+
+posix_glob=
+posix_mkdir=
+
+# Symbolic mode for testing mkdir with directories.
+# It is the same as 755, but also tests that &quot;u+&quot; works.
+test_mode=u=rwx,g=rx,o=rx,u+wx
+
+# Desired mode of installed file.
+mode=0755
+
+# Desired mode of newly created intermediate directories.
+# It is empty if not known yet.
+intermediate_mode=
+
+chmodcmd=$chmodprog
+chowncmd=
+chgrpcmd=
+stripcmd=
+rmcmd=&quot;$rmprog -f&quot;
+mvcmd=&quot;$mvprog&quot;
+src=
+dst=
+dir_arg=
+dstarg=
+no_target_directory=
+
+usage=&quot;Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
+   or: $0 [OPTION]... SRCFILES... DIRECTORY
+   or: $0 [OPTION]... -t DIRECTORY SRCFILES...
+   or: $0 [OPTION]... -d DIRECTORIES...
+
+In the 1st form, copy SRCFILE to DSTFILE.
+In the 2nd and 3rd, copy all SRCFILES to DIRECTORY.
+In the 4th, create DIRECTORIES.
+
+Options:
+-c         (ignored)
+-d         create directories instead of installing files.
+-g GROUP   $chgrpprog installed files to GROUP.
+-m MODE    $chmodprog installed files to MODE.
+-o USER    $chownprog installed files to USER.
+-s         $stripprog installed files.
+-t DIRECTORY  install into DIRECTORY.
+-T         report an error if DSTFILE is a directory.
+--help     display this help and exit.
+--version  display version info and exit.
+
+Environment variables override the default commands:
+  CHGRPPROG CHMODPROG CHOWNPROG CPPROG MKDIRPROG MVPROG RMPROG STRIPPROG
+&quot;
+
+while test -n &quot;$1&quot;; do
+  case $1 in
+    -c) shift
+        continue;;
+
+    -d) dir_arg=true
+        shift
+        continue;;
+
+    -g) chgrpcmd=&quot;$chgrpprog $2&quot;
+        shift
+        shift
+        continue;;
+
+    --help) echo &quot;$usage&quot;; exit $?;;
+
+    -m) mode=$2
+        shift
+        shift
+        continue;;
+
+    -o) chowncmd=&quot;$chownprog $2&quot;
+        shift
+        shift
+        continue;;
+
+    -s) stripcmd=$stripprog
+        shift
+        continue;;
+
+    -t) dstarg=$2
+	shift
+	shift
+	continue;;
+
+    -T) no_target_directory=true
+	shift
+	continue;;
+
+    --version) echo &quot;$0 $scriptversion&quot;; exit $?;;
+
+    *)  # When -d is used, all remaining arguments are directories to create.
+	# When -t is used, the destination is already specified.
+	test -n &quot;$dir_arg$dstarg&quot; &amp;&amp; break
+        # Otherwise, the last argument is the destination.  Remove it from $@.
+	for arg
+	do
+          if test -n &quot;$dstarg&quot;; then
+	    # $@ is not empty: it contains at least $arg.
+	    set fnord &quot;$@&quot; &quot;$dstarg&quot;
+	    shift # fnord
+	  fi
+	  shift # arg
+	  dstarg=$arg
+	done
+	break;;
+  esac
+done
+
+if test -z &quot;$1&quot;; then
+  if test -z &quot;$dir_arg&quot;; then
+    echo &quot;$0: no input file specified.&quot; &gt;&amp;2
+    exit 1
+  fi
+  # It's OK to call `install-sh -d' without argument.
+  # This can happen when creating conditional directories.
+  exit 0
+fi
+
+test -n &quot;$dir_arg&quot; || trap '(exit $?); exit' 1 2 13 15
+
+for src
+do
+  # Protect names starting with `-'.
+  case $src in
+    -*) src=./$src ;;
+  esac
+
+  if test -n &quot;$dir_arg&quot;; then
+    dst=$src
+    dstdir=$dst
+    test -d &quot;$dstdir&quot;
+    dstdir_status=$?
+  else
+
+    # Waiting for this to be detected by the &quot;$cpprog $src $dsttmp&quot; command
+    # might cause directories to be created, which would be especially bad
+    # if $src (and thus $dsttmp) contains '*'.
+    if test ! -f &quot;$src&quot; &amp;&amp; test ! -d &quot;$src&quot;; then
+      echo &quot;$0: $src does not exist.&quot; &gt;&amp;2
+      exit 1
+    fi
+
+    if test -z &quot;$dstarg&quot;; then
+      echo &quot;$0: no destination specified.&quot; &gt;&amp;2
+      exit 1
+    fi
+
+    dst=$dstarg
+    # Protect names starting with `-'.
+    case $dst in
+      -*) dst=./$dst ;;
+    esac
+
+    # If destination is a directory, append the input filename; won't work
+    # if double slashes aren't ignored.
+    if test -d &quot;$dst&quot;; then
+      if test -n &quot;$no_target_directory&quot;; then
+	echo &quot;$0: $dstarg: Is a directory&quot; &gt;&amp;2
+	exit 1
+      fi
+      dstdir=$dst
+      dst=$dstdir/`basename &quot;$src&quot;`
+      dstdir_status=0
+    else
+      # Prefer dirname, but fall back on a substitute if dirname fails.
+      dstdir=`
+	(dirname &quot;$dst&quot;) 2&gt;/dev/null ||
+	expr X&quot;$dst&quot; : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+	     X&quot;$dst&quot; : 'X\(//\)[^/]' \| \
+	     X&quot;$dst&quot; : 'X\(//\)$' \| \
+	     X&quot;$dst&quot; : 'X\(/\)' \| \
+	     .       : '\(.\)' 2&gt;/dev/null ||
+	echo X&quot;$dst&quot; |
+	    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+		  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+		  /^X\(\/\/\)$/{ s//\1/; q; }
+		  /^X\(\/\).*/{ s//\1/; q; }
+		  s/.*/./; q'
+      `
+
+      test -d &quot;$dstdir&quot;
+      dstdir_status=$?
+    fi
+  fi
+
+  obsolete_mkdir_used=false
+
+  if test $dstdir_status != 0; then
+    case $posix_mkdir in
+      '')
+	posix_mkdir=false
+	if $mkdirprog -m $test_mode -p -- / &gt;/dev/null 2&gt;&amp;1; then
+	  posix_mkdir=true
+	else
+	  # Remove any dirs left behind by ancient mkdir implementations.
+	  rmdir ./-m &quot;$test_mode&quot; ./-p ./-- 2&gt;/dev/null
+	fi ;;
+    esac
+
+    if
+      $posix_mkdir &amp;&amp; {
+
+	# With -d, create the new directory with the user-specified mode.
+	# Otherwise, create it using the same intermediate mode that
+	# mkdir -p would use when creating intermediate directories.
+	# POSIX says that this mode is &quot;$(umask -S),u+wx&quot;, so use that
+	# if umask -S works.
+
+	if test -n &quot;$dir_arg&quot;; then
+	  mkdir_mode=$mode
+	else
+	  case $intermediate_mode in
+	    '')
+	      if umask_S=`(umask -S) 2&gt;/dev/null`; then
+		intermediate_mode=$umask_S,u+wx
+	      else
+		intermediate_mode=$test_mode
+	      fi ;;
+	  esac
+	  mkdir_mode=$intermediate_mode
+	fi
+
+	$mkdirprog -m &quot;$mkdir_mode&quot; -p -- &quot;$dstdir&quot;
+      }
+    then :
+    else
+
+      # mkdir does not conform to POSIX, or it failed possibly due to
+      # a race condition.  Create the directory the slow way, step by
+      # step, checking for races as we go.
+
+      case $dstdir in
+	/*) pathcomp=/ ;;
+	-*) pathcomp=./ ;;
+	*)  pathcomp= ;;
+      esac
+
+      case $posix_glob in
+        '')
+	  if (set -f) 2&gt;/dev/null; then
+	    posix_glob=true
+	  else
+	    posix_glob=false
+	  fi ;;
+      esac
+
+      oIFS=$IFS
+      IFS=/
+      $posix_glob &amp;&amp; set -f
+      set fnord $dstdir
+      shift
+      $posix_glob &amp;&amp; set +f
+      IFS=$oIFS
+
+      for d
+      do
+	test &quot;x$d&quot; = x &amp;&amp; continue
+
+	pathcomp=$pathcomp$d
+	if test ! -d &quot;$pathcomp&quot;; then
+	  $mkdirprog &quot;$pathcomp&quot;
+	  # Don't fail if two instances are running concurrently.
+	  test -d &quot;$pathcomp&quot; || exit 1
+	fi
+	pathcomp=$pathcomp/
+      done
+      obsolete_mkdir_used=true
+    fi
+  fi
+
+  if test -n &quot;$dir_arg&quot;; then
+    { test -z &quot;$chowncmd&quot; || $doit $chowncmd &quot;$dst&quot;; } &amp;&amp;
+    { test -z &quot;$chgrpcmd&quot; || $doit $chgrpcmd &quot;$dst&quot;; } &amp;&amp;
+    { test &quot;$obsolete_mkdir_used$chowncmd$chgrpcmd&quot; = false ||
+      test -z &quot;$chmodcmd&quot; || $doit $chmodcmd &quot;$mode&quot; &quot;$dst&quot;; } || exit 1
+  else
+
+    # Make a couple of temp file names in the proper directory.
+    dsttmp=$dstdir/_inst.$$_
+    rmtmp=$dstdir/_rm.$$_
+
+    # Trap to clean up those temp files at exit.
+    trap 'ret=$?; rm -f &quot;$dsttmp&quot; &quot;$rmtmp&quot; &amp;&amp; exit $ret' 0
+
+    # Copy the file name to the temp name.
+    $doit $cpprog &quot;$src&quot; &quot;$dsttmp&quot; &amp;&amp;
+
+    # and set any options; do chmod last to preserve setuid bits.
+    #
+    # If any of these fail, we abort the whole thing.  If we want to
+    # ignore errors from any of these, just make sure not to ignore
+    # errors from the above &quot;$doit $cpprog $src $dsttmp&quot; command.
+    #
+    { test -z &quot;$chowncmd&quot; || $doit $chowncmd &quot;$dsttmp&quot;; } \
+      &amp;&amp; { test -z &quot;$chgrpcmd&quot; || $doit $chgrpcmd &quot;$dsttmp&quot;; } \
+      &amp;&amp; { test -z &quot;$stripcmd&quot; || $doit $stripcmd &quot;$dsttmp&quot;; } \
+      &amp;&amp; { test -z &quot;$chmodcmd&quot; || $doit $chmodcmd &quot;$mode&quot; &quot;$dsttmp&quot;; } &amp;&amp;
+
+    # Now rename the file to the real destination.
+    { $doit $mvcmd -f &quot;$dsttmp&quot; &quot;$dst&quot; 2&gt;/dev/null \
+      || {
+	   # The rename failed, perhaps because mv can't rename something else
+	   # to itself, or perhaps because mv is so ancient that it does not
+	   # support -f.
+
+	   # Now remove or move aside any old file at destination location.
+	   # We try this two ways since rm can't unlink itself on some
+	   # systems and the destination file might be busy for other
+	   # reasons.  In this case, the final cleanup might fail but the new
+	   # file should still install successfully.
+	   {
+	     if test -f &quot;$dst&quot;; then
+	       $doit $rmcmd -f &quot;$dst&quot; 2&gt;/dev/null \
+	       || { $doit $mvcmd -f &quot;$dst&quot; &quot;$rmtmp&quot; 2&gt;/dev/null \
+		     &amp;&amp; { $doit $rmcmd -f &quot;$rmtmp&quot; 2&gt;/dev/null; :; }; }\
+	       || {
+		 echo &quot;$0: cannot unlink or rename $dst&quot; &gt;&amp;2
+		 (exit 1); exit 1
+	       }
+	     else
+	       :
+	     fi
+	   } &amp;&amp;
+
+	   # Now rename the file to the real destination.
+	   $doit $mvcmd &quot;$dsttmp&quot; &quot;$dst&quot;
+	 }
+    } || exit 1
+
+    trap '' 0
+  fi
+done
+
+# Local variables:
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;scriptversion=&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d.%02H&quot;
+# time-stamp-end: &quot;$&quot;
+# End:


Property changes on: trunk/admin/install-sh
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/libtool.m4.in
===================================================================
--- trunk/admin/libtool.m4.in	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/libtool.m4.in	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,5891 @@
+# libtool.m4 - Configure libtool for the host system. -*-Autoconf-*-
+## Copyright 1996, 1997, 1998, 1999, 2000, 2001
+## Free Software Foundation, Inc.
+## Originally by Gordon Matzigkeit &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">gord at gnu.ai.mit.edu</A>&gt;, 1996
+##
+## This program is free software; you can redistribute it and/or modify
+## it under the terms of the GNU General Public License as published by
+## the Free Software Foundation; either version 2 of the License, or
+## (at your option) any later version.
+##
+## This program is distributed in the hope that it will be useful, but
+## WITHOUT ANY WARRANTY; without even the implied warranty of
+## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+## General Public License for more details.
+##
+## You should have received a copy of the GNU General Public License
+## along with this program; if not, write to the Free Software
+## Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+##
+## As a special exception to the GNU General Public License, if you
+## distribute this file as part of a program that contains a
+## configuration script generated by Autoconf, you may include it under
+## the same distribution terms that you use for the rest of that program.
+
+# serial 47 AC_PROG_LIBTOOL
+
+
+# AC_PROVIDE_IFELSE(MACRO-NAME, IF-PROVIDED, IF-NOT-PROVIDED)
+# -----------------------------------------------------------
+# If this macro is not defined by Autoconf, define it here.
+m4_ifdef([AC_PROVIDE_IFELSE],
+         [],
+         [m4_define([AC_PROVIDE_IFELSE],
+	         [m4_ifdef([AC_PROVIDE_$1],
+		           [$2], [$3])])])
+
+
+# AC_PROG_LIBTOOL
+# ---------------
+AC_DEFUN([AC_PROG_LIBTOOL],
+[AC_REQUIRE([_AC_PROG_LIBTOOL])dnl
+dnl If AC_PROG_CXX has already been expanded, run AC_LIBTOOL_CXX
+dnl immediately, otherwise, hook it in at the end of AC_PROG_CXX.
+  AC_PROVIDE_IFELSE([AC_PROG_CXX],
+    [AC_LIBTOOL_CXX],
+    [define([AC_PROG_CXX], defn([AC_PROG_CXX])[AC_LIBTOOL_CXX
+  ])])
+dnl And a similar setup for Fortran 77 support
+  AC_PROVIDE_IFELSE([AC_PROG_F77],
+    [AC_LIBTOOL_F77],
+    [define([AC_PROG_F77], defn([AC_PROG_F77])[AC_LIBTOOL_F77
+])])
+
+dnl Quote A][M_PROG_GCJ so that aclocal doesn't bring it in needlessly.
+dnl If either AC_PROG_GCJ or A][M_PROG_GCJ have already been expanded, run
+dnl AC_LIBTOOL_GCJ immediately, otherwise, hook it in at the end of both.
+  AC_PROVIDE_IFELSE([AC_PROG_GCJ],
+    [AC_LIBTOOL_GCJ],
+    [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],
+      [AC_LIBTOOL_GCJ],
+      [AC_PROVIDE_IFELSE([LT_AC_PROG_GCJ],
+	[AC_LIBTOOL_GCJ],
+      [ifdef([AC_PROG_GCJ],
+	     [define([AC_PROG_GCJ], defn([AC_PROG_GCJ])[AC_LIBTOOL_GCJ])])
+       ifdef([A][M_PROG_GCJ],
+	     [define([A][M_PROG_GCJ], defn([A][M_PROG_GCJ])[AC_LIBTOOL_GCJ])])
+       ifdef([LT_AC_PROG_GCJ],
+	     [define([LT_AC_PROG_GCJ],
+		defn([LT_AC_PROG_GCJ])[AC_LIBTOOL_GCJ])])])])
+])])# AC_PROG_LIBTOOL
+
+
+# _AC_PROG_LIBTOOL
+# ----------------
+AC_DEFUN([_AC_PROG_LIBTOOL],
+[AC_REQUIRE([AC_LIBTOOL_SETUP])dnl
+AC_BEFORE([$0],[AC_LIBTOOL_CXX])dnl
+AC_BEFORE([$0],[AC_LIBTOOL_F77])dnl
+AC_BEFORE([$0],[AC_LIBTOOL_GCJ])dnl
+
+# This can be used to rebuild libtool when needed
+LIBTOOL_DEPS=&quot;$ac_aux_dir/ltmain.sh&quot;
+
+# Always use our own libtool.
+LIBTOOL='$(SHELL) $(top_builddir)/libtool --silent'
+AC_SUBST(LIBTOOL)dnl
+
+# Prevent multiple expansion
+define([AC_PROG_LIBTOOL], [])
+])# _AC_PROG_LIBTOOL
+
+
+# AC_LIBTOOL_SETUP
+# ----------------
+AC_DEFUN([AC_LIBTOOL_SETUP],
+[AC_PREREQ(2.50)dnl
+AC_REQUIRE([AC_ENABLE_SHARED])dnl
+AC_REQUIRE([AC_ENABLE_STATIC])dnl
+AC_REQUIRE([AC_ENABLE_FAST_INSTALL])dnl
+AC_REQUIRE([AC_CANONICAL_HOST])dnl
+AC_REQUIRE([AC_CANONICAL_BUILD])dnl
+AC_REQUIRE([AC_PROG_CC])dnl
+AC_REQUIRE([AC_PROG_LD])dnl
+AC_REQUIRE([AC_PROG_LD_RELOAD_FLAG])dnl
+AC_REQUIRE([AC_PROG_NM])dnl
+
+AC_REQUIRE([AC_PROG_LN_S])dnl
+AC_REQUIRE([AC_DEPLIBS_CHECK_METHOD])dnl
+# Autoconf 2.13's AC_OBJEXT and AC_EXEEXT macros only works for C compilers!
+AC_REQUIRE([AC_OBJEXT])dnl
+AC_REQUIRE([AC_EXEEXT])dnl
+dnl
+
+AC_LIBTOOL_SYS_MAX_CMD_LEN
+AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE
+AC_LIBTOOL_OBJDIR
+
+AC_REQUIRE([_LT_AC_SYS_COMPILER])dnl
+_LT_AC_PROG_ECHO_BACKSLASH
+
+case $host_os in
+aix3*)
+  # AIX sometimes has problems with the GCC collect2 program.  For some
+  # reason, if we set the COLLECT_NAMES environment variable, the problems
+  # vanish in a puff of smoke.
+  if test &quot;X${COLLECT_NAMES+set}&quot; != Xset; then
+    COLLECT_NAMES=
+    export COLLECT_NAMES
+  fi
+  ;;
+esac
+
+# Sed substitution that helps us do robust quoting.  It backslashifies
+# metacharacters that are still active within double-quoted strings.
+Xsed='sed -e s/^X//'
+[sed_quote_subst='s/\([\\&quot;\\`$\\\\]\)/\\\1/g']
+
+# Same as above, but do not quote variable references.
+[double_quote_subst='s/\([\\&quot;\\`\\\\]\)/\\\1/g']
+
+# Sed substitution to delay expansion of an escaped shell variable in a
+# double_quote_subst'ed string.
+delay_variable_subst='s/\\\\\\\\\\\$/\\\\\\$/g'
+
+# Sed substitution to avoid accidental globbing in evaled expressions
+no_glob_subst='s/\*/\\\*/g'
+
+# Constants:
+rm=&quot;rm -f&quot;
+
+# Global variables:
+default_ofile=libtool
+can_build_shared=yes
+
+# All known linkers require a `.a' archive for static linking (except M$VC,
+# which needs '.lib').
+libext=a
+ltmain=&quot;$ac_aux_dir/ltmain.sh&quot;
+ofile=&quot;$default_ofile&quot;
+with_gnu_ld=&quot;$lt_cv_prog_gnu_ld&quot;
+
+AC_CHECK_TOOL(AR, ar, false)
+AC_CHECK_TOOL(RANLIB, ranlib, :)
+AC_CHECK_TOOL(STRIP, strip, :)
+
+old_CC=&quot;$CC&quot;
+old_CFLAGS=&quot;$CFLAGS&quot;
+
+# Set sane defaults for various variables
+test -z &quot;$AR&quot; &amp;&amp; AR=ar
+test -z &quot;$AR_FLAGS&quot; &amp;&amp; AR_FLAGS=cru
+test -z &quot;$AS&quot; &amp;&amp; AS=as
+test -z &quot;$CC&quot; &amp;&amp; CC=cc
+test -z &quot;$LTCC&quot; &amp;&amp; LTCC=$CC
+test -z &quot;$DLLTOOL&quot; &amp;&amp; DLLTOOL=dlltool
+test -z &quot;$LD&quot; &amp;&amp; LD=ld
+test -z &quot;$LN_S&quot; &amp;&amp; LN_S=&quot;ln -s&quot;
+test -z &quot;$MAGIC_CMD&quot; &amp;&amp; MAGIC_CMD=file
+test -z &quot;$NM&quot; &amp;&amp; NM=nm
+test -z &quot;$SED&quot; &amp;&amp; SED=sed
+test -z &quot;$OBJDUMP&quot; &amp;&amp; OBJDUMP=objdump
+test -z &quot;$RANLIB&quot; &amp;&amp; RANLIB=:
+test -z &quot;$STRIP&quot; &amp;&amp; STRIP=:
+test -z &quot;$ac_objext&quot; &amp;&amp; ac_objext=o
+
+# Determine commands to create old-style static archives.
+old_archive_cmds='$AR $AR_FLAGS $oldlib$oldobjs$old_deplibs'
+old_postinstall_cmds='chmod 644 $oldlib'
+old_postuninstall_cmds=
+
+if test -n &quot;$RANLIB&quot;; then
+  case $host_os in
+  openbsd*)
+    old_postinstall_cmds=&quot;\$RANLIB -t \$oldlib~$old_postinstall_cmds&quot;
+    ;;
+  *)
+    old_postinstall_cmds=&quot;\$RANLIB \$oldlib~$old_postinstall_cmds&quot;
+    ;;
+  esac
+  old_archive_cmds=&quot;$old_archive_cmds~\$RANLIB \$oldlib&quot;
+fi
+
+# Only perform the check for file, if the check method requires it
+case $deplibs_check_method in
+file_magic*)
+  if test &quot;$file_magic_cmd&quot; = '$MAGIC_CMD'; then
+    AC_PATH_MAGIC
+  fi
+  ;;
+esac
+
+AC_PROVIDE_IFELSE([AC_LIBTOOL_DLOPEN], enable_dlopen=yes, enable_dlopen=no)
+AC_PROVIDE_IFELSE([AC_LIBTOOL_WIN32_DLL],
+enable_win32_dll=yes, enable_win32_dll=no)
+
+AC_ARG_ENABLE([libtool-lock],
+    [AC_HELP_STRING([--disable-libtool-lock],
+	[avoid locking (might break parallel builds)])])
+test &quot;x$enable_libtool_lock&quot; != xno &amp;&amp; enable_libtool_lock=yes
+
+AC_ARG_WITH([pic],
+    [AC_HELP_STRING([--with-pic],
+	[try to use only PIC/non-PIC objects @&lt;:@default=use both@:&gt;@])],
+    [pic_mode=&quot;$withval&quot;],
+    [pic_mode=default])
+test -z &quot;$pic_mode&quot; &amp;&amp; pic_mode=default
+
+# Use C for the default configuration in the libtool script
+tagname=
+AC_LIBTOOL_LANG_C_CONFIG
+_LT_AC_TAGCONFIG
+])# AC_LIBTOOL_SETUP
+
+
+# _LT_AC_SYS_COMPILER
+# -------------------
+AC_DEFUN([_LT_AC_SYS_COMPILER],
+[AC_REQUIRE([AC_PROG_CC])dnl
+
+# If no C compiler was specified, use CC.
+LTCC=${LTCC-&quot;$CC&quot;}
+
+# Allow CC to be a program name with arguments.
+compiler=$CC
+])# _LT_AC_SYS_COMPILER
+
+
+# _LT_AC_SYS_LIBPATH_AIX
+# ----------------------
+# Links a minimal program and checks the executable
+# for the system default hardcoded library path. In most cases,
+# this is /usr/lib:/lib, but when the MPI compilers are used
+# the location of the communication and MPI libs are included too.
+# If we don't find anything, use the default library path according
+# to the aix ld manual.
+AC_DEFUN([_LT_AC_SYS_LIBPATH_AIX],
+[AC_LINK_IFELSE(AC_LANG_PROGRAM,[
+aix_libpath=`dump -H conftest$ac_exeext 2&gt;/dev/null | $SED -n -e '/Import File Strings/,/^$/ { /^0/ { s/^0  *\(.*\)$/\1/; p; }
+}'`
+# Check for a 64-bit object if we didn't find anything.
+if test -z &quot;$aix_libpath&quot;; then aix_libpath=`dump -HX64 conftest$ac_exeext 2&gt;/dev/null | $SED -n -e '/Import File Strings/,/^$/ { /^0/ { s/^0  *\(.*\)$/\1/; p; }
+}'`; fi],[])
+if test -z &quot;$aix_libpath&quot;; then aix_libpath=&quot;/usr/lib:/lib&quot;; fi
+])# _LT_AC_SYS_LIBPATH_AIX
+
+
+# _LT_AC_SHELL_INIT(ARG)
+# ----------------------
+AC_DEFUN([_LT_AC_SHELL_INIT],
+[ifdef([AC_DIVERSION_NOTICE],
+	     [AC_DIVERT_PUSH(AC_DIVERSION_NOTICE)],
+	 [AC_DIVERT_PUSH(NOTICE)])
+$1
+AC_DIVERT_POP
+])# _LT_AC_SHELL_INIT
+
+
+# _LT_AC_PROG_ECHO_BACKSLASH
+# --------------------------
+# Add some code to the start of the generated configure script which
+# will find an echo command which doesn't interpret backslashes.
+AC_DEFUN([_LT_AC_PROG_ECHO_BACKSLASH],
+[_LT_AC_SHELL_INIT([
+# Check that we are running under the correct shell.
+SHELL=${CONFIG_SHELL-/bin/sh}
+
+case X$ECHO in
+X*--fallback-echo)
+  # Remove one level of quotation (which was required for Make).
+  ECHO=`echo &quot;$ECHO&quot; | sed 's,\\\\\[$]\\[$]0,'[$]0','`
+  ;;
+esac
+
+echo=${ECHO-echo}
+if test &quot;X[$]1&quot; = X--no-reexec; then
+  # Discard the --no-reexec flag, and continue.
+  shift
+elif test &quot;X[$]1&quot; = X--fallback-echo; then
+  # Avoid inline document here, it may be left over
+  :
+elif test &quot;X`($echo '\t') 2&gt;/dev/null`&quot; = 'X\t' ; then
+  # Yippee, $echo works!
+  :
+else
+  # Restart under the correct shell.
+  exec $SHELL &quot;[$]0&quot; --no-reexec ${1+&quot;[$]@&quot;}
+fi
+
+if test &quot;X[$]1&quot; = X--fallback-echo; then
+  # used as fallback echo
+  shift
+  cat &lt;&lt;EOF
+[$]*
+EOF
+  exit 0
+fi
+
+# The HP-UX ksh and POSIX shell print the target directory to stdout
+# if CDPATH is set.
+if test &quot;X${CDPATH+set}&quot; = Xset; then CDPATH=:; export CDPATH; fi
+
+if test -z &quot;$ECHO&quot;; then
+if test &quot;X${echo_test_string+set}&quot; != Xset; then
+# find a string as large as possible, as long as the shell can cope with it
+  for cmd in 'sed 50q &quot;[$]0&quot;' 'sed 20q &quot;[$]0&quot;' 'sed 10q &quot;[$]0&quot;' 'sed 2q &quot;[$]0&quot;' 'echo test'; do
+    # expected sizes: less than 2Kb, 1Kb, 512 bytes, 16 bytes, ...
+    if (echo_test_string=&quot;`eval $cmd`&quot;) 2&gt;/dev/null &amp;&amp;
+       echo_test_string=&quot;`eval $cmd`&quot; &amp;&amp;
+       (test &quot;X$echo_test_string&quot; = &quot;X$echo_test_string&quot;) 2&gt;/dev/null
+    then
+      break
+    fi
+  done
+fi
+
+if test &quot;X`($echo '\t') 2&gt;/dev/null`&quot; = 'X\t' &amp;&amp;
+   echo_testing_string=`($echo &quot;$echo_test_string&quot;) 2&gt;/dev/null` &amp;&amp;
+   test &quot;X$echo_testing_string&quot; = &quot;X$echo_test_string&quot;; then
+  :
+else
+  # The Solaris, AIX, and Digital Unix default echo programs unquote
+  # backslashes.  This makes it impossible to quote backslashes using
+  #   echo &quot;$something&quot; | sed 's/\\/\\\\/g'
+  #
+  # So, first we look for a working echo in the user's PATH.
+
+  lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
+  for dir in $PATH /usr/ucb; do
+    IFS=&quot;$lt_save_ifs&quot;
+    if (test -f $dir/echo || test -f $dir/echo$ac_exeext) &amp;&amp;
+       test &quot;X`($dir/echo '\t') 2&gt;/dev/null`&quot; = 'X\t' &amp;&amp;
+       echo_testing_string=`($dir/echo &quot;$echo_test_string&quot;) 2&gt;/dev/null` &amp;&amp;
+       test &quot;X$echo_testing_string&quot; = &quot;X$echo_test_string&quot;; then
+      echo=&quot;$dir/echo&quot;
+      break
+    fi
+  done
+  IFS=&quot;$lt_save_ifs&quot;
+
+  if test &quot;X$echo&quot; = Xecho; then
+    # We didn't find a better echo, so look for alternatives.
+    if test &quot;X`(print -r '\t') 2&gt;/dev/null`&quot; = 'X\t' &amp;&amp;
+       echo_testing_string=`(print -r &quot;$echo_test_string&quot;) 2&gt;/dev/null` &amp;&amp;
+       test &quot;X$echo_testing_string&quot; = &quot;X$echo_test_string&quot;; then
+      # This shell has a builtin print -r that does the trick.
+      echo='print -r'
+    elif (test -f /bin/ksh || test -f /bin/ksh$ac_exeext) &amp;&amp;
+	 test &quot;X$CONFIG_SHELL&quot; != X/bin/ksh; then
+      # If we have ksh, try running configure again with it.
+      ORIGINAL_CONFIG_SHELL=${CONFIG_SHELL-/bin/sh}
+      export ORIGINAL_CONFIG_SHELL
+      CONFIG_SHELL=/bin/ksh
+      export CONFIG_SHELL
+      exec $CONFIG_SHELL &quot;[$]0&quot; --no-reexec ${1+&quot;[$]@&quot;}
+    else
+      # Try using printf.
+      echo='printf %s\n'
+      if test &quot;X`($echo '\t') 2&gt;/dev/null`&quot; = 'X\t' &amp;&amp;
+	 echo_testing_string=`($echo &quot;$echo_test_string&quot;) 2&gt;/dev/null` &amp;&amp;
+	 test &quot;X$echo_testing_string&quot; = &quot;X$echo_test_string&quot;; then
+	# Cool, printf works
+	:
+      elif echo_testing_string=`($ORIGINAL_CONFIG_SHELL &quot;[$]0&quot; --fallback-echo '\t') 2&gt;/dev/null` &amp;&amp;
+	   test &quot;X$echo_testing_string&quot; = 'X\t' &amp;&amp;
+	   echo_testing_string=`($ORIGINAL_CONFIG_SHELL &quot;[$]0&quot; --fallback-echo &quot;$echo_test_string&quot;) 2&gt;/dev/null` &amp;&amp;
+	   test &quot;X$echo_testing_string&quot; = &quot;X$echo_test_string&quot;; then
+	CONFIG_SHELL=$ORIGINAL_CONFIG_SHELL
+	export CONFIG_SHELL
+	SHELL=&quot;$CONFIG_SHELL&quot;
+	export SHELL
+	echo=&quot;$CONFIG_SHELL [$]0 --fallback-echo&quot;
+      elif echo_testing_string=`($CONFIG_SHELL &quot;[$]0&quot; --fallback-echo '\t') 2&gt;/dev/null` &amp;&amp;
+	   test &quot;X$echo_testing_string&quot; = 'X\t' &amp;&amp;
+	   echo_testing_string=`($CONFIG_SHELL &quot;[$]0&quot; --fallback-echo &quot;$echo_test_string&quot;) 2&gt;/dev/null` &amp;&amp;
+	   test &quot;X$echo_testing_string&quot; = &quot;X$echo_test_string&quot;; then
+	echo=&quot;$CONFIG_SHELL [$]0 --fallback-echo&quot;
+      else
+	# maybe with a smaller string...
+	prev=:
+
+	for cmd in 'echo test' 'sed 2q &quot;[$]0&quot;' 'sed 10q &quot;[$]0&quot;' 'sed 20q &quot;[$]0&quot;' 'sed 50q &quot;[$]0&quot;'; do
+	  if (test &quot;X$echo_test_string&quot; = &quot;X`eval $cmd`&quot;) 2&gt;/dev/null
+	  then
+	    break
+	  fi
+	  prev=&quot;$cmd&quot;
+	done
+
+	if test &quot;$prev&quot; != 'sed 50q &quot;[$]0&quot;'; then
+	  echo_test_string=`eval $prev`
+	  export echo_test_string
+	  exec ${ORIGINAL_CONFIG_SHELL-${CONFIG_SHELL-/bin/sh}} &quot;[$]0&quot; ${1+&quot;[$]@&quot;}
+	else
+	  # Oops.  We lost completely, so just stick with echo.
+	  echo=echo
+	fi
+      fi
+    fi
+  fi
+fi
+fi
+
+# Copy echo and quote the copy suitably for passing to libtool from
+# the Makefile, instead of quoting the original, which is used later.
+ECHO=$echo
+if test &quot;X$ECHO&quot; = &quot;X$CONFIG_SHELL [$]0 --fallback-echo&quot;; then
+   ECHO=&quot;$CONFIG_SHELL \\\$\[$]0 --fallback-echo&quot;
+fi
+
+AC_SUBST(ECHO)
+])])# _LT_AC_PROG_ECHO_BACKSLASH
+
+
+# _LT_AC_LOCK
+# -----------
+AC_DEFUN([_LT_AC_LOCK],
+[AC_ARG_ENABLE([libtool-lock],
+    [AC_HELP_STRING([--disable-libtool-lock],
+	[avoid locking (might break parallel builds)])])
+test &quot;x$enable_libtool_lock&quot; != xno &amp;&amp; enable_libtool_lock=yes
+
+# Some flags need to be propagated to the compiler or linker for good
+# libtool support.
+case $host in
+ia64-*-hpux*)
+  # Find out which ABI we are using.
+  echo 'int i;' &gt; conftest.$ac_ext
+  if AC_TRY_EVAL(ac_compile); then
+    case `/usr/bin/file conftest.$ac_objext` in
+    *ELF-32*)
+      HPUX_IA64_MODE=&quot;32&quot;
+      ;;
+    *ELF-64*)
+      HPUX_IA64_MODE=&quot;64&quot;
+      ;;
+    esac
+  fi
+  rm -rf conftest*
+  ;;
+*-*-irix6*)
+  # Find out which ABI we are using.
+  echo '[#]line __oline__ &quot;configure&quot;' &gt; conftest.$ac_ext
+  if AC_TRY_EVAL(ac_compile); then
+   if test &quot;$lt_cv_prog_gnu_ld&quot; = yes; then
+    case `/usr/bin/file conftest.$ac_objext` in
+    *32-bit*)
+      LD=&quot;${LD-ld} -melf32bsmip&quot;
+      ;;
+    *N32*)
+      LD=&quot;${LD-ld} -melf32bmipn32&quot;
+      ;;
+    *64-bit*)
+      LD=&quot;${LD-ld} -melf64bmip&quot;
+      ;;
+    esac
+   else
+    case `/usr/bin/file conftest.$ac_objext` in
+    *32-bit*)
+      LD=&quot;${LD-ld} -32&quot;
+      ;;
+    *N32*)
+      LD=&quot;${LD-ld} -n32&quot;
+      ;;
+    *64-bit*)
+      LD=&quot;${LD-ld} -64&quot;
+      ;;
+    esac
+   fi
+  fi
+  rm -rf conftest*
+  ;;
+
+x86_64-*linux*|ppc*-*linux*|powerpc*-*linux*|s390*-*linux*|sparc*-*linux*)
+  # Find out which ABI we are using.
+  echo 'int i;' &gt; conftest.$ac_ext
+  if AC_TRY_EVAL(ac_compile); then
+    case &quot;`/usr/bin/file conftest.o`&quot; in
+    *32-bit*)
+      LINUX_64_MODE=&quot;32&quot;
+      case $host in
+        x86_64-*linux*)
+          LD=&quot;${LD-ld} -m elf_i386&quot;
+          ;;
+        ppc64-*linux*)
+          LD=&quot;${LD-ld} -m elf32ppclinux&quot;
+          ;;
+        s390x-*linux*)
+          LD=&quot;${LD-ld} -m elf_s390&quot;
+          ;;
+        sparc64-*linux*)
+          LD=&quot;${LD-ld} -m elf32_sparc&quot;
+          ;;
+      esac
+      ;;
+    *64-bit*)
+      LINUX_64_MODE=&quot;64&quot;
+      case $host in
+        x86_64-*linux*)
+          LD=&quot;${LD-ld} -m elf_x86_64&quot;
+          ;;
+        ppc*-*linux*|powerpc*-*linux*)
+          LD=&quot;${LD-ld} -m elf64ppc&quot;
+          ;;
+        s390*-*linux*)
+          LD=&quot;${LD-ld} -m elf64_s390&quot;
+          ;;
+        sparc*-*linux*)
+          LD=&quot;${LD-ld} -m elf64_sparc&quot;
+          ;;
+      esac
+      ;;
+    esac
+  fi
+  rm -rf conftest*
+  ;;
+
+*-*-sco3.2v5*)
+  # On SCO OpenServer 5, we need -belf to get full-featured binaries.
+  SAVE_CFLAGS=&quot;$CFLAGS&quot;
+  CFLAGS=&quot;$CFLAGS -belf&quot;
+  AC_CACHE_CHECK([whether the C compiler needs -belf], lt_cv_cc_needs_belf,
+    [AC_LANG_PUSH(C)
+     AC_TRY_LINK([],[],[lt_cv_cc_needs_belf=yes],[lt_cv_cc_needs_belf=no])
+     AC_LANG_POP])
+  if test x&quot;$lt_cv_cc_needs_belf&quot; != x&quot;yes&quot;; then
+    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
+    CFLAGS=&quot;$SAVE_CFLAGS&quot;
+  fi
+  ;;
+AC_PROVIDE_IFELSE([AC_LIBTOOL_WIN32_DLL],
+[*-*-cygwin* | *-*-mingw* | *-*-pw32*)
+  AC_CHECK_TOOL(DLLTOOL, dlltool, false)
+  AC_CHECK_TOOL(AS, as, false)
+  AC_CHECK_TOOL(OBJDUMP, objdump, false)
+  ;;
+  ])
+esac
+
+need_locks=&quot;$enable_libtool_lock&quot;
+
+])# _LT_AC_LOCK
+
+
+# AC_LIBTOOL_COMPILER_OPTION(MESSAGE, VARIABLE-NAME, FLAGS,
+#		[OUTPUT-FILE], [ACTION-SUCCESS], [ACTION-FAILURE])
+# ----------------------------------------------------------------
+# Check whether the given compiler option works
+AC_DEFUN([AC_LIBTOOL_COMPILER_OPTION],
+[AC_REQUIRE([LT_AC_PROG_SED])
+AC_CACHE_CHECK([$1], [$2],
+  [$2=no
+  ifelse([$4], , [ac_outfile=conftest.$ac_objext], [ac_outfile=$4])
+   printf &quot;$lt_simple_compile_test_code&quot; &gt; conftest.$ac_ext
+   lt_compiler_flag=&quot;$3&quot;
+   # Insert the option either (1) after the last *FLAGS variable, or
+   # (2) before a word containing &quot;conftest.&quot;, or (3) at the end.
+   # Note that $ac_compile itself does not contain backslashes and begins
+   # with a dollar sign (not a hyphen), so the echo should work correctly.
+   # The option is referenced via a variable to avoid confusing sed.
+   lt_compile=`echo &quot;$ac_compile&quot; | $SED \
+   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's: [[^ ]]*conftest\.: $lt_compiler_flag&amp;:; t' \
+   -e 's:$: $lt_compiler_flag:'`
+   (eval echo &quot;\&quot;\$as_me:__oline__: $lt_compile\&quot;&quot; &gt;&amp;AS_MESSAGE_LOG_FD)
+   (eval &quot;$lt_compile&quot; 2&gt;conftest.err)
+   ac_status=$?
+   cat conftest.err &gt;&amp;AS_MESSAGE_LOG_FD
+   echo &quot;$as_me:__oline__: \$? = $ac_status&quot; &gt;&amp;AS_MESSAGE_LOG_FD
+   if (exit $ac_status) &amp;&amp; test -s &quot;$ac_outfile&quot;; then
+     # The compiler can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test ! -s conftest.err; then
+       $2=yes
+     fi
+   fi
+   $rm conftest*
+])
+
+if test x&quot;[$]$2&quot; = xyes; then
+    ifelse([$5], , :, [$5])
+else
+    ifelse([$6], , :, [$6])
+fi
+])# AC_LIBTOOL_COMPILER_OPTION
+
+
+# AC_LIBTOOL_LINKER_OPTION(MESSAGE, VARIABLE-NAME, FLAGS,
+#                          [ACTION-SUCCESS], [ACTION-FAILURE])
+# ------------------------------------------------------------
+# Check whether the given compiler option works
+AC_DEFUN([AC_LIBTOOL_LINKER_OPTION],
+[AC_CACHE_CHECK([$1], [$2],
+  [$2=no
+   save_LDFLAGS=&quot;$LDFLAGS&quot;
+   LDFLAGS=&quot;$LDFLAGS $3&quot;
+   printf &quot;$lt_simple_link_test_code&quot; &gt; conftest.$ac_ext
+   if (eval $ac_link 2&gt;conftest.err) &amp;&amp; test -s conftest$ac_exeext; then
+     # The compiler can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test -s conftest.err; then
+       # Append any errors to the config.log.
+       cat conftest.err 1&gt;&amp;AS_MESSAGE_LOG_FD
+     else
+       $2=yes
+     fi
+   fi
+   $rm conftest*
+   LDFLAGS=&quot;$save_LDFLAGS&quot;
+])
+
+if test x&quot;[$]$2&quot; = xyes; then
+    ifelse([$4], , :, [$4])
+else
+    ifelse([$5], , :, [$5])
+fi
+])# AC_LIBTOOL_LINKER_OPTION
+
+
+# AC_LIBTOOL_SYS_MAX_CMD_LEN
+# --------------------------
+AC_DEFUN([AC_LIBTOOL_SYS_MAX_CMD_LEN],
+[# find the maximum length of command line arguments
+AC_MSG_CHECKING([the maximum length of command line arguments])
+AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl
+  i=0
+  testring=&quot;ABCD&quot;
+
+  case $build_os in
+  msdosdjgpp*)
+    # On DJGPP, this test can blow up pretty badly due to problems in libc
+    # (any single argument exceeding 2000 bytes causes a buffer overrun
+    # during glob expansion).  Even if it were fixed, the result of this
+    # check would be larger than it should be.
+    lt_cv_sys_max_cmd_len=12288;    # 12K is about right
+    ;;
+
+  gnu*)
+    # Under GNU Hurd, this test is not required because there is
+    # no limit to the length of command line arguments.
+    # Libtool will interpret -1 as no limit whatsoever
+    lt_cv_sys_max_cmd_len=-1;
+    ;;
+
+  cygwin* | mingw*)
+    # On Win9x/ME, this test blows up -- it succeeds, but takes
+    # about 5 minutes as the teststring grows exponentially.
+    # Worse, since 9x/ME are not pre-emptively multitasking,
+    # you end up with a &quot;frozen&quot; computer, even though with patience
+    # the test eventually succeeds (with a max line length of 256k).
+    # Instead, let's just punt: use the minimum linelength reported by
+    # all of the supported platforms: 8192 (on NT/2K/XP).
+    lt_cv_sys_max_cmd_len=8192;
+    ;;
+
+ *)
+    # If test is not a shell built-in, we'll probably end up computing a
+    # maximum length that is only half of the actual maximum length, but
+    # we can't tell.
+    while (test &quot;X&quot;`$CONFIG_SHELL [$]0 --fallback-echo &quot;X$testring&quot; 2&gt;/dev/null` \
+	       = &quot;XX$testring&quot;) &gt;/dev/null 2&gt;&amp;1 &amp;&amp;
+	    new_result=`expr &quot;X$testring&quot; : &quot;.*&quot; 2&gt;&amp;1` &amp;&amp;
+	    lt_cv_sys_max_cmd_len=$new_result &amp;&amp;
+	    test $i != 17 # 1/2 MB should be enough
+    do
+      i=`expr $i + 1`
+      testring=$testring$testring
+    done
+    testring=
+    # Add a significant safety factor because C++ compilers can tack on massive
+    # amounts of additional arguments before passing them to the linker.
+    # It appears as though 1/2 is a usable value.
+    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 2`
+    ;;
+  esac
+])
+if test -n $lt_cv_sys_max_cmd_len ; then
+  AC_MSG_RESULT($lt_cv_sys_max_cmd_len)
+else
+  AC_MSG_RESULT(none)
+fi
+])# AC_LIBTOOL_SYS_MAX_CMD_LEN
+
+
+# _LT_AC_CHECK_DLFCN
+# --------------------
+AC_DEFUN([_LT_AC_CHECK_DLFCN],
+[AC_CHECK_HEADERS(dlfcn.h)dnl
+])# _LT_AC_CHECK_DLFCN
+
+
+# _LT_AC_TRY_DLOPEN_SELF (ACTION-IF-TRUE, ACTION-IF-TRUE-W-USCORE,
+#                           ACTION-IF-FALSE, ACTION-IF-CROSS-COMPILING)
+# ------------------------------------------------------------------
+AC_DEFUN([_LT_AC_TRY_DLOPEN_SELF],
+[AC_REQUIRE([_LT_AC_CHECK_DLFCN])dnl
+if test &quot;$cross_compiling&quot; = yes; then :
+  [$4]
+else
+  lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
+  lt_status=$lt_dlunknown
+  cat &gt; conftest.$ac_ext &lt;&lt;EOF
+[#line __oline__ &quot;configure&quot;
+#include &quot;confdefs.h&quot;
+
+#if HAVE_DLFCN_H
+#include &lt;dlfcn.h&gt;
+#endif
+
+#include &lt;stdio.h&gt;
+
+#ifdef RTLD_GLOBAL
+#  define LT_DLGLOBAL		RTLD_GLOBAL
+#else
+#  ifdef DL_GLOBAL
+#    define LT_DLGLOBAL		DL_GLOBAL
+#  else
+#    define LT_DLGLOBAL		0
+#  endif
+#endif
+
+/* We may have to define LT_DLLAZY_OR_NOW in the command line if we
+   find out it does not work in some platform. */
+#ifndef LT_DLLAZY_OR_NOW
+#  ifdef RTLD_LAZY
+#    define LT_DLLAZY_OR_NOW		RTLD_LAZY
+#  else
+#    ifdef DL_LAZY
+#      define LT_DLLAZY_OR_NOW		DL_LAZY
+#    else
+#      ifdef RTLD_NOW
+#        define LT_DLLAZY_OR_NOW	RTLD_NOW
+#      else
+#        ifdef DL_NOW
+#          define LT_DLLAZY_OR_NOW	DL_NOW
+#        else
+#          define LT_DLLAZY_OR_NOW	0
+#        endif
+#      endif
+#    endif
+#  endif
+#endif
+
+#ifdef __cplusplus
+extern &quot;C&quot; void exit (int);
+#endif
+
+void fnord() { int i=42;}
+int main ()
+{
+  void *self = dlopen (0, LT_DLGLOBAL|LT_DLLAZY_OR_NOW);
+  int status = $lt_dlunknown;
+
+  if (self)
+    {
+      if (dlsym (self,&quot;fnord&quot;))       status = $lt_dlno_uscore;
+      else if (dlsym( self,&quot;_fnord&quot;)) status = $lt_dlneed_uscore;
+      /* dlclose (self); */
+    }
+
+    exit (status);
+}]
+EOF
+  if AC_TRY_EVAL(ac_link) &amp;&amp; test -s conftest${ac_exeext} 2&gt;/dev/null; then
+    (./conftest; exit; ) 2&gt;/dev/null
+    lt_status=$?
+    case x$lt_status in
+      x$lt_dlno_uscore) $1 ;;
+      x$lt_dlneed_uscore) $2 ;;
+      x$lt_unknown|x*) $3 ;;
+    esac
+  else :
+    # compilation failed
+    $3
+  fi
+fi
+rm -fr conftest*
+])# _LT_AC_TRY_DLOPEN_SELF
+
+
+# AC_LIBTOOL_DLOPEN_SELF
+# -------------------
+AC_DEFUN([AC_LIBTOOL_DLOPEN_SELF],
+[AC_REQUIRE([_LT_AC_CHECK_DLFCN])dnl
+if test &quot;x$enable_dlopen&quot; != xyes; then
+  enable_dlopen=unknown
+  enable_dlopen_self=unknown
+  enable_dlopen_self_static=unknown
+else
+  lt_cv_dlopen=no
+  lt_cv_dlopen_libs=
+
+  case $host_os in
+  beos*)
+    lt_cv_dlopen=&quot;load_add_on&quot;
+    lt_cv_dlopen_libs=
+    lt_cv_dlopen_self=yes
+    ;;
+
+  mingw* | pw32*)
+    lt_cv_dlopen=&quot;LoadLibrary&quot;
+    lt_cv_dlopen_libs=
+   ;;
+
+  cygwin*)
+    lt_cv_dlopen=&quot;dlopen&quot;
+    lt_cv_dlopen_libs=
+   ;;
+
+  darwin*)
+  # if libdl is installed we need to link against it
+    AC_CHECK_LIB([dl], [dlopen],
+		[lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-ldl&quot;],[
+    lt_cv_dlopen=&quot;dyld&quot;
+    lt_cv_dlopen_libs=
+    lt_cv_dlopen_self=yes
+    ])
+   ;;
+    
+  *)
+    AC_CHECK_FUNC([shl_load],
+	  [lt_cv_dlopen=&quot;shl_load&quot;],
+      [AC_CHECK_LIB([dld], [shl_load],
+	    [lt_cv_dlopen=&quot;shl_load&quot; lt_cv_dlopen_libs=&quot;-dld&quot;],
+	[AC_CHECK_FUNC([dlopen],
+	      [lt_cv_dlopen=&quot;dlopen&quot;],
+	  [AC_CHECK_LIB([dl], [dlopen],
+		[lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-ldl&quot;],
+	    [AC_CHECK_LIB([svld], [dlopen],
+		  [lt_cv_dlopen=&quot;dlopen&quot; lt_cv_dlopen_libs=&quot;-lsvld&quot;],
+	      [AC_CHECK_LIB([dld], [dld_link],
+		    [lt_cv_dlopen=&quot;dld_link&quot; lt_cv_dlopen_libs=&quot;-dld&quot;])
+	      ])
+	    ])
+	  ])
+	])
+      ])
+    ;;
+  esac
+
+  if test &quot;x$lt_cv_dlopen&quot; != xno; then
+    enable_dlopen=yes
+  else
+    enable_dlopen=no
+  fi
+
+  case $lt_cv_dlopen in
+  dlopen)
+    save_CPPFLAGS=&quot;$CPPFLAGS&quot;
+    test &quot;x$ac_cv_header_dlfcn_h&quot; = xyes &amp;&amp; CPPFLAGS=&quot;$CPPFLAGS -DHAVE_DLFCN_H&quot;
+
+    save_LDFLAGS=&quot;$LDFLAGS&quot;
+    eval LDFLAGS=\&quot;\$LDFLAGS $export_dynamic_flag_spec\&quot;
+
+    save_LIBS=&quot;$LIBS&quot;
+    LIBS=&quot;$lt_cv_dlopen_libs $LIBS&quot;
+
+    AC_CACHE_CHECK([whether a program can dlopen itself],
+	  lt_cv_dlopen_self, [dnl
+	  _LT_AC_TRY_DLOPEN_SELF(
+	    lt_cv_dlopen_self=yes, lt_cv_dlopen_self=yes,
+	    lt_cv_dlopen_self=no, lt_cv_dlopen_self=cross)
+    ])
+
+    if test &quot;x$lt_cv_dlopen_self&quot; = xyes; then
+      LDFLAGS=&quot;$LDFLAGS $link_static_flag&quot;
+      AC_CACHE_CHECK([whether a statically linked program can dlopen itself],
+    	  lt_cv_dlopen_self_static, [dnl
+	  _LT_AC_TRY_DLOPEN_SELF(
+	    lt_cv_dlopen_self_static=yes, lt_cv_dlopen_self_static=yes,
+	    lt_cv_dlopen_self_static=no,  lt_cv_dlopen_self_static=cross)
+      ])
+    fi
+
+    CPPFLAGS=&quot;$save_CPPFLAGS&quot;
+    LDFLAGS=&quot;$save_LDFLAGS&quot;
+    LIBS=&quot;$save_LIBS&quot;
+    ;;
+  esac
+
+  case $lt_cv_dlopen_self in
+  yes|no) enable_dlopen_self=$lt_cv_dlopen_self ;;
+  *) enable_dlopen_self=unknown ;;
+  esac
+
+  case $lt_cv_dlopen_self_static in
+  yes|no) enable_dlopen_self_static=$lt_cv_dlopen_self_static ;;
+  *) enable_dlopen_self_static=unknown ;;
+  esac
+fi
+])# AC_LIBTOOL_DLOPEN_SELF
+
+
+# AC_LIBTOOL_PROG_CC_C_O([TAGNAME])
+# ---------------------------------
+# Check to see if options -c and -o are simultaneously supported by compiler
+AC_DEFUN([AC_LIBTOOL_PROG_CC_C_O],
+[AC_REQUIRE([_LT_AC_SYS_COMPILER])dnl
+AC_CACHE_CHECK([if $compiler supports -c -o file.$ac_objext],
+  [_LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)],
+  [_LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)=no
+   $rm -r conftest 2&gt;/dev/null
+   mkdir conftest
+   cd conftest
+   mkdir out
+   printf &quot;$lt_simple_compile_test_code&quot; &gt; conftest.$ac_ext
+
+   # According to Tom Tromey, Ian Lance Taylor reported there are C compilers
+   # that will create temporary files in the current directory regardless of
+   # the output directory.  Thus, making CWD read-only will cause this test
+   # to fail, enabling locking or at least warning the user not to do parallel
+   # builds.
+   chmod -w .
+
+   lt_compiler_flag=&quot;-o out/conftest2.$ac_objext&quot;
+   # Insert the option either (1) after the last *FLAGS variable, or
+   # (2) before a word containing &quot;conftest.&quot;, or (3) at the end.
+   # Note that $ac_compile itself does not contain backslashes and begins
+   # with a dollar sign (not a hyphen), so the echo should work correctly.
+   lt_compile=`echo &quot;$ac_compile&quot; | $SED \
+   -e 's:.*FLAGS}? :&amp;$lt_compiler_flag :; t' \
+   -e 's: [[^ ]]*conftest\.: $lt_compiler_flag&amp;:; t' \
+   -e 's:$: $lt_compiler_flag:'`
+   (eval echo &quot;\&quot;\$as_me:__oline__: $lt_compile\&quot;&quot; &gt;&amp;AS_MESSAGE_LOG_FD)
+   (eval &quot;$lt_compile&quot; 2&gt;out/conftest.err)
+   ac_status=$?
+   cat out/conftest.err &gt;&amp;AS_MESSAGE_LOG_FD
+   echo &quot;$as_me:__oline__: \$? = $ac_status&quot; &gt;&amp;AS_MESSAGE_LOG_FD
+   if (exit $ac_status) &amp;&amp; test -s out/conftest2.$ac_objext
+   then
+     # The compiler can only warn and ignore the option if not recognized
+     # So say no if there are warnings
+     if test ! -s out/conftest.err; then
+       _LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)=yes
+     fi
+   fi
+   chmod u+w .
+   $rm conftest* out/*
+   rmdir out
+   cd ..
+   rmdir conftest
+   $rm conftest*
+])
+])# AC_LIBTOOL_PROG_CC_C_O
+
+
+# AC_LIBTOOL_SYS_HARD_LINK_LOCKS([TAGNAME])
+# -----------------------------------------
+# Check to see if we can do hard links to lock some files if needed
+AC_DEFUN([AC_LIBTOOL_SYS_HARD_LINK_LOCKS],
+[AC_REQUIRE([_LT_AC_LOCK])dnl
+
+hard_links=&quot;nottested&quot;
+if test &quot;$_LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)&quot; = no &amp;&amp; test &quot;$need_locks&quot; != no; then
+  # do not overwrite the value of need_locks provided by the user
+  AC_MSG_CHECKING([if we can lock with hard links])
+  hard_links=yes
+  $rm conftest*
+  ln conftest.a conftest.b 2&gt;/dev/null &amp;&amp; hard_links=no
+  touch conftest.a
+  ln conftest.a conftest.b 2&gt;&amp;5 || hard_links=no
+  ln conftest.a conftest.b 2&gt;/dev/null &amp;&amp; hard_links=no
+  AC_MSG_RESULT([$hard_links])
+  if test &quot;$hard_links&quot; = no; then
+    AC_MSG_WARN([`$CC' does not support `-c -o', so `make -j' may be unsafe])
+    need_locks=warn
+  fi
+else
+  need_locks=no
+fi
+])# AC_LIBTOOL_SYS_HARD_LINK_LOCKS
+
+
+# AC_LIBTOOL_OBJDIR
+# -----------------
+AC_DEFUN([AC_LIBTOOL_OBJDIR],
+[AC_CACHE_CHECK([for objdir], [lt_cv_objdir],
+[rm -f .libs 2&gt;/dev/null
+mkdir .libs 2&gt;/dev/null
+if test -d .libs; then
+  lt_cv_objdir=.libs
+else
+  # MS-DOS does not allow filenames that begin with a dot.
+  lt_cv_objdir=_libs
+fi
+rmdir .libs 2&gt;/dev/null])
+objdir=$lt_cv_objdir
+])# AC_LIBTOOL_OBJDIR
+
+
+# AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH([TAGNAME])
+# ----------------------------------------------
+# Check hardcoding attributes.
+AC_DEFUN([AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH],
+[AC_MSG_CHECKING([how to hardcode library paths into programs])
+_LT_AC_TAGVAR(hardcode_action, $1)=
+if test -n &quot;$_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)&quot; || \
+   test -n &quot;$_LT_AC_TAGVAR(runpath_var $1)&quot; || \
+   test &quot;X$_LT_AC_TAGVAR(hardcode_automatic, $1)&quot;=&quot;Xyes&quot; ; then
+
+  # We can hardcode non-existant directories.
+  if test &quot;$_LT_AC_TAGVAR(hardcode_direct, $1)&quot; != no &amp;&amp;
+     # If the only mechanism to avoid hardcoding is shlibpath_var, we
+     # have to relink, otherwise we might link with an installed library
+     # when we should be linking with a yet-to-be-installed one
+     ## test &quot;$_LT_AC_TAGVAR(hardcode_shlibpath_var, $1)&quot; != no &amp;&amp;
+     test &quot;$_LT_AC_TAGVAR(hardcode_minus_L, $1)&quot; != no; then
+    # Linking always hardcodes the temporary library directory.
+    _LT_AC_TAGVAR(hardcode_action, $1)=relink
+  else
+    # We can link without hardcoding, and we can hardcode nonexisting dirs.
+    _LT_AC_TAGVAR(hardcode_action, $1)=immediate
+  fi
+else
+  # We cannot hardcode anything, or else we can only hardcode existing
+  # directories.
+  _LT_AC_TAGVAR(hardcode_action, $1)=unsupported
+fi
+AC_MSG_RESULT([$_LT_AC_TAGVAR(hardcode_action, $1)])
+
+if test &quot;$_LT_AC_TAGVAR(hardcode_action, $1)&quot; = relink; then
+  # Fast installation is not supported
+  enable_fast_install=no
+elif test &quot;$shlibpath_overrides_runpath&quot; = yes ||
+     test &quot;$enable_shared&quot; = no; then
+  # Fast installation is not necessary
+  enable_fast_install=needless
+fi
+])# AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH
+
+
+# AC_LIBTOOL_SYS_LIB_STRIP
+# ------------------------
+AC_DEFUN([AC_LIBTOOL_SYS_LIB_STRIP],
+[striplib=
+old_striplib=
+AC_MSG_CHECKING([whether stripping libraries is possible])
+if test -n &quot;$STRIP&quot; &amp;&amp; $STRIP -V 2&gt;&amp;1 | grep &quot;GNU strip&quot; &gt;/dev/null; then
+  test -z &quot;$old_striplib&quot; &amp;&amp; old_striplib=&quot;$STRIP --strip-debug&quot;
+  test -z &quot;$striplib&quot; &amp;&amp; striplib=&quot;$STRIP --strip-unneeded&quot;
+  AC_MSG_RESULT([yes])
+else
+# FIXME - insert some real tests, host_os isn't really good enough
+  case $host_os in
+   darwin*)
+       if test -n &quot;$STRIP&quot; ; then
+         striplib=&quot;$STRIP -x&quot;
+         AC_MSG_RESULT([yes])
+       else
+  AC_MSG_RESULT([no])
+fi
+       ;;
+   *)
+  AC_MSG_RESULT([no])
+    ;;
+  esac  
+fi
+])# AC_LIBTOOL_SYS_LIB_STRIP
+
+
+# AC_LIBTOOL_SYS_DYNAMIC_LINKER
+# -----------------------------
+# PORTME Fill in your ld.so characteristics
+AC_DEFUN([AC_LIBTOOL_SYS_DYNAMIC_LINKER],
+[AC_MSG_CHECKING([dynamic linker characteristics])
+library_names_spec=
+libname_spec='lib$name'
+soname_spec=
+shrext=&quot;.so&quot;
+postinstall_cmds=
+postuninstall_cmds=
+finish_cmds=
+finish_eval=
+shlibpath_var=
+shlibpath_overrides_runpath=unknown
+version_type=none
+dynamic_linker=&quot;$host_os ld.so&quot;
+sys_lib_dlsearch_path_spec=&quot;/lib /usr/lib&quot;
+sys_lib_search_path_spec=&quot;/lib /usr/lib /usr/local/lib&quot;
+need_lib_prefix=unknown
+hardcode_into_libs=no
+
+# when you set need_version to no, make sure it does not cause -set_version
+# flags to be left without arguments
+need_version=unknown
+
+case $host_os in
+aix3*)
+  version_type=linux
+  library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
+  shlibpath_var=LIBPATH
+
+  # AIX 3 has no versioning support, so we append a major version to the name.
+  soname_spec='${libname}${release}${shared_ext}$major'
+  ;;
+
+aix4* | aix5*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  hardcode_into_libs=yes
+  if test &quot;$host_cpu&quot; = ia64; then
+    # AIX 5 supports IA64
+    library_names_spec='${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext}$versuffix $libname${shared_ext}'
+    shlibpath_var=LD_LIBRARY_PATH
+  else
+    # With GCC up to 2.95.x, collect2 would create an import file
+    # for dependence libraries.  The import file would start with
+    # the line `#! .'.  This would cause the generated library to
+    # depend on `.', always an invalid library.  This was fixed in
+    # development snapshots of GCC prior to 3.0.
+    case $host_os in
+      aix4 | aix4.[[01]] | aix4.[[01]].*)
+      if { echo '#if __GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; __GNUC_MINOR__ &gt;= 97)'
+	   echo ' yes '
+	   echo '#endif'; } | ${CC} -E - | grep yes &gt; /dev/null; then
+	:
+      else
+	can_build_shared=no
+      fi
+      ;;
+    esac
+    # AIX (on Power*) has no versioning support, so currently we can not hardcode correct
+    # soname into executable. Probably we can add versioning support to
+    # collect2, so additional links can be useful in future.
+    if test &quot;$aix_use_runtimelinking&quot; = yes; then
+      # If using run time linking (on AIX 4.2 or later) use lib&lt;name&gt;.so
+      # instead of lib&lt;name&gt;.a to let people know that these are not
+      # typical AIX shared libraries.
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+    else
+      # We preserve .a as extension for shared libraries through AIX4.2
+      # and later when we are not doing run time linking.
+      library_names_spec='${libname}${release}.a $libname.a'
+      soname_spec='${libname}${release}${shared_ext}$major'
+    fi
+    shlibpath_var=LIBPATH
+  fi
+  ;;
+
+amigaos*)
+  library_names_spec='$libname.ixlibrary $libname.a'
+  # Create ${libname}_ixlibrary.a entries in /sys/libs.
+  finish_eval='for lib in `ls $libdir/*.ixlibrary 2&gt;/dev/null`; do libname=`$echo &quot;X$lib&quot; | $Xsed -e '\''s%^.*/\([[^/]]*\)\.ixlibrary$%\1%'\''`; test $rm /sys/libs/${libname}_ixlibrary.a; $show &quot;(cd /sys/libs &amp;&amp; $LN_S $lib ${libname}_ixlibrary.a)&quot;; (cd /sys/libs &amp;&amp; $LN_S $lib ${libname}_ixlibrary.a) || exit 1; done'
+  ;;
+
+beos*)
+  library_names_spec='${libname}${shared_ext}'
+  dynamic_linker=&quot;$host_os ld.so&quot;
+  shlibpath_var=LIBRARY_PATH
+  ;;
+
+bsdi4*)
+  version_type=linux
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  finish_cmds='PATH=&quot;\$PATH:/sbin&quot; ldconfig $libdir'
+  shlibpath_var=LD_LIBRARY_PATH
+  sys_lib_search_path_spec=&quot;/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib&quot;
+  sys_lib_dlsearch_path_spec=&quot;/shlib /usr/lib /usr/local/lib&quot;
+  # the default ld.so.conf also contains /usr/contrib/lib and
+  # /usr/X11R6/lib (/usr/X11 is a link to /usr/X11R6), but let us allow
+  # libtool to hard-code these into programs
+  ;;
+
+cygwin* | mingw* | pw32*)
+  version_type=windows
+  shrext=&quot;.dll&quot;
+  need_version=no
+  need_lib_prefix=no
+
+  case $GCC,$host_os in
+  yes,cygwin* | yes,mingw* | yes,pw32*)
+    library_names_spec='$libname.dll.a'
+    # DLL is installed to $(libdir)/../bin by postinstall_cmds
+    postinstall_cmds='base_file=`basename \${file}`~
+      dlpath=`$SHELL 2&gt;&amp;1 -c '\''. $dir/'\''\${base_file}'\''i;echo \$dlname'\''`~
+      dldir=$destdir/`dirname \$dlpath`~
+      test -d \$dldir || mkdir -p \$dldir~
+      $install_prog $dir/$dlname \$dldir/$dlname'
+    postuninstall_cmds='dldll=`$SHELL 2&gt;&amp;1 -c '\''. $file; echo \$dlname'\''`~
+      dlpath=$dir/\$dldll~
+       $rm \$dlpath'
+    shlibpath_overrides_runpath=yes
+
+    case $host_os in
+    cygwin*)
+      # Cygwin DLLs use 'cyg' prefix rather than 'lib'
+      soname_spec='`echo ${libname} | sed -e 's/^lib/cyg/'``echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
+      sys_lib_search_path_spec=&quot;/usr/lib /lib/w32api /lib /usr/local/lib&quot;
+      ;;
+    mingw*)
+      # MinGW DLLs use traditional 'lib' prefix
+      soname_spec='${libname}`echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext}'
+      sys_lib_search_path_spec=`$CC -print-search-dirs | grep &quot;^libraries:&quot; | $SED -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot;`
+      if echo &quot;$sys_lib_search_path_spec&quot; | [grep ';[c-zC-Z]:/' &gt;/dev/null]; then
+        # It is most probably a Windows format PATH printed by
+        # mingw gcc, but we are running on Cygwin. Gcc prints its search
+        # path with ; separators, and with drive letters. We can handle the
+        # drive letters (cygwin fileutils understands them), so leave them,
+        # especially as we might pass files found there to a mingw objdump,
+        # which wouldn't understand a cygwinified path. Ahh.
+        sys_lib_search_path_spec=`echo &quot;$sys_lib_search_path_spec&quot; | $SED -e 's/;/ /g'`
+      else
+        sys_lib_search_path_spec=`echo &quot;$sys_lib_search_path_spec&quot; | $SED  -e &quot;s/$PATH_SEPARATOR/ /g&quot;`
+      fi
+      ;;
+    pw32*)
+      # pw32 DLLs use 'pw' prefix rather than 'lib'
+      library_names_spec='`echo ${libname} | sed -e 's/^lib/pw/'``echo ${release} | $SED -e 's/[.]/-/g'`${versuffix}${shared_ext}'
+      ;;
+    esac
+    ;;
+
+  *)
+    library_names_spec='${libname}`echo ${release} | $SED -e 's/[[.]]/-/g'`${versuffix}${shared_ext} $libname.lib'
+    ;;
+  esac
+  dynamic_linker='Win32 ld.exe'
+  # FIXME: first we should search . and the directory the executable is in
+  shlibpath_var=PATH
+  ;;
+
+darwin* | rhapsody*)
+  dynamic_linker=&quot;$host_os dyld&quot;
+  version_type=darwin
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${versuffix}$shared_ext ${libname}${release}${major}$shared_ext ${libname}$shared_ext'
+  soname_spec='${libname}${release}${major}$shared_ext'
+  shlibpath_overrides_runpath=yes
+  shlibpath_var=DYLD_LIBRARY_PATH
+  shrext='$(test .$module = .yes &amp;&amp; echo .so || echo .dylib)'
+  # Apple's gcc prints 'gcc -print-search-dirs' doesn't operate the same.
+  if test &quot;$GCC&quot; = yes; then
+    sys_lib_search_path_spec=`$CC -print-search-dirs | tr &quot;\n&quot; &quot;$PATH_SEPARATOR&quot; | sed -e 's/libraries:/@libraries:/' | tr &quot;@&quot; &quot;\n&quot; | grep &quot;^libraries:&quot; | sed -e &quot;s/^<A HREF="libraries://">libraries://</A>&quot; -e &quot;s,=/,/,g&quot; -e &quot;s,$PATH_SEPARATOR, ,g&quot; -e &quot;s,.*,&amp; /lib /usr/lib /usr/local/lib,g&quot;`
+  else
+    sys_lib_search_path_spec='/lib /usr/lib /usr/local/lib'
+  fi
+  sys_lib_dlsearch_path_spec='/usr/local/lib /lib /usr/lib'
+  ;;
+
+dgux*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  ;;
+
+freebsd1*)
+  dynamic_linker=no
+  ;;
+
+kfreebsd*-gnu*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  hardcode_into_libs=yes
+  dynamic_linker='GNU ld.so'
+  ;;
+
+freebsd*)
+  objformat=`test -x /usr/bin/objformat &amp;&amp; /usr/bin/objformat || echo aout`
+  version_type=freebsd-$objformat
+  case $version_type in
+    freebsd-elf*)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext} $libname${shared_ext}'
+      need_version=no
+      need_lib_prefix=no
+      ;;
+    freebsd-*)
+      library_names_spec='${libname}${release}${shared_ext}$versuffix $libname${shared_ext}$versuffix'
+      need_version=yes
+      ;;
+  esac
+  shlibpath_var=LD_LIBRARY_PATH
+  case $host_os in
+  freebsd2*)
+    shlibpath_overrides_runpath=yes
+    ;;
+  freebsd3.[01]* | freebsdelf3.[01]*)
+    shlibpath_overrides_runpath=yes
+    hardcode_into_libs=yes
+    ;;
+  *) # from 3.2 on
+    shlibpath_overrides_runpath=no
+    hardcode_into_libs=yes
+    ;;
+  esac
+  ;;
+
+gnu*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  hardcode_into_libs=yes
+  ;;
+
+hpux9* | hpux10* | hpux11*)
+  # Give a soname corresponding to the major version so that dld.sl refuses to
+  # link against other versions.
+  version_type=sunos
+  need_lib_prefix=no
+  need_version=no
+  case &quot;$host_cpu&quot; in
+  ia64*)
+    shrext='.so'
+    hardcode_into_libs=yes
+    dynamic_linker=&quot;$host_os dld.so&quot;
+    shlibpath_var=LD_LIBRARY_PATH
+    shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
+    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+    soname_spec='${libname}${release}${shared_ext}$major'
+    if test &quot;X$HPUX_IA64_MODE&quot; = X32; then
+      sys_lib_search_path_spec=&quot;/usr/lib/hpux32 /usr/local/lib/hpux32 /usr/local/lib&quot;
+    else
+      sys_lib_search_path_spec=&quot;/usr/lib/hpux64 /usr/local/lib/hpux64&quot;
+    fi
+    sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
+    ;;
+   hppa*64*)
+     shrext='.sl'
+     hardcode_into_libs=yes
+     dynamic_linker=&quot;$host_os dld.sl&quot;
+     shlibpath_var=LD_LIBRARY_PATH # How should we handle SHLIB_PATH
+     shlibpath_overrides_runpath=yes # Unless +noenvvar is specified.
+     library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+     soname_spec='${libname}${release}${shared_ext}$major'
+     sys_lib_search_path_spec=&quot;/usr/lib/pa20_64 /usr/ccs/lib/pa20_64&quot;
+     sys_lib_dlsearch_path_spec=$sys_lib_search_path_spec
+     ;;
+   *)
+    shrext='.sl'
+    dynamic_linker=&quot;$host_os dld.sl&quot;
+    shlibpath_var=SHLIB_PATH
+    shlibpath_overrides_runpath=no # +s is required to enable SHLIB_PATH
+    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+    soname_spec='${libname}${release}${shared_ext}$major'
+    ;;
+  esac
+  # HP-UX runs *really* slowly unless shared libraries are mode 555.
+  postinstall_cmds='chmod 555 $lib'
+  ;;
+
+irix5* | irix6* | nonstopux*)
+  case $host_os in
+    nonstopux*) version_type=nonstopux ;;
+    *)
+	if test &quot;$lt_cv_prog_gnu_ld&quot; = yes; then
+		version_type=linux
+	else
+		version_type=irix
+	fi ;;
+  esac
+  need_lib_prefix=no
+  need_version=no
+  soname_spec='${libname}${release}${shared_ext}$major'
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} $libname${shared_ext}'
+  case $host_os in
+  irix5* | nonstopux*)
+    libsuff= shlibsuff=
+    ;;
+  *)
+    case $LD in # libtool.m4 will add one of these switches to LD
+    *-32|*&quot;-32 &quot;|*-melf32bsmip|*&quot;-melf32bsmip &quot;)
+      libsuff= shlibsuff= libmagic=32-bit;;
+    *-n32|*&quot;-n32 &quot;|*-melf32bmipn32|*&quot;-melf32bmipn32 &quot;)
+      libsuff=32 shlibsuff=N32 libmagic=N32;;
+    *-64|*&quot;-64 &quot;|*-melf64bmip|*&quot;-melf64bmip &quot;)
+      libsuff=64 shlibsuff=64 libmagic=64-bit;;
+    *) libsuff= shlibsuff= libmagic=never-match;;
+    esac
+    ;;
+  esac
+  shlibpath_var=LD_LIBRARY${shlibsuff}_PATH
+  shlibpath_overrides_runpath=no
+  sys_lib_search_path_spec=&quot;/usr/lib${libsuff} /lib${libsuff} /usr/local/lib${libsuff}&quot;
+  sys_lib_dlsearch_path_spec=&quot;/usr/lib${libsuff} /lib${libsuff}&quot;
+  hardcode_into_libs=yes
+  ;;
+
+# No shared lib support for Linux oldld, aout, or coff.
+linux*oldld* | linux*aout* | linux*coff*)
+  dynamic_linker=no
+  ;;
+
+# This must be Linux ELF.
+linux*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  finish_cmds='PATH=&quot;\$PATH:/sbin&quot; ldconfig -n $libdir'
+  libsuff=
+  if test &quot;x$LINUX_64_MODE&quot; = x64; then
+    # Some platforms are per default 64-bit, so there's no /lib64
+    if test -d /lib64; then
+      libsuff=64
+    fi
+  fi
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=no
+  sys_lib_dlsearch_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff}&quot;
+  sys_lib_search_path_spec=&quot;/lib${libsuff} /usr/lib${libsuff} /usr/local/lib${libsuff}&quot;
+  # This implies no fast_install, which is unacceptable.
+  # Some rework will be needed to allow for fast_install
+  # before this can be enabled.
+  hardcode_into_libs=yes
+
+  # We used to test for /lib/ld.so.1 and disable shared libraries on
+  # powerpc, because MkLinux only supported shared libraries with the
+  # GNU dynamic linker.  Since this was broken with cross compilers,
+  # most powerpc-linux boxes support dynamic linking these days and
+  # people can always --disable-shared, the test was removed, and we
+  # assume the GNU/Linux dynamic linker is in use.
+  dynamic_linker='GNU/Linux ld.so'
+  ;;
+
+netbsd*)
+  version_type=sunos
+  need_lib_prefix=no
+  need_version=no
+  if echo __ELF__ | $CC -E - | grep __ELF__ &gt;/dev/null; then
+    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
+    finish_cmds='PATH=&quot;\$PATH:/sbin&quot; ldconfig -m $libdir'
+    dynamic_linker='NetBSD (a.out) ld.so'
+  else
+    library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${release}${shared_ext} ${libname}${shared_ext}'
+    soname_spec='${libname}${release}${shared_ext}$major'
+    dynamic_linker='NetBSD ld.elf_so'
+  fi
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=yes
+  hardcode_into_libs=yes
+  ;;
+
+newsos6)
+  version_type=linux
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=yes
+  ;;
+
+nto-qnx*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=yes
+  ;;
+
+openbsd*)
+  version_type=sunos
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
+  finish_cmds='PATH=&quot;\$PATH:/sbin&quot; ldconfig -m $libdir'
+  shlibpath_var=LD_LIBRARY_PATH
+  if test -z &quot;`echo __ELF__ | $CC -E - | grep __ELF__`&quot; || test &quot;$host_os-$host_cpu&quot; = &quot;openbsd2.8-powerpc&quot;; then
+    case $host_os in
+      openbsd2.[[89]] | openbsd2.[[89]].*)
+	shlibpath_overrides_runpath=no
+	;;
+      *)
+	shlibpath_overrides_runpath=yes
+	;;
+      esac
+  else
+    shlibpath_overrides_runpath=yes
+  fi
+  ;;
+
+os2*)
+  libname_spec='$name'
+  shrext=&quot;.dll&quot;
+  need_lib_prefix=no
+  library_names_spec='$libname${shared_ext} $libname.a'
+  dynamic_linker='OS/2 ld.exe'
+  shlibpath_var=LIBPATH
+  ;;
+
+osf3* | osf4* | osf5*)
+  version_type=osf
+  need_lib_prefix=no
+  need_version=no
+  soname_spec='${libname}${release}${shared_ext}$major'
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  shlibpath_var=LD_LIBRARY_PATH
+  sys_lib_search_path_spec=&quot;/usr/shlib /usr/ccs/lib /usr/lib/cmplrs/cc /usr/lib /usr/local/lib /var/shlib&quot;
+  sys_lib_dlsearch_path_spec=&quot;$sys_lib_search_path_spec&quot;
+  ;;
+
+sco3.2v5*)
+  version_type=osf
+  soname_spec='${libname}${release}${shared_ext}$major'
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  shlibpath_var=LD_LIBRARY_PATH
+  ;;
+
+solaris*)
+  version_type=linux
+  need_lib_prefix=no
+  need_version=no
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=yes
+  hardcode_into_libs=yes
+  # ldd complains unless libraries are executable
+  postinstall_cmds='chmod +x $lib'
+  ;;
+
+sunos4*)
+  version_type=sunos
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
+  finish_cmds='PATH=&quot;\$PATH:/usr/etc&quot; ldconfig $libdir'
+  shlibpath_var=LD_LIBRARY_PATH
+  shlibpath_overrides_runpath=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    need_lib_prefix=no
+  fi
+  need_version=yes
+  ;;
+
+sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+  version_type=linux
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  case $host_vendor in
+    sni)
+      shlibpath_overrides_runpath=no
+      need_lib_prefix=no
+      export_dynamic_flag_spec='${wl}-Blargedynsym'
+      runpath_var=LD_RUN_PATH
+      ;;
+    siemens)
+      need_lib_prefix=no
+      ;;
+    motorola)
+      need_lib_prefix=no
+      need_version=no
+      shlibpath_overrides_runpath=no
+      sys_lib_search_path_spec='/lib /usr/lib /usr/ccs/lib'
+      ;;
+  esac
+  ;;
+
+sysv4*MP*)
+  if test -d /usr/nec ;then
+    version_type=linux
+    library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
+    soname_spec='$libname${shared_ext}.$major'
+    shlibpath_var=LD_LIBRARY_PATH
+  fi
+  ;;
+
+uts4*)
+  version_type=linux
+  library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
+  soname_spec='${libname}${release}${shared_ext}$major'
+  shlibpath_var=LD_LIBRARY_PATH
+  ;;
+
+*)
+  dynamic_linker=no
+  ;;
+esac
+AC_MSG_RESULT([$dynamic_linker])
+test &quot;$dynamic_linker&quot; = no &amp;&amp; can_build_shared=no
+])# AC_LIBTOOL_SYS_DYNAMIC_LINKER
+
+
+# _LT_AC_TAGCONFIG
+# ----------------
+AC_DEFUN([_LT_AC_TAGCONFIG],
+[AC_ARG_WITH([tags],
+    [AC_HELP_STRING([--with-tags@&lt;:@=TAGS@:&gt;@],
+        [include additional configurations @&lt;:@automatic@:&gt;@])],
+    [tagnames=&quot;$withval&quot;])
+
+if test -f &quot;$ltmain&quot; &amp;&amp; test -n &quot;$tagnames&quot;; then
+  if test ! -f &quot;${ofile}&quot;; then
+    AC_MSG_WARN([output file `$ofile' does not exist])
+  fi
+
+  if test -z &quot;$LTCC&quot;; then
+    eval &quot;`$SHELL ${ofile} --config | grep '^LTCC='`&quot;
+    if test -z &quot;$LTCC&quot;; then
+      AC_MSG_WARN([output file `$ofile' does not look like a libtool script])
+    else
+      AC_MSG_WARN([using `LTCC=$LTCC', extracted from `$ofile'])
+    fi
+  fi
+
+  # Extract list of available tagged configurations in $ofile.
+  # Note that this assumes the entire list is on one line.
+  available_tags=`grep &quot;^available_tags=&quot; &quot;${ofile}&quot; | $SED -e 's/available_tags=\(.*$\)/\1/' -e 's/\&quot;//g'`
+
+  lt_save_ifs=&quot;$IFS&quot;; IFS=&quot;${IFS}$PATH_SEPARATOR,&quot;
+  for tagname in $tagnames; do
+    IFS=&quot;$lt_save_ifs&quot;
+    # Check whether tagname contains only valid characters
+    case `$echo &quot;X$tagname&quot; | $Xsed -e 's:[[-_ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890,/]]::g'` in
+    &quot;&quot;) ;;
+    *)  AC_MSG_ERROR([invalid tag name: $tagname])
+	;;
+    esac
+
+    if grep &quot;^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$&quot; &lt; &quot;${ofile}&quot; &gt; /dev/null
+    then
+      AC_MSG_ERROR([tag name \&quot;$tagname\&quot; already exists])
+    fi
+
+    # Update the list of available tags.
+    if test -n &quot;$tagname&quot;; then
+      echo appending configuration tag \&quot;$tagname\&quot; to $ofile
+
+      case $tagname in
+      CXX)
+	if test -n &quot;$CXX&quot; &amp;&amp; test &quot;X$CXX&quot; != &quot;Xno&quot;; then
+	  AC_LIBTOOL_LANG_CXX_CONFIG
+	else
+	  tagname=&quot;&quot;
+	fi
+	;;
+
+      F77)
+	if test -n &quot;$F77&quot; &amp;&amp; test &quot;X$F77&quot; != &quot;Xno&quot;; then
+	  AC_LIBTOOL_LANG_F77_CONFIG
+	else
+	  tagname=&quot;&quot;
+	fi
+	;;
+
+      GCJ)
+	if test -n &quot;$GCJ&quot; &amp;&amp; test &quot;X$GCJ&quot; != &quot;Xno&quot;; then
+	  AC_LIBTOOL_LANG_GCJ_CONFIG
+	else
+	  tagname=&quot;&quot;
+	fi
+	;;
+
+      RC)
+	AC_LIBTOOL_LANG_RC_CONFIG
+	;;
+
+      *)
+	AC_MSG_ERROR([Unsupported tag name: $tagname])
+	;;
+      esac
+
+      # Append the new tag name to the list of available tags.
+      if test -n &quot;$tagname&quot; ; then
+      available_tags=&quot;$available_tags $tagname&quot;
+    fi
+    fi
+  done
+  IFS=&quot;$lt_save_ifs&quot;
+
+  # Now substitute the updated list of available tags.
+  if eval &quot;sed -e 's/^available_tags=.*\$/available_tags=\&quot;$available_tags\&quot;/' \&quot;$ofile\&quot; &gt; \&quot;${ofile}T\&quot;&quot;; then
+    mv &quot;${ofile}T&quot; &quot;$ofile&quot;
+    chmod +x &quot;$ofile&quot;
+  else
+    rm -f &quot;${ofile}T&quot;
+    AC_MSG_ERROR([unable to update list of available tagged configurations.])
+  fi
+fi
+])# _LT_AC_TAGCONFIG
+
+
+# AC_LIBTOOL_DLOPEN
+# -----------------
+# enable checks for dlopen support
+AC_DEFUN([AC_LIBTOOL_DLOPEN],
+ [AC_BEFORE([$0],[AC_LIBTOOL_SETUP])
+])# AC_LIBTOOL_DLOPEN
+
+
+# AC_LIBTOOL_WIN32_DLL
+# --------------------
+# declare package support for building win32 dll's
+AC_DEFUN([AC_LIBTOOL_WIN32_DLL],
+[AC_BEFORE([$0], [AC_LIBTOOL_SETUP])
+])# AC_LIBTOOL_WIN32_DLL
+
+
+# AC_ENABLE_SHARED([DEFAULT])
+# ---------------------------
+# implement the --enable-shared flag
+# DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
+AC_DEFUN([AC_ENABLE_SHARED],
+[define([AC_ENABLE_SHARED_DEFAULT], ifelse($1, no, no, yes))dnl
+AC_ARG_ENABLE([shared],
+    [AC_HELP_STRING([--enable-shared@&lt;:@=PKGS@:&gt;@],
+	[build shared libraries @&lt;:@default=]AC_ENABLE_SHARED_DEFAULT[@:&gt;@])],
+    [p=${PACKAGE-default}
+    case $enableval in
+    yes) enable_shared=yes ;;
+    no) enable_shared=no ;;
+    *)
+      enable_shared=no
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs=&quot;$IFS&quot;; IFS=&quot;${IFS}$PATH_SEPARATOR,&quot;
+      for pkg in $enableval; do
+	IFS=&quot;$lt_save_ifs&quot;
+	if test &quot;X$pkg&quot; = &quot;X$p&quot;; then
+	  enable_shared=yes
+	fi
+      done
+      IFS=&quot;$lt_save_ifs&quot;
+      ;;
+    esac],
+    [enable_shared=]AC_ENABLE_SHARED_DEFAULT)
+])# AC_ENABLE_SHARED
+
+
+# AC_DISABLE_SHARED
+# -----------------
+#- set the default shared flag to --disable-shared
+AC_DEFUN([AC_DISABLE_SHARED],
+[AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
+AC_ENABLE_SHARED(no)
+])# AC_DISABLE_SHARED
+
+
+# AC_ENABLE_STATIC([DEFAULT])
+# ---------------------------
+# implement the --enable-static flag
+# DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
+AC_DEFUN([AC_ENABLE_STATIC],
+[define([AC_ENABLE_STATIC_DEFAULT], ifelse($1, no, no, yes))dnl
+AC_ARG_ENABLE([static],
+    [AC_HELP_STRING([--enable-static@&lt;:@=PKGS@:&gt;@],
+	[build static libraries @&lt;:@default=]AC_ENABLE_STATIC_DEFAULT[@:&gt;@])],
+    [p=${PACKAGE-default}
+    case $enableval in
+    yes) enable_static=yes ;;
+    no) enable_static=no ;;
+    *)
+     enable_static=no
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs=&quot;$IFS&quot;; IFS=&quot;${IFS}$PATH_SEPARATOR,&quot;
+      for pkg in $enableval; do
+	IFS=&quot;$lt_save_ifs&quot;
+	if test &quot;X$pkg&quot; = &quot;X$p&quot;; then
+	  enable_static=yes
+	fi
+      done
+      IFS=&quot;$lt_save_ifs&quot;
+      ;;
+    esac],
+    [enable_static=]AC_ENABLE_STATIC_DEFAULT)
+])# AC_ENABLE_STATIC
+
+
+# AC_DISABLE_STATIC
+# -----------------
+# set the default static flag to --disable-static
+AC_DEFUN([AC_DISABLE_STATIC],
+[AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
+AC_ENABLE_STATIC(no)
+])# AC_DISABLE_STATIC
+
+
+# AC_ENABLE_FAST_INSTALL([DEFAULT])
+# ---------------------------------
+# implement the --enable-fast-install flag
+# DEFAULT is either `yes' or `no'.  If omitted, it defaults to `yes'.
+AC_DEFUN([AC_ENABLE_FAST_INSTALL],
+[define([AC_ENABLE_FAST_INSTALL_DEFAULT], ifelse($1, no, no, yes))dnl
+AC_ARG_ENABLE([fast-install],
+    [AC_HELP_STRING([--enable-fast-install@&lt;:@=PKGS@:&gt;@],
+    [optimize for fast installation @&lt;:@default=]AC_ENABLE_FAST_INSTALL_DEFAULT[@:&gt;@])],
+    [p=${PACKAGE-default}
+    case $enableval in
+    yes) enable_fast_install=yes ;;
+    no) enable_fast_install=no ;;
+    *)
+      enable_fast_install=no
+      # Look at the argument we got.  We use all the common list separators.
+      lt_save_ifs=&quot;$IFS&quot;; IFS=&quot;${IFS}$PATH_SEPARATOR,&quot;
+      for pkg in $enableval; do
+	IFS=&quot;$lt_save_ifs&quot;
+	if test &quot;X$pkg&quot; = &quot;X$p&quot;; then
+	  enable_fast_install=yes
+	fi
+      done
+      IFS=&quot;$lt_save_ifs&quot;
+      ;;
+    esac],
+    [enable_fast_install=]AC_ENABLE_FAST_INSTALL_DEFAULT)
+])# AC_ENABLE_FAST_INSTALL
+
+
+# AC_DISABLE_FAST_INSTALL
+# -----------------------
+# set the default to --disable-fast-install
+AC_DEFUN([AC_DISABLE_FAST_INSTALL],
+[AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
+AC_ENABLE_FAST_INSTALL(no)
+])# AC_DISABLE_FAST_INSTALL
+
+
+# AC_LIBTOOL_PICMODE([MODE])
+# --------------------------
+# implement the --with-pic flag
+# MODE is either `yes' or `no'.  If omitted, it defaults to `both'.
+AC_DEFUN([AC_LIBTOOL_PICMODE],
+[AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
+pic_mode=ifelse($#,1,$1,default)
+])# AC_LIBTOOL_PICMODE
+
+
+# AC_PROG_EGREP
+# -------------
+# This is predefined starting with Autoconf 2.54, so this conditional
+# definition can be removed once we require Autoconf 2.54 or later.
+m4_ifndef([AC_PROG_EGREP], [AC_DEFUN([AC_PROG_EGREP],
+[AC_CACHE_CHECK([for egrep], [ac_cv_prog_egrep],
+   [if echo a | (grep -E '(a|b)') &gt;/dev/null 2&gt;&amp;1
+    then ac_cv_prog_egrep='grep -E'
+    else ac_cv_prog_egrep='egrep'
+    fi])
+ EGREP=$ac_cv_prog_egrep
+ AC_SUBST([EGREP])
+])])
+
+
+# AC_PATH_TOOL_PREFIX
+# -------------------
+# find a file program which can recognise shared library
+AC_DEFUN([AC_PATH_TOOL_PREFIX],
+[AC_REQUIRE([AC_PROG_EGREP])dnl
+AC_MSG_CHECKING([for $1])
+AC_CACHE_VAL(lt_cv_path_MAGIC_CMD,
+[case $MAGIC_CMD in
+[[\\/*] |  ?:[\\/]*])
+  lt_cv_path_MAGIC_CMD=&quot;$MAGIC_CMD&quot; # Let the user override the test with a path.
+  ;;
+*)
+  lt_save_MAGIC_CMD=&quot;$MAGIC_CMD&quot;
+  lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
+dnl $ac_dummy forces splitting on constant user-supplied paths.
+dnl POSIX.2 word splitting is done only on the output of word expansions,
+dnl not every word.  This closes a longstanding sh security hole.
+  ac_dummy=&quot;ifelse([$2], , $PATH, [$2])&quot;
+  for ac_dir in $ac_dummy; do
+    IFS=&quot;$lt_save_ifs&quot;
+    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
+    if test -f $ac_dir/$1; then
+      lt_cv_path_MAGIC_CMD=&quot;$ac_dir/$1&quot;
+      if test -n &quot;$file_magic_test_file&quot;; then
+	case $deplibs_check_method in
+	&quot;file_magic &quot;*)
+	  file_magic_regex=&quot;`expr \&quot;$deplibs_check_method\&quot; : \&quot;file_magic \(.*\)\&quot;`&quot;
+	  MAGIC_CMD=&quot;$lt_cv_path_MAGIC_CMD&quot;
+	  if eval $file_magic_cmd \$file_magic_test_file 2&gt; /dev/null |
+	    $EGREP &quot;$file_magic_regex&quot; &gt; /dev/null; then
+	    :
+	  else
+	    cat &lt;&lt;EOF 1&gt;&amp;2
+
+*** Warning: the command libtool uses to detect shared libraries,
+*** $file_magic_cmd, produces output that libtool cannot recognize.
+*** The result is that libtool may fail to recognize shared libraries
+*** as such.  This will affect the creation of libtool libraries that
+*** depend on shared libraries, but programs linked with such libtool
+*** libraries will work regardless of this problem.  Nevertheless, you
+*** may want to report the problem to your system manager and/or to
+*** <A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-libtool at gnu.org</A>
+
+EOF
+	  fi ;;
+	esac
+      fi
+      break
+    fi
+  done
+  IFS=&quot;$lt_save_ifs&quot;
+  MAGIC_CMD=&quot;$lt_save_MAGIC_CMD&quot;
+  ;;
+esac])
+MAGIC_CMD=&quot;$lt_cv_path_MAGIC_CMD&quot;
+if test -n &quot;$MAGIC_CMD&quot;; then
+  AC_MSG_RESULT($MAGIC_CMD)
+else
+  AC_MSG_RESULT(no)
+fi
+])# AC_PATH_TOOL_PREFIX
+
+
+# AC_PATH_MAGIC
+# -------------
+# find a file program which can recognise a shared library
+AC_DEFUN([AC_PATH_MAGIC],
+[AC_PATH_TOOL_PREFIX(${ac_tool_prefix}file, /usr/bin$PATH_SEPARATOR$PATH)
+if test -z &quot;$lt_cv_path_MAGIC_CMD&quot;; then
+  if test -n &quot;$ac_tool_prefix&quot;; then
+    AC_PATH_TOOL_PREFIX(file, /usr/bin$PATH_SEPARATOR$PATH)
+  else
+    MAGIC_CMD=:
+  fi
+fi
+])# AC_PATH_MAGIC
+
+
+# AC_PROG_LD
+# ----------
+# find the pathname to the GNU or non-GNU linker
+AC_DEFUN([AC_PROG_LD],
+[AC_ARG_WITH([gnu-ld],
+    [AC_HELP_STRING([--with-gnu-ld],
+	[assume the C compiler uses GNU ld @&lt;:@default=no@:&gt;@])],
+    [test &quot;$withval&quot; = no || with_gnu_ld=yes],
+    [with_gnu_ld=no])
+AC_REQUIRE([LT_AC_PROG_SED])dnl
+AC_REQUIRE([AC_PROG_CC])dnl
+AC_REQUIRE([AC_CANONICAL_HOST])dnl
+AC_REQUIRE([AC_CANONICAL_BUILD])dnl
+ac_prog=ld
+if test &quot;$GCC&quot; = yes; then
+  # Check if gcc -print-prog-name=ld gives a path.
+  AC_MSG_CHECKING([for ld used by $CC])
+  case $host in
+  *-*-mingw*)
+    # gcc leaves a trailing carriage return which upsets mingw
+    ac_prog=`($CC -print-prog-name=ld) 2&gt;&amp;5 | tr -d '\015'` ;;
+  *)
+    ac_prog=`($CC -print-prog-name=ld) 2&gt;&amp;5` ;;
+  esac
+  case $ac_prog in
+    # Accept absolute paths.
+    [[\\/]]* | ?:[[\\/]]*)
+      re_direlt='/[[^/]][[^/]]*/\.\./'
+      # Canonicalize the pathname of ld
+      ac_prog=`echo $ac_prog| $SED 's%\\\\%/%g'`
+      while echo $ac_prog | grep &quot;$re_direlt&quot; &gt; /dev/null 2&gt;&amp;1; do
+	ac_prog=`echo $ac_prog| $SED &quot;s%$re_direlt%/%&quot;`
+      done
+      test -z &quot;$LD&quot; &amp;&amp; LD=&quot;$ac_prog&quot;
+      ;;
+  &quot;&quot;)
+    # If it fails, then pretend we aren't using GCC.
+    ac_prog=ld
+    ;;
+  *)
+    # If it is relative, then search for the first ld in PATH.
+    with_gnu_ld=unknown
+    ;;
+  esac
+elif test &quot;$with_gnu_ld&quot; = yes; then
+  AC_MSG_CHECKING([for GNU ld])
+else
+  AC_MSG_CHECKING([for non-GNU ld])
+fi
+AC_CACHE_VAL(lt_cv_path_LD,
+[if test -z &quot;$LD&quot;; then
+  lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
+  for ac_dir in $PATH; do
+    IFS=&quot;$lt_save_ifs&quot;
+    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
+    if test -f &quot;$ac_dir/$ac_prog&quot; || test -f &quot;$ac_dir/$ac_prog$ac_exeext&quot;; then
+      lt_cv_path_LD=&quot;$ac_dir/$ac_prog&quot;
+      # Check to see if the program is GNU ld.  I'd rather use --version,
+      # but apparently some GNU ld's only accept -v.
+      # Break only if it was the GNU/non-GNU ld that we prefer.
+      case `&quot;$lt_cv_path_LD&quot; -v 2&gt;&amp;1 &lt;/dev/null` in
+      *GNU* | *'with BFD'*)
+	test &quot;$with_gnu_ld&quot; != no &amp;&amp; break
+	;;
+      *)
+	test &quot;$with_gnu_ld&quot; != yes &amp;&amp; break
+	;;
+      esac
+    fi
+  done
+  IFS=&quot;$lt_save_ifs&quot;
+else
+  lt_cv_path_LD=&quot;$LD&quot; # Let the user override the test with a path.
+fi])
+LD=&quot;$lt_cv_path_LD&quot;
+if test -n &quot;$LD&quot;; then
+  AC_MSG_RESULT($LD)
+else
+  AC_MSG_RESULT(no)
+fi
+test -z &quot;$LD&quot; &amp;&amp; AC_MSG_ERROR([no acceptable ld found in \$PATH])
+AC_PROG_LD_GNU
+])# AC_PROG_LD
+
+
+# AC_PROG_LD_GNU
+# --------------
+AC_DEFUN([AC_PROG_LD_GNU],
+[AC_REQUIRE([AC_PROG_EGREP])dnl
+AC_CACHE_CHECK([if the linker ($LD) is GNU ld], lt_cv_prog_gnu_ld,
+[# I'd rather use --version here, but apparently some GNU ld's only accept -v.
+case `$LD -v 2&gt;&amp;1 &lt;/dev/null` in
+*GNU* | *'with BFD'*)
+  lt_cv_prog_gnu_ld=yes
+  ;;
+*)
+  lt_cv_prog_gnu_ld=no
+  ;;
+esac])
+with_gnu_ld=$lt_cv_prog_gnu_ld
+])# AC_PROG_LD_GNU
+
+
+# AC_PROG_LD_RELOAD_FLAG
+# ----------------------
+# find reload flag for linker
+#   -- PORTME Some linkers may need a different reload flag.
+AC_DEFUN([AC_PROG_LD_RELOAD_FLAG],
+[AC_CACHE_CHECK([for $LD option to reload object files],
+  lt_cv_ld_reload_flag,
+  [lt_cv_ld_reload_flag='-r'])
+reload_flag=$lt_cv_ld_reload_flag
+case $reload_flag in
+&quot;&quot; | &quot; &quot;*) ;;
+*) reload_flag=&quot; $reload_flag&quot; ;;
+esac
+reload_cmds='$LD$reload_flag -o $output$reload_objs'
+])# AC_PROG_LD_RELOAD_FLAG
+
+
+# AC_DEPLIBS_CHECK_METHOD
+# -----------------------
+# how to check for library dependencies
+#  -- PORTME fill in with the dynamic library characteristics
+AC_DEFUN([AC_DEPLIBS_CHECK_METHOD],
+[AC_CACHE_CHECK([how to recognise dependent libraries],
+lt_cv_deplibs_check_method,
+[lt_cv_file_magic_cmd='$MAGIC_CMD'
+lt_cv_file_magic_test_file=
+lt_cv_deplibs_check_method='unknown'
+# Need to set the preceding variable on all platforms that support
+# interlibrary dependencies.
+# 'none' -- dependencies not supported.
+# `unknown' -- same as none, but documents that we really don't know.
+# 'pass_all' -- all dependencies passed with no checks.
+# 'test_compile' -- check by making test program.
+# 'file_magic [[regex]]' -- check by looking for files in library path
+# which responds to the $file_magic_cmd with a given extended regex.
+# If you have `file' or equivalent on your system and you're not sure
+# whether `pass_all' will *always* work, you probably want this one.
+
+case $host_os in
+aix4* | aix5*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+beos*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+bsdi4*)
+  lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib)'
+  lt_cv_file_magic_cmd='/usr/bin/file -L'
+  lt_cv_file_magic_test_file=/shlib/libc.so
+  ;;
+
+cygwin*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+  
+mingw* | pw32*)
+  # win32_libid is a shell function defined in ltmain.sh
+  lt_cv_deplibs_check_method='file_magic ^x86 archive import|^x86 DLL'
+  lt_cv_file_magic_cmd='win32_libid'
+  ;;
+
+darwin* | rhapsody*)
+  # this will be overwritten by pass_all, but leave it in just in case
+  lt_cv_deplibs_check_method='file_magic Mach-O dynamically linked shared library'
+  lt_cv_file_magic_cmd='/usr/bin/file -L'
+  case &quot;$host_os&quot; in
+  rhapsody* | darwin1.[[012]])
+    lt_cv_file_magic_test_file=`/System/Library/Frameworks/System.framework/System`
+    ;;
+  *) # Darwin 1.3 on
+    lt_cv_file_magic_test_file='/usr/lib/libSystem.dylib'
+    ;;
+  esac
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+freebsd* | kfreebsd*-gnu)
+  if echo __ELF__ | $CC -E - | grep __ELF__ &gt; /dev/null; then
+    case $host_cpu in
+    i*86 )
+      # Not sure whether the presence of OpenBSD here was a mistake.
+      # Let's accept both of them until this is cleared up.
+      lt_cv_deplibs_check_method='file_magic (FreeBSD|OpenBSD)/i[[3-9]]86 (compact )?demand paged shared library'
+      lt_cv_file_magic_cmd=/usr/bin/file
+      lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
+      ;;
+    esac
+  else
+    lt_cv_deplibs_check_method=pass_all
+  fi
+  ;;
+
+gnu*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+hpux10.20* | hpux11*)
+  lt_cv_file_magic_cmd=/usr/bin/file
+  case &quot;$host_cpu&quot; in
+  ia64*)
+    lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|ELF-[[0-9]][[0-9]]) shared object file - IA64'
+    lt_cv_file_magic_test_file=/usr/lib/hpux32/libc.so
+    ;;
+  hppa*64*)
+    [lt_cv_deplibs_check_method='file_magic (s[0-9][0-9][0-9]|ELF-[0-9][0-9]) shared object file - PA-RISC [0-9].[0-9]']
+    lt_cv_file_magic_test_file=/usr/lib/pa20_64/libc.sl
+    ;;
+  *)
+    lt_cv_deplibs_check_method='file_magic (s[[0-9]][[0-9]][[0-9]]|PA-RISC[[0-9]].[[0-9]]) shared library'
+    lt_cv_file_magic_test_file=/usr/lib/libc.sl
+    ;;
+  esac
+  ;;
+
+irix5* | irix6* | nonstopux*)
+  case $host_os in
+  irix5* | nonstopux*)
+    # this will be overridden with pass_all, but let us keep it just in case
+    lt_cv_deplibs_check_method=&quot;file_magic ELF 32-bit MSB dynamic lib MIPS - version 1&quot;
+    ;;
+  *)
+    case $LD in
+    *-32|*&quot;-32 &quot;) libmagic=32-bit;;
+    *-n32|*&quot;-n32 &quot;) libmagic=N32;;
+    *-64|*&quot;-64 &quot;) libmagic=64-bit;;
+    *) libmagic=never-match;;
+    esac
+    # this will be overridden with pass_all, but let us keep it just in case
+    lt_cv_deplibs_check_method=&quot;file_magic ELF ${libmagic} MSB mips-[[1234]] dynamic lib MIPS - version 1&quot;
+    ;;
+  esac
+  lt_cv_file_magic_test_file=`echo /lib${libsuff}/libc.so*`
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+# This must be Linux ELF.
+linux*)
+  case $host_cpu in
+  alpha* | hppa* | i*86 | ia64* | m68* | mips* | powerpc* | sparc* | s390* | sh* | x86_64* )
+    lt_cv_deplibs_check_method=pass_all ;;
+  # the debian people say, arm and glibc 2.3.1 works for them with pass_all
+  arm* )
+    lt_cv_deplibs_check_method=pass_all ;;
+  *)
+    # glibc up to 2.1.1 does not perform some relocations on ARM
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic lib )' ;;
+  esac
+  lt_cv_file_magic_test_file=`echo /lib/libc.so* /lib/libc-*.so`
+  ;;
+
+netbsd*)
+  if echo __ELF__ | $CC -E - | grep __ELF__ &gt; /dev/null; then
+    lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so\.[[0-9]]+\.[[0-9]]+|_pic\.a)$'
+  else
+    lt_cv_deplibs_check_method='match_pattern /lib[[^/]]+(\.so|_pic\.a)$'
+  fi
+  ;;
+
+newos6*)
+  lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (executable|dynamic lib)'
+  lt_cv_file_magic_cmd=/usr/bin/file
+  lt_cv_file_magic_test_file=/usr/lib/libnls.so
+  ;;
+
+nto-qnx*)
+  lt_cv_deplibs_check_method=unknown
+  ;;
+
+openbsd*)
+  lt_cv_file_magic_cmd=/usr/bin/file
+  lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
+  if test -z &quot;`echo __ELF__ | $CC -E - | grep __ELF__`&quot; || test &quot;$host_os-$host_cpu&quot; = &quot;openbsd2.8-powerpc&quot;; then
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB shared object'
+  else
+    lt_cv_deplibs_check_method='file_magic OpenBSD.* shared library'
+  fi
+  ;;
+
+osf3* | osf4* | osf5*)
+  # this will be overridden with pass_all, but let us keep it just in case
+  lt_cv_deplibs_check_method='file_magic COFF format alpha shared library'
+  lt_cv_file_magic_test_file=/shlib/libc.so
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+sco3.2v5*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+
+solaris*)
+  lt_cv_deplibs_check_method=pass_all
+  lt_cv_file_magic_test_file=/lib/libc.so
+  ;;
+
+sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+  case $host_vendor in
+  motorola)
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[ML]]SB (shared object|dynamic lib) M[[0-9]][[0-9]]* Version [[0-9]]'
+    lt_cv_file_magic_test_file=`echo /usr/lib/libc.so*`
+    ;;
+  ncr)
+    lt_cv_deplibs_check_method=pass_all
+    ;;
+  sequent)
+    lt_cv_file_magic_cmd='/bin/file'
+    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB (shared object|dynamic lib )'
+    ;;
+  sni)
+    lt_cv_file_magic_cmd='/bin/file'
+    lt_cv_deplibs_check_method=&quot;file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB dynamic lib&quot;
+    lt_cv_file_magic_test_file=/lib/libc.so
+    ;;
+  siemens)
+    lt_cv_deplibs_check_method=pass_all
+    ;;
+  esac
+  ;;
+
+sysv5OpenUNIX8* | sysv5UnixWare7* | sysv5uw[[78]]* | unixware7* | sysv4*uw2*)
+  lt_cv_deplibs_check_method=pass_all
+  ;;
+esac
+])
+file_magic_cmd=$lt_cv_file_magic_cmd
+deplibs_check_method=$lt_cv_deplibs_check_method
+test -z &quot;$deplibs_check_method&quot; &amp;&amp; deplibs_check_method=unknown
+])# AC_DEPLIBS_CHECK_METHOD
+
+
+# AC_PROG_NM
+# ----------
+# find the pathname to a BSD-compatible name lister
+AC_DEFUN([AC_PROG_NM],
+[AC_CACHE_CHECK([for BSD-compatible nm], lt_cv_path_NM,
+[if test -n &quot;$NM&quot;; then
+  # Let the user override the test.
+  lt_cv_path_NM=&quot;$NM&quot;
+else
+  lt_save_ifs=&quot;$IFS&quot;; IFS=$PATH_SEPARATOR
+  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do
+    IFS=&quot;$lt_save_ifs&quot;
+    test -z &quot;$ac_dir&quot; &amp;&amp; ac_dir=.
+    tmp_nm=&quot;$ac_dir/${ac_tool_prefix}nm&quot;
+    if test -f &quot;$tmp_nm&quot; || test -f &quot;$tmp_nm$ac_exeext&quot; ; then
+      # Check to see if the nm accepts a BSD-compat flag.
+      # Adding the `sed 1q' prevents false positives on HP-UX, which says:
+      #   nm: unknown option &quot;B&quot; ignored
+      # Tru64's nm complains that /dev/null is an invalid object file
+      case `&quot;$tmp_nm&quot; -B /dev/null 2&gt;&amp;1 | sed '1q'` in
+      */dev/null* | *'Invalid file or object type'*)
+	lt_cv_path_NM=&quot;$tmp_nm -B&quot;
+	break
+        ;;
+      *)
+	case `&quot;$tmp_nm&quot; -p /dev/null 2&gt;&amp;1 | sed '1q'` in
+	*/dev/null*)
+	  lt_cv_path_NM=&quot;$tmp_nm -p&quot;
+	  break
+	  ;;
+	*)
+	  lt_cv_path_NM=${lt_cv_path_NM=&quot;$tmp_nm&quot;} # keep the first match, but
+	  continue # so that we can try to find one that supports BSD flags
+	  ;;
+	esac
+      esac
+    fi
+  done
+  IFS=&quot;$lt_save_ifs&quot;
+  test -z &quot;$lt_cv_path_NM&quot; &amp;&amp; lt_cv_path_NM=nm
+fi])
+NM=&quot;$lt_cv_path_NM&quot;
+])# AC_PROG_NM
+
+
+# AC_CHECK_LIBM
+# -------------
+# check for math library
+AC_DEFUN([AC_CHECK_LIBM],
+[AC_REQUIRE([AC_CANONICAL_HOST])dnl
+LIBM=
+case $host in
+*-*-beos* | *-*-cygwin* | *-*-pw32* | *-*-darwin*)
+  # These system don't have libm, or don't need it
+  ;;
+*-ncr-sysv4.3*)
+  AC_CHECK_LIB(mw, _mwvalidcheckl, LIBM=&quot;-lmw&quot;)
+  AC_CHECK_LIB(m, cos, LIBM=&quot;$LIBM -lm&quot;)
+  ;;
+*)
+  AC_CHECK_LIB(m, cos, LIBM=&quot;-lm&quot;)
+  ;;
+esac
+])# AC_CHECK_LIBM
+
+
+# AC_LIBLTDL_CONVENIENCE([DIRECTORY])
+# -----------------------------------
+# sets LIBLTDL to the link flags for the libltdl convenience library and
+# LTDLINCL to the include flags for the libltdl header and adds
+# --enable-ltdl-convenience to the configure arguments.  Note that LIBLTDL
+# and LTDLINCL are not AC_SUBSTed, nor is AC_CONFIG_SUBDIRS called.  If
+# DIRECTORY is not provided, it is assumed to be `libltdl'.  LIBLTDL will
+# be prefixed with '${top_builddir}/' and LTDLINCL will be prefixed with
+# '${top_srcdir}/' (note the single quotes!).  If your package is not
+# flat and you're not using automake, define top_builddir and
+# top_srcdir appropriately in the Makefiles.
+AC_DEFUN([AC_LIBLTDL_CONVENIENCE],
+[AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
+  case $enable_ltdl_convenience in
+  no) AC_MSG_ERROR([this package needs a convenience libltdl]) ;;
+  &quot;&quot;) enable_ltdl_convenience=yes
+      ac_configure_args=&quot;$ac_configure_args --enable-ltdl-convenience&quot; ;;
+  esac
+  LIBLTDL='${top_builddir}/'ifelse($#,1,[$1],['libltdl'])/libltdlc.la
+  LTDLINCL='-I${top_srcdir}/'ifelse($#,1,[$1],['libltdl'])
+  # For backwards non-gettext consistent compatibility...
+  INCLTDL=&quot;$LTDLINCL&quot;
+])# AC_LIBLTDL_CONVENIENCE
+
+
+# AC_LIBLTDL_INSTALLABLE([DIRECTORY])
+# -----------------------------------
+# sets LIBLTDL to the link flags for the libltdl installable library and
+# LTDLINCL to the include flags for the libltdl header and adds
+# --enable-ltdl-install to the configure arguments.  Note that LIBLTDL
+# and LTDLINCL are not AC_SUBSTed, nor is AC_CONFIG_SUBDIRS called.  If
+# DIRECTORY is not provided and an installed libltdl is not found, it is
+# assumed to be `libltdl'.  LIBLTDL will be prefixed with '${top_builddir}/'
+# and LTDLINCL will be prefixed with '${top_srcdir}/' (note the single
+# quotes!).  If your package is not flat and you're not using automake,
+# define top_builddir and top_srcdir appropriately in the Makefiles.
+# In the future, this macro may have to be called after AC_PROG_LIBTOOL.
+AC_DEFUN([AC_LIBLTDL_INSTALLABLE],
+[AC_BEFORE([$0],[AC_LIBTOOL_SETUP])dnl
+  AC_CHECK_LIB(ltdl, lt_dlinit,
+  [test x&quot;$enable_ltdl_install&quot; != xyes &amp;&amp; enable_ltdl_install=no],
+  [if test x&quot;$enable_ltdl_install&quot; = xno; then
+     AC_MSG_WARN([libltdl not installed, but installation disabled])
+   else
+     enable_ltdl_install=yes
+   fi
+  ])
+  if test x&quot;$enable_ltdl_install&quot; = x&quot;yes&quot;; then
+    ac_configure_args=&quot;$ac_configure_args --enable-ltdl-install&quot;
+    LIBLTDL='${top_builddir}/'ifelse($#,1,[$1],['libltdl'])/libltdl.la
+    LTDLINCL='-I${top_srcdir}/'ifelse($#,1,[$1],['libltdl'])
+  else
+    ac_configure_args=&quot;$ac_configure_args --enable-ltdl-install=no&quot;
+    LIBLTDL=&quot;-lltdl&quot;
+    LTDLINCL=
+  fi
+  # For backwards non-gettext consistent compatibility...
+  INCLTDL=&quot;$LTDLINCL&quot;
+])# AC_LIBLTDL_INSTALLABLE
+
+
+# AC_LIBTOOL_CXX
+# --------------
+# enable support for C++ libraries
+AC_DEFUN([AC_LIBTOOL_CXX],
+[AC_REQUIRE([_LT_AC_LANG_CXX])
+])# AC_LIBTOOL_CXX
+
+
+# _LT_AC_LANG_CXX
+# ---------------
+AC_DEFUN([_LT_AC_LANG_CXX],
+[AC_REQUIRE([AC_PROG_CXX])
+AC_REQUIRE([AC_PROG_CXXCPP])
+_LT_AC_SHELL_INIT([tagnames=${tagnames+${tagnames},}CXX])
+])# _LT_AC_LANG_CXX
+
+
+# AC_LIBTOOL_F77
+# --------------
+# enable support for Fortran 77 libraries
+AC_DEFUN([AC_LIBTOOL_F77],
+[AC_REQUIRE([_LT_AC_LANG_F77])
+])# AC_LIBTOOL_F77
+
+
+# _LT_AC_LANG_F77
+# ---------------
+AC_DEFUN([_LT_AC_LANG_F77],
+[AC_REQUIRE([AC_PROG_F77])
+_LT_AC_SHELL_INIT([tagnames=${tagnames+${tagnames},}F77])
+])# _LT_AC_LANG_F77
+
+
+# AC_LIBTOOL_GCJ
+# --------------
+# enable support for GCJ libraries
+AC_DEFUN([AC_LIBTOOL_GCJ],
+[AC_REQUIRE([_LT_AC_LANG_GCJ])
+])# AC_LIBTOOL_GCJ
+
+
+# _LT_AC_LANG_GCJ
+# ---------------
+AC_DEFUN([_LT_AC_LANG_GCJ],
+[AC_PROVIDE_IFELSE([AC_PROG_GCJ],[],
+  [AC_PROVIDE_IFELSE([A][M_PROG_GCJ],[],
+    [AC_PROVIDE_IFELSE([LT_AC_PROG_GCJ],[],
+      [ifdef([AC_PROG_GCJ],[AC_REQUIRE([AC_PROG_GCJ])],
+	 [ifdef([A][M_PROG_GCJ],[AC_REQUIRE([A][M_PROG_GCJ])],
+	   [AC_REQUIRE([A][C_PROG_GCJ_OR_A][M_PROG_GCJ])])])])])])
+_LT_AC_SHELL_INIT([tagnames=${tagnames+${tagnames},}GCJ])
+])# _LT_AC_LANG_GCJ
+
+
+# AC_LIBTOOL_RC
+# --------------
+# enable support for Windows resource files
+AC_DEFUN([AC_LIBTOOL_RC],
+[AC_REQUIRE([LT_AC_PROG_RC])
+_LT_AC_SHELL_INIT([tagnames=${tagnames+${tagnames},}RC])
+])# AC_LIBTOOL_RC
+
+
+# AC_LIBTOOL_LANG_C_CONFIG
+# ------------------------
+# Ensure that the configuration vars for the C compiler are
+# suitably defined.  Those variables are subsequently used by
+# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
+AC_DEFUN([AC_LIBTOOL_LANG_C_CONFIG], [_LT_AC_LANG_C_CONFIG])
+AC_DEFUN([_LT_AC_LANG_C_CONFIG],
+[lt_save_CC=&quot;$CC&quot;
+AC_LANG_PUSH(C)
+
+# Source file extension for C test sources.
+ac_ext=c
+
+# Object file extension for compiled C test sources.
+objext=o
+_LT_AC_TAGVAR(objext, $1)=$objext
+
+# Code to be used in simple compile tests
+lt_simple_compile_test_code=&quot;int some_variable = 0;\n&quot;
+
+# Code to be used in simple link tests
+lt_simple_link_test_code='int main(){return(0);}\n'
+
+_LT_AC_SYS_COMPILER
+
+#
+# Check for any special shared library compilation flags.
+#
+_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)=
+if test &quot;$GCC&quot; = no; then
+  case $host_os in
+  sco3.2v5*)
+    _LT_AC_TAGVAR(lt_prog_cc_shlib, $1)='-belf'
+    ;;
+  esac
+fi
+if test -n &quot;$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)&quot;; then
+  AC_MSG_WARN([`$CC' requires `$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)' to build shared libraries])
+  if echo &quot;$old_CC $old_CFLAGS &quot; | grep &quot;[[ 	]]$]_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)[[[ 	]]&quot; &gt;/dev/null; then :
+  else
+    AC_MSG_WARN([add `$_LT_AC_TAGVAR(lt_prog_cc_shlib, $1)' to the CC or CFLAGS env variable and reconfigure])
+    _LT_AC_TAGVAR(lt_cv_prog_cc_can_build_shared, $1)=no
+  fi
+fi
+
+
+#
+# Check to make sure the static flag actually works.
+#
+AC_LIBTOOL_LINKER_OPTION([if $compiler static flag $_LT_AC_TAGVAR(lt_prog_compiler_static, $1) works],
+  _LT_AC_TAGVAR(lt_prog_compiler_static_works, $1),
+  $_LT_AC_TAGVAR(lt_prog_compiler_static, $1),
+  [],
+  [_LT_AC_TAGVAR(lt_prog_compiler_static, $1)=])
+
+
+## CAVEAT EMPTOR:
+## There is no encapsulation within the following macros, do not change
+## the running order or otherwise move them around unless you know exactly
+## what you are doing...
+AC_LIBTOOL_PROG_COMPILER_NO_RTTI($1)
+AC_LIBTOOL_PROG_COMPILER_PIC($1)
+AC_LIBTOOL_PROG_CC_C_O($1)
+AC_LIBTOOL_SYS_HARD_LINK_LOCKS($1)
+AC_LIBTOOL_PROG_LD_SHLIBS($1)
+AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
+AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
+AC_LIBTOOL_SYS_LIB_STRIP
+AC_LIBTOOL_DLOPEN_SELF($1)
+
+# Report which librarie types wil actually be built
+AC_MSG_CHECKING([if libtool supports shared libraries])
+AC_MSG_RESULT([$can_build_shared])
+
+AC_MSG_CHECKING([whether to build shared libraries])
+test &quot;$can_build_shared&quot; = &quot;no&quot; &amp;&amp; enable_shared=no
+
+# On AIX, shared libraries and static libraries use the same namespace, and
+# are all built from PIC.
+case &quot;$host_os&quot; in
+aix3*)
+  test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
+  if test -n &quot;$RANLIB&quot;; then
+    archive_cmds=&quot;$archive_cmds~\$RANLIB \$lib&quot;
+    postinstall_cmds='$RANLIB $lib'
+  fi
+  ;;
+
+aix4*)
+  if test &quot;$host_cpu&quot; != ia64 &amp;&amp; test &quot;$aix_use_runtimelinking&quot; = no ; then
+    test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
+  fi
+  ;;
+  darwin* | rhapsody*)
+  if test &quot;$GCC&quot; = yes; then
+    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    case &quot;$host_os&quot; in
+    rhapsody* | darwin1.[[012]])
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-undefined -Wl,suppress'
+      ;;
+    *) # Darwin 1.3 on
+      if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+      else
+	case ${MACOSX_DEPLOYMENT_TARGET} in
+	  10.[012])
+	    _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	    ;;
+	  10.*)
+	    _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-undefined -Wl,dynamic_lookup'
+	    ;;
+	esac
+      fi
+      ;;
+    esac
+    output_verbose_link_cmd='echo'
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -dynamiclib $allow_undefined_flag -o $lib $compiler_flags $libobjs $deplibs -install_name $rpath/$soname $verstring'
+    _LT_AC_TAGVAR(module_cmds, $1)='$CC $allow_undefined_flag -o $lib -bundle $compiler_flags $libobjs $deplibs'
+    # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+    _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib $allow_undefined_flag  -o $lib $compiler_flags $libobjs $deplibs -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+    _LT_AC_TAGVAR(module_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $compiler_flags $libobjs $deplibs~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+    _LT_AC_TAGVAR(hardcode_direct, $1)=no
+    _LT_AC_TAGVAR(hardcode_automatic, $1)=yes
+    _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
+    _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='-all_load $convenience'
+    _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+  else
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+  fi  
+    ;;  
+esac
+AC_MSG_RESULT([$enable_shared])
+
+AC_MSG_CHECKING([whether to build static libraries])
+# Make sure either enable_shared or enable_static is yes.
+test &quot;$enable_shared&quot; = yes || enable_static=yes
+AC_MSG_RESULT([$enable_static])
+
+AC_LIBTOOL_CONFIG($1)
+
+AC_LANG_POP
+CC=&quot;$lt_save_CC&quot;
+])# AC_LIBTOOL_LANG_C_CONFIG
+
+
+# AC_LIBTOOL_LANG_CXX_CONFIG
+# --------------------------
+# Ensure that the configuration vars for the C compiler are
+# suitably defined.  Those variables are subsequently used by
+# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
+AC_DEFUN([AC_LIBTOOL_LANG_CXX_CONFIG], [_LT_AC_LANG_CXX_CONFIG(CXX)])
+AC_DEFUN([_LT_AC_LANG_CXX_CONFIG],
+[AC_LANG_PUSH(C++)
+AC_REQUIRE([AC_PROG_CXX])
+AC_REQUIRE([AC_PROG_CXXCPP])
+
+_LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+_LT_AC_TAGVAR(allow_undefined_flag, $1)=
+_LT_AC_TAGVAR(always_export_symbols, $1)=no
+_LT_AC_TAGVAR(archive_expsym_cmds, $1)=
+_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)=
+_LT_AC_TAGVAR(hardcode_direct, $1)=no
+_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)=
+_LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
+_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
+_LT_AC_TAGVAR(hardcode_minus_L, $1)=no
+_LT_AC_TAGVAR(hardcode_automatic, $1)=no
+_LT_AC_TAGVAR(module_cmds, $1)=
+_LT_AC_TAGVAR(module_expsym_cmds, $1)=
+_LT_AC_TAGVAR(link_all_deplibs, $1)=unknown
+_LT_AC_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds
+_LT_AC_TAGVAR(no_undefined_flag, $1)=
+_LT_AC_TAGVAR(whole_archive_flag_spec, $1)=
+_LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=no
+
+# Dependencies to place before and after the object being linked:
+_LT_AC_TAGVAR(predep_objects, $1)=
+_LT_AC_TAGVAR(postdep_objects, $1)=
+_LT_AC_TAGVAR(predeps, $1)=
+_LT_AC_TAGVAR(postdeps, $1)=
+_LT_AC_TAGVAR(compiler_lib_search_path, $1)=
+
+# Source file extension for C++ test sources.
+ac_ext=cc
+
+# Object file extension for compiled C++ test sources.
+objext=o
+_LT_AC_TAGVAR(objext, $1)=$objext
+
+# Code to be used in simple compile tests
+lt_simple_compile_test_code=&quot;int some_variable = 0;\n&quot;
+
+# Code to be used in simple link tests
+lt_simple_link_test_code='int main(int, char *[]) { return(0); }\n'
+
+# ltmain only uses $CC for tagged configurations so make sure $CC is set.
+_LT_AC_SYS_COMPILER
+
+# Allow CC to be a program name with arguments.
+lt_save_CC=$CC
+lt_save_LD=$LD
+lt_save_GCC=$GCC
+GCC=$GXX
+lt_save_with_gnu_ld=$with_gnu_ld
+lt_save_path_LD=$lt_cv_path_LD
+if test -n &quot;${lt_cv_prog_gnu_ldcxx+set}&quot;; then
+  lt_cv_prog_gnu_ld=$lt_cv_prog_gnu_ldcxx
+else
+  unset lt_cv_prog_gnu_ld
+fi
+if test -n &quot;${lt_cv_path_LDCXX+set}&quot;; then
+  lt_cv_path_LD=$lt_cv_path_LDCXX
+else
+  unset lt_cv_path_LD
+fi
+test -z &quot;${LDCXX+set}&quot; || LD=$LDCXX
+CC=${CXX-&quot;c++&quot;}
+compiler=$CC
+_LT_AC_TAGVAR(compiler, $1)=$CC
+cc_basename=`$echo X&quot;$compiler&quot; | $Xsed -e 's%^.*/%%'`
+
+# We don't want -fno-exception wen compiling C++ code, so set the
+# no_builtin_flag separately
+if test &quot;$GXX&quot; = yes; then
+  _LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -fno-builtin'
+else
+  _LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=
+fi
+
+if test &quot;$GXX&quot; = yes; then
+  # Set up default GNU C++ configuration
+
+  AC_PROG_LD
+
+  # Check if GNU C++ uses GNU ld as the underlying linker, since the
+  # archiving commands below assume that GNU ld is being used.
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $wl$soname -o $lib'
+    _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared -nostdlib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
+
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}--rpath ${wl}$libdir'
+    _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
+
+    # If archive_cmds runs LD, not CC, wlarc should be empty
+    # XXX I think wlarc can be eliminated in ltcf-cxx, but I need to
+    #     investigate it a little bit more. (MM)
+    wlarc='${wl}'
+
+    # ancient GNU ld didn't support --whole-archive et. al.
+    if eval &quot;`$CC -print-prog-name=ld` --help 2&gt;&amp;1&quot; | \
+	grep 'no-whole-archive' &gt; /dev/null; then
+      _LT_AC_TAGVAR(whole_archive_flag_spec, $1)=&quot;$wlarc&quot;'--whole-archive$convenience '&quot;$wlarc&quot;'--no-whole-archive'
+    else
+      _LT_AC_TAGVAR(whole_archive_flag_spec, $1)=
+    fi
+  else
+    with_gnu_ld=no
+    wlarc=
+
+    # A generic and very simple default shared library creation
+    # command for GNU C++ for the case where it uses the native
+    # linker, instead of GNU ld.  If possible, this setting should
+    # overridden to take advantage of the native linker features on
+    # the platform it is being used on.
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects -o $lib'
+  fi
+
+  # Commands to make compiler produce verbose output that lists
+  # what &quot;hidden&quot; libraries, object files and flags are used when
+  # linking a shared library.
+  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;\-L&quot;'
+
+else
+  GXX=no
+  with_gnu_ld=no
+  wlarc=
+fi
+
+# PORTME: fill in a description of your system's C++ link characteristics
+AC_MSG_CHECKING([whether the $compiler linker ($LD) supports shared libraries])
+_LT_AC_TAGVAR(ld_shlibs, $1)=yes
+case $host_os in
+  aix3*)
+    # FIXME: insert proper C++ library support
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+  aix4* | aix5*)
+    if test &quot;$host_cpu&quot; = ia64; then
+      # On IA64, the linker does run time linking by default, so we don't
+      # have to do anything special.
+      aix_use_runtimelinking=no
+      exp_sym_flag='-Bexport'
+      no_entry_flag=&quot;&quot;
+    else
+      # KDE requires run time linking.  Make it the default.
+      aix_use_runtimelinking=yes
+      exp_sym_flag='-bexport'
+      no_entry_flag='-bnoentry'
+    fi
+
+    # When large executables or shared objects are built, AIX ld can
+    # have problems creating the table of contents.  If linking a library
+    # or program results in &quot;error TOC overflow&quot; add -mminimal-toc to
+    # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
+    # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.
+
+    _LT_AC_TAGVAR(archive_cmds, $1)=''
+    _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+    _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=':'
+    _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+
+    if test &quot;$GXX&quot; = yes; then
+      case $host_os in aix4.[012]|aix4.[012].*)
+      # We only want to do this on AIX 4.2 and lower, the check
+      # below for broken collect2 doesn't work under 4.3+
+	collect2name=`${CC} -print-prog-name=collect2`
+	if test -f &quot;$collect2name&quot; &amp;&amp; \
+	   strings &quot;$collect2name&quot; | grep resolve_lib_name &gt;/dev/null
+	then
+	  # We have reworked collect2
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+	else
+	  # We have old collect2
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=unsupported
+	  # It fails to find uninstalled libraries when the uninstalled
+	  # path is not listed in the libpath.  Setting hardcode_minus_L
+	  # to unsupported forces relinking
+	  _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
+	fi
+      esac
+      shared_flag='-shared'
+    else
+      # not using gcc
+      if test &quot;$host_cpu&quot; = ia64; then
+	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
+	# chokes on -Wl,-G. The following line is correct:
+	shared_flag='-G'
+      else
+	if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	  shared_flag='-qmkshrobj ${wl}-G'
+	else
+	  shared_flag='-qmkshrobj'
+	fi
+      fi
+    fi
+
+    # Let the compiler handle the export list.
+    _LT_AC_TAGVAR(always_export_symbols, $1)=no
+    if test &quot;$aix_use_runtimelinking&quot; = yes; then
+      # Warning - without using the other runtime loading flags (-brtl),
+      # -berok will link without error, but may produce a broken library.
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)='-berok'
+      # Determine the default libpath from the value encoded in an empty executable.
+      _LT_AC_SYS_LIBPATH_AIX
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
+
+      _LT_AC_TAGVAR(archive_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot; $shared_flag&quot;
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+     else
+      if test &quot;$host_cpu&quot; = ia64; then
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $libdir:/usr/lib:/lib'
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=&quot;-z nodefs&quot;
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+      else
+	# Determine the default libpath from the value encoded in an empty executable.
+	_LT_AC_SYS_LIBPATH_AIX
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
+	# Warning - without using the other run time loading flags,
+	# -berok will link without error, but may produce a broken library.
+	_LT_AC_TAGVAR(no_undefined_flag, $1)=' ${wl}-bernotok'
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-berok'
+	# -bexpall does not export symbols beginning with underscore (_)
+	_LT_AC_TAGVAR(always_export_symbols, $1)=yes
+	# Exported symbols can be pulled into shared objects from archives
+	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)=' '
+	_LT_AC_TAGVAR(archive_cmds_need_lc, $1)=yes
+	# This is similar to how AIX traditionally builds it's shared libraries.
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+      fi
+    fi
+    ;;
+  chorus*)
+    case $cc_basename in
+      *)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+    esac
+    ;;
+
+  cygwin* | mingw* | pw32*)
+    # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1) is actually meaningless,
+    # as there is no search path for DLLs.
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+    _LT_AC_TAGVAR(allow_undefined_flag, $1)=no
+    _LT_AC_TAGVAR(always_export_symbols, $1)=no
+    _LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
+
+    if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+      # If the export-symbols file already is a .def file (1st line
+      # is EXPORTS), use it as is; otherwise, prepend...
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
+	cp $export_symbols $output_objdir/$soname.def;
+      else
+	echo EXPORTS &gt; $output_objdir/$soname.def;
+	cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
+      fi~
+      $CC -shared -nostdlib $output_objdir/$soname.def $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+    else
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    fi
+  ;;
+
+  darwin* | rhapsody*)
+  if test &quot;$GXX&quot; = yes; then
+    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    case &quot;$host_os&quot; in
+    rhapsody* | darwin1.[[012]])
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-undefined -Wl,suppress'
+      ;;
+    *) # Darwin 1.3 on
+      if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+      else
+	case ${MACOSX_DEPLOYMENT_TARGET} in
+	  10.[012])
+	    _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	    ;;
+	  10.*)
+	    _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-undefined -Wl,dynamic_lookup'
+	    ;;
+	esac
+      fi
+      ;;
+    esac
+    lt_int_apple_cc_single_mod=no
+    output_verbose_link_cmd='echo'
+    if $CC -dumpspecs 2&gt;&amp;1 | grep 'single_module' &gt;/dev/null ; then
+      lt_int_apple_cc_single_mod=yes
+    fi
+    if test &quot;X$lt_int_apple_cc_single_mod&quot; = Xyes ; then
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -dynamiclib -single_module $allow_undefined_flag -o $lib $compiler_flags $libobjs $deplibs -install_name $rpath/$soname $verstring'
+    else
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -r ${wl}-bind_at_load -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs~$CC -dynamiclib $allow_undefined_flag -o $lib ${lib}-master.o $compiler_flags $deplibs -install_name $rpath/$soname $verstring'
+    fi
+    _LT_AC_TAGVAR(module_cmds, $1)='$CC ${wl}-bind_at_load $allow_undefined_flag -o $lib -bundle $compiler_flags $libobjs $deplibs'
+
+    # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+    if test &quot;X$lt_int_apple_cc_single_mod&quot; = Xyes ; then
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib -single_module $allow_undefined_flag -o $lib $compiler_flags $libobjs $deplibs -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+    else
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -r ${wl}-bind_at_load -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs~$CC -dynamiclib $allow_undefined_flag -o $lib ${lib}-master.o $compiler_flags $deplibs -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+    fi
+    _LT_AC_TAGVAR(module_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $compiler_flags $libobjs $deplibs~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+    _LT_AC_TAGVAR(hardcode_direct, $1)=no
+    _LT_AC_TAGVAR(hardcode_automatic, $1)=yes
+    _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
+    _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='-all_load $convenience'
+    _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+  else
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+  fi
+    ;;
+
+  dgux*)
+    case $cc_basename in
+      ec++)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      ghcx)
+	# Green Hills C++ Compiler
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      *)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+    esac
+    ;;
+  freebsd[12]*)
+    # C++ shared libraries reported to be fairly broken before switch to ELF
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+  freebsd-elf*)
+    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    ;;
+  freebsd* | kfreebsd*-gnu)
+    # FreeBSD 3 and later use GNU C++ and GNU ld with standard ELF
+    # conventions
+    _LT_AC_TAGVAR(ld_shlibs, $1)=yes
+    ;;
+  gnu*)
+    ;;
+  hpux9*)
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+    _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+    _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+    _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+    _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
+				# but as the default
+				# location of the library.
+
+    case $cc_basename in
+    CC)
+      # FIXME: insert proper C++ library support
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+    aCC)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$rm $output_objdir/$soname~$CC -b ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
+      # Commands to make compiler produce verbose output that lists
+      # what &quot;hidden&quot; libraries, object files and flags are used when
+      # linking a shared library.
+      #
+      # There doesn't appear to be a way to prevent this compiler from
+      # explicitly linking system object files so we need to strip them
+      # from the output so that they don't get included in the library
+      # dependencies.
+      output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2&gt;&amp;1) | egrep &quot;\-L&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+      ;;
+    *)
+      if test &quot;$GXX&quot; = yes; then
+        _LT_AC_TAGVAR(archive_cmds, $1)='$rm $output_objdir/$soname~$CC -shared -nostdlib -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
+      else
+        # FIXME: insert proper C++ library support
+        _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      fi
+      ;;
+    esac
+    ;;
+  hpux10*|hpux11*)
+    if test $with_gnu_ld = no; then
+      case &quot;$host_cpu&quot; in
+      hppa*64*)
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='+b $libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+        ;;
+      ia64*)
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+        ;;
+      *)
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+        ;;
+      esac
+    fi
+    case &quot;$host_cpu&quot; in
+    hppa*64*)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=no
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+    ia64*)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=no
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
+					      # but as the default
+					      # location of the library.
+      ;;
+    *)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes # Not in the search PATH,
+					      # but as the default
+					      # location of the library.
+      ;;
+    esac
+
+    case $cc_basename in
+      CC)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      aCC)
+	case &quot;$host_cpu&quot; in
+	hppa*64*|ia64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname -o $lib $linker_flags $libobjs $deplibs'
+	  ;;
+	*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -b ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects'
+	  ;;
+	esac
+	# Commands to make compiler produce verbose output that lists
+	# what &quot;hidden&quot; libraries, object files and flags are used when
+	# linking a shared library.
+	#
+	# There doesn't appear to be a way to prevent this compiler from
+	# explicitly linking system object files so we need to strip them
+	# from the output so that they don't get included in the library
+	# dependencies.
+	output_verbose_link_cmd='templist=`($CC -b $CFLAGS -v conftest.$objext 2&gt;&amp;1) | grep &quot;\-L&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+	;;
+      *)
+	if test &quot;$GXX&quot; = yes; then
+	  if test $with_gnu_ld = no; then
+	    case &quot;$host_cpu&quot; in
+	    ia64*|hppa*64*)
+	      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname -o $lib $linker_flags $libobjs $deplibs'
+	      ;;
+	    *)
+	      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects'
+	      ;;
+	    esac
+	  fi
+	else
+	  # FIXME: insert proper C++ library support
+	  _LT_AC_TAGVAR(ld_shlibs, $1)=no
+	fi
+	;;
+    esac
+    ;;
+  irix5* | irix6*)
+    case $cc_basename in
+      CC)
+	# SGI C++
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -all -multigot $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects -soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'
+
+	# Archives containing C++ object files must be created using
+	# &quot;CC -ar&quot;, where &quot;CC&quot; is the IRIX C++ compiler.  This is
+	# necessary to make sure instantiated templates are included
+	# in the archive.
+	_LT_AC_TAGVAR(old_archive_cmds, $1)='$CC -ar -WR,-u -o $oldlib $oldobjs'
+	;;
+      *)
+	if test &quot;$GXX&quot; = yes; then
+	  if test &quot;$with_gnu_ld&quot; = no; then
+	    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'
+	  else
+	    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` -o $lib'
+	  fi
+	fi
+	_LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+	;;
+    esac
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+    _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+    ;;
+  linux*)
+    case $cc_basename in
+      KCC)
+	# Kuck and Associates, Inc. (KAI) C++ Compiler
+
+	# KCC will only create a shared library if the output file
+	# ends with &quot;.so&quot; (or &quot;.sl&quot; for HP-UX), so rename the library
+	# to its proper name (with version) after linking.
+	_LT_AC_TAGVAR(archive_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e &quot;s/\${tempext}\..*/.so/&quot;`; $CC $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects --soname $soname -o \$templib; mv \$templib $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e &quot;s/\${tempext}\..*/.so/&quot;`; $CC $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects --soname $soname -o \$templib ${wl}-retain-symbols-file,$export_symbols; mv \$templib $lib'
+	# Commands to make compiler produce verbose output that lists
+	# what &quot;hidden&quot; libraries, object files and flags are used when
+	# linking a shared library.
+	#
+	# There doesn't appear to be a way to prevent this compiler from
+	# explicitly linking system object files so we need to strip them
+	# from the output so that they don't get included in the library
+	# dependencies.
+	output_verbose_link_cmd='templist=`$CC $CFLAGS -v conftest.$objext -o libconftest$shared_ext 2&gt;&amp;1 | grep &quot;ld&quot;`; rm -f libconftest$shared_ext; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}--rpath,$libdir'
+	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
+
+	# Archives containing C++ object files must be created using
+	# &quot;CC -Bstatic&quot;, where &quot;CC&quot; is the KAI C++ compiler.
+	_LT_AC_TAGVAR(old_archive_cmds, $1)='$CC -Bstatic -o $oldlib $oldobjs'
+	;;
+      icpc)
+	# Intel C++
+	with_gnu_ld=yes
+	_LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $wl$soname -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
+	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}--whole-archive$convenience ${wl}--no-whole-archive'
+	;;
+      cxx)
+	# Compaq C++
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $wl$soname -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $wl$soname  -o $lib ${wl}-retain-symbols-file $wl$export_symbols'
+
+	runpath_var=LD_RUN_PATH
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-rpath $libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	# Commands to make compiler produce verbose output that lists
+	# what &quot;hidden&quot; libraries, object files and flags are used when
+	# linking a shared library.
+	#
+	# There doesn't appear to be a way to prevent this compiler from
+	# explicitly linking system object files so we need to strip them
+	# from the output so that they don't get included in the library
+	# dependencies.
+	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;ld&quot;`; templist=`echo $templist | $SED &quot;s/\(^.*ld.*\)\( .*ld .*$\)/\1/&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+	;;
+    esac
+    ;;
+  lynxos*)
+    # FIXME: insert proper C++ library support
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+  m88k*)
+    # FIXME: insert proper C++ library support
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+  mvs*)
+    case $cc_basename in
+      cxx)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      *)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+    esac
+    ;;
+  netbsd*)
+    if echo __ELF__ | $CC -E - | grep __ELF__ &gt;/dev/null; then
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable  -o $lib $predep_objects $libobjs $deplibs $postdep_objects $linker_flags'
+      wlarc=
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+    fi
+    # Workaround some broken pre-1.5 toolchains
+    output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep conftest.$objext | $SED -e &quot;s:-lgcc -lc -lgcc::&quot;'
+    ;;
+  osf3*)
+    case $cc_basename in
+      KCC)
+	# Kuck and Associates, Inc. (KAI) C++ Compiler
+
+	# KCC will only create a shared library if the output file
+	# ends with &quot;.so&quot; (or &quot;.sl&quot; for HP-UX), so rename the library
+	# to its proper name (with version) after linking.
+	_LT_AC_TAGVAR(archive_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e &quot;s/\${tempext}\..*/.so/&quot;`; $CC $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects --soname $soname -o \$templib; mv \$templib $lib'
+
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	# Archives containing C++ object files must be created using
+	# &quot;CC -Bstatic&quot;, where &quot;CC&quot; is the KAI C++ compiler.
+	_LT_AC_TAGVAR(old_archive_cmds, $1)='$CC -Bstatic -o $oldlib $oldobjs'
+
+	;;
+      RCC)
+	# Rational C++ 2.4.1
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      cxx)
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'
+
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	# Commands to make compiler produce verbose output that lists
+	# what &quot;hidden&quot; libraries, object files and flags are used when
+	# linking a shared library.
+	#
+	# There doesn't appear to be a way to prevent this compiler from
+	# explicitly linking system object files so we need to strip them
+	# from the output so that they don't get included in the library
+	# dependencies.
+	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;ld&quot; | grep -v &quot;ld:&quot;`; templist=`echo $templist | $SED &quot;s/\(^.*ld.*\)\( .*ld.*$\)/\1/&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+	;;
+      *)
+	if test &quot;$GXX&quot; = yes &amp;&amp; test &quot;$with_gnu_ld&quot; = no; then
+	  _LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'
+
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	  # Commands to make compiler produce verbose output that lists
+	  # what &quot;hidden&quot; libraries, object files and flags are used when
+	  # linking a shared library.
+	  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;\-L&quot;'
+
+	else
+	  # FIXME: insert proper C++ library support
+	  _LT_AC_TAGVAR(ld_shlibs, $1)=no
+	fi
+	;;
+    esac
+    ;;
+  osf4* | osf5*)
+    case $cc_basename in
+      KCC)
+	# Kuck and Associates, Inc. (KAI) C++ Compiler
+
+	# KCC will only create a shared library if the output file
+	# ends with &quot;.so&quot; (or &quot;.sl&quot; for HP-UX), so rename the library
+	# to its proper name (with version) after linking.
+	_LT_AC_TAGVAR(archive_cmds, $1)='tempext=`echo $shared_ext | $SED -e '\''s/\([[^()0-9A-Za-z{}]]\)/\\\\\1/g'\''`; templib=`echo $lib | $SED -e &quot;s/\${tempext}\..*/.so/&quot;`; $CC $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects --soname $soname -o \$templib; mv \$templib $lib'
+
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	# Archives containing C++ object files must be created using
+	# the KAI C++ compiler.
+	_LT_AC_TAGVAR(old_archive_cmds, $1)='$CC -o $oldlib $oldobjs'
+	;;
+      RCC)
+	# Rational C++ 2.4.1
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      cxx)
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' -expect_unresolved \*'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects -msym -soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='for i in `cat $export_symbols`; do printf &quot;%s %s\\n&quot; -exported_symbol &quot;\$i&quot; &gt;&gt; $lib.exp; done~
+	  echo &quot;-hidden&quot;&gt;&gt; $lib.exp~
+	  $CC -shared$allow_undefined_flag $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects -msym -soname $soname -Wl,-input -Wl,$lib.exp  `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version	$verstring` -update_registry $objdir/so_locations -o $lib~
+	  $rm $lib.exp'
+
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-rpath $libdir'
+	_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	# Commands to make compiler produce verbose output that lists
+	# what &quot;hidden&quot; libraries, object files and flags are used when
+	# linking a shared library.
+	#
+	# There doesn't appear to be a way to prevent this compiler from
+	# explicitly linking system object files so we need to strip them
+	# from the output so that they don't get included in the library
+	# dependencies.
+	output_verbose_link_cmd='templist=`$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;ld&quot; | grep -v &quot;ld:&quot;`; templist=`echo $templist | $SED &quot;s/\(^.*ld.*\)\( .*ld.*$\)/\1/&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+	;;
+      *)
+	if test &quot;$GXX&quot; = yes &amp;&amp; test &quot;$with_gnu_ld&quot; = no; then
+	  _LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
+	 _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib ${allow_undefined_flag} $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-msym ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${objdir}/so_locations -o $lib'
+
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+
+	  # Commands to make compiler produce verbose output that lists
+	  # what &quot;hidden&quot; libraries, object files and flags are used when
+	  # linking a shared library.
+	  output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;\-L&quot;'
+
+	else
+	  # FIXME: insert proper C++ library support
+	  _LT_AC_TAGVAR(ld_shlibs, $1)=no
+	fi
+	;;
+    esac
+    ;;
+  psos*)
+    # FIXME: insert proper C++ library support
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+  sco*)
+    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    case $cc_basename in
+      CC)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      *)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+    esac
+    ;;
+  sunos4*)
+    case $cc_basename in
+      CC)
+	# Sun C++ 4.x
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      lcc)
+	# Lucid
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      *)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+    esac
+    ;;
+  solaris*)
+    case $cc_basename in
+      CC)
+	# Sun C++ 4.2, 5.x and Centerline C++
+	_LT_AC_TAGVAR(no_undefined_flag, $1)=' -zdefs'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G${allow_undefined_flag} -nolib -h$soname -o $lib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
+	$CC -G${allow_undefined_flag} -nolib ${wl}-M ${wl}$lib.exp -h$soname -o $lib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects~$rm $lib.exp'
+
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+	_LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+	case $host_os in
+	  solaris2.[0-5] | solaris2.[0-5].*) ;;
+	  *)
+	    # The C++ compiler is used as linker so we must use $wl
+	    # flag to pass the commands to the underlying system
+	    # linker.
+	    # Supported since Solaris 2.6 (maybe 2.5.1?)
+	    _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='${wl}-z ${wl}allextract$convenience ${wl}-z ${wl}defaultextract'
+	    ;;
+	esac
+	_LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+
+	# Commands to make compiler produce verbose output that lists
+	# what &quot;hidden&quot; libraries, object files and flags are used when
+	# linking a shared library.
+	#
+	# There doesn't appear to be a way to prevent this compiler from
+	# explicitly linking system object files so we need to strip them
+	# from the output so that they don't get included in the library
+	# dependencies.
+	output_verbose_link_cmd='templist=`$CC -G $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep &quot;\-[[LR]]&quot;`; list=&quot;&quot;; for z in $templist; do case $z in conftest.$objext) list=&quot;$list $z&quot;;; *.$objext);; *) list=&quot;$list $z&quot;;;esac; done; echo $list'
+
+	# Archives containing C++ object files must be created using
+	# &quot;CC -xar&quot;, where &quot;CC&quot; is the Sun C++ compiler.  This is
+	# necessary to make sure instantiated templates are included
+	# in the archive.
+	_LT_AC_TAGVAR(old_archive_cmds, $1)='$CC -xar -o $oldlib $oldobjs'
+	;;
+      gcx)
+	# Green Hills C++ Compiler
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-h $wl$soname -o $lib'
+
+	# The C++ compiler must be used to create the archive.
+	_LT_AC_TAGVAR(old_archive_cmds, $1)='$CC $LDFLAGS -archive -o $oldlib $oldobjs'
+	;;
+      *)
+	# GNU C++ compiler with Solaris linker
+	if test &quot;$GXX&quot; = yes &amp;&amp; test &quot;$with_gnu_ld&quot; = no; then
+	  _LT_AC_TAGVAR(no_undefined_flag, $1)=' ${wl}-z ${wl}defs'
+	  if $CC --version | grep -v '^2\.7' &gt; /dev/null; then
+	    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -nostdlib $LDFLAGS $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-h $wl$soname -o $lib'
+	    _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
+		$CC -shared -nostdlib ${wl}-M $wl$lib.exp -o $lib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects~$rm $lib.exp'
+
+	    # Commands to make compiler produce verbose output that lists
+	    # what &quot;hidden&quot; libraries, object files and flags are used when
+	    # linking a shared library.
+	    output_verbose_link_cmd=&quot;$CC -shared $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep \&quot;\-L\&quot;&quot;
+	  else
+	    # g++ 2.7 appears to require `-G' NOT `-shared' on this
+	    # platform.
+	    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -G -nostdlib $LDFLAGS $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects ${wl}-h $wl$soname -o $lib'
+	    _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
+		$CC -G -nostdlib ${wl}-M $wl$lib.exp -o $lib $compiler_flags $predep_objects $libobjs $deplibs $postdep_objects~$rm $lib.exp'
+
+	    # Commands to make compiler produce verbose output that lists
+	    # what &quot;hidden&quot; libraries, object files and flags are used when
+	    # linking a shared library.
+	    output_verbose_link_cmd=&quot;$CC -G $CFLAGS -v conftest.$objext 2&gt;&amp;1 | grep \&quot;\-L\&quot;&quot;
+	  fi
+
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $wl$libdir'
+	fi
+	;;
+    esac
+    ;;
+  sysv5OpenUNIX8* | sysv5UnixWare7* | sysv5uw[[78]]* | unixware7*)
+    _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+    ;;
+  tandem*)
+    case $cc_basename in
+      NCC)
+	# NonStop-UX NCC 3.20
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+      *)
+	# FIXME: insert proper C++ library support
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	;;
+    esac
+    ;;
+  vxworks*)
+    # FIXME: insert proper C++ library support
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+  *)
+    # FIXME: insert proper C++ library support
+    _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    ;;
+esac
+AC_MSG_RESULT([$_LT_AC_TAGVAR(ld_shlibs, $1)])
+test &quot;$_LT_AC_TAGVAR(ld_shlibs, $1)&quot; = no &amp;&amp; can_build_shared=no
+
+_LT_AC_TAGVAR(GCC, $1)=&quot;$GXX&quot;
+_LT_AC_TAGVAR(LD, $1)=&quot;$LD&quot;
+
+## CAVEAT EMPTOR:
+## There is no encapsulation within the following macros, do not change
+## the running order or otherwise move them around unless you know exactly
+## what you are doing...
+AC_LIBTOOL_POSTDEP_PREDEP($1)
+AC_LIBTOOL_PROG_COMPILER_PIC($1)
+AC_LIBTOOL_PROG_CC_C_O($1)
+AC_LIBTOOL_SYS_HARD_LINK_LOCKS($1)
+AC_LIBTOOL_PROG_LD_SHLIBS($1)
+AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
+AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
+AC_LIBTOOL_SYS_LIB_STRIP
+AC_LIBTOOL_DLOPEN_SELF($1)
+
+AC_LIBTOOL_CONFIG($1)
+
+AC_LANG_POP
+CC=$lt_save_CC
+LDCXX=$LD
+LD=$lt_save_LD
+GCC=$lt_save_GCC
+with_gnu_ldcxx=$with_gnu_ld
+with_gnu_ld=$lt_save_with_gnu_ld
+lt_cv_path_LDCXX=$lt_cv_path_LD
+lt_cv_path_LD=$lt_save_path_LD
+lt_cv_prog_gnu_ldcxx=$lt_cv_prog_gnu_ld
+lt_cv_prog_gnu_ld=$lt_save_with_gnu_ld
+])# AC_LIBTOOL_LANG_CXX_CONFIG
+
+# AC_LIBTOOL_POSTDEP_PREDEP([TAGNAME])
+# ------------------------
+# Figure out &quot;hidden&quot; library dependencies from verbose
+# compiler output when linking a shared library.
+# Parse the compiler output and extract the necessary
+# objects, libraries and library flags.
+AC_DEFUN([AC_LIBTOOL_POSTDEP_PREDEP],[
+dnl we can't use the lt_simple_compile_test_code here,
+dnl because it contains code intended for an executable,
+dnl not a library.  It's possible we should let each
+dnl tag define a new lt_????_link_test_code variable,
+dnl but it's only used here...
+ifelse([$1],[],[cat &gt; conftest.$ac_ext &lt;&lt;EOF
+int a;
+void foo (void) { a = 0; }
+EOF
+],[$1],[CXX],[cat &gt; conftest.$ac_ext &lt;&lt;EOF
+class Foo
+{
+public:
+  Foo (void) { a = 0; }
+private:
+  int a;
+};
+EOF
+],[$1],[F77],[cat &gt; conftest.$ac_ext &lt;&lt;EOF
+      subroutine foo
+      implicit none
+      integer*4 a
+      a=0
+      return
+      end
+EOF
+],[$1],[GCJ],[cat &gt; conftest.$ac_ext &lt;&lt;EOF
+public class foo {
+  private int a;
+  public void bar (void) {
+    a = 0;
+  }
+};
+EOF
+])
+dnl Parse the compiler output and extract the necessary
+dnl objects, libraries and library flags.
+if AC_TRY_EVAL(ac_compile); then
+  # Parse the compiler output and extract the necessary
+  # objects, libraries and library flags.
+
+  # Sentinel used to keep track of whether or not we are before
+  # the conftest object file.
+  pre_test_object_deps_done=no
+
+  # The `*' in the case matches for architectures that use `case' in
+  # $output_verbose_cmd can trigger glob expansion during the loop
+  # eval without this substitution.
+  output_verbose_link_cmd=&quot;`$echo \&quot;X$output_verbose_link_cmd\&quot; | $Xsed -e \&quot;$no_glob_subst\&quot;`&quot;
+
+  for p in `eval $output_verbose_link_cmd`; do
+    case $p in
+
+    -L* | -R* | -l*)
+       # Some compilers place space between &quot;-{L,R}&quot; and the path.
+       # Remove the space.
+       if test $p = &quot;-L&quot; \
+	  || test $p = &quot;-R&quot;; then
+	 prev=$p
+	 continue
+       else
+	 prev=
+       fi
+
+       if test &quot;$pre_test_object_deps_done&quot; = no; then
+	 case $p in
+	 -L* | -R*)
+	   # Internal compiler library paths should come after those
+	   # provided the user.  The postdeps already come after the
+	   # user supplied libs so there is no need to process them.
+	   if test -z &quot;$_LT_AC_TAGVAR(compiler_lib_search_path, $1)&quot;; then
+	     _LT_AC_TAGVAR(compiler_lib_search_path, $1)=&quot;${prev}${p}&quot;
+	   else
+	     _LT_AC_TAGVAR(compiler_lib_search_path, $1)=&quot;${_LT_AC_TAGVAR(compiler_lib_search_path, $1)} ${prev}${p}&quot;
+	   fi
+	   ;;
+	 # The &quot;-l&quot; case would never come before the object being
+	 # linked, so don't bother handling this case.
+	 esac
+       else
+	 if test -z &quot;$_LT_AC_TAGVAR(postdeps, $1)&quot;; then
+	   _LT_AC_TAGVAR(postdeps, $1)=&quot;${prev}${p}&quot;
+	 else
+	   _LT_AC_TAGVAR(postdeps, $1)=&quot;${_LT_AC_TAGVAR(postdeps, $1)} ${prev}${p}&quot;
+	 fi
+       fi
+       ;;
+
+    *.$objext|*.$libext)
+       # This assumes that the test object file only shows up
+       # once in the compiler output.
+       if test &quot;$p&quot; = &quot;conftest.$objext&quot;; then
+	 pre_test_object_deps_done=yes
+	 continue
+       fi
+
+       if test &quot;$pre_test_object_deps_done&quot; = no; then
+	 if test -z &quot;$_LT_AC_TAGVAR(predep_objects, $1)&quot;; then
+	   _LT_AC_TAGVAR(predep_objects, $1)=&quot;$p&quot;
+	 else
+	   _LT_AC_TAGVAR(predep_objects, $1)=&quot;$_LT_AC_TAGVAR(predep_objects, $1) $p&quot;
+	 fi
+       else
+	 if test -z &quot;$_LT_AC_TAGVAR(postdep_objects, $1)&quot;; then
+	   _LT_AC_TAGVAR(postdep_objects, $1)=&quot;$p&quot;
+	 else
+	   _LT_AC_TAGVAR(postdep_objects, $1)=&quot;$_LT_AC_TAGVAR(postdep_objects, $1) $p&quot;
+	 fi
+       fi
+       ;;
+
+    *) ;; # Ignore the rest.
+
+    esac
+  done
+
+  # Clean up.
+  rm -f a.out a.exe
+else
+  echo &quot;libtool.m4: error: problem compiling $1 test program&quot;
+fi
+
+$rm -f confest.$objext
+
+case &quot; $_LT_AC_TAGVAR(postdeps, $1) &quot; in
+*&quot; -lc &quot;*) _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no ;;
+esac
+])# AC_LIBTOOL_POSTDEP_PREDEP
+
+# AC_LIBTOOL_LANG_F77_CONFIG
+# ------------------------
+# Ensure that the configuration vars for the C compiler are
+# suitably defined.  Those variables are subsequently used by
+# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
+AC_DEFUN([AC_LIBTOOL_LANG_F77_CONFIG], [_LT_AC_LANG_F77_CONFIG(F77)])
+AC_DEFUN([_LT_AC_LANG_F77_CONFIG],
+[AC_REQUIRE([AC_PROG_F77])
+AC_LANG_PUSH(Fortran 77)
+
+_LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+_LT_AC_TAGVAR(allow_undefined_flag, $1)=
+_LT_AC_TAGVAR(always_export_symbols, $1)=no
+_LT_AC_TAGVAR(archive_expsym_cmds, $1)=
+_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)=
+_LT_AC_TAGVAR(hardcode_direct, $1)=no
+_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)=
+_LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
+_LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
+_LT_AC_TAGVAR(hardcode_minus_L, $1)=no
+_LT_AC_TAGVAR(hardcode_automatic, $1)=no
+_LT_AC_TAGVAR(module_cmds, $1)=
+_LT_AC_TAGVAR(module_expsym_cmds, $1)=
+_LT_AC_TAGVAR(link_all_deplibs, $1)=unknown
+_LT_AC_TAGVAR(old_archive_cmds, $1)=$old_archive_cmds
+_LT_AC_TAGVAR(no_undefined_flag, $1)=
+_LT_AC_TAGVAR(whole_archive_flag_spec, $1)=
+_LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=no
+
+# Source file extension for f77 test sources.
+ac_ext=f
+
+# Object file extension for compiled f77 test sources.
+objext=o
+_LT_AC_TAGVAR(objext, $1)=$objext
+
+# Code to be used in simple compile tests
+lt_simple_compile_test_code=&quot;      subroutine t\n      return\n      end\n&quot;
+
+# Code to be used in simple link tests
+lt_simple_link_test_code=&quot;      program t\n      end\n&quot;
+
+# ltmain only uses $CC for tagged configurations so make sure $CC is set.
+_LT_AC_SYS_COMPILER
+
+# Allow CC to be a program name with arguments.
+lt_save_CC=&quot;$CC&quot;
+CC=${F77-&quot;f77&quot;}
+compiler=$CC
+_LT_AC_TAGVAR(compiler, $1)=$CC
+cc_basename=`$echo X&quot;$compiler&quot; | $Xsed -e 's%^.*/%%'`
+
+AC_MSG_CHECKING([if libtool supports shared libraries])
+AC_MSG_RESULT([$can_build_shared])
+
+AC_MSG_CHECKING([whether to build shared libraries])
+test &quot;$can_build_shared&quot; = &quot;no&quot; &amp;&amp; enable_shared=no
+
+# On AIX, shared libraries and static libraries use the same namespace, and
+# are all built from PIC.
+case &quot;$host_os&quot; in
+aix3*)
+  test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
+  if test -n &quot;$RANLIB&quot;; then
+    archive_cmds=&quot;$archive_cmds~\$RANLIB \$lib&quot;
+    postinstall_cmds='$RANLIB $lib'
+  fi
+  ;;
+aix4*)
+  test &quot;$enable_shared&quot; = yes &amp;&amp; enable_static=no
+  ;;
+esac
+AC_MSG_RESULT([$enable_shared])
+
+AC_MSG_CHECKING([whether to build static libraries])
+# Make sure either enable_shared or enable_static is yes.
+test &quot;$enable_shared&quot; = yes || enable_static=yes
+AC_MSG_RESULT([$enable_static])
+
+test &quot;$_LT_AC_TAGVAR(ld_shlibs, $1)&quot; = no &amp;&amp; can_build_shared=no
+
+_LT_AC_TAGVAR(GCC, $1)=&quot;$G77&quot;
+_LT_AC_TAGVAR(LD, $1)=&quot;$LD&quot;
+
+AC_LIBTOOL_PROG_COMPILER_PIC($1)
+AC_LIBTOOL_PROG_CC_C_O($1)
+AC_LIBTOOL_SYS_HARD_LINK_LOCKS($1)
+AC_LIBTOOL_PROG_LD_SHLIBS($1)
+AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
+AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
+AC_LIBTOOL_SYS_LIB_STRIP
+
+
+AC_LIBTOOL_CONFIG($1)
+
+AC_LANG_POP
+CC=&quot;$lt_save_CC&quot;
+])# AC_LIBTOOL_LANG_F77_CONFIG
+
+
+# AC_LIBTOOL_LANG_GCJ_CONFIG
+# --------------------------
+# Ensure that the configuration vars for the C compiler are
+# suitably defined.  Those variables are subsequently used by
+# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
+AC_DEFUN([AC_LIBTOOL_LANG_GCJ_CONFIG], [_LT_AC_LANG_GCJ_CONFIG(GCJ)])
+AC_DEFUN([_LT_AC_LANG_GCJ_CONFIG],
+[AC_LANG_SAVE
+
+# Source file extension for Java test sources.
+ac_ext=java
+
+# Object file extension for compiled Java test sources.
+objext=o
+_LT_AC_TAGVAR(objext, $1)=$objext
+
+# Code to be used in simple compile tests
+lt_simple_compile_test_code=&quot;class foo {}\n&quot;
+
+# Code to be used in simple link tests
+lt_simple_link_test_code='public class conftest { public static void main(String[] argv) {}; }\n'
+
+# ltmain only uses $CC for tagged configurations so make sure $CC is set.
+_LT_AC_SYS_COMPILER
+
+# Allow CC to be a program name with arguments.
+lt_save_CC=&quot;$CC&quot;
+CC=${GCJ-&quot;gcj&quot;}
+compiler=$CC
+_LT_AC_TAGVAR(compiler, $1)=$CC
+
+# GCJ did not exist at the time GCC didn't implicitly link libc in.
+_LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+
+## CAVEAT EMPTOR:
+## There is no encapsulation within the following macros, do not change
+## the running order or otherwise move them around unless you know exactly
+## what you are doing...
+AC_LIBTOOL_PROG_COMPILER_NO_RTTI($1)
+AC_LIBTOOL_PROG_COMPILER_PIC($1)
+AC_LIBTOOL_PROG_CC_C_O($1)
+AC_LIBTOOL_SYS_HARD_LINK_LOCKS($1)
+AC_LIBTOOL_PROG_LD_SHLIBS($1)
+AC_LIBTOOL_SYS_DYNAMIC_LINKER($1)
+AC_LIBTOOL_PROG_LD_HARDCODE_LIBPATH($1)
+AC_LIBTOOL_SYS_LIB_STRIP
+AC_LIBTOOL_DLOPEN_SELF($1)
+
+AC_LIBTOOL_CONFIG($1)
+
+AC_LANG_RESTORE
+CC=&quot;$lt_save_CC&quot;
+])# AC_LIBTOOL_LANG_GCJ_CONFIG
+
+
+# AC_LIBTOOL_LANG_RC_CONFIG
+# --------------------------
+# Ensure that the configuration vars for the Windows resource compiler are
+# suitably defined.  Those variables are subsequently used by
+# AC_LIBTOOL_CONFIG to write the compiler configuration to `libtool'.
+AC_DEFUN([AC_LIBTOOL_LANG_RC_CONFIG], [_LT_AC_LANG_RC_CONFIG(RC)])
+AC_DEFUN([_LT_AC_LANG_RC_CONFIG],
+[AC_LANG_SAVE
+
+# Source file extension for RC test sources.
+ac_ext=rc
+
+# Object file extension for compiled RC test sources.
+objext=o
+_LT_AC_TAGVAR(objext, $1)=$objext
+
+# Code to be used in simple compile tests
+lt_simple_compile_test_code='sample MENU { MENUITEM &quot;&amp;Soup&quot;, 100, CHECKED }\n'
+
+# Code to be used in simple link tests
+lt_simple_link_test_code=&quot;$lt_simple_compile_test_code&quot;
+
+# ltmain only uses $CC for tagged configurations so make sure $CC is set.
+_LT_AC_SYS_COMPILER
+
+# Allow CC to be a program name with arguments.
+lt_save_CC=&quot;$CC&quot;
+CC=${RC-&quot;windres&quot;}
+compiler=$CC
+_LT_AC_TAGVAR(compiler, $1)=$CC
+_LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)=yes
+
+AC_LIBTOOL_CONFIG($1)
+
+AC_LANG_RESTORE
+CC=&quot;$lt_save_CC&quot;
+])# AC_LIBTOOL_LANG_RC_CONFIG
+
+
+# AC_LIBTOOL_CONFIG([TAGNAME])
+# ----------------------------
+# If TAGNAME is not passed, then create an initial libtool script
+# with a default configuration from the untagged config vars.  Otherwise
+# add code to config.status for appending the configuration named by
+# TAGNAME from the matching tagged config vars.
+AC_DEFUN([AC_LIBTOOL_CONFIG],
+[# The else clause should only fire when bootstrapping the
+# libtool distribution, otherwise you forgot to ship ltmain.sh
+# with your package, and you will get complaints that there are
+# no rules to generate ltmain.sh.
+if test -f &quot;$ltmain&quot;; then
+  # See if we are running on zsh, and set the options which allow our commands through
+  # without removal of \ escapes.
+  if test -n &quot;${ZSH_VERSION+set}&quot; ; then
+    setopt NO_GLOB_SUBST
+  fi  
+  # Now quote all the things that may contain metacharacters while being
+  # careful not to overquote the AC_SUBSTed values.  We take copies of the
+  # variables and quote the copies for generation of the libtool script.
+  for var in echo old_CC old_CFLAGS AR AR_FLAGS EGREP RANLIB LN_S LTCC NM SED SHELL \
+    libname_spec library_names_spec soname_spec extract_expsyms_cmds \
+    old_striplib striplib file_magic_cmd finish_cmds finish_eval \
+    deplibs_check_method reload_flag reload_cmds need_locks \
+    lt_cv_sys_global_symbol_pipe lt_cv_sys_global_symbol_to_cdecl \
+    lt_cv_sys_global_symbol_to_c_name_address \
+    sys_lib_search_path_spec sys_lib_dlsearch_path_spec \
+    old_postinstall_cmds old_postuninstall_cmds \
+    _LT_AC_TAGVAR(compiler, $1) \
+    _LT_AC_TAGVAR(CC, $1) \
+    _LT_AC_TAGVAR(LD, $1) \
+    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1) \
+    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1) \
+    _LT_AC_TAGVAR(lt_prog_compiler_static, $1) \
+    _LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1) \
+    _LT_AC_TAGVAR(export_dynamic_flag_spec, $1) \
+    _LT_AC_TAGVAR(thread_safe_flag_spec, $1) \
+    _LT_AC_TAGVAR(whole_archive_flag_spec, $1) \
+    _LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1) \
+    _LT_AC_TAGVAR(old_archive_cmds, $1) \
+    _LT_AC_TAGVAR(old_archive_from_new_cmds, $1) \
+    _LT_AC_TAGVAR(predep_objects, $1) \
+    _LT_AC_TAGVAR(postdep_objects, $1) \
+    _LT_AC_TAGVAR(predeps, $1) \
+    _LT_AC_TAGVAR(postdeps, $1) \
+    _LT_AC_TAGVAR(compiler_lib_search_path, $1) \
+    _LT_AC_TAGVAR(archive_cmds, $1) \
+    _LT_AC_TAGVAR(archive_expsym_cmds, $1) \
+    _LT_AC_TAGVAR(postinstall_cmds, $1) \
+    _LT_AC_TAGVAR(postuninstall_cmds, $1) \
+    _LT_AC_TAGVAR(old_archive_from_expsyms_cmds, $1) \
+    _LT_AC_TAGVAR(allow_undefined_flag, $1) \
+    _LT_AC_TAGVAR(no_undefined_flag, $1) \
+    _LT_AC_TAGVAR(export_symbols_cmds, $1) \
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1) \
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1) \
+    _LT_AC_TAGVAR(hardcode_libdir_separator, $1) \
+    _LT_AC_TAGVAR(hardcode_automatic, $1) \
+    _LT_AC_TAGVAR(module_cmds, $1) \
+    _LT_AC_TAGVAR(module_expsym_cmds, $1) \
+    _LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1) \
+    _LT_AC_TAGVAR(exclude_expsyms, $1) \
+    _LT_AC_TAGVAR(include_expsyms, $1); do
+
+    case $var in
+    _LT_AC_TAGVAR(old_archive_cmds, $1) | \
+    _LT_AC_TAGVAR(old_archive_from_new_cmds, $1) | \
+    _LT_AC_TAGVAR(archive_cmds, $1) | \
+    _LT_AC_TAGVAR(archive_expsym_cmds, $1) | \
+    _LT_AC_TAGVAR(module_cmds, $1) | \
+    _LT_AC_TAGVAR(module_expsym_cmds, $1) | \   
+    _LT_AC_TAGVAR(old_archive_from_expsyms_cmds, $1) | \
+    _LT_AC_TAGVAR(export_symbols_cmds, $1) | \
+    extract_expsyms_cmds | reload_cmds | finish_cmds | \
+    postinstall_cmds | postuninstall_cmds | \
+    old_postinstall_cmds | old_postuninstall_cmds | \
+    sys_lib_search_path_spec | sys_lib_dlsearch_path_spec)
+      # Double-quote double-evaled strings.
+      eval &quot;lt_$var=\\\&quot;\`\$echo \&quot;X\$$var\&quot; | \$Xsed -e \&quot;\$double_quote_subst\&quot; -e \&quot;\$sed_quote_subst\&quot; -e \&quot;\$delay_variable_subst\&quot;\`\\\&quot;&quot;
+      ;;
+    *)
+      eval &quot;lt_$var=\\\&quot;\`\$echo \&quot;X\$$var\&quot; | \$Xsed -e \&quot;\$sed_quote_subst\&quot;\`\\\&quot;&quot;
+      ;;
+    esac
+  done
+
+  case $lt_echo in
+  *'\[$]0 --fallback-echo&quot;')
+    lt_echo=`$echo &quot;X$lt_echo&quot; | $Xsed -e 's/\\\\\\\[$]0 --fallback-echo&quot;[$]/[$]0 --fallback-echo&quot;/'`
+    ;;
+  esac
+
+ifelse([$1], [],
+  [cfgfile=&quot;${ofile}T&quot;
+  trap &quot;$rm \&quot;$cfgfile\&quot;; exit 1&quot; 1 2 15
+  $rm -f &quot;$cfgfile&quot;
+  AC_MSG_NOTICE([creating $ofile])],
+  [cfgfile=&quot;$ofile&quot;])
+
+  cat &lt;&lt;__EOF__ &gt;&gt; &quot;$cfgfile&quot;
+ifelse([$1], [],
+[#! $SHELL
+
+# `$echo &quot;$cfgfile&quot; | sed 's%^.*/%%'` - Provide generalized library-building support services.
+# Generated automatically by $PROGRAM (GNU $PACKAGE $VERSION$TIMESTAMP)
+# NOTE: Changes made to this file will be lost: look at ltmain.sh.
+#
+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001
+# Free Software Foundation, Inc.
+#
+# This file is part of GNU Libtool:
+# Originally by Gordon Matzigkeit &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">gord at gnu.ai.mit.edu</A>&gt;, 1996
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+# General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+#
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+# A sed program that does not truncate output.
+SED=$lt_SED
+
+# Sed that helps us avoid accidentally triggering echo(1) options like -n.
+Xsed=&quot;$SED -e s/^X//&quot;
+
+# The HP-UX ksh and POSIX shell print the target directory to stdout
+# if CDPATH is set.
+if test &quot;X\${CDPATH+set}&quot; = Xset; then CDPATH=:; export CDPATH; fi
+
+# The names of the tagged configurations supported by this script.
+available_tags=
+
+# ### BEGIN LIBTOOL CONFIG],
+[# ### BEGIN LIBTOOL TAG CONFIG: $tagname])
+
+# Libtool was configured on host `(hostname || uname -n) 2&gt;/dev/null | sed 1q`:
+
+# Shell to use when invoking shell scripts.
+SHELL=$lt_SHELL
+
+# Whether or not to build shared libraries.
+build_libtool_libs=$enable_shared
+
+# Whether or not to build static libraries.
+build_old_libs=$enable_static
+
+# Whether or not to add -lc for building shared libraries.
+build_libtool_need_lc=$_LT_AC_TAGVAR(archive_cmds_need_lc, $1)
+
+# Whether or not to disallow shared libs when runtime libs are static
+allow_libtool_libs_with_static_runtimes=$_LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)
+
+# Whether or not to optimize for fast installation.
+fast_install=$enable_fast_install
+
+# The host system.
+host_alias=$host_alias
+host=$host
+
+# An echo program that does not interpret backslashes.
+echo=$lt_echo
+
+# The archiver.
+AR=$lt_AR
+AR_FLAGS=$lt_AR_FLAGS
+
+# A C compiler.
+LTCC=$lt_LTCC
+
+# A language-specific compiler.
+CC=$lt_[]_LT_AC_TAGVAR(compiler, $1)
+
+# Is the compiler the GNU C compiler?
+with_gcc=$_LT_AC_TAGVAR(GCC, $1)
+
+# An ERE matcher.
+EGREP=$lt_EGREP
+
+# The linker used to build libraries.
+LD=$lt_[]_LT_AC_TAGVAR(LD, $1)
+
+# Whether we need hard or soft links.
+LN_S=$lt_LN_S
+
+# A BSD-compatible nm program.
+NM=$lt_NM
+
+# A symbol stripping program
+STRIP=$STRIP
+
+# Used to examine libraries when file_magic_cmd begins &quot;file&quot;
+MAGIC_CMD=$MAGIC_CMD
+
+# Used on cygwin: DLL creation program.
+DLLTOOL=&quot;$DLLTOOL&quot;
+
+# Used on cygwin: object dumper.
+OBJDUMP=&quot;$OBJDUMP&quot;
+
+# Used on cygwin: assembler.
+AS=&quot;$AS&quot;
+
+# The name of the directory that contains temporary libtool files.
+objdir=$objdir
+
+# How to create reloadable object files.
+reload_flag=$lt_reload_flag
+reload_cmds=$lt_reload_cmds
+
+# How to pass a linker flag through the compiler.
+wl=$lt_[]_LT_AC_TAGVAR(lt_prog_compiler_wl, $1)
+
+# Object file suffix (normally &quot;o&quot;).
+objext=&quot;$ac_objext&quot;
+
+# Old archive suffix (normally &quot;a&quot;).
+libext=&quot;$libext&quot;
+
+# Shared library suffix (normally &quot;.so&quot;).
+shrext='$shrext'
+
+# Executable file suffix (normally &quot;&quot;).
+exeext=&quot;$exeext&quot;
+
+# Additional compiler flags for building library objects.
+pic_flag=$lt_[]_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)
+pic_mode=$pic_mode
+
+# What is the maximum length of a command?
+max_cmd_len=$lt_cv_sys_max_cmd_len
+
+# Does compiler simultaneously support -c and -o options?
+compiler_c_o=$lt_[]_LT_AC_TAGVAR(lt_cv_prog_compiler_c_o, $1)
+
+# Must we lock files when doing compilation ?
+need_locks=$lt_need_locks
+
+# Do we need the lib prefix for modules?
+need_lib_prefix=$need_lib_prefix
+
+# Do we need a version for libraries?
+need_version=$need_version
+
+# Whether dlopen is supported.
+dlopen_support=$enable_dlopen
+
+# Whether dlopen of programs is supported.
+dlopen_self=$enable_dlopen_self
+
+# Whether dlopen of statically linked programs is supported.
+dlopen_self_static=$enable_dlopen_self_static
+
+# Compiler flag to prevent dynamic linking.
+link_static_flag=$lt_[]_LT_AC_TAGVAR(lt_prog_compiler_static, $1)
+
+# Compiler flag to turn off builtin functions.
+no_builtin_flag=$lt_[]_LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)
+
+# Compiler flag to allow reflexive dlopens.
+export_dynamic_flag_spec=$lt_[]_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)
+
+# Compiler flag to generate shared objects directly from archives.
+whole_archive_flag_spec=$lt_[]_LT_AC_TAGVAR(whole_archive_flag_spec, $1)
+
+# Compiler flag to generate thread-safe objects.
+thread_safe_flag_spec=$lt_[]_LT_AC_TAGVAR(thread_safe_flag_spec, $1)
+
+# Library versioning type.
+version_type=$version_type
+
+# Format of library name prefix.
+libname_spec=$lt_libname_spec
+
+# List of archive names.  First name is the real one, the rest are links.
+# The last name is the one that the linker finds with -lNAME.
+library_names_spec=$lt_library_names_spec
+
+# The coded name of the library, if different from the real name.
+soname_spec=$lt_soname_spec
+
+# Commands used to build and install an old-style archive.
+RANLIB=$lt_RANLIB
+old_archive_cmds=$lt_[]_LT_AC_TAGVAR(old_archive_cmds, $1)
+old_postinstall_cmds=$lt_old_postinstall_cmds
+old_postuninstall_cmds=$lt_old_postuninstall_cmds
+
+# Create an old-style archive from a shared archive.
+old_archive_from_new_cmds=$lt_[]_LT_AC_TAGVAR(old_archive_from_new_cmds, $1)
+
+# Create a temporary old-style archive to link instead of a shared archive.
+old_archive_from_expsyms_cmds=$lt_[]_LT_AC_TAGVAR(old_archive_from_expsyms_cmds, $1)
+
+# Commands used to build and install a shared archive.
+archive_cmds=$lt_[]_LT_AC_TAGVAR(archive_cmds, $1)
+archive_expsym_cmds=$lt_[]_LT_AC_TAGVAR(archive_expsym_cmds, $1)
+postinstall_cmds=$lt_postinstall_cmds
+postuninstall_cmds=$lt_postuninstall_cmds
+
+# Commands used to build a loadable module (assumed same as above if empty)
+module_cmds=$lt_[]_LT_AC_TAGVAR(module_cmds, $1)
+module_expsym_cmds=$lt_[]_LT_AC_TAGVAR(module_expsym_cmds, $1)
+
+# Commands to strip libraries.
+old_striplib=$lt_old_striplib
+striplib=$lt_striplib
+
+# Dependencies to place before the objects being linked to create a
+# shared library.
+predep_objects=$lt_[]_LT_AC_TAGVAR(predep_objects, $1)
+
+# Dependencies to place after the objects being linked to create a
+# shared library.
+postdep_objects=$lt_[]_LT_AC_TAGVAR(postdep_objects, $1)
+
+# Dependencies to place before the objects being linked to create a
+# shared library.
+predeps=$lt_[]_LT_AC_TAGVAR(predeps, $1)
+
+# Dependencies to place after the objects being linked to create a
+# shared library.
+postdeps=$lt_[]_LT_AC_TAGVAR(postdeps, $1)
+
+# The library search path used internally by the compiler when linking
+# a shared library.
+compiler_lib_search_path=$lt_[]_LT_AC_TAGVAR(compiler_lib_search_path, $1)
+
+# Method to check whether dependent libraries are shared objects.
+deplibs_check_method=$lt_deplibs_check_method
+
+# Command to use when deplibs_check_method == file_magic.
+file_magic_cmd=$lt_file_magic_cmd
+
+# Flag that allows shared libraries with undefined symbols to be built.
+allow_undefined_flag=$lt_[]_LT_AC_TAGVAR(allow_undefined_flag, $1)
+
+# Flag that forces no undefined symbols.
+no_undefined_flag=$lt_[]_LT_AC_TAGVAR(no_undefined_flag, $1)
+
+# Commands used to finish a libtool library installation in a directory.
+finish_cmds=$lt_finish_cmds
+
+# Same as above, but a single script fragment to be evaled but not shown.
+finish_eval=$lt_finish_eval
+
+# Take the output of nm and produce a listing of raw symbols and C names.
+global_symbol_pipe=$lt_lt_cv_sys_global_symbol_pipe
+
+# Transform the output of nm in a proper C declaration
+global_symbol_to_cdecl=$lt_lt_cv_sys_global_symbol_to_cdecl
+
+# Transform the output of nm in a C name address pair
+global_symbol_to_c_name_address=$lt_lt_cv_sys_global_symbol_to_c_name_address
+
+# This is the shared library runtime path variable.
+runpath_var=$runpath_var
+
+# This is the shared library path variable.
+shlibpath_var=$shlibpath_var
+
+# Is shlibpath searched before the hard-coded library search path?
+shlibpath_overrides_runpath=$shlibpath_overrides_runpath
+
+# How to hardcode a shared library path into an executable.
+hardcode_action=$_LT_AC_TAGVAR(hardcode_action, $1)
+
+# Whether we should hardcode library paths into libraries.
+hardcode_into_libs=$hardcode_into_libs
+
+# Flag to hardcode \$libdir into a binary during linking.
+# This must work even if \$libdir does not exist.
+hardcode_libdir_flag_spec=$lt_[]_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)
+
+# If ld is used when linking, flag to hardcode \$libdir into
+# a binary during linking. This must work even if \$libdir does
+# not exist.
+hardcode_libdir_flag_spec_ld=$lt_[]_LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)
+
+# Whether we need a single -rpath flag with a separated argument.
+hardcode_libdir_separator=$lt_[]_LT_AC_TAGVAR(hardcode_libdir_separator, $1)
+
+# Set to yes if using DIR/libNAME${shared_ext} during linking hardcodes DIR into the
+# resulting binary.
+hardcode_direct=$_LT_AC_TAGVAR(hardcode_direct, $1)
+
+# Set to yes if using the -LDIR flag during linking hardcodes DIR into the
+# resulting binary.
+hardcode_minus_L=$_LT_AC_TAGVAR(hardcode_minus_L, $1)
+
+# Set to yes if using SHLIBPATH_VAR=DIR during linking hardcodes DIR into
+# the resulting binary.
+hardcode_shlibpath_var=$_LT_AC_TAGVAR(hardcode_shlibpath_var, $1)
+
+# Set to yes if building a shared library automatically hardcodes DIR into the library
+# and all subsequent libraries and executables linked against it.
+hardcode_automatic=$_LT_AC_TAGVAR(hardcode_automatic, $1)
+
+# Variables whose values should be saved in libtool wrapper scripts and
+# restored at relink time.
+variables_saved_for_relink=&quot;$variables_saved_for_relink&quot;
+
+# Whether libtool must link a program against all its dependency libraries.
+link_all_deplibs=$_LT_AC_TAGVAR(link_all_deplibs, $1)
+
+# Compile-time system search path for libraries
+sys_lib_search_path_spec=$lt_sys_lib_search_path_spec
+
+# Run-time system search path for libraries
+sys_lib_dlsearch_path_spec=$lt_sys_lib_dlsearch_path_spec
+
+# Fix the shell variable \$srcfile for the compiler.
+fix_srcfile_path=&quot;$_LT_AC_TAGVAR(fix_srcfile_path, $1)&quot;
+
+# Set to yes if exported symbols are required.
+always_export_symbols=$_LT_AC_TAGVAR(always_export_symbols, $1)
+
+# The commands to list exported symbols.
+export_symbols_cmds=$lt_[]_LT_AC_TAGVAR(export_symbols_cmds, $1)
+
+# The commands to extract the exported symbol list from a shared archive.
+extract_expsyms_cmds=$lt_extract_expsyms_cmds
+
+# Symbols that should not be listed in the preloaded symbols.
+exclude_expsyms=$lt_[]_LT_AC_TAGVAR(exclude_expsyms, $1)
+
+# Symbols that must always be exported.
+include_expsyms=$lt_[]_LT_AC_TAGVAR(include_expsyms, $1)
+
+ifelse([$1],[],
+[# ### END LIBTOOL CONFIG],
+[# ### END LIBTOOL TAG CONFIG: $tagname])
+
+__EOF__
+
+ifelse([$1],[], [
+  case $host_os in
+  aix3*)
+    cat &lt;&lt;\EOF &gt;&gt; &quot;$cfgfile&quot;
+
+# AIX sometimes has problems with the GCC collect2 program.  For some
+# reason, if we set the COLLECT_NAMES environment variable, the problems
+# vanish in a puff of smoke.
+if test &quot;X${COLLECT_NAMES+set}&quot; != Xset; then
+  COLLECT_NAMES=
+  export COLLECT_NAMES
+fi
+EOF
+    ;;
+  esac
+
+  # We use sed instead of cat because bash on DJGPP gets confused if
+  # if finds mixed CR/LF and LF-only lines.  Since sed operates in
+  # text mode, it properly converts lines to CR/LF.  This bash problem
+  # is reportedly fixed, but why not run on old versions too?
+  sed '$q' &quot;$ltmain&quot; &gt;&gt; &quot;$cfgfile&quot; || (rm -f &quot;$cfgfile&quot;; exit 1)
+
+  mv -f &quot;$cfgfile&quot; &quot;$ofile&quot; || \
+    (rm -f &quot;$ofile&quot; &amp;&amp; cp &quot;$cfgfile&quot; &quot;$ofile&quot; &amp;&amp; rm -f &quot;$cfgfile&quot;)
+  chmod +x &quot;$ofile&quot;
+])
+else
+  # If there is no Makefile yet, we rely on a make rule to execute
+  # `config.status --recheck' to rerun these tests and create the
+  # libtool script then.
+  test -f Makefile &amp;&amp; make &quot;$ltmain&quot;
+fi
+])# AC_LIBTOOL_CONFIG
+
+
+# AC_LIBTOOL_PROG_COMPILER_NO_RTTI([TAGNAME])
+# -------------------------------------------
+AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_NO_RTTI],
+[AC_REQUIRE([_LT_AC_SYS_COMPILER])dnl
+
+_LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=
+
+if test &quot;$GCC&quot; = yes; then
+  _LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=' -fno-builtin'
+
+  AC_LIBTOOL_COMPILER_OPTION([if $compiler supports -fno-rtti -fno-exceptions],
+    lt_cv_prog_compiler_rtti_exceptions,
+    [-fno-rtti -fno-exceptions], [],
+    [_LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)=&quot;$_LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1) -fno-rtti -fno-exceptions&quot;])
+fi
+])# AC_LIBTOOL_PROG_COMPILER_NO_RTTI
+
+
+# AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE
+# ---------------------------------
+AC_DEFUN([AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE],
+[AC_REQUIRE([AC_CANONICAL_HOST])
+AC_REQUIRE([AC_PROG_NM])
+AC_REQUIRE([AC_OBJEXT])
+# Check for command to grab the raw symbol name followed by C symbol from nm.
+AC_MSG_CHECKING([command to parse $NM output from $compiler object])
+AC_CACHE_VAL([lt_cv_sys_global_symbol_pipe],
+[
+# These are sane defaults that work on at least a few old systems.
+# [They come from Ultrix.  What could be older than Ultrix?!! ;)]
+
+# Character class describing NM global symbol codes.
+symcode='[[BCDEGRST]]'
+
+# Regexp to match symbols that can be accessed directly from C.
+sympat='\([[_A-Za-z]][[_A-Za-z0-9]]*\)'
+
+# Transform the above into a raw symbol and a C symbol.
+symxfrm='\1 \2\3 \3'
+
+# Transform an extracted symbol line into a proper C declaration
+lt_cv_sys_global_symbol_to_cdecl=&quot;sed -n -e 's/^. .* \(.*\)$/extern int \1;/p'&quot;
+
+# Transform an extracted symbol line into symbol name and symbol address
+lt_cv_sys_global_symbol_to_c_name_address=&quot;sed -n -e 's/^: \([[^ ]]*\) $/  {\\\&quot;\1\\\&quot;, (lt_ptr) 0},/p' -e 's/^$symcode \([[^ ]]*\) \([[^ ]]*\)$/  {\&quot;\2\&quot;, (lt_ptr) \&amp;\2},/p'&quot;
+
+# Define system-specific variables.
+case $host_os in
+aix*)
+  symcode='[[BCDT]]'
+  ;;
+cygwin* | mingw* | pw32*)
+  symcode='[[ABCDGISTW]]'
+  ;;
+hpux*) # Its linker distinguishes data from code symbols
+  if test &quot;$host_cpu&quot; = ia64; then
+    symcode='[[ABCDEGRST]]'
+  fi
+  lt_cv_sys_global_symbol_to_cdecl=&quot;sed -n -e 's/^T .* \(.*\)$/extern int \1();/p' -e 's/^$symcode* .* \(.*\)$/extern char \1;/p'&quot;
+  lt_cv_sys_global_symbol_to_c_name_address=&quot;sed -n -e 's/^: \([[^ ]]*\) $/  {\\\&quot;\1\\\&quot;, (lt_ptr) 0},/p' -e 's/^$symcode* \([[^ ]]*\) \([[^ ]]*\)$/  {\&quot;\2\&quot;, (lt_ptr) \&amp;\2},/p'&quot;
+  ;;
+irix* | nonstopux*)
+  symcode='[[BCDEGRST]]'
+  ;;
+osf*)
+  symcode='[[BCDEGQRST]]'
+  ;;
+solaris* | sysv5*)
+  symcode='[[BDT]]'
+  ;;
+sysv4)
+  symcode='[[DFNSTU]]'
+  ;;
+esac
+
+# Handle CRLF in mingw tool chain
+opt_cr=
+case $build_os in
+mingw*)
+  opt_cr=`echo 'x\{0,1\}' | tr x '\015'` # option cr in regexp
+  ;;
+esac
+
+# If we're using GNU nm, then use its standard symbol codes.
+case `$NM -V 2&gt;&amp;1` in
+*GNU* | *'with BFD'*)
+  symcode='[[ABCDGISTW]]' ;;
+esac
+
+# Try without a prefix undercore, then with it.
+for ac_symprfx in &quot;&quot; &quot;_&quot;; do
+
+  # Write the raw and C identifiers.
+  lt_cv_sys_global_symbol_pipe=&quot;sed -n -e 's/^.*[[ 	]]\($symcode$symcode*\)[[ 	]][[ 	]]*\($ac_symprfx\)$sympat$opt_cr$/$symxfrm/p'&quot;
+
+  # Check to see that the pipe works correctly.
+  pipe_works=no
+
+  rm -f conftest*
+  cat &gt; conftest.$ac_ext &lt;&lt;EOF
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+char nm_test_var;
+void nm_test_func(){}
+#ifdef __cplusplus
+}
+#endif
+int main(){nm_test_var='a';nm_test_func();return(0);}
+EOF
+
+  if AC_TRY_EVAL(ac_compile); then
+    # Now try to grab the symbols.
+    nlist=conftest.nm
+    if AC_TRY_EVAL(NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \&gt; $nlist) &amp;&amp; test -s &quot;$nlist&quot;; then
+      # Try sorting and uniquifying the output.
+      if sort &quot;$nlist&quot; | uniq &gt; &quot;$nlist&quot;T; then
+	mv -f &quot;$nlist&quot;T &quot;$nlist&quot;
+      else
+	rm -f &quot;$nlist&quot;T
+      fi
+
+      # Make sure that we snagged all the symbols we need.
+      if grep ' nm_test_var$' &quot;$nlist&quot; &gt;/dev/null; then
+	if grep ' nm_test_func$' &quot;$nlist&quot; &gt;/dev/null; then
+	  cat &lt;&lt;EOF &gt; conftest.$ac_ext
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+
+EOF
+	  # Now generate the symbol file.
+	  eval &quot;$lt_cv_sys_global_symbol_to_cdecl&quot;' &lt; &quot;$nlist&quot; | grep -v main &gt;&gt; conftest.$ac_ext'
+
+	  cat &lt;&lt;EOF &gt;&gt; conftest.$ac_ext
+#if defined (__STDC__) &amp;&amp; __STDC__
+# define lt_ptr_t void *
+#else
+# define lt_ptr_t char *
+# define const
+#endif
+
+/* The mapping between symbol names and symbols. */
+const struct {
+  const char *name;
+  lt_ptr_t address;
+}
+lt_preloaded_symbols[[]] =
+{
+EOF
+	  $SED &quot;s/^$symcode$symcode* \(.*\) \(.*\)$/  {\&quot;\2\&quot;, (lt_ptr_t) \&amp;\2},/&quot; &lt; &quot;$nlist&quot; | grep -v main &gt;&gt; conftest.$ac_ext
+	  cat &lt;&lt;\EOF &gt;&gt; conftest.$ac_ext
+  {0, (lt_ptr_t) 0}
+};
+
+#ifdef __cplusplus
+}
+#endif
+EOF
+	  # Now try linking the two files.
+	  mv conftest.$ac_objext conftstm.$ac_objext
+	  lt_save_LIBS=&quot;$LIBS&quot;
+	  lt_save_CFLAGS=&quot;$CFLAGS&quot;
+	  LIBS=&quot;conftstm.$ac_objext&quot;
+	  CFLAGS=&quot;$CFLAGS$_LT_AC_TAGVAR(lt_prog_compiler_no_builtin_flag, $1)&quot;
+	  if AC_TRY_EVAL(ac_link) &amp;&amp; test -s conftest${ac_exeext}; then
+	    pipe_works=yes
+	  fi
+	  LIBS=&quot;$lt_save_LIBS&quot;
+	  CFLAGS=&quot;$lt_save_CFLAGS&quot;
+	else
+	  echo &quot;cannot find nm_test_func in $nlist&quot; &gt;&amp;AS_MESSAGE_LOG_FD
+	fi
+      else
+	echo &quot;cannot find nm_test_var in $nlist&quot; &gt;&amp;AS_MESSAGE_LOG_FD
+      fi
+    else
+      echo &quot;cannot run $lt_cv_sys_global_symbol_pipe&quot; &gt;&amp;AS_MESSAGE_LOG_FD
+    fi
+  else
+    echo &quot;$progname: failed program was:&quot; &gt;&amp;AS_MESSAGE_LOG_FD
+    cat conftest.$ac_ext &gt;&amp;5
+  fi
+  rm -f conftest* conftst*
+
+  # Do not use the global_symbol_pipe unless it works.
+  if test &quot;$pipe_works&quot; = yes; then
+    break
+  else
+    lt_cv_sys_global_symbol_pipe=
+  fi
+done
+])
+if test -z &quot;$lt_cv_sys_global_symbol_pipe&quot;; then
+  lt_cv_sys_global_symbol_to_cdecl=
+fi
+if test -z &quot;$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl&quot;; then
+  AC_MSG_RESULT(failed)
+else
+  AC_MSG_RESULT(ok)
+fi
+]) # AC_LIBTOOL_SYS_GLOBAL_SYMBOL_PIPE
+
+
+# AC_LIBTOOL_PROG_COMPILER_PIC([TAGNAME])
+# ---------------------------------------
+AC_DEFUN([AC_LIBTOOL_PROG_COMPILER_PIC],
+[_LT_AC_TAGVAR(lt_prog_compiler_wl, $1)=
+_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
+_LT_AC_TAGVAR(lt_prog_compiler_static, $1)=
+
+AC_MSG_CHECKING([for $compiler option to produce PIC])
+ ifelse([$1],[CXX],[
+  # C++ specific cases for pic, static, wl, etc.
+  if test &quot;$GXX&quot; = yes; then
+    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
+
+    case $host_os in
+    aix*)
+      # All AIX code is PIC.
+      if test &quot;$host_cpu&quot; = ia64; then
+	# AIX 5 now supports IA64 processor
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      fi
+      ;;
+    amigaos*)
+      # FIXME: we need at least 68020 code to build shared libraries, but
+      # adding the `-m68020' flag to GCC prevents building anything better,
+      # like `-m68040'.
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-m68020 -resident32 -malways-restore-a4'
+      ;;
+    beos* | cygwin* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
+      # PIC is the default for these OSes.
+      ;;
+    mingw* | os2* | pw32*)
+      # This hack is so that the source file can tell whether it is being
+      # built for inclusion in a dll (and should export symbols for example).
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'
+      ;;
+    darwin* | rhapsody*)
+      # PIC is the default on this platform
+      # Common symbols not allowed in MH_DYLIB files
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fno-common'
+      ;;
+    *djgpp*)
+      # DJGPP does not support shared libraries at all
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
+      ;;
+    sysv4*MP*)
+      if test -d /usr/nec; then
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=-Kconform_pic
+      fi
+      ;;
+    hpux*)
+      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
+      # not for PA HP-UX.
+      case &quot;$host_cpu&quot; in
+      hppa*64*|ia64*)
+	;;
+      *)
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
+	;;
+      esac
+      ;;
+    *)
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
+      ;;
+    esac
+  else
+    case $host_os in
+      aix4* | aix5*)
+	# All AIX code is PIC.
+	if test &quot;$host_cpu&quot; = ia64; then
+	  # AIX 5 now supports IA64 processor
+	  _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+	else
+	  _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-bnso -bI:/lib/syscalls.exp'
+	fi
+	;;
+      chorus*)
+	case $cc_basename in
+	cxch68)
+	  # Green Hills C++ Compiler
+	  # _LT_AC_TAGVAR(lt_prog_compiler_static, $1)=&quot;--no_auto_instantiation -u __main -u __premain -u _abort -r $COOL_DIR/lib/libOrb.a $MVME_DIR/lib/CC/libC.a $MVME_DIR/lib/classix/libcx.s.a&quot;
+	  ;;
+	esac
+	;;
+      dgux*)
+	case $cc_basename in
+	  ec++)
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+	    ;;
+	  ghcx)
+	    # Green Hills C++ Compiler
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      freebsd* | kfreebsd*-gnu)
+	# FreeBSD uses GNU C++
+	;;
+      hpux9* | hpux10* | hpux11*)
+	case $cc_basename in
+	  CC)
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)=&quot;${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive&quot;
+	    if test &quot;$host_cpu&quot; != ia64; then
+	      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
+	    fi
+	    ;;
+	  aCC)
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)=&quot;${ac_cv_prog_cc_wl}-a ${ac_cv_prog_cc_wl}archive&quot;
+	    case &quot;$host_cpu&quot; in
+	    hppa*64*|ia64*)
+	      # +Z the default
+	      ;;
+	    *)
+	      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
+	      ;;
+	    esac
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      irix5* | irix6* | nonstopux*)
+	case $cc_basename in
+	  CC)
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
+	    # CC pic flag -KPIC is the default.
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      linux*)
+	case $cc_basename in
+	  KCC)
+	    # KAI C++ Compiler
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='--backend -Wl,'
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
+	    ;;
+	  icpc)
+	    # Intel C++
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
+	    ;; 
+	  cxx)
+	    # Compaq C++
+	    # Make sure the PIC flag is empty.  It appears that all Alpha
+	    # Linux and Compaq Tru64 Unix objects are PIC.
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      lynxos*)
+	;;
+      m88k*)
+	;;
+      mvs*)
+	case $cc_basename in
+	  cxx)
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-W c,exportall'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      netbsd*)
+	;;
+      osf3* | osf4* | osf5*)
+	case $cc_basename in
+	  KCC)
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='--backend -Wl,'
+	    ;;
+	  RCC)
+	    # Rational C++ 2.4.1
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
+	    ;;
+	  cxx)
+	    # Digital/Compaq C++
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	    # Make sure the PIC flag is empty.  It appears that all Alpha
+	    # Linux and Compaq Tru64 Unix objects are PIC.
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      psos*)
+	;;
+      sco*)
+	case $cc_basename in
+	  CC)
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      solaris*)
+	case $cc_basename in
+	  CC)
+	    # Sun C++ 4.2, 5.x and Centerline C++
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+	    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld '
+	    ;;
+	  gcx)
+	    # Green Hills C++ Compiler
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-PIC'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      sunos4*)
+	case $cc_basename in
+	  CC)
+	    # Sun C++ 4.x
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
+	    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+	    ;;
+	  lcc)
+	    # Lucid
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      tandem*)
+	case $cc_basename in
+	  NCC)
+	    # NonStop-UX NCC 3.20
+	    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+	    ;;
+	  *)
+	    ;;
+	esac
+	;;
+      unixware*)
+	;;
+      vxworks*)
+	;;
+      *)
+	_LT_AC_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
+	;;
+    esac
+  fi
+],
+[
+  if test &quot;$GCC&quot; = yes; then
+    _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+    _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
+
+    case $host_os in
+      aix*)
+      # All AIX code is PIC.
+      if test &quot;$host_cpu&quot; = ia64; then
+	# AIX 5 now supports IA64 processor
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      fi
+      ;;
+
+    amigaos*)
+      # FIXME: we need at least 68020 code to build shared libraries, but
+      # adding the `-m68020' flag to GCC prevents building anything better,
+      # like `-m68040'.
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-m68020 -resident32 -malways-restore-a4'
+      ;;
+
+    beos* | cygwin* | irix5* | irix6* | nonstopux* | osf3* | osf4* | osf5*)
+      # PIC is the default for these OSes.
+      ;;
+
+    mingw* | pw32* | os2*)
+      # This hack is so that the source file can tell whether it is being
+      # built for inclusion in a dll (and should export symbols for example).
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'
+      ;;
+
+    darwin* | rhapsody*)
+      # PIC is the default on this platform
+      # Common symbols not allowed in MH_DYLIB files
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fno-common'
+      ;;
+
+    msdosdjgpp*)
+      # Just because we use GCC doesn't mean we suddenly get shared libraries
+      # on systems that don't support them.
+      _LT_AC_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
+      enable_shared=no
+      ;;
+
+    sysv4*MP*)
+      if test -d /usr/nec; then
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=-Kconform_pic
+      fi
+      ;;
+
+    hpux*)
+      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
+      # not for PA HP-UX.
+      case &quot;$host_cpu&quot; in
+      hppa*64*|ia64*)
+	# +Z the default
+	;;
+      *)
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
+	;;
+      esac
+      ;;
+
+    *)
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-fPIC'
+      ;;
+    esac
+  else
+    # PORTME Check for flag to pass linker flags through the system compiler.
+    case $host_os in
+    aix*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      if test &quot;$host_cpu&quot; = ia64; then
+	# AIX 5 now supports IA64 processor
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      else
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-bnso -bI:/lib/syscalls.exp'
+      fi
+      ;;
+
+    mingw* | pw32* | os2*)
+      # This hack is so that the source file can tell whether it is being
+      # built for inclusion in a dll (and should export symbols for example).
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-DDLL_EXPORT'
+      ;;
+
+    hpux9* | hpux10* | hpux11*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      # PIC is the default for IA64 HP-UX and 64-bit HP-UX, but
+      # not for PA HP-UX.
+      case &quot;$host_cpu&quot; in
+      hppa*64*|ia64*)
+	# +Z the default
+	;;
+      *)
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='+Z'
+	;;
+      esac
+      # Is there a better lt_prog_compiler_static that works with the bundled CC?
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='${wl}-a ${wl}archive'
+      ;;
+
+    irix5* | irix6* | nonstopux*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      # PIC (with -KPIC) is the default.
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
+      ;;
+
+    newsos6)
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      ;;
+
+    linux*)
+      case $CC in
+      icc* | ecc*)
+	_LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-static'
+        ;;
+      ccc*)
+        _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+        # All Alpha code is PIC.
+        _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
+        ;;
+      esac
+      ;;
+
+    osf3* | osf4* | osf5*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      # All OSF/1 code is PIC.
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-non_shared'
+      ;;
+
+    sco3.2v5*)
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-Kpic'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-dn'
+      ;;
+
+    solaris*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      ;;
+
+    sunos4*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Qoption ld '
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-PIC'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      ;;
+
+    sysv4 | sysv4.2uw2* | sysv4.3* | sysv5*)
+      _LT_AC_TAGVAR(lt_prog_compiler_wl, $1)='-Wl,'
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-KPIC'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      ;;
+
+    sysv4*MP*)
+      if test -d /usr/nec ;then
+	_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-Kconform_pic'
+	_LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      fi
+      ;;
+
+    uts4*)
+      _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)='-pic'
+      _LT_AC_TAGVAR(lt_prog_compiler_static, $1)='-Bstatic'
+      ;;
+
+    *)
+      _LT_AC_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no
+      ;;
+    esac
+  fi
+])
+AC_MSG_RESULT([$_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)])
+
+#
+# Check to make sure the PIC flag actually works.
+#
+if test -n &quot;$_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)&quot;; then
+  AC_LIBTOOL_COMPILER_OPTION([if $compiler PIC flag $_LT_AC_TAGVAR(lt_prog_compiler_pic, $1) works],
+    _LT_AC_TAGVAR(lt_prog_compiler_pic_works, $1),
+    [$_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)ifelse([$1],[],[ -DPIC],[ifelse([$1],[CXX],[ -DPIC],[])])], [],
+    [case $_LT_AC_TAGVAR(lt_prog_compiler_pic, $1) in
+     &quot;&quot; | &quot; &quot;*) ;;
+     *) _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=&quot; $_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)&quot; ;;
+     esac],
+    [_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
+     _LT_AC_TAGVAR(lt_prog_compiler_can_build_shared, $1)=no])
+fi
+case &quot;$host_os&quot; in
+  # For platforms which do not support PIC, -DPIC is meaningless:
+  *djgpp*)
+    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=
+    ;;
+  *)
+    _LT_AC_TAGVAR(lt_prog_compiler_pic, $1)=&quot;$_LT_AC_TAGVAR(lt_prog_compiler_pic, $1)ifelse([$1],[],[ -DPIC],[ifelse([$1],[CXX],[ -DPIC],[])])&quot;
+    ;;
+esac
+])
+
+
+# AC_LIBTOOL_PROG_LD_SHLIBS([TAGNAME])
+# ------------------------------------
+# See if the linker supports building shared libraries.
+AC_DEFUN([AC_LIBTOOL_PROG_LD_SHLIBS],
+[AC_MSG_CHECKING([whether the $compiler linker ($LD) supports shared libraries])
+ifelse([$1],[CXX],[
+  _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq &gt; $export_symbols'
+  case $host_os in
+  aix4* | aix5*)
+    # If we're using GNU nm, then we don't want the &quot;-C&quot; option.
+    # -C means demangle to AIX nm, but means don't demangle with GNU nm
+    if $NM -V 2&gt;&amp;1 | grep 'GNU' &gt; /dev/null; then
+      _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\[$]2 == &quot;T&quot;) || (\[$]2 == &quot;D&quot;) || (\[$]2 == &quot;B&quot;)) &amp;&amp; ([substr](\[$]3,1,1) != &quot;.&quot;)) { print \[$]3 } }'\'' | sort -u &gt; $export_symbols'
+    else
+      _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\[$]2 == &quot;T&quot;) || (\[$]2 == &quot;D&quot;) || (\[$]2 == &quot;B&quot;)) &amp;&amp; ([substr](\[$]3,1,1) != &quot;.&quot;)) { print \[$]3 } }'\'' | sort -u &gt; $export_symbols'
+    fi
+    ;;
+  pw32*)
+    _LT_AC_TAGVAR(export_symbols_cmds, $1)=&quot;$ltdll_cmds&quot;
+  ;;
+  cygwin* | mingw*)
+    _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGS]] /s/.* \([[^ ]]*\)/\1 DATA/'\'' | $SED -e '\''/^[[AITW]] /s/.* //'\'' | sort | uniq &gt; $export_symbols'
+  ;;
+  *)
+    _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq &gt; $export_symbols'
+  ;;
+  esac
+],[
+  runpath_var=
+  _LT_AC_TAGVAR(allow_undefined_flag, $1)=
+  _LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=no
+  _LT_AC_TAGVAR(archive_cmds, $1)=
+  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=
+  _LT_AC_TAGVAR(old_archive_From_new_cmds, $1)=
+  _LT_AC_TAGVAR(old_archive_from_expsyms_cmds, $1)=
+  _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)=
+  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)=
+  _LT_AC_TAGVAR(thread_safe_flag_spec, $1)=
+  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)=
+  _LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)=
+  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
+  _LT_AC_TAGVAR(hardcode_direct, $1)=no
+  _LT_AC_TAGVAR(hardcode_minus_L, $1)=no
+  _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
+  _LT_AC_TAGVAR(link_all_deplibs, $1)=unknown
+  _LT_AC_TAGVAR(hardcode_automatic, $1)=no
+  _LT_AC_TAGVAR(module_cmds, $1)=
+  _LT_AC_TAGVAR(module_expsym_cmds, $1)=  
+  _LT_AC_TAGVAR(always_export_symbols, $1)=no
+  _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED '\''s/.* //'\'' | sort | uniq &gt; $export_symbols'
+  # include_expsyms should be a list of space-separated symbols to be *always*
+  # included in the symbol list
+  _LT_AC_TAGVAR(include_expsyms, $1)=
+  # exclude_expsyms can be an extended regexp of symbols to exclude
+  # it will be wrapped by ` (' and `)$', so one must not match beginning or
+  # end of line.  Example: `a|bc|.*d.*' will exclude the symbols `a' and `bc',
+  # as well as any symbol that contains `d'.
+  _LT_AC_TAGVAR(exclude_expsyms, $1)=&quot;_GLOBAL_OFFSET_TABLE_&quot;
+  # Although _GLOBAL_OFFSET_TABLE_ is a valid symbol C name, most a.out
+  # platforms (ab)use it in PIC code, but their linkers get confused if
+  # the symbol is explicitly referenced.  Since portable code cannot
+  # rely on this symbol name, it's probably fine to never include it in
+  # preloaded symbol tables.
+  extract_expsyms_cmds=
+
+  case $host_os in
+  cygwin* | mingw* | pw32*)
+    # FIXME: the MSVC++ port hasn't been tested in a loooong time
+    # When not using gcc, we currently assume that we are using
+    # Microsoft Visual C++.
+    if test &quot;$GCC&quot; != yes; then
+      with_gnu_ld=no
+    fi
+    ;;
+  openbsd*)
+    with_gnu_ld=no
+    ;;
+  esac
+
+  _LT_AC_TAGVAR(ld_shlibs, $1)=yes
+  if test &quot;$with_gnu_ld&quot; = yes; then
+    # If archive_cmds runs LD, not CC, wlarc should be empty
+    wlarc='${wl}'
+
+    # See if GNU ld supports shared libraries.
+    case $host_os in
+    aix3* | aix4* | aix5*)
+      # On AIX/PPC, the GNU linker is very broken
+      if test &quot;$host_cpu&quot; != ia64; then
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	cat &lt;&lt;EOF 1&gt;&amp;2
+
+*** Warning: the GNU linker, at least up to release 2.9.1, is reported
+*** to be unable to reliably create shared libraries on AIX.
+*** Therefore, libtool is disabling shared libraries support.  If you
+*** really care for shared libraries, you may want to modify your PATH
+*** so that a non-GNU linker is found, and then restart.
+
+EOF
+      fi
+      ;;
+
+    amigaos*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$rm $output_objdir/a2ixlibrary.data~$echo &quot;#define NAME $libname&quot; &gt; $output_objdir/a2ixlibrary.data~$echo &quot;#define LIBRARY_ID 1&quot; &gt;&gt; $output_objdir/a2ixlibrary.data~$echo &quot;#define VERSION $major&quot; &gt;&gt; $output_objdir/a2ixlibrary.data~$echo &quot;#define REVISION $revision&quot; &gt;&gt; $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir &amp;&amp; a2ixlibrary -32)'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+
+      # Samuel A. Falvo II &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">kc5tja at dolphin.openprojects.net</A>&gt; reports
+      # that the semantics of dynamic libraries on AmigaOS, at least up
+      # to version 4, is to share data among multiple programs linked
+      # with the same dynamic library.  Since this doesn't match the
+      # behavior of shared libraries on other platforms, we can't use
+      # them.
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+
+    beos*)
+      if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=unsupported
+	# Joseph Beckenbach &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">jrb3 at best.com</A>&gt; says some releases of gcc
+	# support --undefined.  This deserves some investigation.  FIXME
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -nostart $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname -o $lib'
+      else
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+      fi
+      ;;
+
+    cygwin* | mingw* | pw32*)
+      # _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1) is actually meaningless,
+      # as there is no search path for DLLs.
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)=no
+      _LT_AC_TAGVAR(always_export_symbols, $1)=no
+      _LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
+      _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[[BCDGS]] /s/.* \([[^ ]]*\)/\1 DATA/'\'' | $SED -e '\''/^[[AITW]] /s/.* //'\'' | sort | uniq &gt; $export_symbols'
+
+      if $LD --help 2&gt;&amp;1 | grep 'auto-import' &gt; /dev/null; then
+        _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs -o $output_objdir/$soname ${wl}--image-base=0x10000000 ${wl}--out-implib,$lib'
+	# If the export-symbols file already is a .def file (1st line
+	# is EXPORTS), use it as is; otherwise, prepend...
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='if test &quot;x`$SED 1q $export_symbols`&quot; = xEXPORTS; then
+	  cp $export_symbols $output_objdir/$soname.def;
+	else
+	  echo EXPORTS &gt; $output_objdir/$soname.def;
+	  cat $export_symbols &gt;&gt; $output_objdir/$soname.def;
+	fi~
+	$CC -shared $output_objdir/$soname.def $compiler_flags $libobjs $deplibs -o $output_objdir/$soname ${wl}--image-base=0x10000000  ${wl}--out-implib,$lib'
+      else
+	ld_shlibs=no
+      fi
+      ;;
+
+    netbsd*)
+      if echo __ELF__ | $CC -E - | grep __ELF__ &gt;/dev/null; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable $libobjs $deplibs $linker_flags -o $lib'
+	wlarc=
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
+      fi
+      ;;
+
+    solaris* | sysv5*)
+      if $LD -v 2&gt;&amp;1 | grep 'BFD 2\.8' &gt; /dev/null; then
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+	cat &lt;&lt;EOF 1&gt;&amp;2
+
+*** Warning: The releases 2.8.* of the GNU linker cannot reliably
+*** create shared libraries on Solaris systems.  Therefore, libtool
+*** is disabling shared libraries support.  We urge you to upgrade GNU
+*** binutils to release 2.9.1 or newer.  Another option is to modify
+*** your PATH or compiler configuration so that the native linker is
+*** used, and then restart.
+
+EOF
+      elif $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
+      else
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+      fi
+      ;;
+
+    sunos4*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -assert pure-text -Bshareable -o $lib $libobjs $deplibs $linker_flags'
+      wlarc=
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    *)
+      if $LD --help 2&gt;&amp;1 | grep ': supported targets:.* elf' &gt; /dev/null; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname $wl$soname ${wl}-retain-symbols-file $wl$export_symbols -o $lib'
+      else
+	_LT_AC_TAGVAR(ld_shlibs, $1)=no
+      fi
+      ;;
+    esac
+
+    if test &quot;$_LT_AC_TAGVAR(ld_shlibs, $1)&quot; = yes; then
+      runpath_var=LD_RUN_PATH
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}--rpath ${wl}$libdir'
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}--export-dynamic'
+      # ancient GNU ld didn't support --whole-archive et. al.
+      if $LD --help 2&gt;&amp;1 | grep 'no-whole-archive' &gt; /dev/null; then
+ 	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)=&quot;$wlarc&quot;'--whole-archive$convenience '&quot;$wlarc&quot;'--no-whole-archive'
+      else
+  	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)=
+      fi
+    fi
+  else
+    # PORTME fill in a description of your system's linker (not GNU ld)
+    case $host_os in
+    aix3*)
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)=unsupported
+      _LT_AC_TAGVAR(always_export_symbols, $1)=yes
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$LD -o $output_objdir/$soname $libobjs $deplibs $linker_flags -bE:$export_symbols -T512 -H512 -bM:SRE~$AR $AR_FLAGS $lib $output_objdir/$soname'
+      # Note: this linker hardcodes the directories in LIBPATH if there
+      # are no directories specified by -L.
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      if test &quot;$GCC&quot; = yes &amp;&amp; test -z &quot;$link_static_flag&quot;; then
+	# Neither direct hardcoding nor static linking is supported with a
+	# broken collect2.
+	_LT_AC_TAGVAR(hardcode_direct, $1)=unsupported
+      fi
+      ;;
+
+    aix4* | aix5*)
+      if test &quot;$host_cpu&quot; = ia64; then
+	# On IA64, the linker does run time linking by default, so we don't
+	# have to do anything special.
+	aix_use_runtimelinking=no
+	exp_sym_flag='-Bexport'
+	no_entry_flag=&quot;&quot;
+      else
+	# If we're using GNU nm, then we don't want the &quot;-C&quot; option.
+	# -C means demangle to AIX nm, but means don't demangle with GNU nm
+	if $NM -V 2&gt;&amp;1 | grep 'GNU' &gt; /dev/null; then
+	  _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM -Bpg $libobjs $convenience | awk '\''{ if (((\[$]2 == &quot;T&quot;) || (\[$]2 == &quot;D&quot;) || (\[$]2 == &quot;B&quot;)) &amp;&amp; ([substr](\[$]3,1,1) != &quot;.&quot;)) { print \[$]3 } }'\'' | sort -u &gt; $export_symbols'
+	else
+	  _LT_AC_TAGVAR(export_symbols_cmds, $1)='$NM -BCpg $libobjs $convenience | awk '\''{ if (((\[$]2 == &quot;T&quot;) || (\[$]2 == &quot;D&quot;) || (\[$]2 == &quot;B&quot;)) &amp;&amp; ([substr](\[$]3,1,1) != &quot;.&quot;)) { print \[$]3 } }'\'' | sort -u &gt; $export_symbols'
+	fi
+
+	# KDE requires run time linking.  Make it the default.
+	aix_use_runtimelinking=yes
+	exp_sym_flag='-bexport'
+	no_entry_flag='-bnoentry'
+      fi
+
+      # When large executables or shared objects are built, AIX ld can
+      # have problems creating the table of contents.  If linking a library
+      # or program results in &quot;error TOC overflow&quot; add -mminimal-toc to
+      # CXXFLAGS/CFLAGS for g++/gcc.  In the cases where that is not
+      # enough to fix the problem, add -Wl,-bbigtoc to LDFLAGS.
+
+      _LT_AC_TAGVAR(archive_cmds, $1)=''
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=':'
+      _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+
+      if test &quot;$GCC&quot; = yes; then
+	case $host_os in aix4.[012]|aix4.[012].*)
+	# We only want to do this on AIX 4.2 and lower, the check
+	# below for broken collect2 doesn't work under 4.3+
+	  collect2name=`${CC} -print-prog-name=collect2`
+	  if test -f &quot;$collect2name&quot; &amp;&amp; \
+  	   strings &quot;$collect2name&quot; | grep resolve_lib_name &gt;/dev/null
+	  then
+  	  # We have reworked collect2
+  	  _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+	  else
+  	  # We have old collect2
+  	  _LT_AC_TAGVAR(hardcode_direct, $1)=unsupported
+  	  # It fails to find uninstalled libraries when the uninstalled
+  	  # path is not listed in the libpath.  Setting hardcode_minus_L
+  	  # to unsupported forces relinking
+  	  _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+  	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+  	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=
+	  fi
+	esac
+	shared_flag='-shared'
+      else
+	# not using gcc
+	if test &quot;$host_cpu&quot; = ia64; then
+  	# VisualAge C++, Version 5.5 for AIX 5L for IA-64, Beta 3 Release
+  	# chokes on -Wl,-G. The following line is correct:
+	  shared_flag='-G'
+	else
+  	if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	    shared_flag='-qmkshrobj ${wl}-G'
+	  else
+	    shared_flag='-qmkshrobj'
+  	fi
+	fi
+      fi
+
+      # Let the compiler handle the export list.
+      _LT_AC_TAGVAR(always_export_symbols, $1)=no
+      if test &quot;$aix_use_runtimelinking&quot; = yes; then
+	# Warning - without using the other runtime loading flags (-brtl),
+	# -berok will link without error, but may produce a broken library.
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)='-berok'
+       # Determine the default libpath from the value encoded in an empty executable.
+	_LT_AC_SYS_LIBPATH_AIX
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
+	_LT_AC_TAGVAR(archive_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot; $shared_flag&quot;
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs `if test &quot;x${allow_undefined_flag}&quot; != &quot;x&quot;; then echo &quot;${wl}${allow_undefined_flag}&quot;; else :; fi` '&quot;\${wl}$exp_sym_flag:\$export_symbols $shared_flag&quot;
+       else
+	if test &quot;$host_cpu&quot; = ia64; then
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R $libdir:/usr/lib:/lib'
+	  _LT_AC_TAGVAR(allow_undefined_flag, $1)=&quot;-z nodefs&quot;
+	  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs ${wl}${allow_undefined_flag} '&quot;\${wl}$no_entry_flag \${wl}$exp_sym_flag:\$export_symbols&quot;
+	else
+	 # Determine the default libpath from the value encoded in an empty executable.
+	 _LT_AC_SYS_LIBPATH_AIX
+	 _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-blibpath:$libdir:'&quot;$aix_libpath&quot;
+	  # Warning - without using the other run time loading flags,
+	  # -berok will link without error, but may produce a broken library.
+	  _LT_AC_TAGVAR(no_undefined_flag, $1)=' ${wl}-bernotok'
+	  _LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-berok'
+	  # -bexpall does not export symbols beginning with underscore (_)
+	  _LT_AC_TAGVAR(always_export_symbols, $1)=yes
+	  # Exported symbols can be pulled into shared objects from archives
+	  _LT_AC_TAGVAR(whole_archive_flag_spec, $1)=' '
+	  _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=yes
+	  # This is similar to how AIX traditionally builds it's shared libraries.
+	  _LT_AC_TAGVAR(archive_expsym_cmds, $1)=&quot;\$CC $shared_flag&quot;' -o $output_objdir/$soname $compiler_flags $libobjs $deplibs ${wl}-bE:$export_symbols ${wl}-bnoentry${allow_undefined_flag}~$AR $AR_FLAGS $output_objdir/$libname$release.a $output_objdir/$soname'
+	fi
+      fi
+      ;;
+
+    amigaos*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$rm $output_objdir/a2ixlibrary.data~$echo &quot;#define NAME $libname&quot; &gt; $output_objdir/a2ixlibrary.data~$echo &quot;#define LIBRARY_ID 1&quot; &gt;&gt; $output_objdir/a2ixlibrary.data~$echo &quot;#define VERSION $major&quot; &gt;&gt; $output_objdir/a2ixlibrary.data~$echo &quot;#define REVISION $revision&quot; &gt;&gt; $output_objdir/a2ixlibrary.data~$AR $AR_FLAGS $lib $libobjs~$RANLIB $lib~(cd $output_objdir &amp;&amp; a2ixlibrary -32)'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      # see comment about different semantics on the GNU ld section
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+
+    bsdi4*)
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)=-rdynamic
+      ;;
+
+    cygwin* | mingw* | pw32*)
+      # When not using gcc, we currently assume that we are using
+      # Microsoft Visual C++.
+      # hardcode_libdir_flag_spec is actually meaningless, as there is
+      # no search path for DLLs.
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)=' '
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)=no
+      # Tell ltmain to make .lib files, not .a files.
+      libext=lib
+      # Tell ltmain to make .dll files, not .so files.
+      shrext=&quot;.dll&quot;
+      # FIXME: Setting linknames here is a bad hack.
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -o $lib $compiler_flags $libobjs `echo &quot;$deplibs&quot; | $SED -e '\''s/ -lc$//'\''` -link -dll~linknames='
+      # The linker will automatically build a .lib file if we build a DLL.
+      _LT_AC_TAGVAR(old_archive_From_new_cmds, $1)='true'
+      # FIXME: Should let the user specify the lib program.
+      _LT_AC_TAGVAR(old_archive_cmds, $1)='lib /OUT:$oldlib$oldobjs$old_deplibs'
+      fix_srcfile_path='`cygpath -w &quot;$srcfile&quot;`'
+      _LT_AC_TAGVAR(enable_shared_with_static_runtimes, $1)=yes
+      ;;
+
+    darwin* | rhapsody*)
+    if test &quot;$GXX&quot; = yes ; then
+      _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+      case &quot;$host_os&quot; in
+      rhapsody* | darwin1.[[012]])
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-undefined -Wl,suppress'
+	;;
+      *) # Darwin 1.3 on
+	if test -z ${MACOSX_DEPLOYMENT_TARGET} ; then
+	  _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	else
+	  case ${MACOSX_DEPLOYMENT_TARGET} in
+	    10.[012])
+	      _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-flat_namespace -Wl,-undefined -Wl,suppress'
+	      ;;
+	    10.*)
+	      _LT_AC_TAGVAR(allow_undefined_flag, $1)='-Wl,-undefined -Wl,dynamic_lookup'
+	      ;;
+	  esac
+	fi
+	;;
+      esac
+    	lt_int_apple_cc_single_mod=no
+    	output_verbose_link_cmd='echo'
+    	if $CC -dumpspecs 2&gt;&amp;1 | grep 'single_module' &gt;/dev/null ; then
+    	  lt_int_apple_cc_single_mod=yes
+    	fi
+    	if test &quot;X$lt_int_apple_cc_single_mod&quot; = Xyes ; then
+    	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -dynamiclib -single_module $allow_undefined_flag -o $lib $compiler_flags $libobjs $deplibs -install_name $rpath/$soname $verstring'
+    	else
+        _LT_AC_TAGVAR(archive_cmds, $1)='$CC -r ${wl}-bind_at_load -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs~$CC -dynamiclib $allow_undefined_flag -o $lib ${lib}-master.o $compiler_flags $deplibs -install_name $rpath/$soname $verstring'
+      fi
+      _LT_AC_TAGVAR(module_cmds, $1)='$CC ${wl}-bind_at_load $allow_undefined_flag -o $lib -bundle $compiler_flags $libobjs $deplibs'
+      # Don't fix this by using the ld -exported_symbols_list flag, it doesn't exist in older darwin ld's
+        if test &quot;X$lt_int_apple_cc_single_mod&quot; = Xyes ; then
+          _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -dynamiclib -single_module $allow_undefined_flag -o $lib $compiler_flags $libobjs $deplibs -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+        else
+          _LT_AC_TAGVAR(archive_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC -r ${wl}-bind_at_load -keep_private_externs -nostdlib -o ${lib}-master.o $libobjs~$CC -dynamiclib $allow_undefined_flag -o $lib ${lib}-master.o $compiler_flags $deplibs -install_name $rpath/$soname $verstring~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+        fi
+          _LT_AC_TAGVAR(module_expsym_cmds, $1)='sed -e &quot;s,#.*,,&quot; -e &quot;s,^[    ]*,,&quot; -e &quot;s,^\(..*\),_&amp;,&quot; &lt; $export_symbols &gt; $output_objdir/${libname}-symbols.expsym~$CC $allow_undefined_flag  -o $lib -bundle $compiler_flags $libobjs $deplibs~nmedit -s $output_objdir/${libname}-symbols.expsym ${lib}'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=no
+      _LT_AC_TAGVAR(hardcode_automatic, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=unsupported
+      _LT_AC_TAGVAR(whole_archive_flag_spec, $1)='-all_load $convenience'
+      _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+    else  
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+    fi  
+      ;;
+
+    dgux*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    freebsd1*)
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+
+    # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
+    # support.  Future versions do this automatically, but an explicit c++rt0.o
+    # does not break anything, and helps significantly (at the cost of a little
+    # extra space).
+    freebsd2.2*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags /usr/lib/c++rt0.o'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    # Unfortunately, older versions of FreeBSD 2 do not have this feature.
+    freebsd2*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    # FreeBSD 3 and greater uses gcc -shared to do shared libraries.
+    freebsd* | kfreebsd*-gnu)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -o $lib $compiler_flags $libobjs $deplibs'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    hpux9*)
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$rm $output_objdir/$soname~$CC -shared -fPIC ${wl}+b ${wl}$install_libdir -o $output_objdir/$soname $compiler_flags $libobjs $deplibs~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$rm $output_objdir/$soname~$LD -b +b $install_libdir -o $output_objdir/$soname $libobjs $deplibs $linker_flags~test $output_objdir/$soname = $lib || mv $output_objdir/$soname $lib'
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+
+      # hardcode_minus_L: Not really in the search PATH,
+      # but as the default location of the library.
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+      ;;
+
+    hpux10* | hpux11*)
+      if test &quot;$GCC&quot; = yes -a &quot;$with_gnu_ld&quot; = no; then
+	case &quot;$host_cpu&quot; in
+	hppa*64*|ia64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}+h ${wl}$soname -o $lib $compiler_flags $libobjs $deplibs'
+	  ;;
+	*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared -fPIC ${wl}+h ${wl}$soname ${wl}+b ${wl}$install_libdir -o $lib $compiler_flags $libobjs $deplibs'
+	  ;;
+	esac
+      else
+	case &quot;$host_cpu&quot; in
+	hppa*64*|ia64*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname -o $lib $libobjs $deplibs $linker_flags'
+	  ;;
+	*)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -b +h $soname +b $install_libdir -o $lib $libobjs $deplibs $linker_flags'
+	  ;;
+	esac
+      fi
+      if test &quot;$with_gnu_ld&quot; = no; then
+	case &quot;$host_cpu&quot; in
+	hppa*64*)
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='+b $libdir'
+	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=no
+	  _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+	  ;;
+	ia64*)
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=no
+	  _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+
+	  # hardcode_minus_L: Not really in the search PATH,
+	  # but as the default location of the library.
+	  _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+	  ;;
+	*)
+	  _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}+b ${wl}$libdir'
+	  _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+	  _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+
+	  # hardcode_minus_L: Not really in the search PATH,
+	  # but as the default location of the library.
+	  _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+	  ;;
+	esac
+      fi
+      ;;
+
+    irix5* | irix6* | nonstopux*)
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $compiler_flags $libobjs $deplibs ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -shared $libobjs $deplibs $linker_flags -soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec_ld, $1)='-rpath $libdir'
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+      _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+      ;;
+
+    netbsd*)
+      if echo __ELF__ | $CC -E - | grep __ELF__ &gt;/dev/null; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'  # a.out
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -shared -o $lib $libobjs $deplibs $linker_flags'      # ELF
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    newsos6)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    openbsd*)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      if test -z &quot;`echo __ELF__ | $CC -E - | grep __ELF__`&quot; || test &quot;$host_os-$host_cpu&quot; = &quot;openbsd2.8-powerpc&quot;; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $compiler_flags $libobjs $deplibs'
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+      else
+       case $host_os in
+	 openbsd[[01]].* | openbsd2.[[0-7]] | openbsd2.[[0-7]].*)
+	   _LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
+	   _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+	   ;;
+	 *)
+	   _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $compiler_flags $libobjs $deplibs'
+	   _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+	   ;;
+       esac
+      fi
+      ;;
+
+    os2*)
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      _LT_AC_TAGVAR(allow_undefined_flag, $1)=unsupported
+      _LT_AC_TAGVAR(archive_cmds, $1)='$echo &quot;LIBRARY $libname INITINSTANCE&quot; &gt; $output_objdir/$libname.def~$echo &quot;DESCRIPTION \&quot;$libname\&quot;&quot; &gt;&gt; $output_objdir/$libname.def~$echo DATA &gt;&gt; $output_objdir/$libname.def~$echo &quot; SINGLE NONSHARED&quot; &gt;&gt; $output_objdir/$libname.def~$echo EXPORTS &gt;&gt; $output_objdir/$libname.def~emxexp $libobjs &gt;&gt; $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $compiler_flags $libobjs $deplibs$output_objdir/$libname.def'
+      _LT_AC_TAGVAR(old_archive_From_new_cmds, $1)='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'
+      ;;
+
+    osf3*)
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $compiler_flags $libobjs $deplibs ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
+      else
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' -expect_unresolved \*'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+      ;;
+
+    osf4* | osf5*)	# as osf3* with the addition of -msym flag
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' ${wl}-expect_unresolved ${wl}\*'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared${allow_undefined_flag} $compiler_flags $libobjs $deplibs ${wl}-msym ${wl}-soname ${wl}$soname `test -n &quot;$verstring&quot; &amp;&amp; echo ${wl}-set_version ${wl}$verstring` ${wl}-update_registry ${wl}${output_objdir}/so_locations -o $lib'
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath ${wl}$libdir'
+      else
+	_LT_AC_TAGVAR(allow_undefined_flag, $1)=' -expect_unresolved \*'
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -shared${allow_undefined_flag} $libobjs $deplibs $linker_flags -msym -soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version $verstring` -update_registry ${output_objdir}/so_locations -o $lib'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='for i in `cat $export_symbols`; do printf &quot;%s %s\\n&quot; -exported_symbol &quot;\$i&quot; &gt;&gt; $lib.exp; done; echo &quot;-hidden&quot;&gt;&gt; $lib.exp~
+	$LD -shared${allow_undefined_flag} -input $lib.exp $linker_flags $libobjs $deplibs -soname $soname `test -n &quot;$verstring&quot; &amp;&amp; echo -set_version $verstring` -update_registry ${objdir}/so_locations -o $lib~$rm $lib.exp'
+
+	# Both c and cxx compiler support -rpath directly
+	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-rpath $libdir'
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_separator, $1)=:
+      ;;
+
+    sco3.2v5*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-Bexport'
+      runpath_var=LD_RUN_PATH
+      hardcode_runpath_var=yes
+      ;;
+
+    solaris*)
+      _LT_AC_TAGVAR(no_undefined_flag, $1)=' -z text'
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h ${wl}$soname -o $lib $compiler_flags $libobjs $deplibs'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
+	  $CC -shared ${wl}-M ${wl}$lib.exp ${wl}-h ${wl}$soname -o $lib $compiler_flags $libobjs $deplibs~$rm $lib.exp'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
+  	$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      case $host_os in
+      solaris2.[[0-5]] | solaris2.[[0-5]].*) ;;
+      *) # Supported since Solaris 2.6 (maybe 2.5.1?)
+	_LT_AC_TAGVAR(whole_archive_flag_spec, $1)='-z allextract$convenience -z defaultextract' ;;
+      esac
+      _LT_AC_TAGVAR(link_all_deplibs, $1)=yes
+      ;;
+
+    sunos4*)
+      if test &quot;x$host_vendor&quot; = xsequent; then
+	# Use $CC to link under sequent, because it throws in some extra .o
+	# files that make .init and .fini sections work.
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h $soname -o $lib $compiler_flags $libobjs $deplibs'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -assert pure-text -Bstatic -o $lib $libobjs $deplibs $linker_flags'
+      fi
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    sysv4)
+      case $host_vendor in
+	sni)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=yes # is this really true???
+	;;
+	siemens)
+	  ## LD is ld it makes a PLAMLIB
+	  ## CC just makes a GrossModule.
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -o $lib $libobjs $deplibs $linker_flags'
+	  _LT_AC_TAGVAR(reload_cmds, $1)='$CC -r -o $output$reload_objs'
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=no
+        ;;
+	motorola)
+	  _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+	  _LT_AC_TAGVAR(hardcode_direct, $1)=no #Motorola manual says yes, but my tests say they lie
+	;;
+      esac
+      runpath_var='LD_RUN_PATH'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    sysv4.3*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='-Bexport'
+      ;;
+
+    sysv4*MP*)
+      if test -d /usr/nec; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+	_LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+	runpath_var=LD_RUN_PATH
+	hardcode_runpath_var=yes
+	_LT_AC_TAGVAR(ld_shlibs, $1)=yes
+      fi
+      ;;
+
+    sysv4.2uw2*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_minus_L, $1)=no
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      hardcode_runpath_var=yes
+      runpath_var=LD_RUN_PATH
+      ;;
+
+   sysv5OpenUNIX8* | sysv5UnixWare7* |  sysv5uw[[78]]* | unixware7*)
+      _LT_AC_TAGVAR(no_undefined_flag, $1)='${wl}-z ${wl}text'
+      if test &quot;$GCC&quot; = yes; then
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared ${wl}-h ${wl}$soname -o $lib $compiler_flags $libobjs $deplibs'
+      else
+	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -G ${wl}-h ${wl}$soname -o $lib $compiler_flags $libobjs $deplibs'
+      fi
+      runpath_var='LD_RUN_PATH'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    sysv5*)
+      _LT_AC_TAGVAR(no_undefined_flag, $1)=' -z text'
+      # $CC -shared without GNU ld will not create a library from C++
+      # object files and a static libstdc++, better avoid it by now
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G${allow_undefined_flag} -h $soname -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$echo &quot;{ global:&quot; &gt; $lib.exp~cat $export_symbols | $SED -e &quot;s/\(.*\)/\1;/&quot; &gt;&gt; $lib.exp~$echo &quot;local: *; };&quot; &gt;&gt; $lib.exp~
+  		$LD -G${allow_undefined_flag} -M $lib.exp -h $soname -o $lib $libobjs $deplibs $linker_flags~$rm $lib.exp'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)=
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      runpath_var='LD_RUN_PATH'
+      ;;
+
+    uts4*)
+      _LT_AC_TAGVAR(archive_cmds, $1)='$LD -G -h $soname -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-L$libdir'
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      ;;
+
+    *)
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+    esac
+  fi
+])
+AC_MSG_RESULT([$_LT_AC_TAGVAR(ld_shlibs, $1)])
+test &quot;$_LT_AC_TAGVAR(ld_shlibs, $1)&quot; = no &amp;&amp; can_build_shared=no
+
+variables_saved_for_relink=&quot;PATH $shlibpath_var $runpath_var&quot;
+if test &quot;$GCC&quot; = yes; then
+  variables_saved_for_relink=&quot;$variables_saved_for_relink GCC_EXEC_PREFIX COMPILER_PATH LIBRARY_PATH&quot;
+fi
+
+#
+# Do we need to explicitly link libc?
+#
+case &quot;x$_LT_AC_TAGVAR(archive_cmds_need_lc, $1)&quot; in
+x|xyes)
+  # Assume -lc should be added
+  _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=yes
+
+  if test &quot;$enable_shared&quot; = yes &amp;&amp; test &quot;$GCC&quot; = yes; then
+    case $_LT_AC_TAGVAR(archive_cmds, $1) in
+    *'~'*)
+      # FIXME: we may have to deal with multi-command sequences.
+      ;;
+    '$CC '*)
+      # Test whether the compiler implicitly links with -lc since on some
+      # systems, -lgcc has to come before -lc. If gcc already passes -lc
+      # to ld, don't add -lc before -lgcc.
+      AC_MSG_CHECKING([whether -lc should be explicitly linked in])
+      $rm conftest*
+      printf &quot;$lt_simple_compile_test_code&quot; &gt; conftest.$ac_ext
+  
+      if AC_TRY_EVAL(ac_compile) 2&gt;conftest.err; then
+        soname=conftest
+        lib=conftest
+        libobjs=conftest.$ac_objext
+        deplibs=
+        wl=$_LT_AC_TAGVAR(lt_prog_compiler_wl, $1)
+        compiler_flags=-v
+        linker_flags=-v
+        verstring=
+        output_objdir=.
+        libname=conftest
+        lt_save_allow_undefined_flag=$_LT_AC_TAGVAR(allow_undefined_flag, $1)
+        _LT_AC_TAGVAR(allow_undefined_flag, $1)=
+        if AC_TRY_EVAL(_LT_AC_TAGVAR(archive_cmds, $1) 2\&gt;\&amp;1 \| grep \&quot; -lc \&quot; \&gt;/dev/null 2\&gt;\&amp;1)
+        then
+	  _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=no
+        else
+	  _LT_AC_TAGVAR(archive_cmds_need_lc, $1)=yes
+        fi
+        _LT_AC_TAGVAR(allow_undefined_flag, $1)=$lt_save_allow_undefined_flag
+      else
+        cat conftest.err 1&gt;&amp;5
+      fi
+      $rm conftest*
+      AC_MSG_RESULT([$_LT_AC_TAGVAR(archive_cmds_need_lc, $1)])
+      ;;
+    esac
+  fi
+  ;;
+esac
+])# AC_LIBTOOL_PROG_LD_SHLIBS
+
+
+# _LT_AC_FILE_LTDLL_C
+# -------------------
+# Be careful that the start marker always follows a newline.
+AC_DEFUN([_LT_AC_FILE_LTDLL_C], [
+# /* ltdll.c starts here */
+# #define WIN32_LEAN_AND_MEAN
+# #include &lt;windows.h&gt;
+# #undef WIN32_LEAN_AND_MEAN
+# #include &lt;stdio.h&gt;
+#
+# #ifndef __CYGWIN__
+# #  ifdef __CYGWIN32__
+# #    define __CYGWIN__ __CYGWIN32__
+# #  endif
+# #endif
+#
+# #ifdef __cplusplus
+# extern &quot;C&quot; {
+# #endif
+# BOOL APIENTRY DllMain (HINSTANCE hInst, DWORD reason, LPVOID reserved);
+# #ifdef __cplusplus
+# }
+# #endif
+#
+# #ifdef __CYGWIN__
+# #include &lt;cygwin/cygwin_dll.h&gt;
+# DECLARE_CYGWIN_DLL( DllMain );
+# #endif
+# HINSTANCE __hDllInstance_base;
+#
+# BOOL APIENTRY
+# DllMain (HINSTANCE hInst, DWORD reason, LPVOID reserved)
+# {
+#   __hDllInstance_base = hInst;
+#   return TRUE;
+# }
+# /* ltdll.c ends here */
+])# _LT_AC_FILE_LTDLL_C
+
+
+# _LT_AC_TAGVAR(VARNAME, [TAGNAME])
+# ---------------------------------
+AC_DEFUN([_LT_AC_TAGVAR], [ifelse([$2], [], [$1], [$1_$2])])
+
+
+# old names
+AC_DEFUN([AM_PROG_LIBTOOL],   [AC_PROG_LIBTOOL])
+AC_DEFUN([AM_ENABLE_SHARED],  [AC_ENABLE_SHARED($@)])
+AC_DEFUN([AM_ENABLE_STATIC],  [AC_ENABLE_STATIC($@)])
+AC_DEFUN([AM_DISABLE_SHARED], [AC_DISABLE_SHARED($@)])
+AC_DEFUN([AM_DISABLE_STATIC], [AC_DISABLE_STATIC($@)])
+AC_DEFUN([AM_PROG_LD],        [AC_PROG_LD])
+AC_DEFUN([AM_PROG_NM],        [AC_PROG_NM])
+
+# This is just to silence aclocal about the macro not being used
+ifelse([AC_DISABLE_FAST_INSTALL])
+
+AC_DEFUN([LT_AC_PROG_GCJ],
+[AC_CHECK_TOOL(GCJ, gcj, no)
+  test &quot;x${GCJFLAGS+set}&quot; = xset || GCJFLAGS=&quot;-g -O2&quot;
+  AC_SUBST(GCJFLAGS)
+])
+
+AC_DEFUN([LT_AC_PROG_RC],
+[AC_CHECK_TOOL(RC, windres, no)
+])
+
+############################################################
+# NOTE: This macro has been submitted for inclusion into   #
+#  GNU Autoconf as AC_PROG_SED.  When it is available in   #
+#  a released version of Autoconf we should remove this    #
+#  macro and use it instead.                               #
+############################################################
+# LT_AC_PROG_SED
+# --------------
+# Check for a fully-functional sed program, that truncates
+# as few characters as possible.  Prefer GNU sed if found.
+AC_DEFUN([LT_AC_PROG_SED],
+[AC_MSG_CHECKING([for a sed that does not truncate output])
+AC_CACHE_VAL(lt_cv_path_SED,
+[# Loop through the user's path and test for sed and gsed.
+# Then use that list of sed's as ones to test for truncation.
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z &quot;$as_dir&quot; &amp;&amp; as_dir=.
+  for lt_ac_prog in sed gsed; do
+    for ac_exec_ext in '' $ac_executable_extensions; do
+      if $as_executable_p &quot;$as_dir/$lt_ac_prog$ac_exec_ext&quot;; then
+        lt_ac_sed_list=&quot;$lt_ac_sed_list $as_dir/$lt_ac_prog$ac_exec_ext&quot;
+      fi
+    done
+  done
+done
+lt_ac_max=0
+lt_ac_count=0
+# Add /usr/xpg4/bin/sed as it is typically found on Solaris
+# along with /bin/sed that truncates output.
+for lt_ac_sed in $lt_ac_sed_list /usr/xpg4/bin/sed; do
+  test ! -f $lt_ac_sed &amp;&amp; break
+  cat /dev/null &gt; conftest.in
+  lt_ac_count=0
+  echo $ECHO_N &quot;0123456789$ECHO_C&quot; &gt;conftest.in
+  # Check for GNU sed and select it if it is found.
+  if &quot;$lt_ac_sed&quot; --version 2&gt;&amp;1 &lt; /dev/null | grep 'GNU' &gt; /dev/null; then
+    lt_cv_path_SED=$lt_ac_sed
+    break
+  fi
+  while true; do
+    cat conftest.in conftest.in &gt;conftest.tmp
+    mv conftest.tmp conftest.in
+    cp conftest.in conftest.nl
+    echo &gt;&gt;conftest.nl
+    $lt_ac_sed -e 's/a$//' &lt; conftest.nl &gt;conftest.out || break
+    cmp -s conftest.out conftest.nl || break
+    # 10000 chars as input seems more than enough
+    test $lt_ac_count -gt 10 &amp;&amp; break
+    lt_ac_count=`expr $lt_ac_count + 1`
+    if test $lt_ac_count -gt $lt_ac_max; then
+      lt_ac_max=$lt_ac_count
+      lt_cv_path_SED=$lt_ac_sed
+    fi
+  done
+done
+])
+SED=$lt_cv_path_SED
+AC_MSG_RESULT([$SED])
+])

Added: trunk/admin/ltmain.sh
===================================================================
--- trunk/admin/ltmain.sh	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/ltmain.sh	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,6389 @@
+# ltmain.sh - Provide generalized library-building support services.
+# NOTE: Changing this file will not affect anything until you rerun configure.
+#
+# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003
+# Free Software Foundation, Inc.
+# Originally by Gordon Matzigkeit &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">gord at gnu.ai.mit.edu</A>&gt;, 1996
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful, but
+# WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+# General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
+#
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+# Check that we have a working $echo.
+if test &quot;X$1&quot; = X--no-reexec; then
+  # Discard the --no-reexec flag, and continue.
+  shift
+elif test &quot;X$1&quot; = X--fallback-echo; then
+  # Avoid inline document here, it may be left over
+  :
+elif test &quot;X`($echo '\t') 2&gt;/dev/null`&quot; = 'X\t'; then
+  # Yippee, $echo works!
+  :
+else
+  # Restart under the correct shell, and then maybe $echo will work.
+  exec $SHELL &quot;$0&quot; --no-reexec ${1+&quot;$@&quot;}
+fi
+
+if test &quot;X$1&quot; = X--fallback-echo; then
+  # used as fallback echo
+  shift
+  cat &lt;&lt;EOF
+$*
+EOF
+  exit 0
+fi
+
+# The name of this program.
+progname=`$echo &quot;$0&quot; | ${SED} 's%^.*/%%'`
+modename=&quot;$progname&quot;
+
+# Constants.
+PROGRAM=ltmain.sh
+PACKAGE=libtool
+VERSION=1.5a
+TIMESTAMP=&quot; (1.1240 2003/06/26 06:55:19)&quot;
+
+default_mode=
+help=&quot;Try \`$progname --help' for more information.&quot;
+magic=&quot;%%%MAGIC variable%%%&quot;
+mkdir=&quot;mkdir&quot;
+mv=&quot;mv -f&quot;
+rm=&quot;rm -f&quot;
+
+# Sed substitution that helps us do robust quoting.  It backslashifies
+# metacharacters that are still active within double-quoted strings.
+Xsed=&quot;${SED}&quot;' -e 1s/^X//'
+sed_quote_subst='s/\([\\`\\&quot;$\\\\]\)/\\\1/g'
+# test EBCDIC or ASCII
+case `echo A|tr A '\301'` in
+ A) # EBCDIC based system
+  SP2NL=&quot;tr '\100' '\n'&quot;
+  NL2SP=&quot;tr '\r\n' '\100\100'&quot;
+  ;;
+ *) # Assume ASCII based system
+  SP2NL=&quot;tr '\040' '\012'&quot;
+  NL2SP=&quot;tr '\015\012' '\040\040'&quot;
+  ;;
+esac
+
+# NLS nuisances.
+# Only set LANG and LC_ALL to C if already set.
+# These must not be set unconditionally because not all systems understand
+# e.g. LANG=C (notably SCO).
+# We save the old values to restore during execute mode.
+if test &quot;${LC_ALL+set}&quot; = set; then
+  save_LC_ALL=&quot;$LC_ALL&quot;; LC_ALL=C; export LC_ALL
+fi
+if test &quot;${LANG+set}&quot; = set; then
+  save_LANG=&quot;$LANG&quot;; LANG=C; export LANG
+fi
+
+# Make sure IFS has a sensible default
+: ${IFS=&quot; 	&quot;}
+
+if test &quot;$build_libtool_libs&quot; != yes &amp;&amp; test &quot;$build_old_libs&quot; != yes; then
+  $echo &quot;$modename: not configured to build any kind of library&quot; 1&gt;&amp;2
+  $echo &quot;Fatal configuration error.  See the $PACKAGE docs for more information.&quot; 1&gt;&amp;2
+  exit 1
+fi
+
+# Global variables.
+mode=$default_mode
+nonopt=
+prev=
+prevopt=
+run=
+show=&quot;$echo&quot;
+show_help=
+execute_dlfiles=
+lo2o=&quot;s/\\.lo\$/.${objext}/&quot;
+o2lo=&quot;s/\\.${objext}\$/.lo/&quot;
+
+#####################################
+# Shell function definitions:
+# This seems to be the best place for them
+
+# Need a lot of goo to handle *both* DLLs and import libs
+# Has to be a shell function in order to 'eat' the argument
+# that is supplied when $file_magic_command is called.
+win32_libid () {
+  win32_libid_type=&quot;unknown&quot;
+  win32_fileres=`file -L $1 2&gt;/dev/null`
+  case $win32_fileres in
+  *ar\ archive\ import\ library*) # definitely import
+    win32_libid_type=&quot;x86 archive import&quot;
+    ;;
+  *ar\ archive*) # could be an import, or static
+    if eval $OBJDUMP -f $1 | $SED -e '10q' 2&gt;/dev/null | \
+      grep -E 'file format pe-i386(.*architecture: i386)?' &gt;/dev/null ; then
+      win32_nmres=`eval $NM -f posix -A $1 | \
+	sed -n -e '1,100{/ I /{x;/import/!{s/^/import/;h;p;};x;};}'`
+      if test &quot;X$win32_nmres&quot; = &quot;Ximport&quot; ; then
+        win32_libid_type=&quot;x86 archive import&quot;
+      else
+        win32_libid_type=&quot;x86 archive static&quot;
+      fi
+    fi
+    ;;
+  *DLL*) 
+    win32_libid_type=&quot;x86 DLL&quot;
+    ;;
+  *executable*) # but shell scripts are &quot;executable&quot; too...
+    case $win32_fileres in
+    *MS\ Windows\ PE\ Intel*)
+      win32_libid_type=&quot;x86 DLL&quot;
+      ;;
+    esac
+    ;;
+  esac
+  $echo $win32_libid_type
+}
+
+# End of Shell function definitions
+#####################################
+
+# Parse our command line options once, thoroughly.
+while test &quot;$#&quot; -gt 0
+do
+  arg=&quot;$1&quot;
+  shift
+
+  case $arg in
+  -*=*) optarg=`$echo &quot;X$arg&quot; | $Xsed -e 's/[-_a-zA-Z0-9]*=//'` ;;
+  *) optarg= ;;
+  esac
+
+  # If the previous option needs an argument, assign it.
+  if test -n &quot;$prev&quot;; then
+    case $prev in
+    execute_dlfiles)
+      execute_dlfiles=&quot;$execute_dlfiles $arg&quot;
+      ;;
+    tag)
+      tagname=&quot;$arg&quot;
+
+      # Check whether tagname contains only valid characters
+      case $tagname in
+      *[!-_A-Za-z0-9,/]*)
+	$echo &quot;$progname: invalid tag name: $tagname&quot; 1&gt;&amp;2
+	exit 1
+	;;
+      esac
+
+      case $tagname in
+      CC)
+	# Don't test for the &quot;default&quot; C tag, as we know, it's there, but
+	# not specially marked.
+	;;
+      *)
+	if grep &quot;^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$&quot; &lt; &quot;$0&quot; &gt; /dev/null; then
+	  taglist=&quot;$taglist $tagname&quot;
+	  # Evaluate the configuration.
+	  eval &quot;`${SED} -n -e '/^# ### BEGIN LIBTOOL TAG CONFIG: '$tagname'$/,/^# ### END LIBTOOL TAG CONFIG: '$tagname'$/p' &lt; $0`&quot;
+	else
+	  $echo &quot;$progname: ignoring unknown tag $tagname&quot; 1&gt;&amp;2
+	fi
+	;;
+      esac
+      ;;
+    *)
+      eval &quot;$prev=\$arg&quot;
+      ;;
+    esac
+
+    prev=
+    prevopt=
+    continue
+  fi
+
+  # Have we seen a non-optional argument yet?
+  case $arg in
+  --help)
+    show_help=yes
+    ;;
+
+  --version)
+    $echo &quot;$PROGRAM (GNU $PACKAGE) $VERSION$TIMESTAMP&quot;
+    $echo
+    $echo &quot;Copyright (C) 2003  Free Software Foundation, Inc.&quot;
+    $echo &quot;This is free software; see the source for copying conditions.  There is NO&quot;
+    $echo &quot;warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&quot;
+    exit 0
+    ;;
+
+  --config)
+    ${SED} -e '1,/^# ### BEGIN LIBTOOL CONFIG/d' -e '/^# ### END LIBTOOL CONFIG/,$d' $0
+    # Now print the configurations for the tags.
+    for tagname in $taglist; do
+      ${SED} -n -e &quot;/^# ### BEGIN LIBTOOL TAG CONFIG: $tagname$/,/^# ### END LIBTOOL TAG CONFIG: $tagname$/p&quot; &lt; &quot;$0&quot;
+    done
+    exit 0
+    ;;
+
+  --debug)
+    $echo &quot;$progname: enabling shell trace mode&quot;
+    set -x
+    ;;
+
+  --dry-run | -n)
+    run=:
+    ;;
+
+  --features)
+    $echo &quot;host: $host&quot;
+    if test &quot;$build_libtool_libs&quot; = yes; then
+      $echo &quot;enable shared libraries&quot;
+    else
+      $echo &quot;disable shared libraries&quot;
+    fi
+    if test &quot;$build_old_libs&quot; = yes; then
+      $echo &quot;enable static libraries&quot;
+    else
+      $echo &quot;disable static libraries&quot;
+    fi
+    exit 0
+    ;;
+
+  --finish) mode=&quot;finish&quot; ;;
+
+  --mode) prevopt=&quot;--mode&quot; prev=mode ;;
+  --mode=*) mode=&quot;$optarg&quot; ;;
+
+  --preserve-dup-deps) duplicate_deps=&quot;yes&quot; ;;
+
+  --quiet | --silent)
+    show=:
+    ;;
+
+  --tag) prevopt=&quot;--tag&quot; prev=tag ;;
+  --tag=*)
+    set tag &quot;$optarg&quot; ${1+&quot;$@&quot;}
+    shift
+    prev=tag
+    ;;
+
+  -dlopen)
+    prevopt=&quot;-dlopen&quot;
+    prev=execute_dlfiles
+    ;;
+
+  -*)
+    $echo &quot;$modename: unrecognized option \`$arg'&quot; 1&gt;&amp;2
+    $echo &quot;$help&quot; 1&gt;&amp;2
+    exit 1
+    ;;
+
+  *)
+    nonopt=&quot;$arg&quot;
+    break
+    ;;
+  esac
+done
+
+if test -n &quot;$prevopt&quot;; then
+  $echo &quot;$modename: option \`$prevopt' requires an argument&quot; 1&gt;&amp;2
+  $echo &quot;$help&quot; 1&gt;&amp;2
+  exit 1
+fi
+
+# If this variable is set in any of the actions, the command in it
+# will be execed at the end.  This prevents here-documents from being
+# left over by shells.
+exec_cmd=
+
+if test -z &quot;$show_help&quot;; then
+
+  # Infer the operation mode.
+  if test -z &quot;$mode&quot;; then
+    $echo &quot;*** Warning: inferring the mode of operation is deprecated.&quot; 1&gt;&amp;2
+    $echo &quot;*** Future versions of Libtool will require -mode=MODE be specified.&quot; 1&gt;&amp;2
+    case $nonopt in
+    *cc | cc* | *++ | gcc* | *-gcc* | g++* | xlc*)
+      mode=link
+      for arg
+      do
+	case $arg in
+	-c)
+	   mode=compile
+	   break
+	   ;;
+	esac
+      done
+      ;;
+    *db | *dbx | *strace | *truss)
+      mode=execute
+      ;;
+    *install*|cp|mv)
+      mode=install
+      ;;
+    *rm)
+      mode=uninstall
+      ;;
+    *)
+      # If we have no mode, but dlfiles were specified, then do execute mode.
+      test -n &quot;$execute_dlfiles&quot; &amp;&amp; mode=execute
+
+      # Just use the default operation mode.
+      if test -z &quot;$mode&quot;; then
+	if test -n &quot;$nonopt&quot;; then
+	  $echo &quot;$modename: warning: cannot infer operation mode from \`$nonopt'&quot; 1&gt;&amp;2
+	else
+	  $echo &quot;$modename: warning: cannot infer operation mode without MODE-ARGS&quot; 1&gt;&amp;2
+	fi
+      fi
+      ;;
+    esac
+  fi
+
+  # Only execute mode is allowed to have -dlopen flags.
+  if test -n &quot;$execute_dlfiles&quot; &amp;&amp; test &quot;$mode&quot; != execute; then
+    $echo &quot;$modename: unrecognized option \`-dlopen'&quot; 1&gt;&amp;2
+    $echo &quot;$help&quot; 1&gt;&amp;2
+    exit 1
+  fi
+
+  # Change the help message to a mode-specific one.
+  generic_help=&quot;$help&quot;
+  help=&quot;Try \`$modename --help --mode=$mode' for more information.&quot;
+
+  # These modes are in order of execution frequency so that they run quickly.
+  case $mode in
+  # libtool compile mode
+  compile)
+    modename=&quot;$modename: compile&quot;
+    # Get the compilation command and the source file.
+    base_compile=
+    srcfile=&quot;$nonopt&quot;  #  always keep a non-empty value in &quot;srcfile&quot;
+    suppress_output=
+    arg_mode=normal
+    libobj=
+
+    for arg
+    do
+      case &quot;$arg_mode&quot; in
+      arg  )
+	# do not &quot;continue&quot;.  Instead, add this to base_compile
+	lastarg=&quot;$arg&quot;
+	arg_mode=normal
+	;;
+
+      target )
+	libobj=&quot;$arg&quot;
+	arg_mode=normal
+	continue
+	;;
+
+      normal )
+	# Accept any command-line options.
+	case $arg in
+	-o)
+	  if test -n &quot;$libobj&quot; ; then
+	    $echo &quot;$modename: you cannot specify \`-o' more than once&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+	  arg_mode=target
+	  continue
+	  ;;
+
+	-static)
+	  build_old_libs=yes
+	  continue
+	  ;;
+
+	-prefer-pic)
+	  pic_mode=yes
+	  continue
+	  ;;
+
+	-prefer-non-pic)
+	  pic_mode=no
+	  continue
+	  ;;
+
+	-Xcompiler)
+	  arg_mode=arg  #  the next one goes into the &quot;base_compile&quot; arg list
+	  continue      #  The current &quot;srcfile&quot; will either be retained or
+	  ;;            #  replaced later.  I would guess that would be a bug.
+
+	-Wc,*)
+	  args=`$echo &quot;X$arg&quot; | $Xsed -e &quot;s/^-Wc,//&quot;`
+	  lastarg=
+	  save_ifs=&quot;$IFS&quot;; IFS=','
+	  for arg in $args; do
+	    IFS=&quot;$save_ifs&quot;
+
+	    # Double-quote args containing other shell metacharacters.
+	    # Many Bourne shells cannot handle close brackets correctly
+	    # in scan sets, so we specify it separately.
+	    case $arg in
+	      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	      arg=&quot;\&quot;$arg\&quot;&quot;
+	      ;;
+	    esac
+	    lastarg=&quot;$lastarg $arg&quot;
+	  done
+	  IFS=&quot;$save_ifs&quot;
+	  lastarg=`$echo &quot;X$lastarg&quot; | $Xsed -e &quot;s/^ //&quot;`
+
+	  # Add the arguments to base_compile.
+	  base_compile=&quot;$base_compile $lastarg&quot;
+	  continue
+	  ;;
+
+	* )
+	  # Accept the current argument as the source file.
+	  # The previous &quot;srcfile&quot; becomes the current argument.
+	  #
+	  lastarg=&quot;$srcfile&quot;
+	  srcfile=&quot;$arg&quot;
+	  ;;
+	esac  #  case $arg
+	;;
+      esac    #  case $arg_mode
+
+      # Aesthetically quote the previous argument.
+      lastarg=`$echo &quot;X$lastarg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+
+      case $lastarg in
+      # Double-quote args containing other shell metacharacters.
+      # Many Bourne shells cannot handle close brackets correctly
+      # in scan sets, so we specify it separately.
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	lastarg=&quot;\&quot;$lastarg\&quot;&quot;
+	;;
+      esac
+
+      base_compile=&quot;$base_compile $lastarg&quot;
+    done # for arg
+
+    case $arg_mode in
+    arg)
+      $echo &quot;$modename: you must specify an argument for -Xcompile&quot;
+      exit 1
+      ;;
+    target)
+      $echo &quot;$modename: you must specify a target with \`-o'&quot; 1&gt;&amp;2
+      exit 1
+      ;;
+    *)
+      # Get the name of the library object.
+      [ -z &quot;$libobj&quot; ] &amp;&amp; libobj=`$echo &quot;X$srcfile&quot; | $Xsed -e 's%^.*/%%'`
+      ;;
+    esac
+
+    # Recognize several different file suffixes.
+    # If the user specifies -o file.o, it is replaced with file.lo
+    xform='[cCFSifmso]'
+    case $libobj in
+    *.ada) xform=ada ;;
+    *.adb) xform=adb ;;
+    *.ads) xform=ads ;;
+    *.asm) xform=asm ;;
+    *.c++) xform=c++ ;;
+    *.cc) xform=cc ;;
+    *.ii) xform=ii ;;
+    *.class) xform=class ;;
+    *.cpp) xform=cpp ;;
+    *.cxx) xform=cxx ;;
+    *.f90) xform=f90 ;;
+    *.for) xform=for ;;
+    *.java) xform=java ;;
+    esac
+
+    libobj=`$echo &quot;X$libobj&quot; | $Xsed -e &quot;s/\.$xform$/.lo/&quot;`
+
+    case $libobj in
+    *.lo) obj=`$echo &quot;X$libobj&quot; | $Xsed -e &quot;$lo2o&quot;` ;;
+    *)
+      $echo &quot;$modename: cannot determine name of library object from \`$libobj'&quot; 1&gt;&amp;2
+      exit 1
+      ;;
+    esac
+
+    # Infer tagged configuration to use if any are available and
+    # if one wasn't chosen via the &quot;--tag&quot; command line option.
+    # Only attempt this if the compiler in the base compile
+    # command doesn't match the default compiler.
+    if test -n &quot;$available_tags&quot; &amp;&amp; test -z &quot;$tagname&quot;; then
+      case $base_compile in
+      # Blanks in the command may have been stripped by the calling shell,
+      # but not from the CC environment variable when configure was run.
+      &quot; $CC &quot;* | &quot;$CC &quot;* | &quot; `$echo $CC` &quot;* | &quot;`$echo $CC` &quot;*) ;;
+      # Blanks at the start of $base_compile will cause this to fail
+      # if we don't check for them as well.
+      *)
+	for z in $available_tags; do
+	  if grep &quot;^# ### BEGIN LIBTOOL TAG CONFIG: $z$&quot; &lt; &quot;$0&quot; &gt; /dev/null; then
+	    # Evaluate the configuration.
+	    eval &quot;`${SED} -n -e '/^# ### BEGIN LIBTOOL TAG CONFIG: '$z'$/,/^# ### END LIBTOOL TAG CONFIG: '$z'$/p' &lt; $0`&quot;
+	    case &quot;$base_compile &quot; in
+	    &quot;$CC &quot;* | &quot; $CC &quot;* | &quot;`$echo $CC` &quot;* | &quot; `$echo $CC` &quot;*)
+	      # The compiler in the base compile command matches
+	      # the one in the tagged configuration.
+	      # Assume this is the tagged configuration we want.
+	      tagname=$z
+	      break
+	      ;;
+	    esac
+	  fi
+	done
+	# If $tagname still isn't set, then no tagged configuration
+	# was found and let the user know that the &quot;--tag&quot; command
+	# line option must be used.
+	if test -z &quot;$tagname&quot;; then
+	  $echo &quot;$modename: unable to infer tagged configuration&quot;
+	  $echo &quot;$modename: specify a tag with \`--tag'&quot; 1&gt;&amp;2
+	  exit 1
+#        else
+#          $echo &quot;$modename: using $tagname tagged configuration&quot;
+	fi
+	;;
+      esac
+    fi
+
+    objname=`$echo &quot;X$obj&quot; | $Xsed -e 's%^.*/%%'`
+    xdir=`$echo &quot;X$obj&quot; | $Xsed -e 's%/[^/]*$%%'`
+    if test &quot;X$xdir&quot; = &quot;X$obj&quot;; then
+      xdir=
+    else
+      xdir=$xdir/
+    fi
+    lobj=${xdir}$objdir/$objname
+
+    if test -z &quot;$base_compile&quot;; then
+      $echo &quot;$modename: you must specify a compilation command&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+    fi
+
+    # Delete any leftover library objects.
+    if test &quot;$build_old_libs&quot; = yes; then
+      removelist=&quot;$obj $lobj $libobj ${libobj}T&quot;
+    else
+      removelist=&quot;$lobj $libobj ${libobj}T&quot;
+    fi
+
+    $run $rm $removelist
+    trap &quot;$run $rm $removelist; exit 1&quot; 1 2 15
+
+    # On Cygwin there's no &quot;real&quot; PIC flag so we must build both object types
+    case $host_os in
+    cygwin* | mingw* | pw32* | os2*)
+      pic_mode=default
+      ;;
+    esac
+    if test &quot;$pic_mode&quot; = no &amp;&amp; test &quot;$deplibs_check_method&quot; != pass_all; then
+      # non-PIC code in shared libraries is not supported
+      pic_mode=default
+    fi
+
+    # Calculate the filename of the output object if compiler does
+    # not support -o with -c
+    if test &quot;$compiler_c_o&quot; = no; then
+      output_obj=`$echo &quot;X$srcfile&quot; | $Xsed -e 's%^.*/%%' -e 's%\.[^.]*$%%'`.${objext}
+      lockfile=&quot;$output_obj.lock&quot;
+      removelist=&quot;$removelist $output_obj $lockfile&quot;
+      trap &quot;$run $rm $removelist; exit 1&quot; 1 2 15
+    else
+      output_obj=
+      need_locks=no
+      lockfile=
+    fi
+
+    # Lock this critical section if it is needed
+    # We use this script file to make the link, it avoids creating a new file
+    if test &quot;$need_locks&quot; = yes; then
+      until $run ln &quot;$0&quot; &quot;$lockfile&quot; 2&gt;/dev/null; do
+	$show &quot;Waiting for $lockfile to be removed&quot;
+	sleep 2
+      done
+    elif test &quot;$need_locks&quot; = warn; then
+      if test -f &quot;$lockfile&quot;; then
+	$echo &quot;\
+*** ERROR, $lockfile exists and contains:
+`cat $lockfile 2&gt;/dev/null`
+
+This indicates that another process is trying to use the same
+temporary object file, and libtool could not work around it because
+your compiler does not support \`-c' and \`-o' together.  If you
+repeat this compilation, it may succeed, by chance, but you had better
+avoid parallel builds (make -j) in this platform, or get a better
+compiler.&quot;
+
+	$run $rm $removelist
+	exit 1
+      fi
+      $echo $srcfile &gt; &quot;$lockfile&quot;
+    fi
+
+    if test -n &quot;$fix_srcfile_path&quot;; then
+      eval srcfile=\&quot;$fix_srcfile_path\&quot;
+    fi
+
+    $run $rm &quot;$libobj&quot; &quot;${libobj}T&quot;
+
+    # Create a libtool object file (analogous to a &quot;.la&quot; file),
+    # but don't create it if we're doing a dry run.
+    test -z &quot;$run&quot; &amp;&amp; cat &gt; ${libobj}T &lt;&lt;EOF
+# $libobj - a libtool object file
+# Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP
+#
+# Please DO NOT delete this file!
+# It is necessary for linking the library.
+
+# Name of the PIC object.
+EOF
+
+    # Only build a PIC object if we are building libtool libraries.
+    if test &quot;$build_libtool_libs&quot; = yes; then
+      # Without this assignment, base_compile gets emptied.
+      fbsd_hideous_sh_bug=$base_compile
+
+      if test &quot;$pic_mode&quot; != no; then
+	command=&quot;$base_compile $srcfile $pic_flag&quot;
+      else
+	# Don't build PIC code
+	command=&quot;$base_compile $srcfile&quot;
+      fi
+
+      if test ! -d &quot;${xdir}$objdir&quot;; then
+	$show &quot;$mkdir ${xdir}$objdir&quot;
+	$run $mkdir ${xdir}$objdir
+	status=$?
+	if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;${xdir}$objdir&quot;; then
+	  exit $status
+	fi
+      fi
+
+      if test -z &quot;$output_obj&quot;; then
+	# Place PIC objects in $objdir
+	command=&quot;$command -o $lobj&quot;
+      fi
+
+      $run $rm &quot;$lobj&quot; &quot;$output_obj&quot;
+
+      $show &quot;$command&quot;
+      if $run eval &quot;$command&quot;; then :
+      else
+	test -n &quot;$output_obj&quot; &amp;&amp; $run $rm $removelist
+	exit 1
+      fi
+
+      if test &quot;$need_locks&quot; = warn &amp;&amp;
+	 test &quot;X`cat $lockfile 2&gt;/dev/null`&quot; != &quot;X$srcfile&quot;; then
+	$echo &quot;\
+*** ERROR, $lockfile contains:
+`cat $lockfile 2&gt;/dev/null`
+
+but it should contain:
+$srcfile
+
+This indicates that another process is trying to use the same
+temporary object file, and libtool could not work around it because
+your compiler does not support \`-c' and \`-o' together.  If you
+repeat this compilation, it may succeed, by chance, but you had better
+avoid parallel builds (make -j) in this platform, or get a better
+compiler.&quot;
+
+	$run $rm $removelist
+	exit 1
+      fi
+
+      # Just move the object if needed, then go on to compile the next one
+      if test -n &quot;$output_obj&quot; &amp;&amp; test &quot;X$output_obj&quot; != &quot;X$lobj&quot;; then
+	$show &quot;$mv $output_obj $lobj&quot;
+	if $run $mv $output_obj $lobj; then :
+	else
+	  error=$?
+	  $run $rm $removelist
+	  exit $error
+	fi
+      fi
+
+      # Append the name of the PIC object to the libtool object file.
+      test -z &quot;$run&quot; &amp;&amp; cat &gt;&gt; ${libobj}T &lt;&lt;EOF
+pic_object='$objdir/$objname'
+
+EOF
+
+      # Allow error messages only from the first compilation.
+      suppress_output=' &gt;/dev/null 2&gt;&amp;1'
+    else
+      # No PIC object so indicate it doesn't exist in the libtool
+      # object file.
+      test -z &quot;$run&quot; &amp;&amp; cat &gt;&gt; ${libobj}T &lt;&lt;EOF
+pic_object=none
+
+EOF
+    fi
+
+    # Only build a position-dependent object if we build old libraries.
+    if test &quot;$build_old_libs&quot; = yes; then
+      if test &quot;$pic_mode&quot; != yes; then
+	# Don't build PIC code
+	command=&quot;$base_compile $srcfile&quot;
+      else
+	command=&quot;$base_compile $srcfile $pic_flag&quot;
+      fi
+      if test &quot;$compiler_c_o&quot; = yes; then
+	command=&quot;$command -o $obj&quot;
+      fi
+
+      # Suppress compiler output if we already did a PIC compilation.
+      command=&quot;$command$suppress_output&quot;
+      $run $rm &quot;$obj&quot; &quot;$output_obj&quot;
+      $show &quot;$command&quot;
+      if $run eval &quot;$command&quot;; then :
+      else
+	$run $rm $removelist
+	exit 1
+      fi
+
+      if test &quot;$need_locks&quot; = warn &amp;&amp;
+	 test &quot;X`cat $lockfile 2&gt;/dev/null`&quot; != &quot;X$srcfile&quot;; then
+	$echo &quot;\
+*** ERROR, $lockfile contains:
+`cat $lockfile 2&gt;/dev/null`
+
+but it should contain:
+$srcfile
+
+This indicates that another process is trying to use the same
+temporary object file, and libtool could not work around it because
+your compiler does not support \`-c' and \`-o' together.  If you
+repeat this compilation, it may succeed, by chance, but you had better
+avoid parallel builds (make -j) in this platform, or get a better
+compiler.&quot;
+
+	$run $rm $removelist
+	exit 1
+      fi
+
+      # Just move the object if needed
+      if test -n &quot;$output_obj&quot; &amp;&amp; test &quot;X$output_obj&quot; != &quot;X$obj&quot;; then
+	$show &quot;$mv $output_obj $obj&quot;
+	if $run $mv $output_obj $obj; then :
+	else
+	  error=$?
+	  $run $rm $removelist
+	  exit $error
+	fi
+      fi
+
+      # Append the name of the non-PIC object the libtool object file.
+      # Only append if the libtool object file exists.
+      test -z &quot;$run&quot; &amp;&amp; cat &gt;&gt; ${libobj}T &lt;&lt;EOF
+# Name of the non-PIC object.
+non_pic_object='$objname'
+
+EOF
+    else
+      # Append the name of the non-PIC object the libtool object file.
+      # Only append if the libtool object file exists.
+      test -z &quot;$run&quot; &amp;&amp; cat &gt;&gt; ${libobj}T &lt;&lt;EOF
+# Name of the non-PIC object.
+non_pic_object=none
+
+EOF
+    fi
+
+    $run $mv &quot;${libobj}T&quot; &quot;${libobj}&quot;
+
+    # Unlock the critical section if it was locked
+    if test &quot;$need_locks&quot; != no; then
+      $run $rm &quot;$lockfile&quot;
+    fi
+
+    exit 0
+    ;;
+
+  # libtool link mode
+  link | relink)
+    modename=&quot;$modename: link&quot;
+    case $host in
+    *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+      # It is impossible to link a dll without this setting, and
+      # we shouldn't force the makefile maintainer to figure out
+      # which system we are compiling for in order to pass an extra
+      # flag for every libtool invocation.
+      # allow_undefined=no
+
+      # FIXME: Unfortunately, there are problems with the above when trying
+      # to make a dll which has undefined symbols, in which case not
+      # even a static library is built.  For now, we need to specify
+      # -no-undefined on the libtool link line when we can be certain
+      # that all symbols are satisfied, otherwise we get a static library.
+      allow_undefined=yes
+      ;;
+    *)
+      allow_undefined=yes
+      ;;
+    esac
+    libtool_args=&quot;$nonopt&quot;
+    base_compile=&quot;$nonopt&quot;
+    compile_command=&quot;$nonopt&quot;
+    finalize_command=&quot;$nonopt&quot;
+
+    compile_rpath=
+    finalize_rpath=
+    compile_shlibpath=
+    finalize_shlibpath=
+    convenience=
+    old_convenience=
+    deplibs=
+    old_deplibs=
+    add_flags=
+    compiler_flags=
+    linker_flags=
+    dllsearchpath=
+    lib_search_path=`pwd`
+    inst_prefix_dir=
+
+    avoid_version=no
+    dlfiles=
+    dlprefiles=
+    dlself=no
+    export_dynamic=no
+    export_symbols=
+    export_symbols_regex=
+    generated=
+    libobjs=
+    ltlibs=
+    module=no
+    no_install=no
+    objs=
+    non_pic_objects=
+    prefer_static_libs=no
+    preload=no
+    prev=
+    prevarg=
+    release=
+    rpath=
+    xrpath=
+    perm_rpath=
+    temp_rpath=
+    thread_safe=no
+    vinfo=
+    vinfo_number=no
+
+    # We need to know -static, to get the right output filenames.
+    for arg
+    do
+      case $arg in
+      -all-static | -static)
+	if test &quot;X$arg&quot; = &quot;X-all-static&quot;; then
+	  if test &quot;$build_libtool_libs&quot; = yes &amp;&amp; test -z &quot;$link_static_flag&quot;; then
+	    $echo &quot;$modename: warning: complete static linking is impossible in this configuration&quot; 1&gt;&amp;2
+	  fi
+	  if test -n &quot;$link_static_flag&quot;; then
+	    dlopen_self=$dlopen_self_static
+	  fi
+	else
+	  if test -z &quot;$pic_flag&quot; &amp;&amp; test -n &quot;$link_static_flag&quot;; then
+	    dlopen_self=$dlopen_self_static
+	  fi
+	fi
+	build_libtool_libs=no
+	build_old_libs=yes
+	prefer_static_libs=yes
+	break
+	;;
+      esac
+    done
+
+    # See if our shared archives depend on static archives.
+    test -n &quot;$old_archive_from_new_cmds&quot; &amp;&amp; build_old_libs=yes
+
+    # Go through the arguments, transforming them on the way.
+    while test &quot;$#&quot; -gt 0; do
+      arg=&quot;$1&quot;
+      base_compile=&quot;$base_compile $arg&quot;
+      shift
+      case $arg in
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	qarg=\&quot;`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`\&quot; ### testsuite: skip nested quoting test
+	;;
+      *) qarg=$arg ;;
+      esac
+      libtool_args=&quot;$libtool_args $qarg&quot;
+
+      # If the previous option needs an argument, assign it.
+      if test -n &quot;$prev&quot;; then
+	case $prev in
+	output)
+	  compile_command=&quot;$compile_command @OUTPUT@&quot;
+	  finalize_command=&quot;$finalize_command @OUTPUT@&quot;
+	  ;;
+	esac
+
+	case $prev in
+	dlfiles|dlprefiles)
+	  if test &quot;$preload&quot; = no; then
+	    # Add the symbol object into the linking commands.
+	    compile_command=&quot;$compile_command @SYMFILE@&quot;
+	    finalize_command=&quot;$finalize_command @SYMFILE@&quot;
+	    preload=yes
+	  fi
+	  case $arg in
+	  *.la | *.lo) ;;  # We handle these cases below.
+	  force)
+	    if test &quot;$dlself&quot; = no; then
+	      dlself=needless
+	      export_dynamic=yes
+	    fi
+	    prev=
+	    continue
+	    ;;
+	  self)
+	    if test &quot;$prev&quot; = dlprefiles; then
+	      dlself=yes
+	    elif test &quot;$prev&quot; = dlfiles &amp;&amp; test &quot;$dlopen_self&quot; != yes; then
+	      dlself=yes
+	    else
+	      dlself=needless
+	      export_dynamic=yes
+	    fi
+	    prev=
+	    continue
+	    ;;
+	  *)
+	    if test &quot;$prev&quot; = dlfiles; then
+	      dlfiles=&quot;$dlfiles $arg&quot;
+	    else
+	      dlprefiles=&quot;$dlprefiles $arg&quot;
+	    fi
+	    prev=
+	    continue
+	    ;;
+	  esac
+	  ;;
+	expsyms)
+	  export_symbols=&quot;$arg&quot;
+	  if test ! -f &quot;$arg&quot;; then
+	    $echo &quot;$modename: symbol file \`$arg' does not exist&quot;
+	    exit 1
+	  fi
+	  prev=
+	  continue
+	  ;;
+	expsyms_regex)
+	  export_symbols_regex=&quot;$arg&quot;
+	  prev=
+	  continue
+	  ;;
+	inst_prefix)
+	  inst_prefix_dir=&quot;$arg&quot;
+	  prev=
+	  continue
+	  ;;
+	release)
+	  release=&quot;-$arg&quot;
+	  prev=
+	  continue
+	  ;;
+	objectlist)
+	  if test -f &quot;$arg&quot;; then
+	    save_arg=$arg
+	    moreargs=
+	    for fil in `cat $save_arg`
+	    do
+#	      moreargs=&quot;$moreargs $fil&quot;
+	      arg=$fil
+	      # A libtool-controlled object.
+
+	      # Check to see that this really is a libtool object.
+	      if (${SED} -e '2q' $arg | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+		pic_object=
+		non_pic_object=
+
+		# Read the .lo file
+		# If there is no directory component, then add one.
+		case $arg in
+		*/* | *\\*) . $arg ;;
+		*) . ./$arg ;;
+		esac
+
+		if test -z &quot;$pic_object&quot; || \
+		   test -z &quot;$non_pic_object&quot; ||
+		   test &quot;$pic_object&quot; = none &amp;&amp; \
+		   test &quot;$non_pic_object&quot; = none; then
+		  $echo &quot;$modename: cannot find name of object for \`$arg'&quot; 1&gt;&amp;2
+		  exit 1
+		fi
+
+		# Extract subdirectory from the argument.
+		xdir=`$echo &quot;X$arg&quot; | $Xsed -e 's%/[^/]*$%%'`
+		if test &quot;X$xdir&quot; = &quot;X$arg&quot;; then
+		  xdir=
+		else
+		  xdir=&quot;$xdir/&quot;
+		fi
+
+		if test &quot;$pic_object&quot; != none; then
+		  # Prepend the subdirectory the object is found in.
+		  pic_object=&quot;$xdir$pic_object&quot;
+
+		  if test &quot;$prev&quot; = dlfiles; then
+		    if test &quot;$build_libtool_libs&quot; = yes &amp;&amp; test &quot;$dlopen_support&quot; = yes; then
+		      dlfiles=&quot;$dlfiles $pic_object&quot;
+		      prev=
+		      continue
+		    else
+		      # If libtool objects are unsupported, then we need to preload.
+		      prev=dlprefiles
+		    fi
+		  fi
+
+		  # CHECK ME:  I think I busted this.  -Ossama
+		  if test &quot;$prev&quot; = dlprefiles; then
+		    # Preload the old-style object.
+		    dlprefiles=&quot;$dlprefiles $pic_object&quot;
+		    prev=
+		  fi
+
+		  # A PIC object.
+		  libobjs=&quot;$libobjs $pic_object&quot;
+		  arg=&quot;$pic_object&quot;
+		fi
+
+		# Non-PIC object.
+		if test &quot;$non_pic_object&quot; != none; then
+		  # Prepend the subdirectory the object is found in.
+		  non_pic_object=&quot;$xdir$non_pic_object&quot;
+
+		  # A standard non-PIC object
+		  non_pic_objects=&quot;$non_pic_objects $non_pic_object&quot;
+		  if test -z &quot;$pic_object&quot; || test &quot;$pic_object&quot; = none ; then
+		    arg=&quot;$non_pic_object&quot;
+		  fi
+		fi
+	      else
+		# Only an error if not doing a dry-run.
+		if test -z &quot;$run&quot;; then
+		  $echo &quot;$modename: \`$arg' is not a valid libtool object&quot; 1&gt;&amp;2
+		  exit 1
+		else
+		  # Dry-run case.
+
+		  # Extract subdirectory from the argument.
+		  xdir=`$echo &quot;X$arg&quot; | $Xsed -e 's%/[^/]*$%%'`
+		  if test &quot;X$xdir&quot; = &quot;X$arg&quot;; then
+		    xdir=
+		  else
+		    xdir=&quot;$xdir/&quot;
+		  fi
+
+		  pic_object=`$echo &quot;X${xdir}${objdir}/${arg}&quot; | $Xsed -e &quot;$lo2o&quot;`
+		  non_pic_object=`$echo &quot;X${xdir}${arg}&quot; | $Xsed -e &quot;$lo2o&quot;`
+		  libobjs=&quot;$libobjs $pic_object&quot;
+		  non_pic_objects=&quot;$non_pic_objects $non_pic_object&quot;
+		fi
+	      fi
+	    done
+	  else
+	    $echo &quot;$modename: link input file \`$save_arg' does not exist&quot;
+	    exit 1
+	  fi
+	  arg=$save_arg
+	  prev=
+	  continue
+	  ;;
+	rpath | xrpath)
+	  # We need an absolute path.
+	  case $arg in
+	  [\\/]* | [A-Za-z]:[\\/]*) ;;
+	  *)
+	    $echo &quot;$modename: only absolute run-paths are allowed&quot; 1&gt;&amp;2
+	    exit 1
+	    ;;
+	  esac
+	  if test &quot;$prev&quot; = rpath; then
+	    case &quot;$rpath &quot; in
+	    *&quot; $arg &quot;*) ;;
+	    *) rpath=&quot;$rpath $arg&quot; ;;
+	    esac
+	  else
+	    case &quot;$xrpath &quot; in
+	    *&quot; $arg &quot;*) ;;
+	    *) xrpath=&quot;$xrpath $arg&quot; ;;
+	    esac
+	  fi
+	  prev=
+	  continue
+	  ;;
+	xcompiler)
+	  compiler_flags=&quot;$compiler_flags $qarg&quot;
+	  prev=
+	  compile_command=&quot;$compile_command $qarg&quot;
+	  finalize_command=&quot;$finalize_command $qarg&quot;
+	  continue
+	  ;;
+	xlinker)
+	  linker_flags=&quot;$linker_flags $qarg&quot;
+	  compiler_flags=&quot;$compiler_flags $wl$qarg&quot;
+	  prev=
+	  compile_command=&quot;$compile_command $wl$qarg&quot;
+	  finalize_command=&quot;$finalize_command $wl$qarg&quot;
+	  continue
+	  ;;
+	xcclinker)
+	  linker_flags=&quot;$linker_flags $qarg&quot;
+	  compiler_flags=&quot;$compiler_flags $qarg&quot;
+	  prev=
+	  compile_command=&quot;$compile_command $qarg&quot;
+	  finalize_command=&quot;$finalize_command $qarg&quot;
+	  continue
+	  ;;
+	framework)
+	  case $host in
+	    *-*-darwin*)
+	      case &quot;$deplibs &quot; in
+	        *&quot; $qarg.ltframework &quot;*) ;;
+		*) deplibs=&quot;$deplibs $qarg.ltframework&quot; # this is fixed later
+		   ;;
+              esac
+              ;;
+   	  esac
+	  prev=
+	  continue
+	  ;;
+	*)
+	  eval &quot;$prev=\&quot;\$arg\&quot;&quot;
+	  prev=
+	  continue
+	  ;;
+	esac
+      fi # test -n &quot;$prev&quot;
+
+      prevarg=&quot;$arg&quot;
+
+      case $arg in
+      -all-static)
+	if test -n &quot;$link_static_flag&quot;; then
+	  compile_command=&quot;$compile_command $link_static_flag&quot;
+	  finalize_command=&quot;$finalize_command $link_static_flag&quot;
+	fi
+	continue
+	;;
+
+      -allow-undefined)
+	# FIXME: remove this flag sometime in the future.
+	$echo &quot;$modename: \`-allow-undefined' is deprecated because it is the default&quot; 1&gt;&amp;2
+	continue
+	;;
+
+      -avoid-version)
+	avoid_version=yes
+	continue
+	;;
+
+      -dlopen)
+	prev=dlfiles
+	continue
+	;;
+
+      -dlpreopen)
+	prev=dlprefiles
+	continue
+	;;
+
+      -export-dynamic)
+	export_dynamic=yes
+	continue
+	;;
+
+      -export-symbols | -export-symbols-regex)
+	if test -n &quot;$export_symbols&quot; || test -n &quot;$export_symbols_regex&quot;; then
+	  $echo &quot;$modename: more than one -exported-symbols argument is not allowed&quot;
+	  exit 1
+	fi
+	if test &quot;X$arg&quot; = &quot;X-export-symbols&quot;; then
+	  prev=expsyms
+	else
+	  prev=expsyms_regex
+	fi
+	continue
+	;;
+
+      -inst-prefix-dir)
+	prev=inst_prefix
+	continue
+	;;
+
+      # The native IRIX linker understands -LANG:*, -LIST:* and -LNO:*
+      # so, if we see these flags be careful not to treat them like -L
+      -L[A-Z][A-Z]*:*)
+	case $with_gcc/$host in
+	no/*-*-irix* | /*-*-irix*)
+	  compile_command=&quot;$compile_command $arg&quot;
+	  finalize_command=&quot;$finalize_command $arg&quot;
+	  ;;
+	esac
+	continue
+	;;
+
+      -L*)
+	dir=`$echo &quot;X$arg&quot; | $Xsed -e 's/^-L//'`
+	# We need an absolute path.
+	case $dir in
+	[\\/]* | [A-Za-z]:[\\/]*) ;;
+	*)
+	  absdir=`cd &quot;$dir&quot; &amp;&amp; pwd`
+	  if test -z &quot;$absdir&quot;; then
+	    $echo &quot;$modename: cannot determine absolute directory name of \`$dir'&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+	  dir=&quot;$absdir&quot;
+	  ;;
+	esac
+	case &quot;$deplibs &quot; in
+	*&quot; -L$dir &quot;*) ;;
+	*)
+	  deplibs=&quot;$deplibs -L$dir&quot;
+	  lib_search_path=&quot;$lib_search_path $dir&quot;
+	  ;;
+	esac
+	case $host in
+	*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+	  case :$dllsearchpath: in
+	  *&quot;:$dir:&quot;*) ;;
+	  *) dllsearchpath=&quot;$dllsearchpath:$dir&quot;;;
+	  esac
+	  ;;
+	esac
+	continue
+	;;
+
+      -l*)
+	if test &quot;X$arg&quot; = &quot;X-lc&quot; || test &quot;X$arg&quot; = &quot;X-lm&quot;; then
+	  case $host in
+	  *-*-cygwin* | *-*-pw32* | *-*-beos*)
+	    # These systems don't actually have a C or math library (as such)
+	    continue
+	    ;;
+	  *-*-mingw* | *-*-os2*)
+	    # These systems don't actually have a C library (as such)
+	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
+	    ;;
+	  *-*-openbsd* | *-*-freebsd*)
+	    # Do not include libc due to us having libc/libc_r.
+	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
+	    ;;
+	  *-*-rhapsody* | *-*-darwin1.[012])
+	    # Rhapsody C and math libraries are in the System framework
+	    deplibs=&quot;$deplibs System.ltframework&quot;
+	    continue
+	  esac
+	elif test &quot;X$arg&quot; = &quot;X-lc_r&quot;; then
+	 case $host in
+	 *-*-openbsd*)
+	   # Do not include libc_r directly, use -pthread flag.
+	   continue
+	   ;;
+	 esac
+	fi
+	deplibs=&quot;$deplibs $arg&quot;
+	continue
+	;;
+
+      -module)
+	module=yes
+	continue
+	;;
+
+      # gcc -m* arguments should be passed to the linker via $compiler_flags
+      # in order to pass architecture information to the linker
+      # (e.g. 32 vs 64-bit).  This may also be accomplished via -Wl,-mfoo
+      # but this is not reliable with gcc because gcc may use -mfoo to
+      # select a different linker, different libraries, etc, while
+      # -Wl,-mfoo simply passes -mfoo to the linker.
+      -m*)
+	# Unknown arguments in both finalize_command and compile_command need
+	# to be aesthetically quoted because they are evaled later.
+	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+	case $arg in
+	*[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	  arg=&quot;\&quot;$arg\&quot;&quot;
+	  ;;
+	esac
+        compile_command=&quot;$compile_command $arg&quot;
+        finalize_command=&quot;$finalize_command $arg&quot;
+        if test &quot;$with_gcc&quot; = &quot;yes&quot; ; then
+          compiler_flags=&quot;$compiler_flags $arg&quot;
+        fi
+        continue
+        ;;
+
+      -shrext)
+	prev=shrext
+	continue
+	;;
+
+      -no-fast-install)
+	fast_install=no
+	continue
+	;;
+
+      -no-install)
+	case $host in
+	*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+	  # The PATH hackery in wrapper scripts is required on Windows
+	  # in order for the loader to find any dlls it needs.
+	  $echo &quot;$modename: warning: \`-no-install' is ignored for $host&quot; 1&gt;&amp;2
+	  $echo &quot;$modename: warning: assuming \`-no-fast-install' instead&quot; 1&gt;&amp;2
+	  fast_install=no
+	  ;;
+	*) no_install=yes ;;
+	esac
+	continue
+	;;
+
+      -no-undefined)
+	allow_undefined=no
+	continue
+	;;
+
+      -objectlist)
+	prev=objectlist
+	continue
+	;;
+
+      -o) prev=output ;;
+
+      -release)
+	prev=release
+	continue
+	;;
+
+      -rpath)
+	prev=rpath
+	continue
+	;;
+
+      -R)
+	prev=xrpath
+	continue
+	;;
+
+      -R*)
+	dir=`$echo &quot;X$arg&quot; | $Xsed -e 's/^-R//'`
+	# We need an absolute path.
+	case $dir in
+	[\\/]* | [A-Za-z]:[\\/]*) ;;
+	*)
+	  $echo &quot;$modename: only absolute run-paths are allowed&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+	case &quot;$xrpath &quot; in
+	*&quot; $dir &quot;*) ;;
+	*) xrpath=&quot;$xrpath $dir&quot; ;;
+	esac
+	continue
+	;;
+
+      -static)
+	# The effects of -static are defined in a previous loop.
+	# We used to do the same as -all-static on platforms that
+	# didn't have a PIC flag, but the assumption that the effects
+	# would be equivalent was wrong.  It would break on at least
+	# Digital Unix and AIX.
+	continue
+	;;
+
+      -thread-safe)
+	thread_safe=yes
+	continue
+	;;
+
+      -version-info)
+	prev=vinfo
+	continue
+	;;
+      -version-number)
+	prev=vinfo
+	vinfo_number=yes
+	continue
+	;;
+
+      -Wc,*)
+	args=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot; -e 's/^-Wc,//'`
+	arg=
+	save_ifs=&quot;$IFS&quot;; IFS=','
+	for flag in $args; do
+	  IFS=&quot;$save_ifs&quot;
+	  case $flag in
+	    *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	    flag=&quot;\&quot;$flag\&quot;&quot;
+	    ;;
+	  esac
+	  arg=&quot;$arg $wl$flag&quot;
+	  compiler_flags=&quot;$compiler_flags $flag&quot;
+	done
+	IFS=&quot;$save_ifs&quot;
+	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;s/^ //&quot;`
+	;;
+
+      -Wl,*)
+	args=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot; -e 's/^-Wl,//'`
+	arg=
+	save_ifs=&quot;$IFS&quot;; IFS=','
+	for flag in $args; do
+	  IFS=&quot;$save_ifs&quot;
+	  case $flag in
+	    *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	    flag=&quot;\&quot;$flag\&quot;&quot;
+	    ;;
+	  esac
+	  arg=&quot;$arg $wl$flag&quot;
+	  compiler_flags=&quot;$compiler_flags $wl$flag&quot;
+	  linker_flags=&quot;$linker_flags $flag&quot;
+	done
+	IFS=&quot;$save_ifs&quot;
+	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;s/^ //&quot;`
+	;;
+
+      -Xcompiler)
+	prev=xcompiler
+	continue
+	;;
+
+      -Xlinker)
+	prev=xlinker
+	continue
+	;;
+
+      -XCClinker)
+	prev=xcclinker
+	continue
+	;;
+
+      -framework)
+        prev=framework
+	continue
+	;;
+
+      # Some other compiler flag.
+      -* | +*)
+	# Unknown arguments in both finalize_command and compile_command need
+	# to be aesthetically quoted because they are evaled later.
+	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+	case $arg in
+	*[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	  arg=&quot;\&quot;$arg\&quot;&quot;
+	  ;;
+	esac
+	add_flags=&quot;$add_flags $arg&quot;
+	;;
+
+      *.$objext)
+	# A standard object.
+	objs=&quot;$objs $arg&quot;
+	;;
+
+      *.lo)
+	# A libtool-controlled object.
+
+	# Check to see that this really is a libtool object.
+	if (${SED} -e '2q' $arg | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+	  pic_object=
+	  non_pic_object=
+
+	  # Read the .lo file
+	  # If there is no directory component, then add one.
+	  case $arg in
+	  */* | *\\*) . $arg ;;
+	  *) . ./$arg ;;
+	  esac
+
+	  if test -z &quot;$pic_object&quot; || \
+	     test -z &quot;$non_pic_object&quot; ||
+	     test &quot;$pic_object&quot; = none &amp;&amp; \
+	     test &quot;$non_pic_object&quot; = none; then
+	    $echo &quot;$modename: cannot find name of object for \`$arg'&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+
+	  # Extract subdirectory from the argument.
+	  xdir=`$echo &quot;X$arg&quot; | $Xsed -e 's%/[^/]*$%%'`
+	  if test &quot;X$xdir&quot; = &quot;X$arg&quot;; then
+	    xdir=
+ 	  else
+	    xdir=&quot;$xdir/&quot;
+	  fi
+
+	  if test &quot;$pic_object&quot; != none; then
+	    # Prepend the subdirectory the object is found in.
+	    pic_object=&quot;$xdir$pic_object&quot;
+
+	    if test &quot;$prev&quot; = dlfiles; then
+	      if test &quot;$build_libtool_libs&quot; = yes &amp;&amp; test &quot;$dlopen_support&quot; = yes; then
+		dlfiles=&quot;$dlfiles $pic_object&quot;
+		prev=
+		continue
+	      else
+		# If libtool objects are unsupported, then we need to preload.
+		prev=dlprefiles
+	      fi
+	    fi
+
+	    # CHECK ME:  I think I busted this.  -Ossama
+	    if test &quot;$prev&quot; = dlprefiles; then
+	      # Preload the old-style object.
+	      dlprefiles=&quot;$dlprefiles $pic_object&quot;
+	      prev=
+	    fi
+
+	    # A PIC object.
+	    libobjs=&quot;$libobjs $pic_object&quot;
+	    arg=&quot;$pic_object&quot;
+	  fi
+
+	  # Non-PIC object.
+	  if test &quot;$non_pic_object&quot; != none; then
+	    # Prepend the subdirectory the object is found in.
+	    non_pic_object=&quot;$xdir$non_pic_object&quot;
+
+	    # A standard non-PIC object
+	    non_pic_objects=&quot;$non_pic_objects $non_pic_object&quot;
+	    if test -z &quot;$pic_object&quot; || test &quot;$pic_object&quot; = none ; then
+	      arg=&quot;$non_pic_object&quot;
+	    fi
+	  fi
+	else
+	  # Only an error if not doing a dry-run.
+	  if test -z &quot;$run&quot;; then
+	    $echo &quot;$modename: \`$arg' is not a valid libtool object&quot; 1&gt;&amp;2
+	    exit 1
+	  else
+	    # Dry-run case.
+
+	    # Extract subdirectory from the argument.
+	    xdir=`$echo &quot;X$arg&quot; | $Xsed -e 's%/[^/]*$%%'`
+	    if test &quot;X$xdir&quot; = &quot;X$arg&quot;; then
+	      xdir=
+	    else
+	      xdir=&quot;$xdir/&quot;
+	    fi
+
+	    pic_object=`$echo &quot;X${xdir}${objdir}/${arg}&quot; | $Xsed -e &quot;$lo2o&quot;`
+	    non_pic_object=`$echo &quot;X${xdir}${arg}&quot; | $Xsed -e &quot;$lo2o&quot;`
+	    libobjs=&quot;$libobjs $pic_object&quot;
+	    non_pic_objects=&quot;$non_pic_objects $non_pic_object&quot;
+	  fi
+	fi
+	;;
+
+      *.$libext)
+	# An archive.
+	deplibs=&quot;$deplibs $arg&quot;
+	old_deplibs=&quot;$old_deplibs $arg&quot;
+	continue
+	;;
+
+      *.la)
+	# A libtool-controlled library.
+
+	if test &quot;$prev&quot; = dlfiles; then
+	  # This library was specified with -dlopen.
+	  dlfiles=&quot;$dlfiles $arg&quot;
+	  prev=
+	elif test &quot;$prev&quot; = dlprefiles; then
+	  # The library was specified with -dlpreopen.
+	  dlprefiles=&quot;$dlprefiles $arg&quot;
+	  prev=
+	else
+	  deplibs=&quot;$deplibs $arg&quot;
+	fi
+	continue
+	;;
+
+      # Some other compiler argument.
+      *)
+	# Unknown arguments in both finalize_command and compile_command need
+	# to be aesthetically quoted because they are evaled later.
+	arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+	case $arg in
+	*[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*|&quot;&quot;)
+	  arg=&quot;\&quot;$arg\&quot;&quot;
+	  ;;
+	esac
+	add_flags=&quot;$add_flags $arg&quot;
+	;;
+      esac # arg
+
+      # Now actually substitute the argument into the commands.
+      if test -n &quot;$arg&quot;; then
+	compile_command=&quot;$compile_command $arg&quot;
+	finalize_command=&quot;$finalize_command $arg&quot;
+      fi
+    done # argument parsing loop
+
+    if test -n &quot;$prev&quot;; then
+      $echo &quot;$modename: the \`$prevarg' option requires an argument&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+    fi
+
+    # Infer tagged configuration to use if any are available and
+    # if one wasn't chosen via the &quot;--tag&quot; command line option.
+    # Only attempt this if the compiler in the base link
+    # command doesn't match the default compiler.
+    if test -n &quot;$available_tags&quot; &amp;&amp; test -z &quot;$tagname&quot;; then
+      case $base_compile in
+      # Blanks in the command may have been stripped by the calling shell,
+      # but not from the CC environment variable when configure was run.
+      &quot;$CC &quot;* | &quot; $CC &quot;* | &quot;`$echo $CC` &quot;* | &quot; `$echo $CC` &quot;*) ;;
+      # Blanks at the start of $base_compile will cause this to fail
+      # if we don't check for them as well.
+      *)
+	for z in $available_tags; do
+	  if grep &quot;^# ### BEGIN LIBTOOL TAG CONFIG: $z$&quot; &lt; &quot;$0&quot; &gt; /dev/null; then
+	    # Evaluate the configuration.
+	    eval &quot;`${SED} -n -e '/^# ### BEGIN LIBTOOL TAG CONFIG: '$z'$/,/^# ### END LIBTOOL TAG CONFIG: '$z'$/p' &lt; $0`&quot;
+	    case $base_compile in
+	    &quot;$CC &quot;* | &quot; $CC &quot;* | &quot;`$echo $CC` &quot;* | &quot; `$echo $CC` &quot;*)
+	      # The compiler in $compile_command matches
+	      # the one in the tagged configuration.
+	      # Assume this is the tagged configuration we want.
+	      tagname=$z
+	      break
+	      ;;
+	    esac
+	  fi
+	done
+	# If $tagname still isn't set, then no tagged configuration
+	# was found and let the user know that the &quot;--tag&quot; command
+	# line option must be used.
+	if test -z &quot;$tagname&quot;; then
+	  $echo &quot;$modename: unable to infer tagged configuration&quot;
+	  $echo &quot;$modename: specify a tag with \`--tag'&quot; 1&gt;&amp;2
+	  exit 1
+#       else
+#         $echo &quot;$modename: using $tagname tagged configuration&quot;
+	fi
+	;;
+      esac
+    fi
+
+    if test &quot;$export_dynamic&quot; = yes &amp;&amp; test -n &quot;$export_dynamic_flag_spec&quot;; then
+      eval arg=\&quot;$export_dynamic_flag_spec\&quot;
+      compile_command=&quot;$compile_command $arg&quot;
+      finalize_command=&quot;$finalize_command $arg&quot;
+    fi
+
+    oldlibs=
+    # calculate the name of the file, without its directory
+    outputname=`$echo &quot;X$output&quot; | $Xsed -e 's%^.*/%%'`
+    libobjs_save=&quot;$libobjs&quot;
+
+    if test -n &quot;$shlibpath_var&quot;; then
+      # get the directories listed in $shlibpath_var
+      eval shlib_search_path=\`\$echo \&quot;X\${$shlibpath_var}\&quot; \| \$Xsed -e \'s/:/ /g\'\`
+    else
+      shlib_search_path=
+    fi
+    eval sys_lib_search_path=\&quot;$sys_lib_search_path_spec\&quot;
+    eval sys_lib_dlsearch_path=\&quot;$sys_lib_dlsearch_path_spec\&quot;
+
+    output_objdir=`$echo &quot;X$output&quot; | $Xsed -e 's%/[^/]*$%%'`
+    if test &quot;X$output_objdir&quot; = &quot;X$output&quot;; then
+      output_objdir=&quot;$objdir&quot;
+    else
+      output_objdir=&quot;$output_objdir/$objdir&quot;
+    fi
+    # Create the object directory.
+    if test ! -d &quot;$output_objdir&quot;; then
+      $show &quot;$mkdir $output_objdir&quot;
+      $run $mkdir $output_objdir
+      status=$?
+      if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$output_objdir&quot;; then
+	exit $status
+      fi
+    fi
+
+    # Determine the type of output
+    case $output in
+    &quot;&quot;)
+      $echo &quot;$modename: you must specify an output file&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+      ;;
+    *.$libext) linkmode=oldlib ;;
+    *.lo | *.$objext) linkmode=obj ;;
+    *.la) linkmode=lib ;;
+    *) linkmode=prog ;; # Anything else should be a program.
+    esac
+
+    case $host in
+    *cygwin* | *mingw* | *pw32*)
+      # don't eliminate duplcations in $postdeps and $predeps
+      duplicate_compiler_generated_deps=yes
+      ;;
+    *)
+      duplicate_compiler_generated_deps=$duplicate_deps
+      ;;
+    esac
+    specialdeplibs=
+
+    libs=
+    # Find all interdependent deplibs by searching for libraries
+    # that are linked more than once (e.g. -la -lb -la)
+    for deplib in $deplibs; do
+      if test &quot;X$duplicate_deps&quot; = &quot;Xyes&quot; ; then
+	case &quot;$libs &quot; in
+	*&quot; $deplib &quot;*) specialdeplibs=&quot;$specialdeplibs $deplib&quot; ;;
+	esac
+      fi
+      libs=&quot;$libs $deplib&quot;
+    done
+
+    if test &quot;$linkmode&quot; = lib; then
+      libs=&quot;$predeps $libs $compiler_lib_search_path $postdeps&quot;
+
+      # Compute libraries that are listed more than once in $predeps
+      # $postdeps and mark them as special (i.e., whose duplicates are
+      # not to be eliminated).
+      pre_post_deps=
+      if test &quot;X$duplicate_compiler_generated_deps&quot; = &quot;Xyes&quot; ; then
+	for pre_post_dep in $predeps $postdeps; do
+	  case &quot;$pre_post_deps &quot; in
+	  *&quot; $pre_post_dep &quot;*) specialdeplibs=&quot;$specialdeplibs $pre_post_deps&quot; ;;
+	  esac
+	  pre_post_deps=&quot;$pre_post_deps $pre_post_dep&quot;
+	done
+      fi
+      pre_post_deps=
+    fi
+
+    deplibs=
+    newdependency_libs=
+    newlib_search_path=
+    need_relink=no # whether we're linking any uninstalled libtool libraries
+    notinst_deplibs= # not-installed libtool libraries
+    notinst_path= # paths that contain not-installed libtool libraries
+    case $linkmode in
+    lib)
+	passes=&quot;conv link&quot;
+	for file in $dlfiles $dlprefiles; do
+	  case $file in
+	  *.la) ;;
+	  *)
+	    $echo &quot;$modename: libraries can \`-dlopen' only libtool libraries: $file&quot; 1&gt;&amp;2
+	    exit 1
+	    ;;
+	  esac
+	done
+	;;
+    prog)
+	compile_deplibs=
+	finalize_deplibs=
+	alldeplibs=no
+	newdlfiles=
+	newdlprefiles=
+	passes=&quot;conv scan dlopen dlpreopen link&quot;
+	;;
+    *)  passes=&quot;conv&quot;
+	;;
+    esac
+    for pass in $passes; do
+      if test &quot;$linkmode,$pass&quot; = &quot;lib,link&quot; ||
+	 test &quot;$linkmode,$pass&quot; = &quot;prog,scan&quot;; then
+	libs=&quot;$deplibs&quot;
+	deplibs=
+      fi
+      if test &quot;$linkmode&quot; = prog; then
+	case $pass in
+	dlopen) libs=&quot;$dlfiles&quot; ;;
+	dlpreopen) libs=&quot;$dlprefiles&quot; ;;
+	link) libs=&quot;$deplibs %DEPLIBS% $dependency_libs&quot; ;;
+	esac
+      fi
+      if test &quot;$pass&quot; = dlopen; then
+	# Collect dlpreopened libraries
+	save_deplibs=&quot;$deplibs&quot;
+	deplibs=
+      fi
+      for deplib in $libs; do
+	lib=
+	found=no
+	case $deplib in
+	-l*)
+	  if test &quot;$linkmode&quot; != lib &amp;&amp; test &quot;$linkmode&quot; != prog; then
+	    $echo &quot;$modename: warning: \`-l' is ignored for archives/objects&quot; 1&gt;&amp;2
+	    continue
+	  fi
+	  if test &quot;$pass&quot; = conv &amp;&amp; test &quot;$allow_undefined&quot; = yes; then
+	    deplibs=&quot;$deplib $deplibs&quot;
+	    continue
+	  fi
+	  name=`$echo &quot;X$deplib&quot; | $Xsed -e 's/^-l//'`
+	  for searchdir in $newlib_search_path $lib_search_path $sys_lib_search_path $shlib_search_path; do
+	    for search_ext in .la $shrext .so .a; do
+	      # Search the libtool library
+	      lib=&quot;$searchdir/lib${name}${search_ext}&quot;
+	      if test -f &quot;$lib&quot;; then
+		if test &quot;$search_ext&quot; = &quot;.la&quot;; then
+		  found=yes
+		else
+		  found=no
+		fi
+		break 2
+	      fi
+	    done
+	  done
+	  if test &quot;$found&quot; != yes; then
+	    # deplib doesn't seem to be a libtool library
+	    if test &quot;$linkmode,$pass&quot; = &quot;prog,link&quot;; then
+	      compile_deplibs=&quot;$deplib $compile_deplibs&quot;
+	      finalize_deplibs=&quot;$deplib $finalize_deplibs&quot;
+	    else
+	      deplibs=&quot;$deplib $deplibs&quot;
+	      test &quot;$linkmode&quot; = lib &amp;&amp; newdependency_libs=&quot;$deplib $newdependency_libs&quot;
+	    fi
+	    continue
+	  else # deplib is a libtool library
+	    # If $allow_libtool_libs_with_static_runtimes &amp;&amp; $deplib is a stdlib,
+	    # We need to do some special things here, and not later.
+	    if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
+	      case &quot; $predeps $postdeps &quot; in
+	      *&quot; $deplib &quot;*)
+		if (${SED} -e '2q' $lib |
+                    grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+		  library_names=
+		  old_library=
+		  case $lib in
+		  */* | *\\*) . $lib ;;
+		  *) . ./$lib ;;
+		  esac
+		  for l in $old_library $library_names; do
+		    ll=&quot;$l&quot;
+		  done
+		  if test &quot;X$ll&quot; = &quot;X$old_library&quot; ; then # only static version available
+		    found=no
+		    ladir=`$echo &quot;X$lib&quot; | $Xsed -e 's%/[^/]*$%%'`
+		    test &quot;X$ladir&quot; = &quot;X$lib&quot; &amp;&amp; ladir=&quot;.&quot;
+		    lib=$ladir/$old_library
+		    if test &quot;$linkmode,$pass&quot; = &quot;prog,link&quot;; then
+		      compile_deplibs=&quot;$deplib $compile_deplibs&quot;
+		      finalize_deplibs=&quot;$deplib $finalize_deplibs&quot;
+		    else
+		      deplibs=&quot;$deplib $deplibs&quot;
+		      test &quot;$linkmode&quot; = lib &amp;&amp; newdependency_libs=&quot;$deplib $newdependency_libs&quot;
+		    fi
+		    continue
+		  fi
+		fi
+	        ;;
+	      *) ;;
+	      esac
+	    fi
+	  fi
+	  ;; # -l
+	*.ltframework)
+	  if test &quot;$linkmode,$pass&quot; = &quot;prog,link&quot;; then
+	    compile_deplibs=&quot;$deplib $compile_deplibs&quot;
+	    finalize_deplibs=&quot;$deplib $finalize_deplibs&quot;
+	  else
+	    deplibs=&quot;$deplib $deplibs&quot;
+	    if test &quot;$linkmode&quot; = lib ; then
+	      newdependency_libs=&quot;$deplib $newdependency_libs&quot;
+	    fi
+	  fi
+	  continue
+	  ;;
+	-L*)
+	  case $linkmode in
+	  lib)
+	    deplibs=&quot;$deplib $deplibs&quot;
+	    test &quot;$pass&quot; = conv &amp;&amp; continue
+	    newdependency_libs=&quot;$deplib $newdependency_libs&quot;
+	    newlib_search_path=&quot;$newlib_search_path &quot;`$echo &quot;X$deplib&quot; | $Xsed -e 's/^-L//'`
+	    ;;
+	  prog)
+	    if test &quot;$pass&quot; = conv; then
+	      deplibs=&quot;$deplib $deplibs&quot;
+	      continue
+	    fi
+	    if test &quot;$pass&quot; = scan; then
+	      deplibs=&quot;$deplib $deplibs&quot;
+	      newlib_search_path=&quot;$newlib_search_path &quot;`$echo &quot;X$deplib&quot; | $Xsed -e 's/^-L//'`
+	    else
+	      compile_deplibs=&quot;$deplib $compile_deplibs&quot;
+	      finalize_deplibs=&quot;$deplib $finalize_deplibs&quot;
+	    fi
+	    ;;
+	  *)
+	    $echo &quot;$modename: warning: \`-L' is ignored for archives/objects&quot; 1&gt;&amp;2
+	    ;;
+	  esac # linkmode
+	  continue
+	  ;; # -L
+	-R*)
+	  if test &quot;$pass&quot; = link; then
+	    dir=`$echo &quot;X$deplib&quot; | $Xsed -e 's/^-R//'`
+	    # Make sure the xrpath contains only unique directories.
+	    case &quot;$xrpath &quot; in
+	    *&quot; $dir &quot;*) ;;
+	    *) xrpath=&quot;$xrpath $dir&quot; ;;
+	    esac
+	  fi
+	  deplibs=&quot;$deplib $deplibs&quot;
+	  continue
+	  ;;
+	*.la) lib=&quot;$deplib&quot; ;;
+	*.$libext)
+	  if test &quot;$pass&quot; = conv; then
+	    deplibs=&quot;$deplib $deplibs&quot;
+	    continue
+	  fi
+	  case $linkmode in
+	  lib)
+	    if test &quot;$deplibs_check_method&quot; != pass_all; then
+	      $echo
+	      $echo &quot;*** Warning: Trying to link with static lib archive $deplib.&quot;
+	      $echo &quot;*** I have the capability to make that library automatically link in when&quot;
+	      $echo &quot;*** you link to this library.  But I can only do this if you have a&quot;
+	      $echo &quot;*** shared version of the library, which you do not appear to have&quot;
+	      $echo &quot;*** because the file extensions .$libext of this argument makes me believe&quot;
+	      $echo &quot;*** that it is just a static archive that I should not used here.&quot;
+	    else
+	      $echo
+	      $echo &quot;*** Warning: Linking the shared library $output against the&quot;
+	      $echo &quot;*** static library $deplib is not portable!&quot;
+	      deplibs=&quot;$deplib $deplibs&quot;
+	    fi
+	    continue
+	    ;;
+	  prog)
+	    if test &quot;$pass&quot; != link; then
+	      deplibs=&quot;$deplib $deplibs&quot;
+	    else
+	      compile_deplibs=&quot;$deplib $compile_deplibs&quot;
+	      finalize_deplibs=&quot;$deplib $finalize_deplibs&quot;
+	    fi
+	    continue
+	    ;;
+	  esac # linkmode
+	  ;; # *.$libext
+	*.lo | *.$objext)
+	  if test &quot;$pass&quot; = conv; then
+	    deplibs=&quot;$deplib $deplibs&quot;
+	  elif test &quot;$linkmode&quot; = prog; then
+	    if test &quot;$pass&quot; = dlpreopen || test &quot;$dlopen_support&quot; != yes || test &quot;$build_libtool_libs&quot; = no; then
+	      # If there is no dlopen support or we're linking statically,
+	      # we need to preload.
+	      newdlprefiles=&quot;$newdlprefiles $deplib&quot;
+	      compile_deplibs=&quot;$deplib $compile_deplibs&quot;
+	      finalize_deplibs=&quot;$deplib $finalize_deplibs&quot;
+	    else
+	      newdlfiles=&quot;$newdlfiles $deplib&quot;
+	    fi
+	  fi
+	  continue
+	  ;;
+	%DEPLIBS%)
+	  alldeplibs=yes
+	  continue
+	  ;;
+	esac # case $deplib
+	if test &quot;$found&quot; = yes || test -f &quot;$lib&quot;; then :
+	else
+	  $echo &quot;$modename: cannot find the library \`$lib'&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	# Check to see that this really is a libtool archive.
+	if (${SED} -e '2q' $lib | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then :
+	else
+	  $echo &quot;$modename: \`$lib' is not a valid libtool archive&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	ladir=`$echo &quot;X$lib&quot; | $Xsed -e 's%/[^/]*$%%'`
+	test &quot;X$ladir&quot; = &quot;X$lib&quot; &amp;&amp; ladir=&quot;.&quot;
+
+	dlname=
+	dlopen=
+	dlpreopen=
+	libdir=
+	library_names=
+	old_library=
+	# If the library was installed with an old release of libtool,
+	# it will not redefine variables installed, or shouldnotlink
+	installed=yes
+	shouldnotlink=no
+
+	# Read the .la file
+	case $lib in
+	*/* | *\\*) . $lib ;;
+	*) . ./$lib ;;
+	esac
+
+	case $host in
+	*-*-darwin*)
+	  # Convert &quot;-framework foo&quot; to &quot;foo.ltframework&quot; in dependency_libs
+	  test -n &quot;$dependency_libs&quot; &amp;&amp; dependency_libs=`$echo &quot;X$dependency_libs&quot; | $Xsed -e 's/-framework \([^ $]*\)/\1.ltframework/g'`
+	  ;;
+	esac
+
+	if test &quot;$linkmode,$pass&quot; = &quot;lib,link&quot; ||
+	   test &quot;$linkmode,$pass&quot; = &quot;prog,scan&quot; ||
+	   { test &quot;$linkmode&quot; != prog &amp;&amp; test &quot;$linkmode&quot; != lib; }; then
+	  test -n &quot;$dlopen&quot; &amp;&amp; dlfiles=&quot;$dlfiles $dlopen&quot;
+	  test -n &quot;$dlpreopen&quot; &amp;&amp; dlprefiles=&quot;$dlprefiles $dlpreopen&quot;
+	fi
+
+	if test &quot;$pass&quot; = conv; then
+	  # Only check for convenience libraries
+	  deplibs=&quot;$lib $deplibs&quot;
+	  tmp_libs=
+	  for deplib in $dependency_libs; do
+	    #echo &quot;Adding $deplib to \$deplibs&quot;
+	    deplibs=&quot;$deplib $deplibs&quot;
+            if test &quot;X$duplicate_deps&quot; = &quot;Xyes&quot; ; then
+	      case &quot;$tmp_libs &quot; in
+	      *&quot; $deplib &quot;*) specialdeplibs=&quot;$specialdeplibs $deplib&quot; ;;
+	      esac
+            fi
+	    tmp_libs=&quot;$tmp_libs $deplib&quot;
+	  done
+	  if test -z &quot;$libdir&quot;; then
+	    if test -z &quot;$old_library&quot;; then
+	      $echo &quot;$modename: cannot find name of link library for \`$lib'&quot; 1&gt;&amp;2
+	      exit 1
+	    fi
+	    # It is a libtool convenience library, so add in its objects.
+	    convenience=&quot;$convenience $ladir/$objdir/$old_library&quot;
+	    old_convenience=&quot;$old_convenience $ladir/$objdir/$old_library&quot;
+	  elif test &quot;$linkmode&quot; != prog &amp;&amp; test &quot;$linkmode&quot; != lib; then
+	    $echo &quot;$modename: \`$lib' is not a convenience library&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+	  continue
+	fi # $pass = conv
+
+    
+	# Get the name of the library we link against.
+	linklib=
+	for l in $old_library $library_names; do
+	  linklib=&quot;$l&quot;
+	done
+	if test -z &quot;$linklib&quot;; then
+	  $echo &quot;$modename: cannot find name of link library for \`$lib'&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	# This library was specified with -dlopen.
+	if test &quot;$pass&quot; = dlopen; then
+	  if test -z &quot;$libdir&quot;; then
+	    $echo &quot;$modename: cannot -dlopen a convenience library: \`$lib'&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+	  if test -z &quot;$dlname&quot; || test &quot;$dlopen_support&quot; != yes || test &quot;$build_libtool_libs&quot; = no; then
+	    # If there is no dlname, no dlopen support or we're linking
+	    # statically, we need to preload.  We also need to preload any
+	    # dependent libraries so libltdl's deplib preloader doesn't
+	    # bomb out in the load deplibs phase.
+	    dlprefiles=&quot;$dlprefiles $lib $dependency_libs&quot;
+	  else
+	    newdlfiles=&quot;$newdlfiles $lib&quot;
+	  fi
+	  continue
+	fi # $pass = dlopen
+
+	# We need an absolute path.
+	case $ladir in
+	[\\/]* | [A-Za-z]:[\\/]*) abs_ladir=&quot;$ladir&quot; ;;
+	*)
+	  abs_ladir=`cd &quot;$ladir&quot; &amp;&amp; pwd`
+	  if test -z &quot;$abs_ladir&quot;; then
+	    $echo &quot;$modename: warning: cannot determine absolute directory name of \`$ladir'&quot; 1&gt;&amp;2
+	    $echo &quot;$modename: passing it literally to the linker, although it might fail&quot; 1&gt;&amp;2
+	    abs_ladir=&quot;$ladir&quot;
+	  fi
+	  ;;
+	esac
+	laname=`$echo &quot;X$lib&quot; | $Xsed -e 's%^.*/%%'`
+
+	# Find the relevant object directory and library name.
+	if test &quot;X$installed&quot; = Xyes; then
+	  if test ! -f &quot;$libdir/$linklib&quot; &amp;&amp; test -f &quot;$abs_ladir/$linklib&quot;; then
+	    $echo &quot;$modename: warning: library \`$lib' was moved.&quot; 1&gt;&amp;2
+	    dir=&quot;$ladir&quot;
+	    absdir=&quot;$abs_ladir&quot;
+	    libdir=&quot;$abs_ladir&quot;
+	  else
+	    dir=&quot;$libdir&quot;
+	    absdir=&quot;$libdir&quot;
+	  fi
+	else
+	  dir=&quot;$ladir/$objdir&quot;
+	  absdir=&quot;$abs_ladir/$objdir&quot;
+	  # Remove this search path later
+	  notinst_path=&quot;$notinst_path $abs_ladir&quot;
+	fi # $installed = yes
+	name=`$echo &quot;X$laname&quot; | $Xsed -e 's/\.la$//' -e 's/^lib//'`
+
+	# This library was specified with -dlpreopen.
+	if test &quot;$pass&quot; = dlpreopen; then
+	  if test -z &quot;$libdir&quot;; then
+	    $echo &quot;$modename: cannot -dlpreopen a convenience library: \`$lib'&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+	  # Prefer using a static library (so that no silly _DYNAMIC symbols
+	  # are required to link).
+	  if test -n &quot;$old_library&quot;; then
+	    newdlprefiles=&quot;$newdlprefiles $dir/$old_library&quot;
+	  # Otherwise, use the dlname, so that lt_dlopen finds it.
+	  elif test -n &quot;$dlname&quot;; then
+	    newdlprefiles=&quot;$newdlprefiles $dir/$dlname&quot;
+	  else
+	    newdlprefiles=&quot;$newdlprefiles $dir/$linklib&quot;
+	  fi
+	fi # $pass = dlpreopen
+
+	if test -z &quot;$libdir&quot;; then
+	  # Link the convenience library
+	  if test &quot;$linkmode&quot; = lib; then
+	    deplibs=&quot;$dir/$old_library $deplibs&quot;
+	  elif test &quot;$linkmode,$pass&quot; = &quot;prog,link&quot;; then
+	    compile_deplibs=&quot;$dir/$old_library $compile_deplibs&quot;
+	    finalize_deplibs=&quot;$dir/$old_library $finalize_deplibs&quot;
+	  else
+	    deplibs=&quot;$lib $deplibs&quot; # used for prog,scan pass
+	  fi
+	  continue
+	fi
+
+    
+	if test &quot;$linkmode&quot; = prog &amp;&amp; test &quot;$pass&quot; != link; then
+	  newlib_search_path=&quot;$newlib_search_path $ladir&quot;
+	  deplibs=&quot;$lib $deplibs&quot;
+
+	  linkalldeplibs=no
+	  if test &quot;$link_all_deplibs&quot; != no || test -z &quot;$library_names&quot; ||
+	     test &quot;$build_libtool_libs&quot; = no; then
+	    linkalldeplibs=yes
+	  fi
+
+	  tmp_libs=
+	  for deplib in $dependency_libs; do
+	    case $deplib in
+	    -L*) newlib_search_path=&quot;$newlib_search_path &quot;`$echo &quot;X$deplib&quot; | $Xsed -e 's/^-L//'`;; ### testsuite: skip nested quoting test
+	    esac
+	    # Need to link against all dependency_libs?
+	    if test &quot;$linkalldeplibs&quot; = yes; then
+	      deplibs=&quot;$deplib $deplibs&quot;
+	    else
+	      # Need to hardcode shared library paths
+	      # or/and link against static libraries
+	      newdependency_libs=&quot;$deplib $newdependency_libs&quot;
+	    fi
+	    if test &quot;X$duplicate_deps&quot; = &quot;Xyes&quot; ; then
+	      case &quot;$tmp_libs &quot; in
+	      *&quot; $deplib &quot;*) specialdeplibs=&quot;$specialdeplibs $deplib&quot; ;;
+	      esac
+	    fi
+	    tmp_libs=&quot;$tmp_libs $deplib&quot;
+	  done # for deplib
+	  continue
+	fi # $linkmode = prog...
+
+	if test &quot;$linkmode,$pass&quot; = &quot;prog,link&quot;; then
+	  if test -n &quot;$library_names&quot; &amp;&amp;
+	     { test &quot;$prefer_static_libs&quot; = no || test -z &quot;$old_library&quot;; }; then
+	    # We need to hardcode the library path
+	    if test -n &quot;$shlibpath_var&quot;; then
+	      # Make sure the rpath contains only unique directories.
+	      case &quot;$temp_rpath &quot; in
+	      *&quot; $dir &quot;*) ;;
+	      *&quot; $absdir &quot;*) ;;
+	      *) temp_rpath=&quot;$temp_rpath $dir&quot; ;;
+	      esac
+	    fi
+
+	    # Hardcode the library path.
+	    # Skip directories that are in the system default run-time
+	    # search path.
+	    case &quot; $sys_lib_dlsearch_path &quot; in
+	    *&quot; $absdir &quot;*) ;;
+	    *)
+	      case &quot;$compile_rpath &quot; in
+	      *&quot; $absdir &quot;*) ;;
+	      *) compile_rpath=&quot;$compile_rpath $absdir&quot;
+	      esac
+	      ;;
+	    esac
+	    case &quot; $sys_lib_dlsearch_path &quot; in
+	    *&quot; $libdir &quot;*) ;;
+	    *)
+	      case &quot;$finalize_rpath &quot; in
+	      *&quot; $libdir &quot;*) ;;
+	      *) finalize_rpath=&quot;$finalize_rpath $libdir&quot;
+	      esac
+	      ;;
+	    esac
+	  fi # $linkmode,$pass = prog,link...
+
+	  if test &quot;$alldeplibs&quot; = yes &amp;&amp;
+	     { test &quot;$deplibs_check_method&quot; = pass_all ||
+	       { test &quot;$build_libtool_libs&quot; = yes &amp;&amp;
+		 test -n &quot;$library_names&quot;; }; }; then
+	    # We only need to search for static libraries
+	    continue
+	  fi
+	fi
+
+	link_static=no # Whether the deplib will be linked statically
+	if test -n &quot;$library_names&quot; &amp;&amp;
+	   { test &quot;$prefer_static_libs&quot; = no || test -z &quot;$old_library&quot;; }; then
+	  if test &quot;$installed&quot; = no; then
+	    notinst_deplibs=&quot;$notinst_deplibs $lib&quot;
+	    need_relink=yes
+	  fi
+	  # This is a shared library
+	
+      # Warn about portability, can't link against -module's on some systems (darwin)
+      if test &quot;$shouldnotlink&quot; = yes &amp;&amp; test &quot;$pass&quot; = link ; then
+	    $echo
+	    if test &quot;$linkmode&quot; = prog; then
+	      $echo &quot;*** Warning: Linking the executable $output against the loadable module&quot;
+	    else
+	      $echo &quot;*** Warning: Linking the shared library $output against the loadable module&quot;
+	    fi
+	    $echo &quot;*** $linklib is not portable!&quot;    
+      fi	  
+	  if test &quot;$linkmode&quot; = lib &amp;&amp;
+	     test &quot;$hardcode_into_libs&quot; = yes; then
+	    # Hardcode the library path.
+	    # Skip directories that are in the system default run-time
+	    # search path.
+	    case &quot; $sys_lib_dlsearch_path &quot; in
+	    *&quot; $absdir &quot;*) ;;
+	    *)
+	      case &quot;$compile_rpath &quot; in
+	      *&quot; $absdir &quot;*) ;;
+	      *) compile_rpath=&quot;$compile_rpath $absdir&quot;
+	      esac
+	      ;;
+	    esac
+	    case &quot; $sys_lib_dlsearch_path &quot; in
+	    *&quot; $libdir &quot;*) ;;
+	    *)
+	      case &quot;$finalize_rpath &quot; in
+	      *&quot; $libdir &quot;*) ;;
+	      *) finalize_rpath=&quot;$finalize_rpath $libdir&quot;
+	      esac
+	      ;;
+	    esac
+	  fi
+
+	  if test -n &quot;$old_archive_from_expsyms_cmds&quot;; then
+	    # figure out the soname
+	    set dummy $library_names
+	    realname=&quot;$2&quot;
+	    shift; shift
+	    libname=`eval \\$echo \&quot;$libname_spec\&quot;`
+	    # use dlname if we got it. it's perfectly good, no?
+	    if test -n &quot;$dlname&quot;; then
+	      soname=&quot;$dlname&quot;
+	    elif test -n &quot;$soname_spec&quot;; then
+	      # bleh windows
+	      case $host in
+	      *cygwin* | mingw*)
+		major=`expr $current - $age`
+		versuffix=&quot;-$major&quot;
+		;;
+	      esac
+	      eval soname=\&quot;$soname_spec\&quot;
+	    else
+	      soname=&quot;$realname&quot;
+	    fi
+
+	    # Make a new name for the extract_expsyms_cmds to use
+	    soroot=&quot;$soname&quot;
+	    soname=`$echo $soroot | ${SED} -e 's/^.*\///'`
+	    newlib=&quot;libimp-`$echo $soname | ${SED} 's/^lib//;s/\.dll$//'`.a&quot;
+
+	    # If the library has no export list, then create one now
+	    if test -f &quot;$output_objdir/$soname-def&quot;; then :
+	    else
+	      $show &quot;extracting exported symbol list from \`$soname'&quot;
+	      save_ifs=&quot;$IFS&quot;; IFS='~'
+	      eval cmds=\&quot;$extract_expsyms_cmds\&quot;
+	      for cmd in $cmds; do
+		IFS=&quot;$save_ifs&quot;
+		$show &quot;$cmd&quot;
+		$run eval &quot;$cmd&quot; || exit $?
+	      done
+	      IFS=&quot;$save_ifs&quot;
+	    fi
+
+	    # Create $newlib
+	    if test -f &quot;$output_objdir/$newlib&quot;; then :; else
+	      $show &quot;generating import library for \`$soname'&quot;
+	      save_ifs=&quot;$IFS&quot;; IFS='~'
+	      eval cmds=\&quot;$old_archive_from_expsyms_cmds\&quot;
+	      for cmd in $cmds; do
+		IFS=&quot;$save_ifs&quot;
+		$show &quot;$cmd&quot;
+		$run eval &quot;$cmd&quot; || exit $?
+	      done
+	      IFS=&quot;$save_ifs&quot;
+	    fi
+	    # make sure the library variables are pointing to the new library
+	    dir=$output_objdir
+	    linklib=$newlib
+	  fi # test -n &quot;$old_archive_from_expsyms_cmds&quot;
+
+	  if test &quot;$linkmode&quot; = prog || test &quot;$mode&quot; != relink; then
+	    add_shlibpath=
+	    add_dir=
+	    add=
+	    lib_linked=yes
+	    case $hardcode_action in
+	    immediate | unsupported)
+	      if test &quot;$hardcode_direct&quot; = no; then
+		add=&quot;$dir/$linklib&quot;
+		case $host in
+		  *-*-sco3.2v5* ) add_dir=&quot;-L$dir&quot; ;;
+		  *-*-darwin* )
+		    # if the lib is a module then we can not link against it, someone
+		    # is ignoring the new warnings I added
+		    if /usr/bin/file -L $add 2&gt; /dev/null | grep &quot;bundle&quot; &gt;/dev/null ; then
+		      $echo &quot;** Warning, lib $linklib is a module, not a shared library&quot;
+		      if test -z &quot;$old_library&quot; ; then
+		        $echo
+		        $echo &quot;** And there doesn't seem to be a static archive available&quot;
+		        $echo &quot;** The link will probably fail, sorry&quot;
+		      else
+		        add=&quot;$dir/$old_library&quot;
+		      fi 
+		    fi
+		esac
+	      elif test &quot;$hardcode_minus_L&quot; = no; then
+		case $host in
+		*-*-sunos*) add_shlibpath=&quot;$dir&quot; ;;
+		esac
+		add_dir=&quot;-L$dir&quot;
+		add=&quot;-l$name&quot;
+	      elif test &quot;$hardcode_shlibpath_var&quot; = no; then
+		add_shlibpath=&quot;$dir&quot;
+		add=&quot;-l$name&quot;
+	      else
+		lib_linked=no
+	      fi
+	      ;;
+	    relink)
+	      if test &quot;$hardcode_direct&quot; = yes; then
+		add=&quot;$dir/$linklib&quot;
+	      elif test &quot;$hardcode_minus_L&quot; = yes; then
+		add_dir=&quot;-L$dir&quot;
+		# Try looking first in the location we're being installed to.
+		if test -n &quot;$inst_prefix_dir&quot;; then
+		  case &quot;$libdir&quot; in
+		    [\\/]*)
+		      add_dir=&quot;-L$inst_prefix_dir$libdir $add_dir&quot;
+		      ;;
+		  esac
+		fi
+		add=&quot;-l$name&quot;
+	      elif test &quot;$hardcode_shlibpath_var&quot; = yes; then
+		add_shlibpath=&quot;$dir&quot;
+		add=&quot;-l$name&quot;
+	      else
+		lib_linked=no
+	      fi
+	      ;;
+	    *) lib_linked=no ;;
+	    esac
+
+	    if test &quot;$lib_linked&quot; != yes; then
+	      $echo &quot;$modename: configuration error: unsupported hardcode properties&quot;
+	      exit 1
+	    fi
+
+	    if test -n &quot;$add_shlibpath&quot;; then
+	      case :$compile_shlibpath: in
+	      *&quot;:$add_shlibpath:&quot;*) ;;
+	      *) compile_shlibpath=&quot;$compile_shlibpath$add_shlibpath:&quot; ;;
+	      esac
+	    fi
+	    if test &quot;$linkmode&quot; = prog; then
+	      test -n &quot;$add_dir&quot; &amp;&amp; compile_deplibs=&quot;$add_dir $compile_deplibs&quot;
+	      test -n &quot;$add&quot; &amp;&amp; compile_deplibs=&quot;$add $compile_deplibs&quot;
+	    else
+	      test -n &quot;$add_dir&quot; &amp;&amp; deplibs=&quot;$add_dir $deplibs&quot;
+	      test -n &quot;$add&quot; &amp;&amp; deplibs=&quot;$add $deplibs&quot;
+	      if test &quot;$hardcode_direct&quot; != yes &amp;&amp; \
+		 test &quot;$hardcode_minus_L&quot; != yes &amp;&amp; \
+		 test &quot;$hardcode_shlibpath_var&quot; = yes; then
+		case :$finalize_shlibpath: in
+		*&quot;:$libdir:&quot;*) ;;
+		*) finalize_shlibpath=&quot;$finalize_shlibpath$libdir:&quot; ;;
+		esac
+	      fi
+	    fi
+	  fi
+
+	  if test &quot;$linkmode&quot; = prog || test &quot;$mode&quot; = relink; then
+	    add_shlibpath=
+	    add_dir=
+	    add=
+	    # Finalize command for both is simple: just hardcode it.
+	    if test &quot;$hardcode_direct&quot; = yes; then
+	      add=&quot;$libdir/$linklib&quot;
+	    elif test &quot;$hardcode_minus_L&quot; = yes; then
+	      add_dir=&quot;-L$libdir&quot;
+	      add=&quot;-l$name&quot;
+	    elif test &quot;$hardcode_shlibpath_var&quot; = yes; then
+	      case :$finalize_shlibpath: in
+	      *&quot;:$libdir:&quot;*) ;;
+	      *) finalize_shlibpath=&quot;$finalize_shlibpath$libdir:&quot; ;;
+	      esac
+	      add=&quot;-l$name&quot;
+	    elif test &quot;$hardcode_automatic&quot; = yes; then
+	      if test -n &quot;$inst_prefix_dir&quot; &amp;&amp; test -f &quot;$inst_prefix_dir$libdir/$linklib&quot; ; then
+	        add=&quot;$inst_prefix_dir$libdir/$linklib&quot;
+	      else
+	        add=&quot;$libdir/$linklib&quot;
+	      fi
+	    else
+	      # We cannot seem to hardcode it, guess we'll fake it.
+	      add_dir=&quot;-L$libdir&quot;
+	      # Try looking first in the location we're being installed to.
+	      if test -n &quot;$inst_prefix_dir&quot;; then
+		case &quot;$libdir&quot; in
+		  [\\/]*)
+		    add_dir=&quot;-L$inst_prefix_dir$libdir $add_dir&quot;
+		    ;;
+		esac
+	      fi
+	      add=&quot;-l$name&quot;
+	    fi
+
+	    if test &quot;$linkmode&quot; = prog; then
+	      test -n &quot;$add_dir&quot; &amp;&amp; finalize_deplibs=&quot;$add_dir $finalize_deplibs&quot;
+	      test -n &quot;$add&quot; &amp;&amp; finalize_deplibs=&quot;$add $finalize_deplibs&quot;
+	    else
+	      test -n &quot;$add_dir&quot; &amp;&amp; deplibs=&quot;$add_dir $deplibs&quot;
+	      test -n &quot;$add&quot; &amp;&amp; deplibs=&quot;$add $deplibs&quot;
+	    fi
+	  fi
+	elif test &quot;$linkmode&quot; = prog; then
+	  # Here we assume that one of hardcode_direct or hardcode_minus_L
+	  # is not unsupported.  This is valid on all known static and
+	  # shared platforms.
+	  if test &quot;$hardcode_direct&quot; != unsupported; then
+	    test -n &quot;$old_library&quot; &amp;&amp; linklib=&quot;$old_library&quot;
+	    compile_deplibs=&quot;$dir/$linklib $compile_deplibs&quot;
+	    finalize_deplibs=&quot;$dir/$linklib $finalize_deplibs&quot;
+	  else
+	    compile_deplibs=&quot;-l$name -L$dir $compile_deplibs&quot;
+	    finalize_deplibs=&quot;-l$name -L$dir $finalize_deplibs&quot;
+	  fi
+	elif test &quot;$build_libtool_libs&quot; = yes; then
+	  # Not a shared library
+	  if test &quot;$deplibs_check_method&quot; != pass_all; then
+	    # We're trying link a shared library against a static one
+	    # but the system doesn't support it.
+
+	    # Just print a warning and add the library to dependency_libs so
+	    # that the program can be linked against the static library.
+	    $echo
+	    $echo &quot;*** Warning: This system can not link to static lib archive $lib.&quot;
+	    $echo &quot;*** I have the capability to make that library automatically link in when&quot;
+	    $echo &quot;*** you link to this library.  But I can only do this if you have a&quot;
+	    $echo &quot;*** shared version of the library, which you do not appear to have.&quot;
+	    if test &quot;$module&quot; = yes; then
+	      $echo &quot;*** But as you try to build a module library, libtool will still create &quot;
+	      $echo &quot;*** a static module, that should work as long as the dlopening application&quot;
+	      $echo &quot;*** is linked with the -dlopen flag to resolve symbols at runtime.&quot;
+	      if test -z &quot;$global_symbol_pipe&quot;; then
+		$echo
+		$echo &quot;*** However, this would only work if libtool was able to extract symbol&quot;
+		$echo &quot;*** lists from a program, using \`nm' or equivalent, but libtool could&quot;
+		$echo &quot;*** not find such a program.  So, this module is probably useless.&quot;
+		$echo &quot;*** \`nm' from GNU binutils and a full rebuild may help.&quot;
+	      fi
+	      if test &quot;$build_old_libs&quot; = no; then
+		build_libtool_libs=module
+		build_old_libs=yes
+	      else
+		build_libtool_libs=no
+	      fi
+	    fi
+	  else
+	    convenience=&quot;$convenience $dir/$old_library&quot;
+	    old_convenience=&quot;$old_convenience $dir/$old_library&quot;
+	    deplibs=&quot;$dir/$old_library $deplibs&quot;
+	    link_static=yes
+	  fi
+	fi # link shared/static library?
+
+	if test &quot;$linkmode&quot; = lib; then
+	  #if test -n &quot;$dependency_libs&quot; &amp;&amp;
+	  #   { test &quot;$hardcode_into_libs&quot; != yes || test &quot;$build_old_libs&quot; = yes ||
+	  #     test &quot;$link_static&quot; = yes; }; then
+	    # Extract -R from dependency_libs
+	    temp_deplibs=
+	    for libdir in $dependency_libs; do
+	      case $libdir in
+	      -R*) temp_xrpath=`$echo &quot;X$libdir&quot; | $Xsed -e 's/^-R//'`
+		   case &quot; $xrpath &quot; in
+		   *&quot; $temp_xrpath &quot;*) ;;
+		   *) xrpath=&quot;$xrpath $temp_xrpath&quot;;;
+		   esac;;
+	      *) temp_deplibs=&quot;$temp_deplibs $libdir&quot;;;
+	      esac
+	    done
+	    dependency_libs=&quot;$temp_deplibs&quot;
+	  #fi
+
+	  newlib_search_path=&quot;$newlib_search_path $absdir&quot;
+	  # Link against this library
+	  test &quot;$link_static&quot; = no &amp;&amp; newdependency_libs=&quot;$abs_ladir/$laname $newdependency_libs&quot;
+	  # ... and its dependency_libs
+	  tmp_libs=
+	  for deplib in $dependency_libs; do
+	    newdependency_libs=&quot;$deplib $newdependency_libs&quot;
+	    if test &quot;X$duplicate_deps&quot; = &quot;Xyes&quot; ; then
+	      case &quot;$tmp_libs &quot; in
+	      *&quot; $deplib &quot;*) specialdeplibs=&quot;$specialdeplibs $deplib&quot; ;;
+	      esac
+	    fi
+	    tmp_libs=&quot;$tmp_libs $deplib&quot;
+	  done
+
+	  if test &quot;$link_all_deplibs&quot; != no; then
+	    # Add the search paths of all dependency libraries
+	    for deplib in $dependency_libs; do
+	      case $deplib in
+	      -L*) path=&quot;$deplib&quot; ;;
+	      *.la)
+		dir=`$echo &quot;X$deplib&quot; | $Xsed -e 's%/[^/]*$%%'`
+		test &quot;X$dir&quot; = &quot;X$deplib&quot; &amp;&amp; dir=&quot;.&quot;
+		# We need an absolute path.
+		case $dir in
+		[\\/]* | [A-Za-z]:[\\/]*) absdir=&quot;$dir&quot; ;;
+		*)
+		  absdir=`cd &quot;$dir&quot; &amp;&amp; pwd`
+		  if test -z &quot;$absdir&quot;; then
+		    $echo &quot;$modename: warning: cannot determine absolute directory name of \`$dir'&quot; 1&gt;&amp;2
+		    absdir=&quot;$dir&quot;
+		  fi
+		  ;;
+		esac
+		if grep &quot;^installed=no&quot; $deplib &gt; /dev/null; then
+		  path=&quot;$absdir/$objdir&quot;
+		else
+		  eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
+		  if test -z &quot;$libdir&quot;; then
+		    $echo &quot;$modename: \`$deplib' is not a valid libtool archive&quot; 1&gt;&amp;2
+		    exit 1
+		  fi
+		  if test &quot;$absdir&quot; != &quot;$libdir&quot;; then
+		    # Sure, some shells/systems don't implement the -ef.
+		    # Those will have to live with the warning.
+		    test &quot;$absdir&quot; -ef &quot;$libdir&quot; &gt; /dev/null 2&gt;&amp;1 ||
+		      $echo &quot;$modename: warning: \`$deplib' seems to be moved&quot; 1&gt;&amp;2
+		  fi
+		  path=&quot;$absdir&quot;
+		fi
+		depdepl=
+		case $host in
+		*-*-darwin*)
+		  # we do not want to link against static libs, but need to link against shared
+		  eval deplibrary_names=`${SED} -n -e 's/^library_names=\(.*\)$/\1/p' $deplib`
+		  if test -n &quot;$deplibrary_names&quot; ; then
+		    for tmp in $deplibrary_names ; do
+		      depdepl=$tmp
+		    done
+		    if test -f &quot;$path/$depdepl&quot; ; then
+		      depdepl=&quot;$path/$depdepl&quot;
+		   fi
+		    # do not add paths which are already there
+		    case &quot; $newlib_search_path &quot; in
+		    *&quot; $path &quot;*) ;;
+		    *) newlib_search_path=&quot;$newlib_search_path $path&quot;;;
+		    esac
+		    path=&quot;&quot;
+		  fi
+		  ;;
+		*)
+		path=&quot;-L$path&quot;
+		;;
+		esac 
+		
+		;;
+		  -l*)
+		case $host in
+		*-*-darwin*)
+		 # Again, we only want to link against shared libraries
+		 eval tmp_libs=`$echo &quot;X$deplib&quot; | $Xsed -e &quot;s,^\-l,,&quot;`
+		 for tmp in $newlib_search_path ; do
+		     if test -f &quot;$tmp/lib$tmp_libs.dylib&quot; ; then
+		       eval depdepl=&quot;$tmp/lib$tmp_libs.dylib&quot;
+		       break
+		     fi  
+         done
+         path=&quot;&quot;
+		  ;;
+		*) continue ;;
+		esac  		  
+		;;
+
+	      *.ltframework)
+		case $host in
+		  *-*-darwin*)
+		    depdepl=&quot;$deplib&quot;
+		    ;;
+		esac
+		;;
+
+	      *) continue ;;
+	      esac
+	      case &quot; $deplibs &quot; in
+	      *&quot; $depdepl &quot;*) ;;
+	      *) deplibs=&quot;$deplibs $depdepl&quot; ;;
+	      esac	      
+	      case &quot; $deplibs &quot; in
+	      *&quot; $path &quot;*) ;;
+	      *) deplibs=&quot;$deplibs $path&quot; ;;
+	      esac
+	    done
+	  fi # link_all_deplibs != no
+	fi # linkmode = lib
+      done # for deplib in $libs
+      dependency_libs=&quot;$newdependency_libs&quot;
+      if test &quot;$pass&quot; = dlpreopen; then
+	# Link the dlpreopened libraries before other libraries
+	for deplib in $save_deplibs; do
+	  deplibs=&quot;$deplib $deplibs&quot;
+	done
+      fi
+      if test &quot;$pass&quot; != dlopen; then
+	if test &quot;$pass&quot; != conv; then
+	  # Make sure lib_search_path contains only unique directories.
+	  lib_search_path=
+	  for dir in $newlib_search_path; do
+	    case &quot;$lib_search_path &quot; in
+	    *&quot; $dir &quot;*) ;;
+	    *) lib_search_path=&quot;$lib_search_path $dir&quot; ;;
+	    esac
+	  done
+	  newlib_search_path=
+	fi
+
+	if test &quot;$linkmode,$pass&quot; != &quot;prog,link&quot;; then
+	  vars=&quot;deplibs&quot;
+	else
+	  vars=&quot;compile_deplibs finalize_deplibs&quot;
+	fi
+	for var in $vars dependency_libs; do
+	  # Add libraries to $var in reverse order
+	  eval tmp_libs=\&quot;\$$var\&quot;
+	  new_libs=
+	  for deplib in $tmp_libs; do
+	    # FIXME: Pedantically, this is the right thing to do, so
+	    #        that some nasty dependency loop isn't accidentally
+	    #        broken:
+	    #new_libs=&quot;$deplib $new_libs&quot;
+	    # Pragmatically, this seems to cause very few problems in
+	    # practice:
+	    case $deplib in
+	    -L*) new_libs=&quot;$deplib $new_libs&quot; ;;
+	    -R*) ;;
+	    *)
+	      # And here is the reason: when a library appears more
+	      # than once as an explicit dependence of a library, or
+	      # is implicitly linked in more than once by the
+	      # compiler, it is considered special, and multiple
+	      # occurrences thereof are not removed.  Compare this
+	      # with having the same library being listed as a
+	      # dependency of multiple other libraries: in this case,
+	      # we know (pedantically, we assume) the library does not
+	      # need to be listed more than once, so we keep only the
+	      # last copy.  This is not always right, but it is rare
+	      # enough that we require users that really mean to play
+	      # such unportable linking tricks to link the library
+	      # using -Wl,-lname, so that libtool does not consider it
+	      # for duplicate removal.
+	      case &quot; $specialdeplibs &quot; in
+	      *&quot; $deplib &quot;*) new_libs=&quot;$deplib $new_libs&quot; ;;
+	      *)
+		case &quot; $new_libs &quot; in
+		*&quot; $deplib &quot;*) ;;
+		*) new_libs=&quot;$deplib $new_libs&quot; ;;
+		esac
+		;;
+	      esac
+	      ;;
+	    esac
+	  done
+	  tmp_libs=
+	  for deplib in $new_libs; do
+	    case $deplib in
+	    -L*)
+	      case &quot; $tmp_libs &quot; in
+	      *&quot; $deplib &quot;*) ;;
+	      *) tmp_libs=&quot;$tmp_libs $deplib&quot; ;;
+	      esac
+	      ;;
+	    *) tmp_libs=&quot;$tmp_libs $deplib&quot; ;;
+	    esac
+	  done
+	  eval $var=\&quot;$tmp_libs\&quot;
+	done # for var
+      fi
+      # Last step: remove runtime libs from dependency_libs (they stay in deplibs)
+      tmp_libs=
+      for i in $dependency_libs ; do
+	case &quot; $predeps $postdeps $compiler_lib_search_path &quot; in
+	*&quot; $i &quot;*)
+	  i=&quot;&quot;
+	  ;;
+	esac
+	if test -n &quot;$i&quot; ; then
+	  tmp_libs=&quot;$tmp_libs $i&quot;
+	fi
+      done
+      dependency_libs=$tmp_libs
+    done # for pass
+    if test &quot;$linkmode&quot; = prog; then
+      dlfiles=&quot;$newdlfiles&quot;
+      dlprefiles=&quot;$newdlprefiles&quot;
+    fi
+
+    case $linkmode in
+    oldlib)
+      if test -n &quot;$deplibs&quot;; then
+	$echo &quot;$modename: warning: \`-l' and \`-L' are ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$dlfiles$dlprefiles&quot; || test &quot;$dlself&quot; != no; then
+	$echo &quot;$modename: warning: \`-dlopen' is ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$rpath&quot;; then
+	$echo &quot;$modename: warning: \`-rpath' is ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$xrpath&quot;; then
+	$echo &quot;$modename: warning: \`-R' is ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$vinfo&quot;; then
+	$echo &quot;$modename: warning: \`-version-info/-version-number' is ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$release&quot;; then
+	$echo &quot;$modename: warning: \`-release' is ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$export_symbols&quot; || test -n &quot;$export_symbols_regex&quot;; then
+	$echo &quot;$modename: warning: \`-export-symbols' is ignored for archives&quot; 1&gt;&amp;2
+      fi
+
+      # Now set the variables for building old libraries.
+      build_libtool_libs=no
+      oldlibs=&quot;$output&quot;
+      objs=&quot;$objs$old_deplibs&quot;
+      ;;
+
+    lib)
+      # Make sure we only generate libraries of the form `libNAME.la'.
+      case $outputname in
+      lib*)
+	name=`$echo &quot;X$outputname&quot; | $Xsed -e 's/\.la$//' -e 's/^lib//'`
+	eval shared_ext=\&quot;$shrext\&quot;
+	eval libname=\&quot;$libname_spec\&quot;
+	;;
+      *)
+	if test &quot;$module&quot; = no; then
+	  $echo &quot;$modename: libtool library \`$output' must begin with \`lib'&quot; 1&gt;&amp;2
+	  $echo &quot;$help&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+	if test &quot;$need_lib_prefix&quot; != no; then
+	  # Add the &quot;lib&quot; prefix for modules if required
+	  name=`$echo &quot;X$outputname&quot; | $Xsed -e 's/\.la$//'`
+	  eval shared_ext=\&quot;$shrext\&quot;
+	  eval libname=\&quot;$libname_spec\&quot;
+	else
+	  libname=`$echo &quot;X$outputname&quot; | $Xsed -e 's/\.la$//'`
+	fi
+	;;
+      esac
+
+      if test -n &quot;$objs&quot;; then
+	if test &quot;$deplibs_check_method&quot; != pass_all; then
+	  $echo &quot;$modename: cannot build libtool library \`$output' from non-libtool objects on this host:$objs&quot; 2&gt;&amp;1
+	  exit 1
+	else
+	  $echo
+	  $echo &quot;*** Warning: Linking the shared library $output against the non-libtool&quot;
+	  $echo &quot;*** objects $objs is not portable!&quot;
+	  libobjs=&quot;$libobjs $objs&quot;
+	fi
+      fi
+
+      if test &quot;$dlself&quot; != no; then
+	$echo &quot;$modename: warning: \`-dlopen self' is ignored for libtool libraries&quot; 1&gt;&amp;2
+      fi
+
+      set dummy $rpath
+      if test &quot;$#&quot; -gt 2; then
+	$echo &quot;$modename: warning: ignoring multiple \`-rpath's for a libtool library&quot; 1&gt;&amp;2
+      fi
+      install_libdir=&quot;$2&quot;
+
+      oldlibs=
+      if test -z &quot;$rpath&quot;; then
+	if test &quot;$build_libtool_libs&quot; = yes; then
+	  # Building a libtool convenience library.
+	  # Some compilers have problems with a `.al' extension so
+	  # convenience libraries should have the same extension an
+	  # archive normally would.
+	  oldlibs=&quot;$output_objdir/$libname.$libext $oldlibs&quot;
+	  build_libtool_libs=convenience
+	  build_old_libs=yes
+	fi
+
+	if test -n &quot;$vinfo&quot;; then
+	  $echo &quot;$modename: warning: \`-version-info/-version-number' is ignored for convenience libraries&quot; 1&gt;&amp;2
+	fi
+
+	if test -n &quot;$release&quot;; then
+	  $echo &quot;$modename: warning: \`-release' is ignored for convenience libraries&quot; 1&gt;&amp;2
+	fi
+      else
+
+	# Parse the version information argument.
+	save_ifs=&quot;$IFS&quot;; IFS=':'
+	set dummy $vinfo 0 0 0
+	IFS=&quot;$save_ifs&quot;
+
+	if test -n &quot;$8&quot;; then
+	  $echo &quot;$modename: too many parameters to \`-version-info'&quot; 1&gt;&amp;2
+	  $echo &quot;$help&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	# convert absolute version numbers to libtool ages
+	# this retains compatibility with .la files and attempts
+	# to make the code below a bit more comprehensible
+	
+	case $vinfo_number in
+	yes)
+	  number_major=&quot;$2&quot;
+	  number_minor=&quot;$3&quot;
+	  number_revision=&quot;$4&quot;
+	  #
+	  # There are really only two kinds -- those that
+	  # use the current revision as the major version
+	  # and those that subtract age and use age as
+	  # a minor version.  But, then there is irix
+	  # which has an extra 1 added just for fun
+	  #
+	  case $version_type in
+	  darwin|linux|osf|windows)
+	    current=`expr $number_major + $number_minor`
+	    age=&quot;$number_minor&quot;
+	    revision=&quot;$number_revision&quot;
+	    ;;
+	  freebsd-aout|freebsd-elf|sunos)
+	    current=&quot;$number_major&quot;
+	    revision=&quot;$number_minor&quot;
+	    age=&quot;0&quot;
+	    ;;
+	  irix|nonstopux)
+	    current=`expr $number_major + $number_minor - 1`
+	    age=&quot;$number_minor&quot;
+	    revision=&quot;$number_minor&quot;
+	    ;;
+	  esac
+	  ;;
+	no)
+	  current=&quot;$2&quot;
+	  revision=&quot;$3&quot;
+	  age=&quot;$4&quot;
+	  ;;
+	esac
+
+	# Check that each of the things are valid numbers.
+	case $current in
+	0 | [1-9] | [1-9][0-9] | [1-9][0-9][0-9]) ;;
+	*)
+	  $echo &quot;$modename: CURRENT \`$current' is not a nonnegative integer&quot; 1&gt;&amp;2
+	  $echo &quot;$modename: \`$vinfo' is not valid version information&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+
+	case $revision in
+	0 | [1-9] | [1-9][0-9] | [1-9][0-9][0-9]) ;;
+	*)
+	  $echo &quot;$modename: REVISION \`$revision' is not a nonnegative integer&quot; 1&gt;&amp;2
+	  $echo &quot;$modename: \`$vinfo' is not valid version information&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+
+	case $age in
+	0 | [1-9] | [1-9][0-9] | [1-9][0-9][0-9]) ;;
+	*)
+	  $echo &quot;$modename: AGE \`$age' is not a nonnegative integer&quot; 1&gt;&amp;2
+	  $echo &quot;$modename: \`$vinfo' is not valid version information&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+
+	if test &quot;$age&quot; -gt &quot;$current&quot;; then
+	  $echo &quot;$modename: AGE \`$age' is greater than the current interface number \`$current'&quot; 1&gt;&amp;2
+	  $echo &quot;$modename: \`$vinfo' is not valid version information&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	# Calculate the version variables.
+	major=
+	versuffix=
+	verstring=
+	case $version_type in
+	none) ;;
+
+	darwin)
+	  # Like Linux, but with the current version available in
+	  # verstring for coding it into the library header
+	  major=.`expr $current - $age`
+	  versuffix=&quot;$major.$age.$revision&quot;
+	  # Darwin ld doesn't like 0 for these options...
+	  minor_current=`expr $current + 1`
+	  verstring=&quot;-compatibility_version $minor_current -current_version $minor_current.$revision&quot;
+	  ;;
+
+	freebsd-aout)
+	  major=&quot;.$current&quot;
+	  versuffix=&quot;.$current.$revision&quot;;
+	  ;;
+
+	freebsd-elf)
+	  major=&quot;.$current&quot;
+	  versuffix=&quot;.$current&quot;;
+	  ;;
+
+	irix | nonstopux)
+	  major=`expr $current - $age + 1`
+
+	  case $version_type in
+	    nonstopux) verstring_prefix=nonstopux ;;
+	    *)         verstring_prefix=sgi ;;
+	  esac
+	  verstring=&quot;$verstring_prefix$major.$revision&quot;
+
+	  # Add in all the interfaces that we are compatible with.
+	  loop=$revision
+	  while test &quot;$loop&quot; -ne 0; do
+	    iface=`expr $revision - $loop`
+	    loop=`expr $loop - 1`
+	    verstring=&quot;$verstring_prefix$major.$iface:$verstring&quot;
+	  done
+
+	  # Before this point, $major must not contain `.'.
+	  major=.$major
+	  versuffix=&quot;$major.$revision&quot;
+	  ;;
+
+	linux)
+	  major=.`expr $current - $age`
+	  versuffix=&quot;$major.$age.$revision&quot;
+	  ;;
+
+	osf)
+	  major=.`expr $current - $age`
+	  versuffix=&quot;.$current.$age.$revision&quot;
+	  verstring=&quot;$current.$age.$revision&quot;
+
+	  # Add in all the interfaces that we are compatible with.
+	  loop=$age
+	  while test &quot;$loop&quot; -ne 0; do
+	    iface=`expr $current - $loop`
+	    loop=`expr $loop - 1`
+	    verstring=&quot;$verstring:${iface}.0&quot;
+	  done
+
+	  # Make executables depend on our current version.
+	  verstring=&quot;$verstring:${current}.0&quot;
+	  ;;
+
+	sunos)
+	  major=&quot;.$current&quot;
+	  versuffix=&quot;.$current.$revision&quot;
+	  ;;
+
+	windows)
+	  # Use '-' rather than '.', since we only want one
+	  # extension on DOS 8.3 filesystems.
+	  major=`expr $current - $age`
+	  versuffix=&quot;-$major&quot;
+	  ;;
+
+	*)
+	  $echo &quot;$modename: unknown library version type \`$version_type'&quot; 1&gt;&amp;2
+	  $echo &quot;Fatal configuration error.  See the $PACKAGE docs for more information.&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+
+	# Clear the version info if we defaulted, and they specified a release.
+	if test -z &quot;$vinfo&quot; &amp;&amp; test -n &quot;$release&quot;; then
+	  major=
+	  case $version_type in
+	  darwin)
+	    # we can't check for &quot;0.0&quot; in archive_cmds due to quoting
+	    # problems, so we reset it completely
+	    verstring=
+	    ;;
+	  *)
+	    verstring=&quot;0.0&quot;
+	    ;;
+	  esac
+	  if test &quot;$need_version&quot; = no; then
+	    versuffix=
+	  else
+	    versuffix=&quot;.0.0&quot;
+	  fi
+	fi
+
+	# Remove version info from name if versioning should be avoided
+	if test &quot;$avoid_version&quot; = yes &amp;&amp; test &quot;$need_version&quot; = no; then
+	  major=
+	  versuffix=
+	  verstring=&quot;&quot;
+	fi
+
+	# Check to see if the archive will have undefined symbols.
+	if test &quot;$allow_undefined&quot; = yes; then
+	  if test &quot;$allow_undefined_flag&quot; = unsupported; then
+	    $echo &quot;$modename: warning: undefined symbols not allowed in $host shared libraries&quot; 1&gt;&amp;2
+	    build_libtool_libs=no
+	    build_old_libs=yes
+	  fi
+	else
+	  # Don't allow undefined symbols.
+	  allow_undefined_flag=&quot;$no_undefined_flag&quot;
+	fi
+      fi
+
+      if test &quot;$mode&quot; != relink; then
+	# Remove our outputs, but don't remove object files since they
+	# may have been created when compiling PIC objects.
+	removelist=
+	tempremovelist=`$echo &quot;$output_objdir/*&quot;`
+	for p in $tempremovelist; do
+	  case $p in
+	    *.$objext | *$exeext)
+	       ;;
+	    $output_objdir/$outputname | $output_objdir/$libname.* | $output_objdir/${libname}${release}.*)
+	       removelist=&quot;$removelist $p&quot;
+	       ;;
+	    *) ;;
+	  esac
+	done
+	if test -n &quot;$removelist&quot;; then
+	  $show &quot;${rm}r $removelist&quot;
+	  $run ${rm}r $removelist
+	fi
+      fi
+
+      # Now set the variables for building old libraries.
+      if test &quot;$build_old_libs&quot; = yes &amp;&amp; test &quot;$build_libtool_libs&quot; != convenience ; then
+	oldlibs=&quot;$oldlibs $output_objdir/$libname.$libext&quot;
+
+	# Transform .lo files to .o files.
+	oldobjs=&quot;$objs &quot;`$echo &quot;X$libobjs&quot; | $SP2NL | $Xsed -e '/\.'${libext}'$/d' -e &quot;$lo2o&quot; | $NL2SP`
+      fi
+
+      # Eliminate all temporary directories.
+      for path in $notinst_path; do
+	lib_search_path=`$echo &quot;$lib_search_path &quot; | ${SED} -e 's% $path % %g'`
+	deplibs=`$echo &quot;$deplibs &quot; | ${SED} -e 's% -L$path % %g'`
+	dependency_libs=`$echo &quot;$dependency_libs &quot; | ${SED} -e 's% -L$path % %g'`
+      done
+
+      if test -n &quot;$xrpath&quot;; then
+	# If the user specified any rpath flags, then add them.
+	temp_xrpath=
+	for libdir in $xrpath; do
+	  temp_xrpath=&quot;$temp_xrpath -R$libdir&quot;
+	  case &quot;$finalize_rpath &quot; in
+	  *&quot; $libdir &quot;*) ;;
+	  *) finalize_rpath=&quot;$finalize_rpath $libdir&quot; ;;
+	  esac
+	done
+	if true || test &quot;$hardcode_into_libs&quot; != yes || test &quot;$build_old_libs&quot; = yes; then
+	  dependency_libs=&quot;$temp_xrpath $dependency_libs&quot;
+	fi
+      fi
+
+      # Make sure dlfiles contains only unique files that won't be dlpreopened
+      old_dlfiles=&quot;$dlfiles&quot;
+      dlfiles=
+      for lib in $old_dlfiles; do
+	case &quot; $dlprefiles $dlfiles &quot; in
+	*&quot; $lib &quot;*) ;;
+	*) dlfiles=&quot;$dlfiles $lib&quot; ;;
+	esac
+      done
+
+      # Make sure dlprefiles contains only unique files
+      old_dlprefiles=&quot;$dlprefiles&quot;
+      dlprefiles=
+      for lib in $old_dlprefiles; do
+	case &quot;$dlprefiles &quot; in
+	*&quot; $lib &quot;*) ;;
+	*) dlprefiles=&quot;$dlprefiles $lib&quot; ;;
+	esac
+      done
+
+      if test &quot;$build_libtool_libs&quot; = yes; then
+	if test -n &quot;$rpath&quot;; then
+	  case $host in
+	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2* | *-*-beos*)
+	    # these systems don't actually have a c library (as such)!
+	    ;;
+	  *-*-rhapsody* | *-*-darwin1.[012])
+	    # Rhapsody C library is in the System framework
+	    deplibs=&quot;$deplibs System.ltframework&quot;
+	    ;;
+	  *-*-netbsd*)
+	    # Don't link with libc until the a.out ld.so is fixed.
+	    ;;
+	  *-*-openbsd* | *-*-freebsd*)
+	    # Do not include libc due to us having libc/libc_r.
+	    test &quot;X$arg&quot; = &quot;X-lc&quot; &amp;&amp; continue
+	    ;;
+ 	  *)
+	    # Add libc to deplibs on all other systems if necessary.
+	    if test &quot;$build_libtool_need_lc&quot; = &quot;yes&quot;; then
+	      deplibs=&quot;$deplibs -lc&quot;
+	    fi
+	    ;;
+	  esac
+	fi
+
+	# Transform deplibs into only deplibs that can be linked in shared.
+	name_save=$name
+	libname_save=$libname
+	release_save=$release
+	versuffix_save=$versuffix
+	major_save=$major
+	# I'm not sure if I'm treating the release correctly.  I think
+	# release should show up in the -l (ie -lgmp5) so we don't want to
+	# add it in twice.  Is that correct?
+	release=&quot;&quot;
+	versuffix=&quot;&quot;
+	major=&quot;&quot;
+	newdeplibs=
+	droppeddeps=no
+	case $deplibs_check_method in
+	pass_all)
+	  # Don't check for shared/static.  Everything works.
+	  # This might be a little naive.  We might want to check
+	  # whether the library exists or not.  But this is on
+	  # osf3 &amp; osf4 and I'm not really sure... Just
+	  # implementing what was already the behavior.
+	  newdeplibs=$deplibs
+	  ;;
+	test_compile)
+	  # This code stresses the &quot;libraries are programs&quot; paradigm to its
+	  # limits. Maybe even breaks it.  We compile a program, linking it
+	  # against the deplibs as a proxy for the library.  Then we can check
+	  # whether they linked in statically or dynamically with ldd.
+	  $rm conftest.c
+	  cat &gt; conftest.c &lt;&lt;EOF
+	  int main() { return 0; }
+EOF
+	  $rm conftest
+	  $LTCC -o conftest conftest.c $deplibs
+	  if test &quot;$?&quot; -eq 0 ; then
+	    ldd_output=`ldd conftest`
+	    for i in $deplibs; do
+	      name=&quot;`expr $i : '-l\(.*\)'`&quot;
+	      # If $name is empty we are operating on a -L argument.
+              if test &quot;$name&quot; != &quot;&quot; &amp;&amp; test &quot;$name&quot; -ne &quot;0&quot;; then
+		if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
+		  case &quot; $predeps $postdeps &quot; in
+		  *&quot; $i &quot;*)
+		    newdeplibs=&quot;$newdeplibs $i&quot;
+		    i=&quot;&quot;
+		    ;;
+		  esac
+	        fi
+		if test -n &quot;$i&quot; ; then
+		  libname=`eval \\$echo \&quot;$libname_spec\&quot;`
+		  deplib_matches=`eval \\$echo \&quot;$library_names_spec\&quot;`
+		  set dummy $deplib_matches
+		  deplib_match=$2
+		  if test `expr &quot;$ldd_output&quot; : &quot;.*$deplib_match&quot;` -ne 0 ; then
+		    newdeplibs=&quot;$newdeplibs $i&quot;
+		  else
+		    droppeddeps=yes
+		    $echo
+		    $echo &quot;*** Warning: dynamic linker does not accept needed library $i.&quot;
+		    $echo &quot;*** I have the capability to make that library automatically link in when&quot;
+		    $echo &quot;*** you link to this library.  But I can only do this if you have a&quot;
+		    $echo &quot;*** shared version of the library, which I believe you do not have&quot;
+		    $echo &quot;*** because a test_compile did reveal that the linker did not use it for&quot;
+		    $echo &quot;*** its dynamic dependency list that programs get resolved with at runtime.&quot;
+		  fi
+		fi
+	      else
+		newdeplibs=&quot;$newdeplibs $i&quot;
+	      fi
+	    done
+	  else
+	    # Error occurred in the first compile.  Let's try to salvage
+	    # the situation: Compile a separate program for each library.
+	    for i in $deplibs; do
+	      name=&quot;`expr $i : '-l\(.*\)'`&quot;
+	      # If $name is empty we are operating on a -L argument.
+              if test &quot;$name&quot; != &quot;&quot; &amp;&amp; test &quot;$name&quot; != &quot;0&quot;; then
+		$rm conftest
+		$LTCC -o conftest conftest.c $i
+		# Did it work?
+		if test &quot;$?&quot; -eq 0 ; then
+		  ldd_output=`ldd conftest`
+		  if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
+		    case &quot; $predeps $postdeps &quot; in
+		    *&quot; $i &quot;*)
+		      newdeplibs=&quot;$newdeplibs $i&quot;
+		      i=&quot;&quot;
+		      ;;
+		    esac
+		  fi
+		  if test -n &quot;$i&quot; ; then
+		    libname=`eval \\$echo \&quot;$libname_spec\&quot;`
+		    deplib_matches=`eval \\$echo \&quot;$library_names_spec\&quot;`
+		    set dummy $deplib_matches
+		    deplib_match=$2
+		    if test `expr &quot;$ldd_output&quot; : &quot;.*$deplib_match&quot;` -ne 0 ; then
+		      newdeplibs=&quot;$newdeplibs $i&quot;
+		    else
+		      droppeddeps=yes
+		      $echo
+		      $echo &quot;*** Warning: dynamic linker does not accept needed library $i.&quot;
+		      $echo &quot;*** I have the capability to make that library automatically link in when&quot;
+		      $echo &quot;*** you link to this library.  But I can only do this if you have a&quot;
+		      $echo &quot;*** shared version of the library, which you do not appear to have&quot;
+		      $echo &quot;*** because a test_compile did reveal that the linker did not use this one&quot;
+		      $echo &quot;*** as a dynamic dependency that programs can get resolved with at runtime.&quot;
+		    fi
+		  fi
+		else
+		  droppeddeps=yes
+		  $echo
+		  $echo &quot;*** Warning!  Library $i is needed by this library but I was not able to&quot;
+		  $echo &quot;***  make it link in!  You will probably need to install it or some&quot;
+		  $echo &quot;*** library that it depends on before this library will be fully&quot;
+		  $echo &quot;*** functional.  Installing it before continuing would be even better.&quot;
+		fi
+	      else
+		newdeplibs=&quot;$newdeplibs $i&quot;
+	      fi
+	    done
+	  fi
+	  ;;
+	file_magic*)
+	  set dummy $deplibs_check_method
+	  file_magic_regex=`expr &quot;$deplibs_check_method&quot; : &quot;$2 \(.*\)&quot;`
+	  for a_deplib in $deplibs; do
+	    name=&quot;`expr $a_deplib : '-l\(.*\)'`&quot;
+	    # If $name is empty we are operating on a -L argument.
+            if test &quot;$name&quot; != &quot;&quot; &amp;&amp; test  &quot;$name&quot; != &quot;0&quot;; then
+	      if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
+		case &quot; $predeps $postdeps &quot; in
+		*&quot; $a_deplib &quot;*)
+		  newdeplibs=&quot;$newdeplibs $a_deplib&quot;
+		  a_deplib=&quot;&quot;
+		  ;;
+		esac
+	      fi
+	      if test -n &quot;$a_deplib&quot; ; then
+		libname=`eval \\$echo \&quot;$libname_spec\&quot;`
+		for i in $lib_search_path $sys_lib_search_path $shlib_search_path; do
+		  potential_libs=`ls $i/$libname[.-]* 2&gt;/dev/null`
+		  for potent_lib in $potential_libs; do
+		      # Follow soft links.
+		      if ls -lLd &quot;$potent_lib&quot; 2&gt;/dev/null \
+			 | grep &quot; -&gt; &quot; &gt;/dev/null; then
+			continue
+		      fi
+		      # The statement above tries to avoid entering an
+		      # endless loop below, in case of cyclic links.
+		      # We might still enter an endless loop, since a link
+		      # loop can be closed while we follow links,
+		      # but so what?
+		      potlib=&quot;$potent_lib&quot;
+		      while test -h &quot;$potlib&quot; 2&gt;/dev/null; do
+			potliblink=`ls -ld $potlib | ${SED} 's/.* -&gt; //'`
+			case $potliblink in
+			[\\/]* | [A-Za-z]:[\\/]*) potlib=&quot;$potliblink&quot;;;
+			*) potlib=`$echo &quot;X$potlib&quot; | $Xsed -e 's,[^/]*$,,'`&quot;$potliblink&quot;;;
+			esac
+		      done
+		      if eval $file_magic_cmd \&quot;\$potlib\&quot; 2&gt;/dev/null \
+			 | ${SED} 10q \
+			 | $EGREP &quot;$file_magic_regex&quot; &gt; /dev/null; then
+			newdeplibs=&quot;$newdeplibs $a_deplib&quot;
+			a_deplib=&quot;&quot;
+			break 2
+		      fi
+		  done
+		done
+	      fi
+	      if test -n &quot;$a_deplib&quot; ; then
+		droppeddeps=yes
+		$echo
+		$echo &quot;*** Warning: linker path does not have real file for library $a_deplib.&quot;
+		$echo &quot;*** I have the capability to make that library automatically link in when&quot;
+		$echo &quot;*** you link to this library.  But I can only do this if you have a&quot;
+		$echo &quot;*** shared version of the library, which you do not appear to have&quot;
+		$echo &quot;*** because I did check the linker path looking for a file starting&quot;
+		if test -z &quot;$potlib&quot; ; then
+		  $echo &quot;*** with $libname but no candidates were found. (...for file magic test)&quot;
+		else
+		  $echo &quot;*** with $libname and none of the candidates passed a file format test&quot;
+		  $echo &quot;*** using a file magic. Last file checked: $potlib&quot;
+		fi
+	      fi
+	    else
+	      # Add a -L argument.
+	      newdeplibs=&quot;$newdeplibs $a_deplib&quot;
+	    fi
+	  done # Gone through all deplibs.
+	  ;;
+	match_pattern*)
+	  set dummy $deplibs_check_method
+	  match_pattern_regex=`expr &quot;$deplibs_check_method&quot; : &quot;$2 \(.*\)&quot;`
+	  for a_deplib in $deplibs; do
+	    name=&quot;`expr $a_deplib : '-l\(.*\)'`&quot;
+	    # If $name is empty we are operating on a -L argument.
+	    if test -n &quot;$name&quot; &amp;&amp; test &quot;$name&quot; != &quot;0&quot;; then
+	      if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
+		case &quot; $predeps $postdeps &quot; in
+		*&quot; $a_deplib &quot;*)
+		  newdeplibs=&quot;$newdeplibs $a_deplib&quot;
+		  a_deplib=&quot;&quot;
+		  ;;
+		esac
+	      fi
+	      if test -n &quot;$a_deplib&quot; ; then
+		libname=`eval \\$echo \&quot;$libname_spec\&quot;`
+		for i in $lib_search_path $sys_lib_search_path $shlib_search_path; do
+		  potential_libs=`ls $i/$libname[.-]* 2&gt;/dev/null`
+		  for potent_lib in $potential_libs; do
+		    potlib=&quot;$potent_lib&quot; # see symlink-check above in file_magic test
+		    if eval $echo \&quot;$potent_lib\&quot; 2&gt;/dev/null \
+		        | ${SED} 10q \
+		        | $EGREP &quot;$match_pattern_regex&quot; &gt; /dev/null; then
+		      newdeplibs=&quot;$newdeplibs $a_deplib&quot;
+		      a_deplib=&quot;&quot;
+		      break 2
+		    fi
+		  done
+		done
+	      fi
+	      if test -n &quot;$a_deplib&quot; ; then
+		droppeddeps=yes
+		$echo
+		$echo &quot;*** Warning: linker path does not have real file for library $a_deplib.&quot;
+		$echo &quot;*** I have the capability to make that library automatically link in when&quot;
+		$echo &quot;*** you link to this library.  But I can only do this if you have a&quot;
+		$echo &quot;*** shared version of the library, which you do not appear to have&quot;
+		$echo &quot;*** because I did check the linker path looking for a file starting&quot;
+		if test -z &quot;$potlib&quot; ; then
+		  $echo &quot;*** with $libname but no candidates were found. (...for regex pattern test)&quot;
+		else
+		  $echo &quot;*** with $libname and none of the candidates passed a file format test&quot;
+		  $echo &quot;*** using a regex pattern. Last file checked: $potlib&quot;
+		fi
+	      fi
+	    else
+	      # Add a -L argument.
+	      newdeplibs=&quot;$newdeplibs $a_deplib&quot;
+	    fi
+	  done # Gone through all deplibs.
+	  ;;
+	none | unknown | *)
+	  newdeplibs=&quot;&quot;
+	  tmp_deplibs=`$echo &quot;X $deplibs&quot; | $Xsed -e 's/ -lc$//' \
+	    -e 's/ -[LR][^ ]*//g'`
+	  if test &quot;X$allow_libtool_libs_with_static_runtimes&quot; = &quot;Xyes&quot; ; then
+	    for i in $predeps $postdeps ; do
+	      # can't use Xsed below, because $i might contain '/'
+	      tmp_deplibs=`$echo &quot;X $tmp_deplibs&quot; | ${SED} -e &quot;1s,^X,,&quot; -e &quot;s,$i,,&quot;`
+	    done
+	  fi
+	  if $echo &quot;X $tmp_deplibs&quot; | $Xsed -e 's/[ 	]//g' \
+	    | grep . &gt;/dev/null; then
+	    $echo
+	    if test &quot;X$deplibs_check_method&quot; = &quot;Xnone&quot;; then
+	      $echo &quot;*** Warning: inter-library dependencies are not supported in this platform.&quot;
+	    else
+	      $echo &quot;*** Warning: inter-library dependencies are not known to be supported.&quot;
+	    fi
+	    $echo &quot;*** All declared inter-library dependencies are being dropped.&quot;
+	    droppeddeps=yes
+	  fi
+	  ;;
+	esac
+	versuffix=$versuffix_save
+	major=$major_save
+	release=$release_save
+	libname=$libname_save
+	name=$name_save
+
+	case $host in
+	*-*-rhapsody* | *-*-darwin1.[012])
+	  # On Rhapsody replace the C library is the System framework
+	  newdeplibs=`$echo &quot;X $newdeplibs&quot; | $Xsed -e 's/ -lc / System.ltframework /'`
+	  ;;
+	esac
+
+	if test &quot;$droppeddeps&quot; = yes; then
+	  if test &quot;$module&quot; = yes; then
+	    $echo
+	    $echo &quot;*** Warning: libtool could not satisfy all declared inter-library&quot;
+	    $echo &quot;*** dependencies of module $libname.  Therefore, libtool will create&quot;
+	    $echo &quot;*** a static module, that should work as long as the dlopening&quot;
+	    $echo &quot;*** application is linked with the -dlopen flag.&quot;
+	    if test -z &quot;$global_symbol_pipe&quot;; then
+	      $echo
+	      $echo &quot;*** However, this would only work if libtool was able to extract symbol&quot;
+	      $echo &quot;*** lists from a program, using \`nm' or equivalent, but libtool could&quot;
+	      $echo &quot;*** not find such a program.  So, this module is probably useless.&quot;
+	      $echo &quot;*** \`nm' from GNU binutils and a full rebuild may help.&quot;
+	    fi
+	    if test &quot;$build_old_libs&quot; = no; then
+	      oldlibs=&quot;$output_objdir/$libname.$libext&quot;
+	      build_libtool_libs=module
+	      build_old_libs=yes
+	    else
+	      build_libtool_libs=no
+	    fi
+	  else
+	    $echo &quot;*** The inter-library dependencies that have been dropped here will be&quot;
+	    $echo &quot;*** automatically added whenever a program is linked with this library&quot;
+	    $echo &quot;*** or is declared to -dlopen it.&quot;
+
+	    if test &quot;$allow_undefined&quot; = no; then
+	      $echo
+	      $echo &quot;*** Since this library must not contain undefined symbols,&quot;
+	      $echo &quot;*** because either the platform does not support them or&quot;
+	      $echo &quot;*** it was explicitly requested with -no-undefined,&quot;
+	      $echo &quot;*** libtool will only create a static version of it.&quot;
+	      if test &quot;$build_old_libs&quot; = no; then
+		oldlibs=&quot;$output_objdir/$libname.$libext&quot;
+		build_libtool_libs=module
+		build_old_libs=yes
+	      else
+		build_libtool_libs=no
+	      fi
+	    fi
+	  fi
+	fi
+	# Time to change all our &quot;foo.ltframework&quot; stuff back to &quot;-framework foo&quot;
+	case $host in
+	  *-*-darwin*)
+	    newdeplibs=`$echo &quot;X $newdeplibs&quot; | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
+	    dependency_libs=`$echo &quot;X $dependency_libs&quot; | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
+	    ;;
+	esac
+	# Done checking deplibs!
+	deplibs=$newdeplibs
+      fi
+
+      # All the library-specific variables (install_libdir is set above).
+      library_names=
+      old_library=
+      dlname=
+
+      # Test again, we may have decided not to build it any more
+      if test &quot;$build_libtool_libs&quot; = yes; then
+	if test &quot;$hardcode_into_libs&quot; = yes; then
+	  # Hardcode the library paths
+	  hardcode_libdirs=
+	  dep_rpath=
+	  rpath=&quot;$finalize_rpath&quot;
+	  test &quot;$mode&quot; != relink &amp;&amp; test &quot;$fast_install&quot; = no &amp;&amp; rpath=&quot;$compile_rpath$rpath&quot;
+	  for libdir in $rpath; do
+	    if test -n &quot;$hardcode_libdir_flag_spec&quot;; then
+	      if test -n &quot;$hardcode_libdir_separator&quot;; then
+		if test -z &quot;$hardcode_libdirs&quot;; then
+		  hardcode_libdirs=&quot;$libdir&quot;
+		else
+		  # Just accumulate the unique libdirs.
+		  case $hardcode_libdir_separator$hardcode_libdirs$hardcode_libdir_separator in
+		  *&quot;$hardcode_libdir_separator$libdir$hardcode_libdir_separator&quot;*)
+		    ;;
+		  *)
+		    hardcode_libdirs=&quot;$hardcode_libdirs$hardcode_libdir_separator$libdir&quot;
+		    ;;
+		  esac
+		fi
+	      else
+		eval flag=\&quot;$hardcode_libdir_flag_spec\&quot;
+		dep_rpath=&quot;$dep_rpath $flag&quot;
+	      fi
+	    elif test -n &quot;$runpath_var&quot;; then
+	      case &quot;$perm_rpath &quot; in
+	      *&quot; $libdir &quot;*) ;;
+	      *) perm_rpath=&quot;$perm_rpath $libdir&quot; ;;
+	      esac
+	    fi
+	  done
+	  # Substitute the hardcoded libdirs into the rpath.
+	  if test -n &quot;$hardcode_libdir_separator&quot; &amp;&amp;
+	     test -n &quot;$hardcode_libdirs&quot;; then
+	    libdir=&quot;$hardcode_libdirs&quot;
+	    if test -n &quot;$hardcode_libdir_flag_spec_ld&quot;; then
+	      eval dep_rpath=\&quot;$hardcode_libdir_flag_spec_ld\&quot;
+	    else
+	      eval dep_rpath=\&quot;$hardcode_libdir_flag_spec\&quot;
+	    fi
+	  fi
+	  if test -n &quot;$runpath_var&quot; &amp;&amp; test -n &quot;$perm_rpath&quot;; then
+	    # We should set the runpath_var.
+	    rpath=
+	    for dir in $perm_rpath; do
+	      rpath=&quot;$rpath$dir:&quot;
+	    done
+	    eval &quot;$runpath_var='$rpath\$$runpath_var'; export $runpath_var&quot;
+	  fi
+	  test -n &quot;$dep_rpath&quot; &amp;&amp; deplibs=&quot;$dep_rpath $deplibs&quot;
+	fi
+
+	shlibpath=&quot;$finalize_shlibpath&quot;
+	test &quot;$mode&quot; != relink &amp;&amp; shlibpath=&quot;$compile_shlibpath$shlibpath&quot;
+	if test -n &quot;$shlibpath&quot;; then
+	  eval &quot;$shlibpath_var='$shlibpath\$$shlibpath_var'; export $shlibpath_var&quot;
+	fi
+
+	# Get the real and link names of the library.
+	eval shared_ext=\&quot;$shrext\&quot;
+	eval library_names=\&quot;$library_names_spec\&quot;
+	set dummy $library_names
+	realname=&quot;$2&quot;
+	shift; shift
+
+	if test -n &quot;$soname_spec&quot;; then
+	  eval soname=\&quot;$soname_spec\&quot;
+	else
+	  soname=&quot;$realname&quot;
+	fi
+	if test -z &quot;$dlname&quot;; then
+	  dlname=$soname
+	fi
+
+	lib=&quot;$output_objdir/$realname&quot;
+	for link
+	do
+	  linknames=&quot;$linknames $link&quot;
+	done
+
+	# Use standard objects if they are pic
+	test -z &quot;$pic_flag&quot; &amp;&amp; libobjs=`$echo &quot;X$libobjs&quot; | $SP2NL | $Xsed -e &quot;$lo2o&quot; | $NL2SP`
+
+	# Prepare the list of exported symbols
+	if test -z &quot;$export_symbols&quot;; then
+	  if test &quot;$always_export_symbols&quot; = yes || test -n &quot;$export_symbols_regex&quot;; then
+	    $show &quot;generating symbol list for \`$libname.la'&quot;
+	    export_symbols=&quot;$output_objdir/$libname.exp&quot;
+	    $run $rm $export_symbols
+	    eval cmds=\&quot;$export_symbols_cmds\&quot;
+	    save_ifs=&quot;$IFS&quot;; IFS='~'
+	    for cmd in $cmds; do
+	      IFS=&quot;$save_ifs&quot;
+	      if len=`expr &quot;X$cmd&quot; : &quot;.*&quot;` &amp;&amp;
+	       test &quot;$len&quot; -le &quot;$max_cmd_len&quot; || test &quot;$max_cmd_len&quot; -le -1; then
+	        $show &quot;$cmd&quot;
+	        $run eval &quot;$cmd&quot; || exit $?
+	        skipped_export=false
+	      else
+	        # The command line is too long to execute in one step.
+	        $show &quot;using reloadable object file for export list...&quot;
+	        skipped_export=:
+	      fi
+	    done
+	    IFS=&quot;$save_ifs&quot;
+	    if test -n &quot;$export_symbols_regex&quot;; then
+	      $show &quot;$EGREP -e \&quot;$export_symbols_regex\&quot; \&quot;$export_symbols\&quot; &gt; \&quot;${export_symbols}T\&quot;&quot;
+	      $run eval '$EGREP -e &quot;$export_symbols_regex&quot; &quot;$export_symbols&quot; &gt; &quot;${export_symbols}T&quot;'
+	      $show &quot;$mv \&quot;${export_symbols}T\&quot; \&quot;$export_symbols\&quot;&quot;
+	      $run eval '$mv &quot;${export_symbols}T&quot; &quot;$export_symbols&quot;'
+	    fi
+	  fi
+	fi
+
+	if test -n &quot;$export_symbols&quot; &amp;&amp; test -n &quot;$include_expsyms&quot;; then
+	  $run eval '$echo &quot;X$include_expsyms&quot; | $SP2NL &gt;&gt; &quot;$export_symbols&quot;'
+	fi
+
+	tmp_deplibs=
+	for test_deplib in $deplibs; do
+		case &quot; $convenience &quot; in
+		*&quot; $test_deplib &quot;*) ;;
+		*) 
+			tmp_deplibs=&quot;$tmp_deplibs $test_deplib&quot;
+			;;
+		esac
+	done
+	deplibs=&quot;$tmp_deplibs&quot; 
+
+	if test -n &quot;$convenience&quot;; then
+	  if test -n &quot;$whole_archive_flag_spec&quot;; then
+	    save_libobjs=$libobjs
+	    eval libobjs=\&quot;\$libobjs $whole_archive_flag_spec\&quot;
+	  else
+	    gentop=&quot;$output_objdir/${outputname}x&quot;
+	    $show &quot;${rm}r $gentop&quot;
+	    $run ${rm}r &quot;$gentop&quot;
+	    $show &quot;$mkdir $gentop&quot;
+	    $run $mkdir &quot;$gentop&quot;
+	    status=$?
+	    if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$gentop&quot;; then
+	      exit $status
+	    fi
+	    generated=&quot;$generated $gentop&quot;
+
+	    for xlib in $convenience; do
+	      # Extract the objects.
+	      case $xlib in
+	      [\\/]* | [A-Za-z]:[\\/]*) xabs=&quot;$xlib&quot; ;;
+	      *) xabs=`pwd`&quot;/$xlib&quot; ;;
+	      esac
+	      xlib=`$echo &quot;X$xlib&quot; | $Xsed -e 's%^.*/%%'`
+	      xdir=&quot;$gentop/$xlib&quot;
+
+	      $show &quot;${rm}r $xdir&quot;
+	      $run ${rm}r &quot;$xdir&quot;
+	      $show &quot;$mkdir $xdir&quot;
+	      $run $mkdir &quot;$xdir&quot;
+	      status=$?
+	      if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$xdir&quot;; then
+		exit $status
+	      fi
+	      # We will extract separately just the conflicting names and we will no
+	      # longer touch any unique names. It is faster to leave these extract
+	      # automatically by $AR in one run.
+	      $show &quot;(cd $xdir &amp;&amp; $AR x $xabs)&quot;
+	      $run eval &quot;(cd \$xdir &amp;&amp; $AR x \$xabs)&quot; || exit $?
+	      if ($AR t &quot;$xabs&quot; | sort | sort -uc &gt;/dev/null 2&gt;&amp;1); then
+		:
+	      else
+		$echo &quot;$modename: warning: object name conflicts; renaming object files&quot; 1&gt;&amp;2
+		$echo &quot;$modename: warning: to ensure that they will not overwrite&quot; 1&gt;&amp;2
+		$AR t &quot;$xabs&quot; | sort | uniq -cd | while read -r count name
+		do
+		  i=1
+		  while test &quot;$i&quot; -le &quot;$count&quot;
+		  do
+		   # Put our $i before any first dot (extension)
+		   # Never overwrite any file
+		   name_to=&quot;$name&quot;
+		   while test &quot;X$name_to&quot; = &quot;X$name&quot; || test -f &quot;$xdir/$name_to&quot;
+		   do
+		     name_to=`$echo &quot;X$name_to&quot; | $Xsed -e &quot;s/\([^.]*\)/\1-$i/&quot;`
+		   done
+		   $show &quot;(cd $xdir &amp;&amp; $AR xN $i $xabs '$name' &amp;&amp; $mv '$name' '$name_to')&quot;
+		   $run eval &quot;(cd \$xdir &amp;&amp; $AR xN $i \$xabs '$name' &amp;&amp; $mv '$name' '$name_to')&quot; || exit $?
+		   i=`expr $i + 1`
+		  done
+		done
+	      fi
+
+	      libobjs=&quot;$libobjs &quot;`find $xdir -name \*.$objext -print -o -name \*.lo -print | $NL2SP`
+	    done
+	  fi
+	fi
+
+	if test &quot;$thread_safe&quot; = yes &amp;&amp; test -n &quot;$thread_safe_flag_spec&quot;; then
+	  eval flag=\&quot;$thread_safe_flag_spec\&quot;
+	  linker_flags=&quot;$linker_flags $flag&quot;
+	fi
+
+	# Make a backup of the uninstalled library when relinking
+	if test &quot;$mode&quot; = relink; then
+	  $run eval '(cd $output_objdir &amp;&amp; $rm ${realname}U &amp;&amp; $mv $realname ${realname}U)' || exit $?
+	fi
+
+	# Add all flags from the command line.  We here create a library,
+	# but those flags were only added to compile_command and
+	# finalize_command, which are only used when creating executables.
+	# So do it by hand here.
+	compiler_flags=&quot;$compiler_flags $add_flags&quot;
+	# Only add it to commands which use CC, instead of LD, i.e.
+	# only to $compiler_flags
+	#linker_flags=&quot;$linker_flags $add_flags&quot;
+
+	# Do each of the archive commands.
+	if test &quot;$module&quot; = yes &amp;&amp; test -n &quot;$module_cmds&quot; ; then
+	  if test -n &quot;$export_symbols&quot; &amp;&amp; test -n &quot;$module_expsym_cmds&quot;; then
+	    eval cmds=\&quot;$module_expsym_cmds\&quot;
+	  else
+	    eval cmds=\&quot;$module_cmds\&quot;
+	  fi
+	else
+	if test -n &quot;$export_symbols&quot; &amp;&amp; test -n &quot;$archive_expsym_cmds&quot;; then
+	  eval cmds=\&quot;$archive_expsym_cmds\&quot;
+	else
+	  eval cmds=\&quot;$archive_cmds\&quot;
+	  fi
+	fi
+
+	if test &quot;X$skipped_export&quot; != &quot;X:&quot; &amp;&amp; len=`expr &quot;X$cmds&quot; : &quot;.*&quot;` &amp;&amp;
+	   test &quot;$len&quot; -le &quot;$max_cmd_len&quot; || test &quot;$max_cmd_len&quot; -le -1; then
+	  :
+	else
+	  # The command line is too long to link in one step, link piecewise.
+	  $echo &quot;creating reloadable object files...&quot;
+
+	  # Save the value of $output and $libobjs because we want to
+	  # use them later.  If we have whole_archive_flag_spec, we
+	  # want to use save_libobjs as it was before
+	  # whole_archive_flag_spec was expanded, because we can't
+	  # assume the linker understands whole_archive_flag_spec.
+	  # This may have to be revisited, in case too many
+	  # convenience libraries get linked in and end up exceeding
+	  # the spec.
+	  if test -z &quot;$convenience&quot; || test -z &quot;$whole_archive_flag_spec&quot;; then
+	    save_libobjs=$libobjs
+	  fi
+	  save_output=$output
+
+	  # Clear the reloadable object creation command queue and
+	  # initialize k to one.
+	  test_cmds=
+	  concat_cmds=
+	  objlist=
+	  delfiles=
+	  last_robj=
+	  k=1
+	  output=$output_objdir/$save_output-${k}.$objext
+	  # Loop over the list of objects to be linked.
+	  for obj in $save_libobjs
+	  do
+	    eval test_cmds=\&quot;$reload_cmds $objlist $last_robj\&quot;
+	    if test &quot;X$objlist&quot; = X ||
+	       { len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot;` &amp;&amp;
+		 test &quot;$len&quot; -le &quot;$max_cmd_len&quot;; }; then
+	      objlist=&quot;$objlist $obj&quot;
+	    else
+	      # The command $test_cmds is almost too long, add a
+	      # command to the queue.
+	      if test &quot;$k&quot; -eq 1 ; then
+		# The first file doesn't have a previous command to add.
+		eval concat_cmds=\&quot;$reload_cmds $objlist $last_robj\&quot;
+	      else
+		# All subsequent reloadable object files will link in
+		# the last one created.
+		eval concat_cmds=\&quot;\$concat_cmds~$reload_cmds $objlist $last_robj\&quot;
+	      fi
+	      last_robj=$output_objdir/$save_output-${k}.$objext
+	      k=`expr $k + 1`
+	      output=$output_objdir/$save_output-${k}.$objext
+	      objlist=$obj
+	      len=1
+	    fi
+	  done
+	  # Handle the remaining objects by creating one last
+	  # reloadable object file.  All subsequent reloadable object
+	  # files will link in the last one created.
+	  test -z &quot;$concat_cmds&quot; || concat_cmds=$concat_cmds~
+	  eval concat_cmds=\&quot;\${concat_cmds}$reload_cmds $objlist $last_robj\&quot;
+
+	  if ${skipped_export-false}; then
+	    $show &quot;generating symbol list for \`$libname.la'&quot;
+	    export_symbols=&quot;$output_objdir/$libname.exp&quot;
+	    $run $rm $export_symbols
+	    libobjs=$output
+	    # Append the command to create the export file.
+	    eval concat_cmds=\&quot;\$concat_cmds~$export_symbols_cmds\&quot;
+          fi
+
+	  # Set up a command to remove the reloadale object files
+	  # after they are used.
+	  i=0
+	  while test &quot;$i&quot; -lt &quot;$k&quot;
+	  do
+	    i=`expr $i + 1`
+	    delfiles=&quot;$delfiles $output_objdir/$save_output-${i}.$objext&quot;
+	  done
+
+	  $echo &quot;creating a temporary reloadable object file: $output&quot;
+
+	  # Loop through the commands generated above and execute them.
+	  save_ifs=&quot;$IFS&quot;; IFS='~'
+	  for cmd in $concat_cmds; do
+	    IFS=&quot;$save_ifs&quot;
+	    $show &quot;$cmd&quot;
+	    $run eval &quot;$cmd&quot; || exit $?
+	  done
+	  IFS=&quot;$save_ifs&quot;
+
+	  libobjs=$output
+	  # Restore the value of output.
+	  output=$save_output
+
+	  if test -n &quot;$convenience&quot; &amp;&amp; test -n &quot;$whole_archive_flag_spec&quot;; then
+	    eval libobjs=\&quot;\$libobjs $whole_archive_flag_spec\&quot;
+	  fi
+	  # Expand the library linking commands again to reset the
+	  # value of $libobjs for piecewise linking.
+
+	  # Do each of the archive commands.
+	  if test -n &quot;$export_symbols&quot; &amp;&amp; test -n &quot;$archive_expsym_cmds&quot;; then
+	    eval cmds=\&quot;$archive_expsym_cmds\&quot;
+	  else
+	    eval cmds=\&quot;$archive_cmds\&quot;
+	  fi
+
+	  # Append the command to remove the reloadable object files
+	  # to the just-reset $cmds.
+	  eval cmds=\&quot;\$cmds~$rm $delfiles\&quot;
+	fi
+	save_ifs=&quot;$IFS&quot;; IFS='~'
+	for cmd in $cmds; do
+	  IFS=&quot;$save_ifs&quot;
+	  $show &quot;$cmd&quot;
+	  $run eval &quot;$cmd&quot; || exit $?
+	done
+	IFS=&quot;$save_ifs&quot;
+
+	# Restore the uninstalled library and exit
+	if test &quot;$mode&quot; = relink; then
+	  $run eval '(cd $output_objdir &amp;&amp; $rm ${realname}T &amp;&amp; $mv $realname ${realname}T &amp;&amp; $mv &quot;$realname&quot;U $realname)' || exit $?
+	  exit 0
+	fi
+
+	# Create links to the real library.
+	for linkname in $linknames; do
+	  if test &quot;$realname&quot; != &quot;$linkname&quot;; then
+	    $show &quot;(cd $output_objdir &amp;&amp; $rm $linkname &amp;&amp; $LN_S $realname $linkname)&quot;
+	    $run eval '(cd $output_objdir &amp;&amp; $rm $linkname &amp;&amp; $LN_S $realname $linkname)' || exit $?
+	  fi
+	done
+
+	# If -module or -export-dynamic was specified, set the dlname.
+	if test &quot;$module&quot; = yes || test &quot;$export_dynamic&quot; = yes; then
+	  # On all known operating systems, these are identical.
+	  dlname=&quot;$soname&quot;
+	fi
+      fi
+      ;;
+
+    obj)
+      if test -n &quot;$deplibs&quot;; then
+	$echo &quot;$modename: warning: \`-l' and \`-L' are ignored for objects&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$dlfiles$dlprefiles&quot; || test &quot;$dlself&quot; != no; then
+	$echo &quot;$modename: warning: \`-dlopen' is ignored for objects&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$rpath&quot;; then
+	$echo &quot;$modename: warning: \`-rpath' is ignored for objects&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$xrpath&quot;; then
+	$echo &quot;$modename: warning: \`-R' is ignored for objects&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$vinfo&quot;; then
+	$echo &quot;$modename: warning: \`-version-info' is ignored for objects&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$release&quot;; then
+	$echo &quot;$modename: warning: \`-release' is ignored for objects&quot; 1&gt;&amp;2
+      fi
+
+      case $output in
+      *.lo)
+	if test -n &quot;$objs$old_deplibs&quot;; then
+	  $echo &quot;$modename: cannot build library object \`$output' from non-libtool objects&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+	libobj=&quot;$output&quot;
+	obj=`$echo &quot;X$output&quot; | $Xsed -e &quot;$lo2o&quot;`
+	;;
+      *)
+	libobj=
+	obj=&quot;$output&quot;
+	;;
+      esac
+
+      # Delete the old objects.
+      $run $rm $obj $libobj
+
+      # Objects from convenience libraries.  This assumes
+      # single-version convenience libraries.  Whenever we create
+      # different ones for PIC/non-PIC, this we'll have to duplicate
+      # the extraction.
+      reload_conv_objs=
+      gentop=
+      # reload_cmds runs $LD directly, so let us get rid of
+      # -Wl from whole_archive_flag_spec
+      wl=
+
+      if test -n &quot;$convenience&quot;; then
+	if test -n &quot;$whole_archive_flag_spec&quot;; then
+	  eval reload_conv_objs=\&quot;\$reload_objs $whole_archive_flag_spec\&quot;
+	else
+	  gentop=&quot;$output_objdir/${obj}x&quot;
+	  $show &quot;${rm}r $gentop&quot;
+	  $run ${rm}r &quot;$gentop&quot;
+	  $show &quot;$mkdir $gentop&quot;
+	  $run $mkdir &quot;$gentop&quot;
+	  status=$?
+	  if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$gentop&quot;; then
+	    exit $status
+	  fi
+	  generated=&quot;$generated $gentop&quot;
+
+	  for xlib in $convenience; do
+	    # Extract the objects.
+	    case $xlib in
+	    [\\/]* | [A-Za-z]:[\\/]*) xabs=&quot;$xlib&quot; ;;
+	    *) xabs=`pwd`&quot;/$xlib&quot; ;;
+	    esac
+	    xlib=`$echo &quot;X$xlib&quot; | $Xsed -e 's%^.*/%%'`
+	    xdir=&quot;$gentop/$xlib&quot;
+
+	    $show &quot;${rm}r $xdir&quot;
+	    $run ${rm}r &quot;$xdir&quot;
+	    $show &quot;$mkdir $xdir&quot;
+	    $run $mkdir &quot;$xdir&quot;
+	    status=$?
+	    if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$xdir&quot;; then
+	      exit $status
+	    fi
+	    # We will extract separately just the conflicting names and we will no
+	    # longer touch any unique names. It is faster to leave these extract
+	    # automatically by $AR in one run.
+	    $show &quot;(cd $xdir &amp;&amp; $AR x $xabs)&quot;
+	    $run eval &quot;(cd \$xdir &amp;&amp; $AR x \$xabs)&quot; || exit $?
+	    if ($AR t &quot;$xabs&quot; | sort | sort -uc &gt;/dev/null 2&gt;&amp;1); then
+	      :
+	    else
+	      $echo &quot;$modename: warning: object name conflicts; renaming object files&quot; 1&gt;&amp;2
+	      $echo &quot;$modename: warning: to ensure that they will not overwrite&quot; 1&gt;&amp;2
+	      $AR t &quot;$xabs&quot; | sort | uniq -cd | while read -r count name
+	      do
+		i=1
+		while test &quot;$i&quot; -le &quot;$count&quot;
+		do
+		 # Put our $i before any first dot (extension)
+		 # Never overwrite any file
+		 name_to=&quot;$name&quot;
+		 while test &quot;X$name_to&quot; = &quot;X$name&quot; || test -f &quot;$xdir/$name_to&quot;
+		 do
+		   name_to=`$echo &quot;X$name_to&quot; | $Xsed -e &quot;s/\([^.]*\)/\1-$i/&quot;`
+		 done
+		 $show &quot;(cd $xdir &amp;&amp; $AR xN $i $xabs '$name' &amp;&amp; $mv '$name' '$name_to')&quot;
+		 $run eval &quot;(cd \$xdir &amp;&amp; $AR xN $i \$xabs '$name' &amp;&amp; $mv '$name' '$name_to')&quot; || exit $?
+		 i=`expr $i + 1`
+		done
+	      done
+	    fi
+
+	    reload_conv_objs=&quot;$reload_objs &quot;`find $xdir -name \*.$objext -print -o -name \*.lo -print | $NL2SP`
+	  done
+	fi
+      fi
+
+      # Create the old-style object.
+      reload_objs=&quot;$objs$old_deplibs &quot;`$echo &quot;X$libobjs&quot; | $SP2NL | $Xsed -e '/\.'${libext}$'/d' -e '/\.lib$/d' -e &quot;$lo2o&quot; | $NL2SP`&quot; $reload_conv_objs&quot; ### testsuite: skip nested quoting test
+
+      output=&quot;$obj&quot;
+      eval cmds=\&quot;$reload_cmds\&quot;
+      save_ifs=&quot;$IFS&quot;; IFS='~'
+      for cmd in $cmds; do
+	IFS=&quot;$save_ifs&quot;
+	$show &quot;$cmd&quot;
+	$run eval &quot;$cmd&quot; || exit $?
+      done
+      IFS=&quot;$save_ifs&quot;
+
+      # Exit if we aren't doing a library object file.
+      if test -z &quot;$libobj&quot;; then
+	if test -n &quot;$gentop&quot;; then
+	  $show &quot;${rm}r $gentop&quot;
+	  $run ${rm}r $gentop
+	fi
+
+	exit 0
+      fi
+
+      if test &quot;$build_libtool_libs&quot; != yes; then
+	if test -n &quot;$gentop&quot;; then
+	  $show &quot;${rm}r $gentop&quot;
+	  $run ${rm}r $gentop
+	fi
+
+	# Create an invalid libtool object if no PIC, so that we don't
+	# accidentally link it into a program.
+	# $show &quot;echo timestamp &gt; $libobj&quot;
+	# $run eval &quot;echo timestamp &gt; $libobj&quot; || exit $?
+	exit 0
+      fi
+
+      if test -n &quot;$pic_flag&quot; || test &quot;$pic_mode&quot; != default; then
+	# Only do commands if we really have different PIC objects.
+	reload_objs=&quot;$libobjs $reload_conv_objs&quot;
+	output=&quot;$libobj&quot;
+	eval cmds=\&quot;$reload_cmds\&quot;
+	save_ifs=&quot;$IFS&quot;; IFS='~'
+	for cmd in $cmds; do
+	  IFS=&quot;$save_ifs&quot;
+	  $show &quot;$cmd&quot;
+	  $run eval &quot;$cmd&quot; || exit $?
+	done
+	IFS=&quot;$save_ifs&quot;
+      fi
+
+      if test -n &quot;$gentop&quot;; then
+	$show &quot;${rm}r $gentop&quot;
+	$run ${rm}r $gentop
+      fi
+
+      exit 0
+      ;;
+
+    prog)
+      case $host in
+	*cygwin*) output=`$echo $output | ${SED} -e 's,.exe$,,;s,$,.exe,'` ;;
+      esac
+      if test -n &quot;$vinfo&quot;; then
+	$echo &quot;$modename: warning: \`-version-info' is ignored for programs&quot; 1&gt;&amp;2
+      fi
+
+      if test -n &quot;$release&quot;; then
+	$echo &quot;$modename: warning: \`-release' is ignored for programs&quot; 1&gt;&amp;2
+      fi
+
+      if test &quot;$preload&quot; = yes; then
+	if test &quot;$dlopen_support&quot; = unknown &amp;&amp; test &quot;$dlopen_self&quot; = unknown &amp;&amp;
+	   test &quot;$dlopen_self_static&quot; = unknown; then
+	  $echo &quot;$modename: warning: \`AC_LIBTOOL_DLOPEN' not used. Assuming no dlopen support.&quot;
+	fi
+      fi
+
+      case $host in
+      *-*-rhapsody* | *-*-darwin1.[012])
+	# On Rhapsody replace the C library is the System framework
+	compile_deplibs=`$echo &quot;X $compile_deplibs&quot; | $Xsed -e 's/ -lc / System.ltframework /'`
+	finalize_deplibs=`$echo &quot;X $finalize_deplibs&quot; | $Xsed -e 's/ -lc / System.ltframework /'`
+	;;
+      esac
+
+      case $host in
+      *-*-darwin*)
+        # Don't allow lazy linking, it breaks C++ global constructors
+        if test &quot;$tagname&quot; = CXX ; then
+        compile_command=&quot;$compile_command ${wl}-bind_at_load&quot;
+        finalize_command=&quot;$finalize_command ${wl}-bind_at_load&quot;
+        fi
+	# Time to change all our &quot;foo.ltframework&quot; stuff back to &quot;-framework foo&quot;
+	compile_deplibs=`$echo &quot;X $compile_deplibs&quot; | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
+	finalize_deplibs=`$echo &quot;X $finalize_deplibs&quot; | $Xsed -e 's% \([^ $]*\).ltframework% -framework \1%g'`
+        ;;
+      esac
+
+      compile_command=&quot;$compile_command $compile_deplibs&quot;
+      finalize_command=&quot;$finalize_command $finalize_deplibs&quot;
+
+      if test -n &quot;$rpath$xrpath&quot;; then
+	# If the user specified any rpath flags, then add them.
+	for libdir in $rpath $xrpath; do
+	  # This is the magic to use -rpath.
+	  case &quot;$finalize_rpath &quot; in
+	  *&quot; $libdir &quot;*) ;;
+	  *) finalize_rpath=&quot;$finalize_rpath $libdir&quot; ;;
+	  esac
+	done
+      fi
+
+      # Now hardcode the library paths
+      rpath=
+      hardcode_libdirs=
+      for libdir in $compile_rpath $finalize_rpath; do
+	if test -n &quot;$hardcode_libdir_flag_spec&quot;; then
+	  if test -n &quot;$hardcode_libdir_separator&quot;; then
+	    if test -z &quot;$hardcode_libdirs&quot;; then
+	      hardcode_libdirs=&quot;$libdir&quot;
+	    else
+	      # Just accumulate the unique libdirs.
+	      case $hardcode_libdir_separator$hardcode_libdirs$hardcode_libdir_separator in
+	      *&quot;$hardcode_libdir_separator$libdir$hardcode_libdir_separator&quot;*)
+		;;
+	      *)
+		hardcode_libdirs=&quot;$hardcode_libdirs$hardcode_libdir_separator$libdir&quot;
+		;;
+	      esac
+	    fi
+	  else
+	    eval flag=\&quot;$hardcode_libdir_flag_spec\&quot;
+	    rpath=&quot;$rpath $flag&quot;
+	  fi
+	elif test -n &quot;$runpath_var&quot;; then
+	  case &quot;$perm_rpath &quot; in
+	  *&quot; $libdir &quot;*) ;;
+	  *) perm_rpath=&quot;$perm_rpath $libdir&quot; ;;
+	  esac
+	fi
+	case $host in
+	*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
+	  case :$dllsearchpath: in
+	  *&quot;:$libdir:&quot;*) ;;
+	  *) dllsearchpath=&quot;$dllsearchpath:$libdir&quot;;;
+	  esac
+	  ;;
+	esac
+      done
+      # Substitute the hardcoded libdirs into the rpath.
+      if test -n &quot;$hardcode_libdir_separator&quot; &amp;&amp;
+	 test -n &quot;$hardcode_libdirs&quot;; then
+	libdir=&quot;$hardcode_libdirs&quot;
+	eval rpath=\&quot; $hardcode_libdir_flag_spec\&quot;
+      fi
+      compile_rpath=&quot;$rpath&quot;
+
+      rpath=
+      hardcode_libdirs=
+      for libdir in $finalize_rpath; do
+	if test -n &quot;$hardcode_libdir_flag_spec&quot;; then
+	  if test -n &quot;$hardcode_libdir_separator&quot;; then
+	    if test -z &quot;$hardcode_libdirs&quot;; then
+	      hardcode_libdirs=&quot;$libdir&quot;
+	    else
+	      # Just accumulate the unique libdirs.
+	      case $hardcode_libdir_separator$hardcode_libdirs$hardcode_libdir_separator in
+	      *&quot;$hardcode_libdir_separator$libdir$hardcode_libdir_separator&quot;*)
+		;;
+	      *)
+		hardcode_libdirs=&quot;$hardcode_libdirs$hardcode_libdir_separator$libdir&quot;
+		;;
+	      esac
+	    fi
+	  else
+	    eval flag=\&quot;$hardcode_libdir_flag_spec\&quot;
+	    rpath=&quot;$rpath $flag&quot;
+	  fi
+	elif test -n &quot;$runpath_var&quot;; then
+	  case &quot;$finalize_perm_rpath &quot; in
+	  *&quot; $libdir &quot;*) ;;
+	  *) finalize_perm_rpath=&quot;$finalize_perm_rpath $libdir&quot; ;;
+	  esac
+	fi
+      done
+      # Substitute the hardcoded libdirs into the rpath.
+      if test -n &quot;$hardcode_libdir_separator&quot; &amp;&amp;
+	 test -n &quot;$hardcode_libdirs&quot;; then
+	libdir=&quot;$hardcode_libdirs&quot;
+	eval rpath=\&quot; $hardcode_libdir_flag_spec\&quot;
+      fi
+      finalize_rpath=&quot;$rpath&quot;
+
+      if test -n &quot;$libobjs&quot; &amp;&amp; test &quot;$build_old_libs&quot; = yes; then
+	# Transform all the library objects into standard objects.
+	compile_command=`$echo &quot;X$compile_command&quot; | $SP2NL | $Xsed -e &quot;$lo2o&quot; | $NL2SP`
+	finalize_command=`$echo &quot;X$finalize_command&quot; | $SP2NL | $Xsed -e &quot;$lo2o&quot; | $NL2SP`
+      fi
+
+      dlsyms=
+      if test -n &quot;$dlfiles$dlprefiles&quot; || test &quot;$dlself&quot; != no; then
+	if test -n &quot;$NM&quot; &amp;&amp; test -n &quot;$global_symbol_pipe&quot;; then
+	  dlsyms=&quot;${outputname}S.c&quot;
+	else
+	  $echo &quot;$modename: not configured to extract global symbols from dlpreopened files&quot; 1&gt;&amp;2
+	fi
+      fi
+
+      if test -n &quot;$dlsyms&quot;; then
+	case $dlsyms in
+	&quot;&quot;) ;;
+	*.c)
+	  # Discover the nlist of each of the dlfiles.
+	  nlist=&quot;$output_objdir/${outputname}.nm&quot;
+
+	  $show &quot;$rm $nlist ${nlist}S ${nlist}T&quot;
+	  $run $rm &quot;$nlist&quot; &quot;${nlist}S&quot; &quot;${nlist}T&quot;
+
+	  # Parse the name list into a source file.
+	  $show &quot;creating $output_objdir/$dlsyms&quot;
+
+	  test -z &quot;$run&quot; &amp;&amp; $echo &gt; &quot;$output_objdir/$dlsyms&quot; &quot;\
+/* $dlsyms - symbol resolution table for \`$outputname' dlsym emulation. */
+/* Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP */
+
+#ifdef __cplusplus
+extern \&quot;C\&quot; {
+#endif
+
+/* Prevent the only kind of declaration conflicts we can make. */
+#define lt_preloaded_symbols some_other_symbol
+
+/* External symbol declarations for the compiler. */\
+&quot;
+
+	  if test &quot;$dlself&quot; = yes; then
+	    $show &quot;generating symbol list for \`$output'&quot;
+
+	    test -z &quot;$run&quot; &amp;&amp; $echo ': @PROGRAM@ ' &gt; &quot;$nlist&quot;
+
+	    # Add our own program objects to the symbol list.
+	    progfiles=`$echo &quot;X$objs$old_deplibs&quot; | $SP2NL | $Xsed -e &quot;$lo2o&quot; | $NL2SP`
+	    for arg in $progfiles; do
+	      $show &quot;extracting global C symbols from \`$arg'&quot;
+	      $run eval &quot;$NM $arg | $global_symbol_pipe &gt;&gt; '$nlist'&quot;
+	    done
+
+	    if test -n &quot;$exclude_expsyms&quot;; then
+	      $run eval '$EGREP -v &quot; ($exclude_expsyms)$&quot; &quot;$nlist&quot; &gt; &quot;$nlist&quot;T'
+	      $run eval '$mv &quot;$nlist&quot;T &quot;$nlist&quot;'
+	    fi
+
+	    if test -n &quot;$export_symbols_regex&quot;; then
+	      $run eval '$EGREP -e &quot;$export_symbols_regex&quot; &quot;$nlist&quot; &gt; &quot;$nlist&quot;T'
+	      $run eval '$mv &quot;$nlist&quot;T &quot;$nlist&quot;'
+	    fi
+
+	    # Prepare the list of exported symbols
+	    if test -z &quot;$export_symbols&quot;; then
+	      export_symbols=&quot;$output_objdir/$output.exp&quot;
+	      $run $rm $export_symbols
+	      $run eval &quot;${SED} -n -e '/^: @PROGRAM@$/d' -e 's/^.* \(.*\)$/\1/p' &quot;'&lt; &quot;$nlist&quot; &gt; &quot;$export_symbols&quot;'
+	    else
+	      $run eval &quot;${SED} -e 's/\([][.*^$]\)/\\\1/g' -e 's/^/ /' -e 's/$/$/'&quot;' &lt; &quot;$export_symbols&quot; &gt; &quot;$output_objdir/$output.exp&quot;'
+	      $run eval 'grep -f &quot;$output_objdir/$output.exp&quot; &lt; &quot;$nlist&quot; &gt; &quot;$nlist&quot;T'
+	      $run eval 'mv &quot;$nlist&quot;T &quot;$nlist&quot;'
+	    fi
+	  fi
+
+	  for arg in $dlprefiles; do
+	    $show &quot;extracting global C symbols from \`$arg'&quot;
+	    name=`$echo &quot;$arg&quot; | ${SED} -e 's%^.*/%%'`
+	    $run eval '$echo &quot;: $name &quot; &gt;&gt; &quot;$nlist&quot;'
+	    $run eval &quot;$NM $arg | $global_symbol_pipe &gt;&gt; '$nlist'&quot;
+	  done
+
+	  if test -z &quot;$run&quot;; then
+	    # Make sure we have at least an empty file.
+	    test -f &quot;$nlist&quot; || : &gt; &quot;$nlist&quot;
+
+	    if test -n &quot;$exclude_expsyms&quot;; then
+	      $EGREP -v &quot; ($exclude_expsyms)$&quot; &quot;$nlist&quot; &gt; &quot;$nlist&quot;T
+	      $mv &quot;$nlist&quot;T &quot;$nlist&quot;
+	    fi
+
+	    # Try sorting and uniquifying the output.
+	    if grep -v &quot;^: &quot; &lt; &quot;$nlist&quot; |
+		if sort -k 3 &lt;/dev/null &gt;/dev/null 2&gt;&amp;1; then
+		  sort -k 3
+		else
+		  sort +2
+		fi |
+		uniq &gt; &quot;$nlist&quot;S; then
+	      :
+	    else
+	      grep -v &quot;^: &quot; &lt; &quot;$nlist&quot; &gt; &quot;$nlist&quot;S
+	    fi
+
+	    if test -f &quot;$nlist&quot;S; then
+	      eval &quot;$global_symbol_to_cdecl&quot;' &lt; &quot;$nlist&quot;S &gt;&gt; &quot;$output_objdir/$dlsyms&quot;'
+	    else
+	      $echo '/* NONE */' &gt;&gt; &quot;$output_objdir/$dlsyms&quot;
+	    fi
+
+	    $echo &gt;&gt; &quot;$output_objdir/$dlsyms&quot; &quot;\
+
+#undef lt_preloaded_symbols
+
+#if defined (__STDC__) &amp;&amp; __STDC__
+# define lt_ptr void *
+#else
+# define lt_ptr char *
+# define const
+#endif
+
+/* The mapping between symbol names and symbols. */
+const struct {
+  const char *name;
+  lt_ptr address;
+}
+lt_preloaded_symbols[] =
+{\
+&quot;
+
+	    eval &quot;$global_symbol_to_c_name_address&quot; &lt; &quot;$nlist&quot; &gt;&gt; &quot;$output_objdir/$dlsyms&quot;
+
+	    $echo &gt;&gt; &quot;$output_objdir/$dlsyms&quot; &quot;\
+  {0, (lt_ptr) 0}
+};
+
+/* This works around a problem in FreeBSD linker */
+#ifdef FREEBSD_WORKAROUND
+static const void *lt_preloaded_setup() {
+  return lt_preloaded_symbols;
+}
+#endif
+
+#ifdef __cplusplus
+}
+#endif\
+&quot;
+	  fi
+
+	  pic_flag_for_symtable=
+	  case $host in
+	  # compiling the symbol table file with pic_flag works around
+	  # a FreeBSD bug that causes programs to crash when -lm is
+	  # linked before any other PIC object.  But we must not use
+	  # pic_flag when linking with -static.  The problem exists in
+	  # FreeBSD 2.2.6 and is fixed in FreeBSD 3.1.
+	  *-*-freebsd2*|*-*-freebsd3.0*|*-*-freebsdelf3.0*)
+	    case &quot;$compile_command &quot; in
+	    *&quot; -static &quot;*) ;;
+	    *) pic_flag_for_symtable=&quot; $pic_flag -DFREEBSD_WORKAROUND&quot;;;
+	    esac;;
+	  *-*-hpux*)
+	    case &quot;$compile_command &quot; in
+	    *&quot; -static &quot;*) ;;
+	    *) pic_flag_for_symtable=&quot; $pic_flag&quot;;;
+	    esac
+	  esac
+
+	  # Now compile the dynamic symbol file.
+	  $show &quot;(cd $output_objdir &amp;&amp; $LTCC -c$no_builtin_flag$pic_flag_for_symtable \&quot;$dlsyms\&quot;)&quot;
+	  $run eval '(cd $output_objdir &amp;&amp; $LTCC -c$no_builtin_flag$pic_flag_for_symtable &quot;$dlsyms&quot;)' || exit $?
+
+	  # Clean up the generated files.
+	  $show &quot;$rm $output_objdir/$dlsyms $nlist ${nlist}S ${nlist}T&quot;
+	  $run $rm &quot;$output_objdir/$dlsyms&quot; &quot;$nlist&quot; &quot;${nlist}S&quot; &quot;${nlist}T&quot;
+
+	  # Transform the symbol file into the correct name.
+	  compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+	  finalize_command=`$echo &quot;X$finalize_command&quot; | $Xsed -e &quot;s%@SYMFILE@%$output_objdir/${outputname}S.${objext}%&quot;`
+	  ;;
+	*)
+	  $echo &quot;$modename: unknown suffix for \`$dlsyms'&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+      else
+	# We keep going just in case the user didn't refer to
+	# lt_preloaded_symbols.  The linker will fail if global_symbol_pipe
+	# really was required.
+
+	# Nullify the symbol file.
+	compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e &quot;s% @SYMFILE@%%&quot;`
+	finalize_command=`$echo &quot;X$finalize_command&quot; | $Xsed -e &quot;s% @SYMFILE@%%&quot;`
+      fi
+
+      # AIX runtime linking requires linking programs with -Wl,-brtl and libs with -Wl,-G
+      # Also add -bnolibpath to the beginning of the link line, to clear the hardcoded runpath.
+      # Otherwise, things like the -L path to libgcc.a are accidentally hardcoded by ld.
+      # This does not apply on AIX for ia64, which uses a SysV linker.
+      case &quot;$host&quot; in
+        ia64-*-aix5*) ;;
+        *-*-aix4* | *-*-aix5*)
+                   compile_command=`$echo &quot;X$compile_command $wl-brtl&quot; | $Xsed -e &quot;s/\$CC/\$CC $wl-bnolibpath/1&quot;`
+                   finalize_command=`$echo &quot;X$finalize_command $wl-brtl&quot; | $Xsed -e &quot;s/\$CC/\$CC $wl-bnolibpath/1&quot;` ;;
+      esac
+
+      if test &quot;$need_relink&quot; = no || test &quot;$build_libtool_libs&quot; != yes; then
+	# Replace the output file specification.
+	compile_command=`$echo &quot;X$compile_command&quot; | $Xsed -e 's%@OUTPUT@%'&quot;$output&quot;'%g'`
+	link_command=&quot;$compile_command$compile_rpath&quot;
+
+	# We have no uninstalled library dependencies, so finalize right now.
+	$show &quot;$link_command&quot;
+	$run eval &quot;$link_command&quot;
+	status=$?
+
+	# Delete the generated files.
+	if test -n &quot;$dlsyms&quot;; then
+	  $show &quot;$rm $output_objdir/${outputname}S.${objext}&quot;
+	  $run $rm &quot;$output_objdir/${outputname}S.${objext}&quot;
+	fi
+
+	exit $status
+      fi
+
+      if test -n &quot;$shlibpath_var&quot;; then
+	# We should set the shlibpath_var
+	rpath=
+	for dir in $temp_rpath; do
+	  case $dir in
+	  [\\/]* | [A-Za-z]:[\\/]*)
+	    # Absolute path.
+	    rpath=&quot;$rpath$dir:&quot;
+	    ;;
+	  *)
+	    # Relative path: add a thisdir entry.
+	    rpath=&quot;$rpath\$thisdir/$dir:&quot;
+	    ;;
+	  esac
+	done
+	temp_rpath=&quot;$rpath&quot;
+      fi
+
+      if test -n &quot;$compile_shlibpath$finalize_shlibpath&quot;; then
+	compile_command=&quot;$shlibpath_var=\&quot;$compile_shlibpath$finalize_shlibpath\$$shlibpath_var\&quot; $compile_command&quot;
+      fi
+      if test -n &quot;$finalize_shlibpath&quot;; then
+	finalize_command=&quot;$shlibpath_var=\&quot;$finalize_shlibpath\$$shlibpath_var\&quot; $finalize_command&quot;
+      fi
+
+      compile_var=
+      finalize_var=
+      if test -n &quot;$runpath_var&quot;; then
+	if test -n &quot;$perm_rpath&quot;; then
+	  # We should set the runpath_var.
+	  rpath=
+	  for dir in $perm_rpath; do
+	    rpath=&quot;$rpath$dir:&quot;
+	  done
+	  compile_var=&quot;$runpath_var=\&quot;$rpath\$$runpath_var\&quot; &quot;
+	fi
+	if test -n &quot;$finalize_perm_rpath&quot;; then
+	  # We should set the runpath_var.
+	  rpath=
+	  for dir in $finalize_perm_rpath; do
+	    rpath=&quot;$rpath$dir:&quot;
+	  done
+	  finalize_var=&quot;$runpath_var=\&quot;$rpath\$$runpath_var\&quot; &quot;
+	fi
+      fi
+
+      if test &quot;$no_install&quot; = yes; then
+	# We don't need to create a wrapper script.
+	link_command=&quot;$compile_var$compile_command$compile_rpath&quot;
+	# Replace the output file specification.
+	link_command=`$echo &quot;X$link_command&quot; | $Xsed -e 's%@OUTPUT@%'&quot;$output&quot;'%g'`
+	# Delete the old output file.
+	$run $rm $output
+	# Link the executable and exit
+	$show &quot;$link_command&quot;
+	$run eval &quot;$link_command&quot; || exit $?
+	exit 0
+      fi
+
+      if test &quot;$hardcode_action&quot; = relink; then
+	# Fast installation is not supported
+	link_command=&quot;$compile_var$compile_command$compile_rpath&quot;
+	relink_command=&quot;$finalize_var$finalize_command$finalize_rpath&quot;
+
+	$echo &quot;$modename: warning: this platform does not like uninstalled shared libraries&quot; 1&gt;&amp;2
+	$echo &quot;$modename: \`$output' will be relinked during installation&quot; 1&gt;&amp;2
+      else
+	if test &quot;$fast_install&quot; != no; then
+	  link_command=&quot;$finalize_var$compile_command$finalize_rpath&quot;
+	  if test &quot;$fast_install&quot; = yes; then
+	    relink_command=`$echo &quot;X$compile_var$compile_command$compile_rpath&quot; | $Xsed -e 's%@OUTPUT@%\$progdir/\$file%g'`
+	  else
+	    # fast_install is set to needless
+	    relink_command=
+	  fi
+	else
+	  link_command=&quot;$compile_var$compile_command$compile_rpath&quot;
+	  relink_command=&quot;$finalize_var$finalize_command$finalize_rpath&quot;
+	fi
+      fi
+
+      # Replace the output file specification.
+      link_command=`$echo &quot;X$link_command&quot; | $Xsed -e 's%@OUTPUT@%'&quot;$output_objdir/$outputname&quot;'%g'`
+
+      # Delete the old output files.
+      $run $rm $output $output_objdir/$outputname $output_objdir/lt-$outputname
+
+      $show &quot;$link_command&quot;
+      $run eval &quot;$link_command&quot; || exit $?
+
+      # Now create the wrapper script.
+      $show &quot;creating $output&quot;
+
+      # Quote the relink command for shipping.
+      if test -n &quot;$relink_command&quot;; then
+	# Preserve any variables that may affect compiler behavior
+	for var in $variables_saved_for_relink; do
+	  if eval test -z \&quot;\${$var+set}\&quot;; then
+	    relink_command=&quot;{ test -z \&quot;\${$var+set}\&quot; || unset $var || { $var=; export $var; }; }; $relink_command&quot;
+	  elif eval var_value=\$$var; test -z &quot;$var_value&quot;; then
+	    relink_command=&quot;$var=; export $var; $relink_command&quot;
+	  else
+	    var_value=`$echo &quot;X$var_value&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+	    relink_command=&quot;$var=\&quot;$var_value\&quot;; export $var; $relink_command&quot;
+	  fi
+	done
+	relink_command=&quot;(cd `pwd`; $relink_command)&quot;
+	relink_command=`$echo &quot;X$relink_command&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      fi
+
+      # Quote $echo for shipping.
+      if test &quot;X$echo&quot; = &quot;X$SHELL $0 --fallback-echo&quot;; then
+	case $0 in
+	[\\/]* | [A-Za-z]:[\\/]*) qecho=&quot;$SHELL $0 --fallback-echo&quot;;;
+	*) qecho=&quot;$SHELL `pwd`/$0 --fallback-echo&quot;;;
+	esac
+	qecho=`$echo &quot;X$qecho&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      else
+	qecho=`$echo &quot;X$echo&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      fi
+
+      # Only actually do things if our run command is non-null.
+      if test -z &quot;$run&quot;; then
+	# win32 will think the script is a binary if it has
+	# a .exe suffix, so we strip it off here.
+	case $output in
+	  *.exe) output=`$echo $output|${SED} 's,.exe$,,'` ;;
+	esac
+	# test for cygwin because mv fails w/o .exe extensions
+	case $host in
+	  *cygwin*)
+	    exeext=.exe
+	    outputname=`$echo $outputname|${SED} 's,.exe$,,'` ;;
+	  *) exeext= ;;
+	esac
+	case $host in
+	  *mingw* )
+	    cwrappersource=`$echo ${output_objdir}/lt-${outputname}.c`
+	    cwrapper=`$echo ${output}.exe`
+	    $rm $cwrappersource $cwrapper
+	    trap &quot;$rm $cwrappersource $cwrapper; exit 1&quot; 1 2 15
+
+	    cat &gt; $cwrappersource &lt;&lt;EOF
+
+/* $cwrappersource - temporary wrapper executable for $objdir/$outputname
+   Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP
+
+   The $output program cannot be directly executed until all the libtool
+   libraries that it depends on are installed.
+   
+   This wrapper executable should never be moved out of the build directory.
+   If it is, it will not operate correctly.
+
+   Currently, it simply execs the wrapper *script* &quot;/bin/sh $output&quot;,
+   but could eventually absorb all of the scripts functionality and
+   exec $objdir/$outputname directly.
+*/
+EOF
+	    cat &gt;&gt; $cwrappersource&lt;&lt;&quot;EOF&quot;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+#include &lt;malloc.h&gt;
+#include &lt;stdarg.h&gt;
+#include &lt;assert.h&gt;
+
+#if defined(PATH_MAX)
+# define LT_PATHMAX PATH_MAX
+#elif defined(MAXPATHLEN)
+# define LT_PATHMAX MAXPATHLEN
+#else
+# define LT_PATHMAX 1024
+#endif
+
+#ifndef DIR_SEPARATOR
+#define DIR_SEPARATOR '/'
+#endif
+
+#if defined (_WIN32) || defined (__MSDOS__) || defined (__DJGPP__) || \
+  defined (__OS2__)
+#define HAVE_DOS_BASED_FILE_SYSTEM
+#ifndef DIR_SEPARATOR_2 
+#define DIR_SEPARATOR_2 '\\'
+#endif
+#endif
+
+#ifndef DIR_SEPARATOR_2
+# define IS_DIR_SEPARATOR(ch) ((ch) == DIR_SEPARATOR)
+#else /* DIR_SEPARATOR_2 */
+# define IS_DIR_SEPARATOR(ch) \
+        (((ch) == DIR_SEPARATOR) || ((ch) == DIR_SEPARATOR_2))
+#endif /* DIR_SEPARATOR_2 */
+
+#define XMALLOC(type, num)      ((type *) xmalloc ((num) * sizeof(type)))
+#define XFREE(stale) do { \
+  if (stale) { free ((void *) stale); stale = 0; } \
+} while (0)
+
+const char *program_name = NULL;
+
+void * xmalloc (size_t num);
+char * xstrdup (const char *string);
+char * basename (const char *name);
+char * fnqualify(const char *path);
+char * strendzap(char *str, const char *pat);
+void lt_fatal (const char *message, ...);
+
+int
+main (int argc, char *argv[])
+{
+  char **newargz;
+  int i;
+  
+  program_name = (char *) xstrdup ((char *) basename (argv[0]));
+  newargz = XMALLOC(char *, argc+2);
+EOF
+
+	    cat &gt;&gt; $cwrappersource &lt;&lt;EOF
+  newargz[0] = &quot;$SHELL&quot;;
+EOF
+
+	    cat &gt;&gt; $cwrappersource &lt;&lt;&quot;EOF&quot;
+  newargz[1] = fnqualify(argv[0]);
+  /* we know the script has the same name, without the .exe */
+  /* so make sure newargz[1] doesn't end in .exe */
+  strendzap(newargz[1],&quot;.exe&quot;); 
+  for (i = 1; i &lt; argc; i++)
+    newargz[i+1] = xstrdup(argv[i]);
+  newargz[argc+1] = NULL;
+EOF
+
+	    cat &gt;&gt; $cwrappersource &lt;&lt;EOF
+  execv(&quot;$SHELL&quot;,newargz);
+EOF
+
+	    cat &gt;&gt; $cwrappersource &lt;&lt;&quot;EOF&quot;
+}
+
+void *
+xmalloc (size_t num)
+{
+  void * p = (void *) malloc (num);
+  if (!p)
+    lt_fatal (&quot;Memory exhausted&quot;);
+
+  return p;
+}
+
+char * 
+xstrdup (const char *string)
+{
+  return string ? strcpy ((char *) xmalloc (strlen (string) + 1), string) : NULL
+;
+}
+
+char *
+basename (const char *name)
+{
+  const char *base;
+
+#if defined (HAVE_DOS_BASED_FILE_SYSTEM)
+  /* Skip over the disk name in MSDOS pathnames. */
+  if (isalpha (name[0]) &amp;&amp; name[1] == ':') 
+    name += 2;
+#endif
+
+  for (base = name; *name; name++)
+    if (IS_DIR_SEPARATOR (*name))
+      base = name + 1;
+  return (char *) base;
+}
+
+char * 
+fnqualify(const char *path)
+{
+  size_t size;
+  char *p;
+  char tmp[LT_PATHMAX + 1];
+
+  assert(path != NULL);
+
+  /* Is it qualified already? */
+#if defined (HAVE_DOS_BASED_FILE_SYSTEM)
+  if (isalpha (path[0]) &amp;&amp; path[1] == ':')
+    return xstrdup (path);
+#endif
+  if (IS_DIR_SEPARATOR (path[0]))
+    return xstrdup (path);
+
+  /* prepend the current directory */
+  /* doesn't handle '~' */
+  if (getcwd (tmp, LT_PATHMAX) == NULL)
+    lt_fatal (&quot;getcwd failed&quot;);
+  size = strlen(tmp) + 1 + strlen(path) + 1; /* +2 for '/' and '\0' */
+  p = XMALLOC(char, size);
+  sprintf(p, &quot;%s%c%s&quot;, tmp, DIR_SEPARATOR, path);
+  return p;
+}
+
+char *
+strendzap(char *str, const char *pat) 
+{
+  size_t len, patlen;
+
+  assert(str != NULL);
+  assert(pat != NULL);
+
+  len = strlen(str);
+  patlen = strlen(pat);
+
+  if (patlen &lt;= len)
+  {
+    str += len - patlen;
+    if (strcmp(str, pat) == 0)
+      *str = '\0';
+  }
+  return str;
+}
+
+static void
+lt_error_core (int exit_status, const char * mode, 
+          const char * message, va_list ap)
+{
+  fprintf (stderr, &quot;%s: %s: &quot;, program_name, mode);
+  vfprintf (stderr, message, ap);
+  fprintf (stderr, &quot;.\n&quot;);
+
+  if (exit_status &gt;= 0)
+    exit (exit_status);
+}
+
+void
+lt_fatal (const char *message, ...)
+{
+  va_list ap;
+  va_start (ap, message);
+  lt_error_core (EXIT_FAILURE, &quot;FATAL&quot;, message, ap);
+  va_end (ap);
+}
+EOF
+	  # we should really use a build-platform specific compiler
+	  # here, but OTOH, the wrappers (shell script and this C one)
+	  # are only useful if you want to execute the &quot;real&quot; binary.
+	  # Since the &quot;real&quot; binary is built for $host, then this
+	  # wrapper might as well be built for $host, too.
+	  $run $LTCC -s -o $cwrapper $cwrappersource
+	  ;;
+	esac
+	$rm $output
+	trap &quot;$rm $output; exit 1&quot; 1 2 15
+
+	$echo &gt; $output &quot;\
+#! $SHELL
+
+# $output - temporary wrapper script for $objdir/$outputname
+# Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP
+#
+# The $output program cannot be directly executed until all the libtool
+# libraries that it depends on are installed.
+#
+# This wrapper script should never be moved out of the build directory.
+# If it is, it will not operate correctly.
+
+# Sed substitution that helps us do robust quoting.  It backslashifies
+# metacharacters that are still active within double-quoted strings.
+Xsed='${SED} -e 1s/^X//'
+sed_quote_subst='$sed_quote_subst'
+
+# The HP-UX ksh and POSIX shell print the target directory to stdout
+# if CDPATH is set.
+if test \&quot;\${CDPATH+set}\&quot; = set; then CDPATH=:; export CDPATH; fi
+
+relink_command=\&quot;$relink_command\&quot;
+
+# This environment variable determines our operation mode.
+if test \&quot;\$libtool_install_magic\&quot; = \&quot;$magic\&quot;; then
+  # install mode needs the following variable:
+  notinst_deplibs='$notinst_deplibs'
+else
+  # When we are sourced in execute mode, \$file and \$echo are already set.
+  if test \&quot;\$libtool_execute_magic\&quot; != \&quot;$magic\&quot;; then
+    echo=\&quot;$qecho\&quot;
+    file=\&quot;\$0\&quot;
+    # Make sure echo works.
+    if test \&quot;X\$1\&quot; = X--no-reexec; then
+      # Discard the --no-reexec flag, and continue.
+      shift
+    elif test \&quot;X\`(\$echo '\t') 2&gt;/dev/null\`\&quot; = 'X\t'; then
+      # Yippee, \$echo works!
+      :
+    else
+      # Restart under the correct shell, and then maybe \$echo will work.
+      exec $SHELL \&quot;\$0\&quot; --no-reexec \${1+\&quot;\$@\&quot;}
+    fi
+  fi\
+&quot;
+	$echo &gt;&gt; $output &quot;\
+
+  # Find the directory that this script lives in.
+  thisdir=\`\$echo \&quot;X\$file\&quot; | \$Xsed -e 's%/[^/]*$%%'\`
+  test \&quot;x\$thisdir\&quot; = \&quot;x\$file\&quot; &amp;&amp; thisdir=.
+
+  # Follow symbolic links until we get to the real thisdir.
+  file=\`ls -ld \&quot;\$file\&quot; | ${SED} -n 's/.*-&gt; //p'\`
+  while test -n \&quot;\$file\&quot;; do
+    destdir=\`\$echo \&quot;X\$file\&quot; | \$Xsed -e 's%/[^/]*\$%%'\`
+
+    # If there was a directory component, then change thisdir.
+    if test \&quot;x\$destdir\&quot; != \&quot;x\$file\&quot;; then
+      case \&quot;\$destdir\&quot; in
+      [\\\\/]* | [A-Za-z]:[\\\\/]*) thisdir=\&quot;\$destdir\&quot; ;;
+      *) thisdir=\&quot;\$thisdir/\$destdir\&quot; ;;
+      esac
+    fi
+
+    file=\`\$echo \&quot;X\$file\&quot; | \$Xsed -e 's%^.*/%%'\`
+    file=\`ls -ld \&quot;\$thisdir/\$file\&quot; | ${SED} -n 's/.*-&gt; //p'\`
+  done
+
+  # Try to get the absolute directory name.
+  absdir=\`cd \&quot;\$thisdir\&quot; &amp;&amp; pwd\`
+  test -n \&quot;\$absdir\&quot; &amp;&amp; thisdir=\&quot;\$absdir\&quot;
+&quot;
+
+	if test &quot;$fast_install&quot; = yes; then
+	  $echo &gt;&gt; $output &quot;\
+  program=lt-'$outputname'$exeext
+  progdir=\&quot;\$thisdir/$objdir\&quot;
+
+  if test ! -f \&quot;\$progdir/\$program\&quot; || \\
+     { file=\`ls -1dt \&quot;\$progdir/\$program\&quot; \&quot;\$progdir/../\$program\&quot; 2&gt;/dev/null | ${SED} 1q\`; \\
+       test \&quot;X\$file\&quot; != \&quot;X\$progdir/\$program\&quot;; }; then
+
+    file=\&quot;\$\$-\$program\&quot;
+
+    if test ! -d \&quot;\$progdir\&quot;; then
+      $mkdir \&quot;\$progdir\&quot;
+    else
+      $rm \&quot;\$progdir/\$file\&quot;
+    fi&quot;
+
+	  $echo &gt;&gt; $output &quot;\
+
+    # relink executable if necessary
+    if test -n \&quot;\$relink_command\&quot;; then
+      if relink_command_output=\`eval \$relink_command 2&gt;&amp;1\`; then :
+      else
+	$echo \&quot;\$relink_command_output\&quot; &gt;&amp;2
+	$rm \&quot;\$progdir/\$file\&quot;
+	exit 1
+      fi
+    fi
+
+    $mv \&quot;\$progdir/\$file\&quot; \&quot;\$progdir/\$program\&quot; 2&gt;/dev/null ||
+    { $rm \&quot;\$progdir/\$program\&quot;;
+      $mv \&quot;\$progdir/\$file\&quot; \&quot;\$progdir/\$program\&quot;; }
+    $rm \&quot;\$progdir/\$file\&quot;
+  fi&quot;
+	else
+	  $echo &gt;&gt; $output &quot;\
+  program='$outputname'
+  progdir=\&quot;\$thisdir/$objdir\&quot;
+&quot;
+	fi
+
+	$echo &gt;&gt; $output &quot;\
+
+  if test -f \&quot;\$progdir/\$program\&quot;; then&quot;
+
+	# Export our shlibpath_var if we have one.
+	if test &quot;$shlibpath_overrides_runpath&quot; = yes &amp;&amp; test -n &quot;$shlibpath_var&quot; &amp;&amp; test -n &quot;$temp_rpath&quot;; then
+	  $echo &gt;&gt; $output &quot;\
+    # Add our own library path to $shlibpath_var
+    $shlibpath_var=\&quot;$temp_rpath\$$shlibpath_var\&quot;
+
+    # Some systems cannot cope with colon-terminated $shlibpath_var
+    # The second colon is a workaround for a bug in BeOS R4 sed
+    $shlibpath_var=\`\$echo \&quot;X\$$shlibpath_var\&quot; | \$Xsed -e 's/::*\$//'\`
+
+    export $shlibpath_var
+&quot;
+	fi
+
+	# fixup the dll searchpath if we need to.
+	if test -n &quot;$dllsearchpath&quot;; then
+	  $echo &gt;&gt; $output &quot;\
+    # Add the dll search path components to the executable PATH
+    PATH=$dllsearchpath:\$PATH
+&quot;
+	fi
+
+	$echo &gt;&gt; $output &quot;\
+    if test \&quot;\$libtool_execute_magic\&quot; != \&quot;$magic\&quot;; then
+      # Run the actual program with our arguments.
+&quot;
+	case $host in
+	# Backslashes separate directories on plain windows
+	*-*-mingw | *-*-os2*)
+	  $echo &gt;&gt; $output &quot;\
+      exec \$progdir\\\\\$program \${1+\&quot;\$@\&quot;}
+&quot;
+	  ;;
+
+	*)
+	  # Need to set LD_LIBRARY_PATH, to the value already
+	  # computed within libtool.
+	  $echo &gt;&gt; $output &quot;\
+      LD_LIBRARY_PATH=\&quot;$rpath\&quot; exec \$progdir/\$program \${1+\&quot;\$@\&quot;}
+&quot;
+	  ;;
+	esac
+	$echo &gt;&gt; $output &quot;\
+      \$echo \&quot;\$0: cannot exec \$program \${1+\&quot;\$@\&quot;}\&quot;
+      exit 1
+    fi
+  else
+    # The program doesn't exist.
+    \$echo \&quot;\$0: error: \$progdir/\$program does not exist\&quot; 1&gt;&amp;2
+    \$echo \&quot;This script is just a wrapper for \$program.\&quot; 1&gt;&amp;2
+    $echo \&quot;See the $PACKAGE documentation for more information.\&quot; 1&gt;&amp;2
+    exit 1
+  fi
+fi\
+&quot;
+	chmod +x $output
+      fi
+      exit 0
+      ;;
+    esac
+
+    # See if we need to build an old-fashioned archive.
+    for oldlib in $oldlibs; do
+
+      if test &quot;$build_libtool_libs&quot; = convenience; then
+	oldobjs=&quot;$libobjs_save&quot;
+	addlibs=&quot;$convenience&quot;
+	build_libtool_libs=no
+      else
+	if test &quot;$build_libtool_libs&quot; = module; then
+	  oldobjs=&quot;$libobjs_save&quot;
+	  build_libtool_libs=no
+	else
+	  oldobjs=&quot;$old_deplibs $non_pic_objects&quot;
+	fi
+	addlibs=&quot;$old_convenience&quot;
+      fi
+
+      if test -n &quot;$addlibs&quot;; then
+	gentop=&quot;$output_objdir/${outputname}x&quot;
+	$show &quot;${rm}r $gentop&quot;
+	$run ${rm}r &quot;$gentop&quot;
+	$show &quot;$mkdir $gentop&quot;
+	$run $mkdir &quot;$gentop&quot;
+	status=$?
+	if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$gentop&quot;; then
+	  exit $status
+	fi
+	generated=&quot;$generated $gentop&quot;
+
+	# Add in members from convenience archives.
+	for xlib in $addlibs; do
+	  # Extract the objects.
+	  case $xlib in
+	  [\\/]* | [A-Za-z]:[\\/]*) xabs=&quot;$xlib&quot; ;;
+	  *) xabs=`pwd`&quot;/$xlib&quot; ;;
+	  esac
+	  xlib=`$echo &quot;X$xlib&quot; | $Xsed -e 's%^.*/%%'`
+	  xdir=&quot;$gentop/$xlib&quot;
+
+	  $show &quot;${rm}r $xdir&quot;
+	  $run ${rm}r &quot;$xdir&quot;
+	  $show &quot;$mkdir $xdir&quot;
+	  $run $mkdir &quot;$xdir&quot;
+	  status=$?
+	  if test &quot;$status&quot; -ne 0 &amp;&amp; test ! -d &quot;$xdir&quot;; then
+	    exit $status
+	  fi
+	  # We will extract separately just the conflicting names and we will no
+	  # longer touch any unique names. It is faster to leave these extract
+	  # automatically by $AR in one run.
+	  $show &quot;(cd $xdir &amp;&amp; $AR x $xabs)&quot;
+	  $run eval &quot;(cd \$xdir &amp;&amp; $AR x \$xabs)&quot; || exit $?
+	  if ($AR t &quot;$xabs&quot; | sort | sort -uc &gt;/dev/null 2&gt;&amp;1); then
+	    :
+	  else
+	    $echo &quot;$modename: warning: object name conflicts; renaming object files&quot; 1&gt;&amp;2
+	    $echo &quot;$modename: warning: to ensure that they will not overwrite&quot; 1&gt;&amp;2
+	    $AR t &quot;$xabs&quot; | sort | uniq -cd | while read -r count name
+	    do
+	      i=1
+	      while test &quot;$i&quot; -le &quot;$count&quot;
+	      do
+	       # Put our $i before any first dot (extension)
+	       # Never overwrite any file
+	       name_to=&quot;$name&quot;
+	       while test &quot;X$name_to&quot; = &quot;X$name&quot; || test -f &quot;$xdir/$name_to&quot;
+	       do
+		 name_to=`$echo &quot;X$name_to&quot; | $Xsed -e &quot;s/\([^.]*\)/\1-$i/&quot;`
+	       done
+	       $show &quot;(cd $xdir &amp;&amp; $AR xN $i $xabs '$name' &amp;&amp; $mv '$name' '$name_to')&quot;
+	       $run eval &quot;(cd \$xdir &amp;&amp; $AR xN $i \$xabs '$name' &amp;&amp; $mv '$name' '$name_to')&quot; || exit $?
+	       i=`expr $i + 1`
+	      done
+	    done
+	  fi
+
+	  oldobjs=&quot;$oldobjs &quot;`find $xdir -name \*.${objext} -print -o -name \*.lo -print | $NL2SP`
+	done
+      fi
+
+      compiler_flags=&quot;$compiler_flags $add_flags&quot;
+
+      # Do each command in the archive commands.
+      if test -n &quot;$old_archive_from_new_cmds&quot; &amp;&amp; test &quot;$build_libtool_libs&quot; = yes; then
+	eval cmds=\&quot;$old_archive_from_new_cmds\&quot;
+      else
+	eval cmds=\&quot;$old_archive_cmds\&quot;
+
+	if len=`expr &quot;X$cmds&quot; : &quot;.*&quot;` &amp;&amp;
+	     test &quot;$len&quot; -le &quot;$max_cmd_len&quot; || test &quot;$max_cmd_len&quot; -le -1; then
+	  :
+	else
+	  # the command line is too long to link in one step, link in parts
+	  $echo &quot;using piecewise archive linking...&quot;
+	  save_RANLIB=$RANLIB
+	  RANLIB=:
+	  objlist=
+	  concat_cmds=
+	  save_oldobjs=$oldobjs
+	  # GNU ar 2.10+ was changed to match POSIX; thus no paths are
+	  # encoded into archives.  This makes 'ar r' malfunction in
+	  # this piecewise linking case whenever conflicting object
+	  # names appear in distinct ar calls; check, warn and compensate.
+	    if (for obj in $save_oldobjs
+	    do
+	      $echo &quot;X$obj&quot; | $Xsed -e 's%^.*/%%'
+	    done | sort | sort -uc &gt;/dev/null 2&gt;&amp;1); then
+	    :
+	  else
+	    $echo &quot;$modename: warning: object name conflicts; overriding AR_FLAGS to 'cq'&quot; 1&gt;&amp;2
+	    $echo &quot;$modename: warning: to ensure that POSIX-compatible ar will work&quot; 1&gt;&amp;2
+	    AR_FLAGS=cq
+	  fi
+	  # Is there a better way of finding the last object in the list?
+	  for obj in $save_oldobjs
+	  do
+	    last_oldobj=$obj
+	  done  
+	  for obj in $save_oldobjs
+	  do
+	    oldobjs=&quot;$objlist $obj&quot;
+	    objlist=&quot;$objlist $obj&quot;
+	    eval test_cmds=\&quot;$old_archive_cmds\&quot;
+	    if len=`expr &quot;X$test_cmds&quot; : &quot;.*&quot;` &amp;&amp;
+	       test &quot;$len&quot; -le &quot;$max_cmd_len&quot;; then
+	      :
+	    else
+	      # the above command should be used before it gets too long
+	      oldobjs=$objlist
+	      if test &quot;$obj&quot; = &quot;$last_oldobj&quot; ; then
+	        RANLIB=$save_RANLIB
+	      fi  
+	      test -z &quot;$concat_cmds&quot; || concat_cmds=$concat_cmds~
+	      eval concat_cmds=\&quot;\${concat_cmds}$old_archive_cmds\&quot;
+	      objlist=
+	    fi
+	  done
+	  RANLIB=$save_RANLIB
+	  oldobjs=$objlist
+	  if test &quot;X$oldobjs&quot; = &quot;X&quot; ; then
+	    eval cmds=\&quot;\$concat_cmds\&quot;
+	  else
+	    eval cmds=\&quot;\$concat_cmds~$old_archive_cmds\&quot;
+	  fi
+	fi
+      fi
+      save_ifs=&quot;$IFS&quot;; IFS='~'
+      for cmd in $cmds; do
+	IFS=&quot;$save_ifs&quot;
+	$show &quot;$cmd&quot;
+	$run eval &quot;$cmd&quot; || exit $?
+      done
+      IFS=&quot;$save_ifs&quot;
+    done
+
+    if test -n &quot;$generated&quot;; then
+      $show &quot;${rm}r$generated&quot;
+      $run ${rm}r$generated
+    fi
+
+    # Now create the libtool archive.
+    case $output in
+    *.la)
+      old_library=
+      test &quot;$build_old_libs&quot; = yes &amp;&amp; old_library=&quot;$libname.$libext&quot;
+      $show &quot;creating $output&quot;
+
+      # Preserve any variables that may affect compiler behavior
+      for var in $variables_saved_for_relink; do
+	if eval test -z \&quot;\${$var+set}\&quot;; then
+	  relink_command=&quot;{ test -z \&quot;\${$var+set}\&quot; || unset $var || { $var=; export $var; }; }; $relink_command&quot;
+	elif eval var_value=\$$var; test -z &quot;$var_value&quot;; then
+	  relink_command=&quot;$var=; export $var; $relink_command&quot;
+	else
+	  var_value=`$echo &quot;X$var_value&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+	  relink_command=&quot;$var=\&quot;$var_value\&quot;; export $var; $relink_command&quot;
+	fi
+      done
+      # Quote the link command for shipping.
+      relink_command=&quot;(cd `pwd`; $SHELL $0 --mode=relink $libtool_args @inst_prefix_dir@)&quot;
+      relink_command=`$echo &quot;X$relink_command&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      if test &quot;$hardcode_automatic&quot; = yes ; then
+        relink_command=
+      fi  
+      # Only create the output if not a dry run.
+      if test -z &quot;$run&quot;; then
+	for installed in no yes; do
+	  if test &quot;$installed&quot; = yes; then
+	    if test -z &quot;$install_libdir&quot;; then
+	      break
+	    fi
+	    output=&quot;$output_objdir/$outputname&quot;i
+	    # Replace all uninstalled libtool libraries with the installed ones
+	    newdependency_libs=
+	    for deplib in $dependency_libs; do
+	      case $deplib in
+	      *.la)
+		name=`$echo &quot;X$deplib&quot; | $Xsed -e 's%^.*/%%'`
+		eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
+		if test -z &quot;$libdir&quot;; then
+		  $echo &quot;$modename: \`$deplib' is not a valid libtool archive&quot; 1&gt;&amp;2
+		  exit 1
+		fi
+		newdependency_libs=&quot;$newdependency_libs $libdir/$name&quot;
+		;;
+	      *) newdependency_libs=&quot;$newdependency_libs $deplib&quot; ;;
+	      esac
+	    done
+	    dependency_libs=&quot;$newdependency_libs&quot;
+	    newdlfiles=
+	    for lib in $dlfiles; do
+	      name=`$echo &quot;X$lib&quot; | $Xsed -e 's%^.*/%%'`
+	      eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $lib`
+	      if test -z &quot;$libdir&quot;; then
+		$echo &quot;$modename: \`$lib' is not a valid libtool archive&quot; 1&gt;&amp;2
+		exit 1
+	      fi
+	      newdlfiles=&quot;$newdlfiles $libdir/$name&quot;
+	    done
+	    dlfiles=&quot;$newdlfiles&quot;
+	    newdlprefiles=
+	    for lib in $dlprefiles; do
+	      name=`$echo &quot;X$lib&quot; | $Xsed -e 's%^.*/%%'`
+	      eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $lib`
+	      if test -z &quot;$libdir&quot;; then
+		$echo &quot;$modename: \`$lib' is not a valid libtool archive&quot; 1&gt;&amp;2
+		exit 1
+	      fi
+	      newdlprefiles=&quot;$newdlprefiles $libdir/$name&quot;
+	    done
+	    dlprefiles=&quot;$newdlprefiles&quot;
+	  fi
+	  $rm $output
+	  # place dlname in correct position for cygwin
+	  tdlname=$dlname
+	  case $host,$output,$installed,$module,$dlname in
+	    *cygwin*,*lai,yes,no,*.dll | *mingw*,*lai,yes,no,*.dll) tdlname=../bin/$dlname ;;
+	  esac
+	  $echo &gt; $output &quot;\
+# $outputname - a libtool library file
+# Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP
+#
+# Please DO NOT delete this file!
+# It is necessary for linking the library.
+
+# The name that we can dlopen(3).
+dlname='$tdlname'
+
+# Names of this library.
+library_names='$library_names'
+
+# The name of the static archive.
+old_library='$old_library'
+
+# Libraries that this one depends upon.
+dependency_libs='$dependency_libs'
+
+# Version information for $libname.
+current=$current
+age=$age
+revision=$revision
+
+# Is this an already installed library?
+installed=$installed
+
+# Should we warn about portability when linking against -modules?
+shouldnotlink=$module
+
+# Files to dlopen/dlpreopen
+dlopen='$dlfiles'
+dlpreopen='$dlprefiles'
+
+# Directory that this library needs to be installed in:
+libdir='$install_libdir'&quot;
+	  if test &quot;$installed&quot; = no &amp;&amp; test &quot;$need_relink&quot; = yes &amp;&amp; test &quot;$fast_install&quot; = no; then
+	    $echo &gt;&gt; $output &quot;\
+relink_command=\&quot;$relink_command\&quot;&quot;
+	  fi
+	done
+      fi
+
+      # Do a symbolic link so that the libtool archive can be found in
+      # LD_LIBRARY_PATH before the program is installed.
+      $show &quot;(cd $output_objdir &amp;&amp; $rm $outputname &amp;&amp; $LN_S ../$outputname $outputname)&quot;
+      $run eval '(cd $output_objdir &amp;&amp; $rm $outputname &amp;&amp; $LN_S ../$outputname $outputname)' || exit $?
+      ;;
+    esac
+    exit 0
+    ;;
+
+  # libtool install mode
+  install)
+    modename=&quot;$modename: install&quot;
+
+    # There may be an optional sh(1) argument at the beginning of
+    # install_prog (especially on Windows NT).
+    if test &quot;$nonopt&quot; = &quot;$SHELL&quot; || test &quot;$nonopt&quot; = /bin/sh ||
+       # Allow the use of GNU shtool's install command.
+       $echo &quot;X$nonopt&quot; | $Xsed | grep shtool &gt; /dev/null; then
+      # Aesthetically quote it.
+      arg=`$echo &quot;X$nonopt&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      case $arg in
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*)
+	arg=&quot;\&quot;$arg\&quot;&quot;
+	;;
+      esac
+      install_prog=&quot;$arg &quot;
+      arg=&quot;$1&quot;
+      shift
+    else
+      install_prog=
+      arg=&quot;$nonopt&quot;
+    fi
+
+    # The real first argument should be the name of the installation program.
+    # Aesthetically quote it.
+    arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+    case $arg in
+    *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*)
+      arg=&quot;\&quot;$arg\&quot;&quot;
+      ;;
+    esac
+    install_prog=&quot;$install_prog$arg&quot;
+
+    # We need to accept at least all the BSD install flags.
+    dest=
+    files=
+    opts=
+    prev=
+    install_type=
+    isdir=no
+    stripme=
+    for arg
+    do
+      if test -n &quot;$dest&quot;; then
+	files=&quot;$files $dest&quot;
+	dest=&quot;$arg&quot;
+	continue
+      fi
+
+      case $arg in
+      -d) isdir=yes ;;
+      -f) prev=&quot;-f&quot; ;;
+      -g) prev=&quot;-g&quot; ;;
+      -m) prev=&quot;-m&quot; ;;
+      -o) prev=&quot;-o&quot; ;;
+      -s)
+	stripme=&quot; -s&quot;
+	continue
+	;;
+      -*) ;;
+
+      *)
+	# If the previous option needed an argument, then skip it.
+	if test -n &quot;$prev&quot;; then
+	  prev=
+	else
+	  dest=&quot;$arg&quot;
+	  continue
+	fi
+	;;
+      esac
+
+      # Aesthetically quote the argument.
+      arg=`$echo &quot;X$arg&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      case $arg in
+      *[\[\~\#\^\&amp;\*\(\)\{\}\|\;\&lt;\&gt;\?\'\ \	]*|*]*)
+	arg=&quot;\&quot;$arg\&quot;&quot;
+	;;
+      esac
+      install_prog=&quot;$install_prog $arg&quot;
+    done
+
+    if test -z &quot;$install_prog&quot;; then
+      $echo &quot;$modename: you must specify an install program&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+    fi
+
+    if test -n &quot;$prev&quot;; then
+      $echo &quot;$modename: the \`$prev' option requires an argument&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+    fi
+
+    if test -z &quot;$files&quot;; then
+      if test -z &quot;$dest&quot;; then
+	$echo &quot;$modename: no file or destination specified&quot; 1&gt;&amp;2
+      else
+	$echo &quot;$modename: you must specify a destination&quot; 1&gt;&amp;2
+      fi
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+    fi
+
+    # Strip any trailing slash from the destination.
+    dest=`$echo &quot;X$dest&quot; | $Xsed -e 's%/$%%'`
+
+    # Check to see that the destination is a directory.
+    test -d &quot;$dest&quot; &amp;&amp; isdir=yes
+    if test &quot;$isdir&quot; = yes; then
+      destdir=&quot;$dest&quot;
+      destname=
+    else
+      destdir=`$echo &quot;X$dest&quot; | $Xsed -e 's%/[^/]*$%%'`
+      test &quot;X$destdir&quot; = &quot;X$dest&quot; &amp;&amp; destdir=.
+      destname=`$echo &quot;X$dest&quot; | $Xsed -e 's%^.*/%%'`
+
+      # Not a directory, so check to see that there is only one file specified.
+      set dummy $files
+      if test &quot;$#&quot; -gt 2; then
+	$echo &quot;$modename: \`$dest' is not a directory&quot; 1&gt;&amp;2
+	$echo &quot;$help&quot; 1&gt;&amp;2
+	exit 1
+      fi
+    fi
+    case $destdir in
+    [\\/]* | [A-Za-z]:[\\/]*) ;;
+    *)
+      for file in $files; do
+	case $file in
+	*.lo) ;;
+	*)
+	  $echo &quot;$modename: \`$destdir' must be an absolute directory name&quot; 1&gt;&amp;2
+	  $echo &quot;$help&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+      done
+      ;;
+    esac
+
+    # This variable tells wrapper scripts just to set variables rather
+    # than running their programs.
+    libtool_install_magic=&quot;$magic&quot;
+
+    staticlibs=
+    future_libdirs=
+    current_libdirs=
+    for file in $files; do
+
+      # Do each installation.
+      case $file in
+      *.$libext)
+	# Do the static libraries later.
+	staticlibs=&quot;$staticlibs $file&quot;
+	;;
+
+      *.la)
+	# Check to see that this really is a libtool archive.
+	if (${SED} -e '2q' $file | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then :
+	else
+	  $echo &quot;$modename: \`$file' is not a valid libtool archive&quot; 1&gt;&amp;2
+	  $echo &quot;$help&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	library_names=
+	old_library=
+	relink_command=
+	# If there is no directory component, then add one.
+	case $file in
+	*/* | *\\*) . $file ;;
+	*) . ./$file ;;
+	esac
+
+	# Add the libdir to current_libdirs if it is the destination.
+	if test &quot;X$destdir&quot; = &quot;X$libdir&quot;; then
+	  case &quot;$current_libdirs &quot; in
+	  *&quot; $libdir &quot;*) ;;
+	  *) current_libdirs=&quot;$current_libdirs $libdir&quot; ;;
+	  esac
+	else
+	  # Note the libdir as a future libdir.
+	  case &quot;$future_libdirs &quot; in
+	  *&quot; $libdir &quot;*) ;;
+	  *) future_libdirs=&quot;$future_libdirs $libdir&quot; ;;
+	  esac
+	fi
+
+	dir=`$echo &quot;X$file&quot; | $Xsed -e 's%/[^/]*$%%'`/
+	test &quot;X$dir&quot; = &quot;X$file/&quot; &amp;&amp; dir=
+	dir=&quot;$dir$objdir&quot;
+
+	if test -n &quot;$relink_command&quot;; then
+	  # Determine the prefix the user has applied to our future dir.
+	  inst_prefix_dir=`$echo &quot;$destdir&quot; | $SED &quot;s%$libdir\$%%&quot;`
+
+	  # Don't allow the user to place us outside of our expected
+	  # location b/c this prevents finding dependent libraries that
+	  # are installed to the same prefix.
+	  # At present, this check doesn't affect windows .dll's that
+	  # are installed into $libdir/../bin (currently, that works fine)
+	  # but it's something to keep an eye on.
+	  if test &quot;$inst_prefix_dir&quot; = &quot;$destdir&quot;; then
+	    $echo &quot;$modename: error: cannot install \`$file' to a directory not ending in $libdir&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+
+	  if test -n &quot;$inst_prefix_dir&quot;; then
+	    # Stick the inst_prefix_dir data into the link command.
+	    relink_command=`$echo &quot;$relink_command&quot; | $SED &quot;s%@inst_prefix_dir@%-inst-prefix-dir $inst_prefix_dir%&quot;`
+	  else
+	    relink_command=`$echo &quot;$relink_command&quot; | $SED &quot;s%@inst_prefix_dir@%%&quot;`
+	  fi
+
+	  $echo &quot;$modename: warning: relinking \`$file'&quot; 1&gt;&amp;2
+	  $show &quot;$relink_command&quot;
+	  if $run eval &quot;$relink_command&quot;; then :
+	  else
+	    $echo &quot;$modename: error: relink \`$file' with the above command before installing it&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+	fi
+
+	# See the names of the shared library.
+	set dummy $library_names
+	if test -n &quot;$2&quot;; then
+	  realname=&quot;$2&quot;
+	  shift
+	  shift
+
+	  srcname=&quot;$realname&quot;
+	  test -n &quot;$relink_command&quot; &amp;&amp; srcname=&quot;$realname&quot;T
+
+	  # Install the shared library and build the symlinks.
+	  $show &quot;$install_prog $dir/$srcname $destdir/$realname&quot;
+	  $run eval &quot;$install_prog $dir/$srcname $destdir/$realname&quot; || exit $?
+	  if test -n &quot;$stripme&quot; &amp;&amp; test -n &quot;$striplib&quot;; then
+	    $show &quot;$striplib $destdir/$realname&quot;
+	    $run eval &quot;$striplib $destdir/$realname&quot; || exit $?
+	  fi
+
+	  if test &quot;$#&quot; -gt 0; then
+	    # Delete the old symlinks, and create new ones.
+	    for linkname
+	    do
+	      if test &quot;$linkname&quot; != &quot;$realname&quot;; then
+		$show &quot;(cd $destdir &amp;&amp; $rm $linkname &amp;&amp; $LN_S $realname $linkname)&quot;
+		$run eval &quot;(cd $destdir &amp;&amp; $rm $linkname &amp;&amp; $LN_S $realname $linkname)&quot;
+	      fi
+	    done
+	  fi
+
+	  # Do each command in the postinstall commands.
+	  lib=&quot;$destdir/$realname&quot;
+	  eval cmds=\&quot;$postinstall_cmds\&quot;
+	  save_ifs=&quot;$IFS&quot;; IFS='~'
+	  for cmd in $cmds; do
+	    IFS=&quot;$save_ifs&quot;
+	    $show &quot;$cmd&quot;
+	    $run eval &quot;$cmd&quot; || exit $?
+	  done
+	  IFS=&quot;$save_ifs&quot;
+	fi
+
+	# Install the pseudo-library for information purposes.
+	name=`$echo &quot;X$file&quot; | $Xsed -e 's%^.*/%%'`
+	instname=&quot;$dir/$name&quot;i
+	$show &quot;$install_prog $instname $destdir/$name&quot;
+	$run eval &quot;$install_prog $instname $destdir/$name&quot; || exit $?
+
+	# Maybe install the static library, too.
+	test -n &quot;$old_library&quot; &amp;&amp; staticlibs=&quot;$staticlibs $dir/$old_library&quot;
+	;;
+
+      *.lo)
+	# Install (i.e. copy) a libtool object.
+
+	# Figure out destination file name, if it wasn't already specified.
+	if test -n &quot;$destname&quot;; then
+	  destfile=&quot;$destdir/$destname&quot;
+	else
+	  destfile=`$echo &quot;X$file&quot; | $Xsed -e 's%^.*/%%'`
+	  destfile=&quot;$destdir/$destfile&quot;
+	fi
+
+	# Deduce the name of the destination old-style object file.
+	case $destfile in
+	*.lo)
+	  staticdest=`$echo &quot;X$destfile&quot; | $Xsed -e &quot;$lo2o&quot;`
+	  ;;
+	*.$objext)
+	  staticdest=&quot;$destfile&quot;
+	  destfile=
+	  ;;
+	*)
+	  $echo &quot;$modename: cannot copy a libtool object to \`$destfile'&quot; 1&gt;&amp;2
+	  $echo &quot;$help&quot; 1&gt;&amp;2
+	  exit 1
+	  ;;
+	esac
+
+	# Install the libtool object if requested.
+	if test -n &quot;$destfile&quot;; then
+	  $show &quot;$install_prog $file $destfile&quot;
+	  $run eval &quot;$install_prog $file $destfile&quot; || exit $?
+	fi
+
+	# Install the old object if enabled.
+	if test &quot;$build_old_libs&quot; = yes; then
+	  # Deduce the name of the old-style object file.
+	  staticobj=`$echo &quot;X$file&quot; | $Xsed -e &quot;$lo2o&quot;`
+
+	  $show &quot;$install_prog $staticobj $staticdest&quot;
+	  $run eval &quot;$install_prog \$staticobj \$staticdest&quot; || exit $?
+	fi
+	exit 0
+	;;
+
+      *)
+	# Figure out destination file name, if it wasn't already specified.
+	if test -n &quot;$destname&quot;; then
+	  destfile=&quot;$destdir/$destname&quot;
+	else
+	  destfile=`$echo &quot;X$file&quot; | $Xsed -e 's%^.*/%%'`
+	  destfile=&quot;$destdir/$destfile&quot;
+	fi
+
+	# If the file is missing, and there is a .exe on the end, strip it
+	# because it is most likely a libtool script we actually want to
+	# install
+	stripped_ext=&quot;&quot;
+	case $file in
+	  *.exe)
+	    if test ! -f &quot;$file&quot;; then
+	      file=`$echo $file|${SED} 's,.exe$,,'`
+	      stripped_ext=&quot;.exe&quot;
+	    fi
+	    ;;
+	esac
+
+	# Do a test to see if this is really a libtool program.
+	case $host in
+	*cygwin*|*mingw*)
+	    wrapper=`$echo $file | ${SED} -e 's,.exe$,,'`
+	    ;;
+	*)
+	    wrapper=$file
+	    ;;
+	esac
+	if (${SED} -e '4q' $wrapper | grep &quot;^# Generated by .*$PACKAGE&quot;)&gt;/dev/null 2&gt;&amp;1; then
+	  notinst_deplibs=
+	  relink_command=
+
+	  # To insure that &quot;foo&quot; is sourced, and not &quot;foo.exe&quot;,
+	  # finese the cygwin/MSYS system by explicitly sourcing &quot;foo.&quot;
+	  # which disallows the automatic-append-.exe behavior.
+	  case $build in
+	  *cygwin* | *mingw*) wrapperdot=${wrapper}. ;;
+	  *) wrapperdot=${wrapper} ;;
+	  esac
+	  # If there is no directory component, then add one.
+	  case $file in
+	  */* | *\\*) . ${wrapperdot} ;;
+	  *) . ./${wrapperdot} ;;
+	  esac
+
+	  # Check the variables that should have been set.
+	  if test -z &quot;$notinst_deplibs&quot;; then
+	    $echo &quot;$modename: invalid libtool wrapper script \`$wrapper'&quot; 1&gt;&amp;2
+	    exit 1
+	  fi
+
+	  finalize=yes
+	  for lib in $notinst_deplibs; do
+	    # Check to see that each library is installed.
+	    libdir=
+	    if test -f &quot;$lib&quot;; then
+	      # If there is no directory component, then add one.
+	      case $lib in
+	      */* | *\\*) . $lib ;;
+	      *) . ./$lib ;;
+	      esac
+	    fi
+	    libfile=&quot;$libdir/&quot;`$echo &quot;X$lib&quot; | $Xsed -e 's%^.*/%%g'` ### testsuite: skip nested quoting test
+	    if test -n &quot;$libdir&quot; &amp;&amp; test ! -f &quot;$libfile&quot;; then
+	      $echo &quot;$modename: warning: \`$lib' has not been installed in \`$libdir'&quot; 1&gt;&amp;2
+	      finalize=no
+	    fi
+	  done
+
+	  relink_command=
+	  # To insure that &quot;foo&quot; is sourced, and not &quot;foo.exe&quot;,
+	  # finese the cygwin/MSYS system by explicitly sourcing &quot;foo.&quot;
+	  # which disallows the automatic-append-.exe behavior.
+	  case $build in
+	  *cygwin* | *mingw*) wrapperdot=${wrapper}. ;;
+	  *) wrapperdot=${wrapper} ;;
+	  esac
+	  # If there is no directory component, then add one.
+	  case $file in
+	  */* | *\\*) . ${wrapperdot} ;;
+	  *) . ./${wrapperdot} ;;
+	  esac
+
+	  outputname=
+	  if test &quot;$fast_install&quot; = no &amp;&amp; test -n &quot;$relink_command&quot;; then
+	    if test &quot;$finalize&quot; = yes &amp;&amp; test -z &quot;$run&quot;; then
+	      tmpdir=&quot;/tmp&quot;
+	      test -n &quot;$TMPDIR&quot; &amp;&amp; tmpdir=&quot;$TMPDIR&quot;
+	      tmpdir=&quot;$tmpdir/libtool-$$&quot;
+	      if $mkdir &quot;$tmpdir&quot; &amp;&amp; chmod 700 &quot;$tmpdir&quot;; then :
+	      else
+		$echo &quot;$modename: error: cannot create temporary directory \`$tmpdir'&quot; 1&gt;&amp;2
+		continue
+	      fi
+	      file=`$echo &quot;X$file$stripped_ext&quot; | $Xsed -e 's%^.*/%%'`
+	      outputname=&quot;$tmpdir/$file&quot;
+	      # Replace the output file specification.
+	      relink_command=`$echo &quot;X$relink_command&quot; | $Xsed -e 's%@OUTPUT@%'&quot;$outputname&quot;'%g'`
+
+	      $show &quot;$relink_command&quot;
+	      if $run eval &quot;$relink_command&quot;; then :
+	      else
+		$echo &quot;$modename: error: relink \`$file' with the above command before installing it&quot; 1&gt;&amp;2
+		${rm}r &quot;$tmpdir&quot;
+		continue
+	      fi
+	      file=&quot;$outputname&quot;
+	    else
+	      $echo &quot;$modename: warning: cannot relink \`$file'&quot; 1&gt;&amp;2
+	    fi
+	  else
+	    # Install the binary that we compiled earlier.
+	    file=`$echo &quot;X$file$stripped_ext&quot; | $Xsed -e &quot;s%\([^/]*\)$%$objdir/\1%&quot;`
+	  fi
+	fi
+
+	# remove .exe since cygwin /usr/bin/install will append another
+	# one anyways
+	case $install_prog,$host in
+	*/usr/bin/install*,*cygwin*)
+	  case $file:$destfile in
+	  *.exe:*.exe)
+	    # this is ok
+	    ;;
+	  *.exe:*)
+	    destfile=$destfile.exe
+	    ;;
+	  *:*.exe)
+	    destfile=`$echo $destfile | ${SED} -e 's,.exe$,,'`
+	    ;;
+	  esac
+	  ;;
+	esac
+	$show &quot;$install_prog$stripme $file $destfile&quot;
+	$run eval &quot;$install_prog\$stripme \$file \$destfile&quot; || exit $?
+	test -n &quot;$outputname&quot; &amp;&amp; ${rm}r &quot;$tmpdir&quot;
+	;;
+      esac
+    done
+
+    for file in $staticlibs; do
+      name=`$echo &quot;X$file&quot; | $Xsed -e 's%^.*/%%'`
+
+      # Set up the ranlib parameters.
+      oldlib=&quot;$destdir/$name&quot;
+
+      $show &quot;$install_prog $file $oldlib&quot;
+      $run eval &quot;$install_prog \$file \$oldlib&quot; || exit $?
+
+      if test -n &quot;$stripme&quot; &amp;&amp; test -n &quot;$striplib&quot;; then
+	$show &quot;$old_striplib $oldlib&quot;
+	$run eval &quot;$old_striplib $oldlib&quot; || exit $?
+      fi
+
+      # Do each command in the postinstall commands.
+      eval cmds=\&quot;$old_postinstall_cmds\&quot;
+      save_ifs=&quot;$IFS&quot;; IFS='~'
+      for cmd in $cmds; do
+	IFS=&quot;$save_ifs&quot;
+	$show &quot;$cmd&quot;
+	$run eval &quot;$cmd&quot; || exit $?
+      done
+      IFS=&quot;$save_ifs&quot;
+    done
+
+    if test -n &quot;$future_libdirs&quot;; then
+      $echo &quot;$modename: warning: remember to run \`$progname --finish$future_libdirs'&quot; 1&gt;&amp;2
+    fi
+
+    if test -n &quot;$current_libdirs&quot;; then
+      # Maybe just do a dry run.
+      test -n &quot;$run&quot; &amp;&amp; current_libdirs=&quot; -n$current_libdirs&quot;
+      exec_cmd='$SHELL $0 --finish$current_libdirs'
+    else
+      exit 0
+    fi
+    ;;
+
+  # libtool finish mode
+  finish)
+    modename=&quot;$modename: finish&quot;
+    libdirs=&quot;$nonopt&quot;
+    admincmds=
+
+    if test -n &quot;$finish_cmds$finish_eval&quot; &amp;&amp; test -n &quot;$libdirs&quot;; then
+      for dir
+      do
+	libdirs=&quot;$libdirs $dir&quot;
+      done
+
+      for libdir in $libdirs; do
+	if test -n &quot;$finish_cmds&quot;; then
+	  # Do each command in the finish commands.
+	  eval cmds=\&quot;$finish_cmds\&quot;
+	  save_ifs=&quot;$IFS&quot;; IFS='~'
+	  for cmd in $cmds; do
+	    IFS=&quot;$save_ifs&quot;
+	    $show &quot;$cmd&quot;
+	    $run eval &quot;$cmd&quot; || admincmds=&quot;$admincmds
+       $cmd&quot;
+	  done
+	  IFS=&quot;$save_ifs&quot;
+	fi
+	if test -n &quot;$finish_eval&quot;; then
+	  # Do the single finish_eval.
+	  eval cmds=\&quot;$finish_eval\&quot;
+	  $run eval &quot;$cmds&quot; || admincmds=&quot;$admincmds
+       $cmds&quot;
+	fi
+      done
+    fi
+
+    # Exit here if they wanted silent mode.
+    exit 0
+
+    $echo &quot;----------------------------------------------------------------------&quot;
+    $echo &quot;Libraries have been installed in:&quot;
+    for libdir in $libdirs; do
+      $echo &quot;   $libdir&quot;
+    done
+    $echo
+    $echo &quot;If you ever happen to want to link against installed libraries&quot;
+    $echo &quot;in a given directory, LIBDIR, you must either use libtool, and&quot;
+    $echo &quot;specify the full pathname of the library, or use the \`-LLIBDIR'&quot;
+    $echo &quot;flag during linking and do at least one of the following:&quot;
+    if test -n &quot;$shlibpath_var&quot;; then
+      $echo &quot;   - add LIBDIR to the \`$shlibpath_var' environment variable&quot;
+      $echo &quot;     during execution&quot;
+    fi
+    if test -n &quot;$runpath_var&quot;; then
+      $echo &quot;   - add LIBDIR to the \`$runpath_var' environment variable&quot;
+      $echo &quot;     during linking&quot;
+    fi
+    if test -n &quot;$hardcode_libdir_flag_spec&quot;; then
+      libdir=LIBDIR
+      eval flag=\&quot;$hardcode_libdir_flag_spec\&quot;
+
+      $echo &quot;   - use the \`$flag' linker flag&quot;
+    fi
+    if test -n &quot;$admincmds&quot;; then
+      $echo &quot;   - have your system administrator run these commands:$admincmds&quot;
+    fi
+    if test -f /etc/ld.so.conf; then
+      $echo &quot;   - have your system administrator add LIBDIR to \`/etc/ld.so.conf'&quot;
+    fi
+    $echo
+    $echo &quot;See any operating system documentation about shared libraries for&quot;
+    $echo &quot;more information, such as the ld(1) and ld.so(8) manual pages.&quot;
+    $echo &quot;----------------------------------------------------------------------&quot;
+    exit 0
+    ;;
+
+  # libtool execute mode
+  execute)
+    modename=&quot;$modename: execute&quot;
+
+    # The first argument is the command name.
+    cmd=&quot;$nonopt&quot;
+    if test -z &quot;$cmd&quot;; then
+      $echo &quot;$modename: you must specify a COMMAND&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot;
+      exit 1
+    fi
+
+    # Handle -dlopen flags immediately.
+    for file in $execute_dlfiles; do
+      if test ! -f &quot;$file&quot;; then
+	$echo &quot;$modename: \`$file' is not a file&quot; 1&gt;&amp;2
+	$echo &quot;$help&quot; 1&gt;&amp;2
+	exit 1
+      fi
+
+      dir=
+      case $file in
+      *.la)
+	# Check to see that this really is a libtool archive.
+	if (${SED} -e '2q' $file | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then :
+	else
+	  $echo &quot;$modename: \`$lib' is not a valid libtool archive&quot; 1&gt;&amp;2
+	  $echo &quot;$help&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+
+	# Read the libtool library.
+	dlname=
+	library_names=
+
+	# If there is no directory component, then add one.
+	case $file in
+	*/* | *\\*) . $file ;;
+	*) . ./$file ;;
+	esac
+
+	# Skip this library if it cannot be dlopened.
+	if test -z &quot;$dlname&quot;; then
+	  # Warn if it was a shared library.
+	  test -n &quot;$library_names&quot; &amp;&amp; $echo &quot;$modename: warning: \`$file' was not linked with \`-export-dynamic'&quot;
+	  continue
+	fi
+
+	dir=`$echo &quot;X$file&quot; | $Xsed -e 's%/[^/]*$%%'`
+	test &quot;X$dir&quot; = &quot;X$file&quot; &amp;&amp; dir=.
+
+	if test -f &quot;$dir/$objdir/$dlname&quot;; then
+	  dir=&quot;$dir/$objdir&quot;
+	else
+	  $echo &quot;$modename: cannot find \`$dlname' in \`$dir' or \`$dir/$objdir'&quot; 1&gt;&amp;2
+	  exit 1
+	fi
+	;;
+
+      *.lo)
+	# Just add the directory containing the .lo file.
+	dir=`$echo &quot;X$file&quot; | $Xsed -e 's%/[^/]*$%%'`
+	test &quot;X$dir&quot; = &quot;X$file&quot; &amp;&amp; dir=.
+	;;
+
+      *)
+	$echo &quot;$modename: warning \`-dlopen' is ignored for non-libtool libraries and objects&quot; 1&gt;&amp;2
+	continue
+	;;
+      esac
+
+      # Get the absolute pathname.
+      absdir=`cd &quot;$dir&quot; &amp;&amp; pwd`
+      test -n &quot;$absdir&quot; &amp;&amp; dir=&quot;$absdir&quot;
+
+      # Now add the directory to shlibpath_var.
+      if eval &quot;test -z \&quot;\$$shlibpath_var\&quot;&quot;; then
+	eval &quot;$shlibpath_var=\&quot;\$dir\&quot;&quot;
+      else
+	eval &quot;$shlibpath_var=\&quot;\$dir:\$$shlibpath_var\&quot;&quot;
+      fi
+    done
+
+    # This variable tells wrapper scripts just to set shlibpath_var
+    # rather than running their programs.
+    libtool_execute_magic=&quot;$magic&quot;
+
+    # Check if any of the arguments is a wrapper script.
+    args=
+    for file
+    do
+      case $file in
+      -*) ;;
+      *)
+	# Do a test to see if this is really a libtool program.
+	if (${SED} -e '4q' $file | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+	  # If there is no directory component, then add one.
+	  case $file in
+	  */* | *\\*) . $file ;;
+	  *) . ./$file ;;
+	  esac
+
+	  # Transform arg to wrapped name.
+	  file=&quot;$progdir/$program&quot;
+	fi
+	;;
+      esac
+      # Quote arguments (to preserve shell metacharacters).
+      file=`$echo &quot;X$file&quot; | $Xsed -e &quot;$sed_quote_subst&quot;`
+      args=&quot;$args \&quot;$file\&quot;&quot;
+    done
+
+    if test -z &quot;$run&quot;; then
+      if test -n &quot;$shlibpath_var&quot;; then
+	# Export the shlibpath_var.
+	eval &quot;export $shlibpath_var&quot;
+      fi
+
+      # Restore saved environment variables
+      if test &quot;${save_LC_ALL+set}&quot; = set; then
+	LC_ALL=&quot;$save_LC_ALL&quot;; export LC_ALL
+      fi
+      if test &quot;${save_LANG+set}&quot; = set; then
+	LANG=&quot;$save_LANG&quot;; export LANG
+      fi
+
+      # Now prepare to actually exec the command.
+      exec_cmd=&quot;\$cmd$args&quot;
+    else
+      # Display what would be done.
+      if test -n &quot;$shlibpath_var&quot;; then
+	eval &quot;\$echo \&quot;\$shlibpath_var=\$$shlibpath_var\&quot;&quot;
+	$echo &quot;export $shlibpath_var&quot;
+      fi
+      $echo &quot;$cmd$args&quot;
+      exit 0
+    fi
+    ;;
+
+  # libtool clean and uninstall mode
+  clean | uninstall)
+    modename=&quot;$modename: $mode&quot;
+    rm=&quot;$nonopt&quot;
+    files=
+    rmforce=
+    exit_status=0
+
+    # This variable tells wrapper scripts just to set variables rather
+    # than running their programs.
+    libtool_install_magic=&quot;$magic&quot;
+
+    for arg
+    do
+      case $arg in
+      -f) rm=&quot;$rm $arg&quot;; rmforce=yes ;;
+      -*) rm=&quot;$rm $arg&quot; ;;
+      *) files=&quot;$files $arg&quot; ;;
+      esac
+    done
+
+    if test -z &quot;$rm&quot;; then
+      $echo &quot;$modename: you must specify an RM program&quot; 1&gt;&amp;2
+      $echo &quot;$help&quot; 1&gt;&amp;2
+      exit 1
+    fi
+
+    rmdirs=
+
+    origobjdir=&quot;$objdir&quot;
+    for file in $files; do
+      dir=`$echo &quot;X$file&quot; | $Xsed -e 's%/[^/]*$%%'`
+      if test &quot;X$dir&quot; = &quot;X$file&quot;; then
+	dir=.
+	objdir=&quot;$origobjdir&quot;
+      else
+	objdir=&quot;$dir/$origobjdir&quot;
+      fi
+      name=`$echo &quot;X$file&quot; | $Xsed -e 's%^.*/%%'`
+      test &quot;$mode&quot; = uninstall &amp;&amp; objdir=&quot;$dir&quot;
+
+      # Remember objdir for removal later, being careful to avoid duplicates
+      if test &quot;$mode&quot; = clean; then
+	case &quot; $rmdirs &quot; in
+	  *&quot; $objdir &quot;*) ;;
+	  *) rmdirs=&quot;$rmdirs $objdir&quot; ;;
+	esac
+      fi
+
+      # Don't error if the file doesn't exist and rm -f was used.
+      if (test -L &quot;$file&quot;) &gt;/dev/null 2&gt;&amp;1 \
+	|| (test -h &quot;$file&quot;) &gt;/dev/null 2&gt;&amp;1 \
+	|| test -f &quot;$file&quot;; then
+	:
+      elif test -d &quot;$file&quot;; then
+	exit_status=1
+	continue
+      elif test &quot;$rmforce&quot; = yes; then
+	continue
+      fi
+
+      rmfiles=&quot;$file&quot;
+
+      case $name in
+      *.la)
+	# Possibly a libtool archive, so verify it.
+	if (${SED} -e '2q' $file | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+	  . $dir/$name
+
+	  # Delete the libtool libraries and symlinks.
+	  for n in $library_names; do
+	    rmfiles=&quot;$rmfiles $objdir/$n&quot;
+	  done
+	  test -n &quot;$old_library&quot; &amp;&amp; rmfiles=&quot;$rmfiles $objdir/$old_library&quot;
+	  test &quot;$mode&quot; = clean &amp;&amp; rmfiles=&quot;$rmfiles $objdir/$name $objdir/${name}i&quot;
+
+	  if test &quot;$mode&quot; = uninstall; then
+	    if test -n &quot;$library_names&quot;; then
+	      # Do each command in the postuninstall commands.
+	      eval cmds=\&quot;$postuninstall_cmds\&quot;
+	      save_ifs=&quot;$IFS&quot;; IFS='~'
+	      for cmd in $cmds; do
+		IFS=&quot;$save_ifs&quot;
+		$show &quot;$cmd&quot;
+		$run eval &quot;$cmd&quot;
+		if test &quot;$?&quot; -ne 0 &amp;&amp; test &quot;$rmforce&quot; != yes; then
+		  exit_status=1
+		fi
+	      done
+	      IFS=&quot;$save_ifs&quot;
+	    fi
+
+	    if test -n &quot;$old_library&quot;; then
+	      # Do each command in the old_postuninstall commands.
+	      eval cmds=\&quot;$old_postuninstall_cmds\&quot;
+	      save_ifs=&quot;$IFS&quot;; IFS='~'
+	      for cmd in $cmds; do
+		IFS=&quot;$save_ifs&quot;
+		$show &quot;$cmd&quot;
+		$run eval &quot;$cmd&quot;
+		if test &quot;$?&quot; -ne 0 &amp;&amp; test &quot;$rmforce&quot; != yes; then
+		  exit_status=1
+		fi
+	      done
+	      IFS=&quot;$save_ifs&quot;
+	    fi
+	    # FIXME: should reinstall the best remaining shared library.
+	  fi
+	fi
+	;;
+
+      *.lo)
+	# Possibly a libtool object, so verify it.
+	if (${SED} -e '2q' $file | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+
+	  # Read the .lo file
+	  . $dir/$name
+
+	  # Add PIC object to the list of files to remove.
+	  if test -n &quot;$pic_object&quot; \
+	     &amp;&amp; test &quot;$pic_object&quot; != none; then
+	    rmfiles=&quot;$rmfiles $dir/$pic_object&quot;
+	  fi
+
+	  # Add non-PIC object to the list of files to remove.
+	  if test -n &quot;$non_pic_object&quot; \
+	     &amp;&amp; test &quot;$non_pic_object&quot; != none; then
+	    rmfiles=&quot;$rmfiles $dir/$non_pic_object&quot;
+	  fi
+	fi
+	;;
+
+      *)
+	if test &quot;$mode&quot; = clean ; then
+	  noexename=$name
+	  case $file in
+	  *.exe) 
+	    file=`$echo $file|${SED} 's,.exe$,,'`
+	    noexename=`$echo $name|${SED} 's,.exe$,,'`
+	    # $file with .exe has already been added to rmfiles,
+	    # add $file without .exe
+	    rmfiles=&quot;$rmfiles $file&quot;
+	    ;;
+	  esac
+	  # Do a test to see if this is a libtool program.
+	  if (${SED} -e '4q' $file | grep &quot;^# Generated by .*$PACKAGE&quot;) &gt;/dev/null 2&gt;&amp;1; then
+	    relink_command=
+	    . $dir/$noexename
+
+	    # note $name still contains .exe if it was in $file originally
+	    # as does the version of $file that was added into $rmfiles
+	    rmfiles=&quot;$rmfiles $objdir/$name $objdir/${name}S.${objext}&quot;
+	    if test &quot;$fast_install&quot; = yes &amp;&amp; test -n &quot;$relink_command&quot;; then
+	      rmfiles=&quot;$rmfiles $objdir/lt-$name&quot;
+	    fi
+	    if test &quot;X$noexename&quot; != &quot;X$name&quot; ; then
+	      rmfiles=&quot;$rmfiles $objdir/lt-${noexename}.c&quot;
+	    fi
+	  fi
+	fi
+	;;
+      esac
+      $show &quot;$rm $rmfiles&quot;
+      $run $rm $rmfiles || exit_status=1
+    done
+    objdir=&quot;$origobjdir&quot;
+
+    # Try to remove the ${objdir}s in the directories where we deleted files
+    for dir in $rmdirs; do
+      if test -d &quot;$dir&quot;; then
+	$show &quot;rmdir $dir&quot;
+	$run rmdir $dir &gt;/dev/null 2&gt;&amp;1
+      fi
+    done
+
+    exit $exit_status
+    ;;
+
+  &quot;&quot;)
+    $echo &quot;$modename: you must specify a MODE&quot; 1&gt;&amp;2
+    $echo &quot;$generic_help&quot; 1&gt;&amp;2
+    exit 1
+    ;;
+  esac
+
+  if test -z &quot;$exec_cmd&quot;; then
+    $echo &quot;$modename: invalid operation mode \`$mode'&quot; 1&gt;&amp;2
+    $echo &quot;$generic_help&quot; 1&gt;&amp;2
+    exit 1
+  fi
+fi # test -z &quot;$show_help&quot;
+
+if test -n &quot;$exec_cmd&quot;; then
+  eval exec $exec_cmd
+  exit 1
+fi
+
+# We need to display help for each of the modes.
+case $mode in
+&quot;&quot;) $echo \
+&quot;Usage: $modename [OPTION]... [MODE-ARG]...
+
+Provide generalized library-building support services.
+
+    --config          show all configuration variables
+    --debug           enable verbose shell tracing
+-n, --dry-run         display commands without modifying any files
+    --features        display basic configuration information and exit
+    --finish          same as \`--mode=finish'
+    --help            display this help message and exit
+    --mode=MODE       use operation mode MODE [default=inferred from MODE-ARGS]
+    --quiet           same as \`--silent'
+    --silent          don't print informational messages
+    --tag=TAG         use configuration variables from tag TAG
+    --version         print version information
+
+MODE must be one of the following:
+
+      clean           remove files from the build directory
+      compile         compile a source file into a libtool object
+      execute         automatically set library path, then run a program
+      finish          complete the installation of libtool libraries
+      install         install libraries or executables
+      link            create a library or an executable
+      uninstall       remove libraries from an installed directory
+
+MODE-ARGS vary depending on the MODE.  Try \`$modename --help --mode=MODE' for
+a more detailed description of MODE.
+
+Report bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-libtool at gnu.org</A>&gt;.&quot;
+  exit 0
+  ;;
+
+clean)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=clean RM [RM-OPTION]... FILE...
+
+Remove files from the build directory.
+
+RM is the name of the program to use to delete files associated with each FILE
+(typically \`/bin/rm').  RM-OPTIONS are options (such as \`-f') to be passed
+to RM.
+
+If FILE is a libtool library, object or program, all the files associated
+with it are deleted. Otherwise, only FILE itself is deleted using RM.&quot;
+  ;;
+
+compile)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=compile COMPILE-COMMAND... SOURCEFILE
+
+Compile a source file into a libtool library object.
+
+This mode accepts the following additional options:
+
+  -o OUTPUT-FILE    set the output file name to OUTPUT-FILE
+  -prefer-pic       try to building PIC objects only
+  -prefer-non-pic   try to building non-PIC objects only
+  -static           always build a \`.o' file suitable for static linking
+
+COMPILE-COMMAND is a command to be used in creating a \`standard' object file
+from the given SOURCEFILE.
+
+The output file name is determined by removing the directory component from
+SOURCEFILE, then substituting the C source code suffix \`.c' with the
+library object suffix, \`.lo'.&quot;
+  ;;
+
+execute)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=execute COMMAND [ARGS]...
+
+Automatically set library path, then run a program.
+
+This mode accepts the following additional options:
+
+  -dlopen FILE      add the directory containing FILE to the library path
+
+This mode sets the library path environment variable according to \`-dlopen'
+flags.
+
+If any of the ARGS are libtool executable wrappers, then they are translated
+into their corresponding uninstalled binary, and any of their required library
+directories are added to the library path.
+
+Then, COMMAND is executed, with ARGS as arguments.&quot;
+  ;;
+
+finish)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=finish [LIBDIR]...
+
+Complete the installation of libtool libraries.
+
+Each LIBDIR is a directory that contains libtool libraries.
+
+The commands that this mode executes may require superuser privileges.  Use
+the \`--dry-run' option if you just want to see what would be executed.&quot;
+  ;;
+
+install)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=install INSTALL-COMMAND...
+
+Install executables or libraries.
+
+INSTALL-COMMAND is the installation command.  The first component should be
+either the \`install' or \`cp' program.
+
+The rest of the components are interpreted as arguments to that command (only
+BSD-compatible install options are recognized).&quot;
+  ;;
+
+link)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=link LINK-COMMAND...
+
+Link object files or libraries together to form another library, or to
+create an executable program.
+
+LINK-COMMAND is a command using the C compiler that you would use to create
+a program from several object files.
+
+The following components of LINK-COMMAND are treated specially:
+
+  -all-static       do not do any dynamic linking at all
+  -avoid-version    do not add a version suffix if possible
+  -dlopen FILE      \`-dlpreopen' FILE if it cannot be dlopened at runtime
+  -dlpreopen FILE   link in FILE and add its symbols to lt_preloaded_symbols
+  -export-dynamic   allow symbols from OUTPUT-FILE to be resolved with dlsym(3)
+  -export-symbols SYMFILE
+		    try to export only the symbols listed in SYMFILE
+  -export-symbols-regex REGEX
+		    try to export only the symbols matching REGEX
+  -LLIBDIR          search LIBDIR for required installed libraries
+  -lNAME            OUTPUT-FILE requires the installed library libNAME
+  -module           build a library that can dlopened
+  -no-fast-install  disable the fast-install mode
+  -no-install       link a not-installable executable
+  -no-undefined     declare that a library does not refer to external symbols
+  -o OUTPUT-FILE    create OUTPUT-FILE from the specified objects
+  -objectlist FILE  Use a list of object files found in FILE to specify objects
+  -release RELEASE  specify package release information
+  -rpath LIBDIR     the created library will eventually be installed in LIBDIR
+  -R[ ]LIBDIR       add LIBDIR to the runtime path of programs and libraries
+  -static           do not do any dynamic linking of libtool libraries
+  -version-info CURRENT[:REVISION[:AGE]]
+		    specify library version info [each variable defaults to 0]
+
+All other options (arguments beginning with \`-') are ignored.
+
+Every other argument is treated as a filename.  Files ending in \`.la' are
+treated as uninstalled libtool libraries, other files are standard or library
+object files.
+
+If the OUTPUT-FILE ends in \`.la', then a libtool library is created,
+only library objects (\`.lo' files) may be specified, and \`-rpath' is
+required, except when creating a convenience library.
+
+If OUTPUT-FILE ends in \`.a' or \`.lib', then a standard library is created
+using \`ar' and \`ranlib', or on Windows using \`lib'.
+
+If OUTPUT-FILE ends in \`.lo' or \`.${objext}', then a reloadable object file
+is created, otherwise an executable program is created.&quot;
+  ;;
+
+uninstall)
+  $echo \
+&quot;Usage: $modename [OPTION]... --mode=uninstall RM [RM-OPTION]... FILE...
+
+Remove libraries from an installation directory.
+
+RM is the name of the program to use to delete files associated with each FILE
+(typically \`/bin/rm').  RM-OPTIONS are options (such as \`-f') to be passed
+to RM.
+
+If FILE is a libtool library, all the files associated with it are deleted.
+Otherwise, only FILE itself is deleted using RM.&quot;
+  ;;
+
+*)
+  $echo &quot;$modename: invalid operation mode \`$mode'&quot; 1&gt;&amp;2
+  $echo &quot;$help&quot; 1&gt;&amp;2
+  exit 1
+  ;;
+esac
+
+$echo
+$echo &quot;Try \`$modename --help' for more information about other modes.&quot;
+
+exit 0
+
+# The TAGs below are defined such that we never get into a situation
+# in which we disable both kinds of libraries.  Given conflicting
+# choices, we go for a static library, that is the most portable,
+# since we can't tell whether shared libraries were disabled because
+# the user asked for that or because the platform doesn't support
+# them.  This is particularly important on AIX, because we don't
+# support having both static and shared libraries enabled at the same
+# time on that platform, so we default to a shared-only configuration.
+# If a disable-shared tag is given, we'll fallback to a static-only
+# configuration.  But we'll never go from static-only to shared-only.
+
+# ### BEGIN LIBTOOL TAG CONFIG: disable-shared
+build_libtool_libs=no
+build_old_libs=yes
+# ### END LIBTOOL TAG CONFIG: disable-shared
+
+# ### BEGIN LIBTOOL TAG CONFIG: disable-static
+build_old_libs=`case $build_libtool_libs in yes) $echo no;; *) $echo yes;; esac`
+# ### END LIBTOOL TAG CONFIG: disable-static
+
+# Local Variables:
+# mode:shell-script
+# sh-indentation:2
+# End:

Added: trunk/admin/missing
===================================================================
--- trunk/admin/missing	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/missing	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,353 @@
+#! /bin/sh
+# Common stub for a few missing GNU programs while installing.
+
+scriptversion=2004-09-07.08
+
+# Copyright (C) 1996, 1997, 1999, 2000, 2002, 2003, 2004
+#   Free Software Foundation, Inc.
+# Originally by Fran,cois Pinard &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">pinard at iro.umontreal.ca</A>&gt;, 1996.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+if test $# -eq 0; then
+  echo 1&gt;&amp;2 &quot;Try \`$0 --help' for more information&quot;
+  exit 1
+fi
+
+run=:
+
+# In the cases where this matters, `missing' is being run in the
+# srcdir already.
+if test -f configure.ac; then
+  configure_ac=configure.ac
+else
+  configure_ac=configure.in
+fi
+
+msg=&quot;missing on your system&quot;
+
+case &quot;$1&quot; in
+--run)
+  # Try to run requested program, and just exit if it succeeds.
+  run=
+  shift
+  &quot;$@&quot; &amp;&amp; exit 0
+  # Exit code 63 means version mismatch.  This often happens
+  # when the user try to use an ancient version of a tool on
+  # a file that requires a minimum version.  In this case we
+  # we should proceed has if the program had been absent, or
+  # if --run hadn't been passed.
+  if test $? = 63; then
+    run=:
+    msg=&quot;probably too old&quot;
+  fi
+  ;;
+
+  -h|--h|--he|--hel|--help)
+    echo &quot;\
+$0 [OPTION]... PROGRAM [ARGUMENT]...
+
+Handle \`PROGRAM [ARGUMENT]...' for when PROGRAM is missing, or return an
+error status if there is no known handling for PROGRAM.
+
+Options:
+  -h, --help      display this help and exit
+  -v, --version   output version information and exit
+  --run           try to run the given command, and emulate it if it fails
+
+Supported PROGRAM values:
+  aclocal      touch file \`aclocal.m4'
+  autoconf     touch file \`configure'
+  autoheader   touch file \`config.h.in'
+  automake     touch all \`Makefile.in' files
+  bison        create \`y.tab.[ch]', if possible, from existing .[ch]
+  flex         create \`lex.yy.c', if possible, from existing .c
+  help2man     touch the output file
+  lex          create \`lex.yy.c', if possible, from existing .c
+  makeinfo     touch the output file
+  tar          try tar, gnutar, gtar, then tar without non-portable flags
+  yacc         create \`y.tab.[ch]', if possible, from existing .[ch]
+
+Send bug reports to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt;.&quot;
+    exit 0
+    ;;
+
+  -v|--v|--ve|--ver|--vers|--versi|--versio|--version)
+    echo &quot;missing $scriptversion (GNU Automake)&quot;
+    exit 0
+    ;;
+
+  -*)
+    echo 1&gt;&amp;2 &quot;$0: Unknown \`$1' option&quot;
+    echo 1&gt;&amp;2 &quot;Try \`$0 --help' for more information&quot;
+    exit 1
+    ;;
+
+esac
+
+# Now exit if we have it, but it failed.  Also exit now if we
+# don't have it and --version was passed (most likely to detect
+# the program).
+case &quot;$1&quot; in
+  lex|yacc)
+    # Not GNU programs, they don't have --version.
+    ;;
+
+  tar)
+    if test -n &quot;$run&quot;; then
+       echo 1&gt;&amp;2 &quot;ERROR: \`tar' requires --run&quot;
+       exit 1
+    elif test &quot;x$2&quot; = &quot;x--version&quot; || test &quot;x$2&quot; = &quot;x--help&quot;; then
+       exit 1
+    fi
+    ;;
+
+  *)
+    if test -z &quot;$run&quot; &amp;&amp; ($1 --version) &gt; /dev/null 2&gt;&amp;1; then
+       # We have it, but it failed.
+       exit 1
+    elif test &quot;x$2&quot; = &quot;x--version&quot; || test &quot;x$2&quot; = &quot;x--help&quot;; then
+       # Could not run --version or --help.  This is probably someone
+       # running `$TOOL --version' or `$TOOL --help' to check whether
+       # $TOOL exists and not knowing $TOOL uses missing.
+       exit 1
+    fi
+    ;;
+esac
+
+# If it does not exist, or fails to run (possibly an outdated version),
+# try to emulate it.
+case &quot;$1&quot; in
+  aclocal*)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+         you modified \`acinclude.m4' or \`${configure_ac}'.  You might want
+         to install the \`Automake' and \`Perl' packages.  Grab them from
+         any GNU archive site.&quot;
+    touch aclocal.m4
+    ;;
+
+  autoconf)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+         you modified \`${configure_ac}'.  You might want to install the
+         \`Autoconf' and \`GNU m4' packages.  Grab them from any GNU
+         archive site.&quot;
+    touch configure
+    ;;
+
+  autoheader)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+         you modified \`acconfig.h' or \`${configure_ac}'.  You might want
+         to install the \`Autoconf' and \`GNU m4' packages.  Grab them
+         from any GNU archive site.&quot;
+    files=`sed -n 's/^[ ]*A[CM]_CONFIG_HEADER(\([^)]*\)).*/\1/p' ${configure_ac}`
+    test -z &quot;$files&quot; &amp;&amp; files=&quot;config.h&quot;
+    touch_files=
+    for f in $files; do
+      case &quot;$f&quot; in
+      *:*) touch_files=&quot;$touch_files &quot;`echo &quot;$f&quot; |
+				       sed -e 's/^[^:]*://' -e 's/:.*//'`;;
+      *) touch_files=&quot;$touch_files $f.in&quot;;;
+      esac
+    done
+    touch $touch_files
+    ;;
+
+  automake*)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+         you modified \`Makefile.am', \`acinclude.m4' or \`${configure_ac}'.
+         You might want to install the \`Automake' and \`Perl' packages.
+         Grab them from any GNU archive site.&quot;
+    find . -type f -name Makefile.am -print |
+	   sed 's/\.am$/.in/' |
+	   while read f; do touch &quot;$f&quot;; done
+    ;;
+
+  autom4te)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is needed, but is $msg.
+         You might have modified some files without having the
+         proper tools for further handling them.
+         You can get \`$1' as part of \`Autoconf' from any GNU
+         archive site.&quot;
+
+    file=`echo &quot;$*&quot; | sed -n 's/.*--output[ =]*\([^ ]*\).*/\1/p'`
+    test -z &quot;$file&quot; &amp;&amp; file=`echo &quot;$*&quot; | sed -n 's/.*-o[ ]*\([^ ]*\).*/\1/p'`
+    if test -f &quot;$file&quot;; then
+	touch $file
+    else
+	test -z &quot;$file&quot; || exec &gt;$file
+	echo &quot;#! /bin/sh&quot;
+	echo &quot;# Created by GNU Automake missing as a replacement of&quot;
+	echo &quot;#  $ $@&quot;
+	echo &quot;exit 0&quot;
+	chmod +x $file
+	exit 1
+    fi
+    ;;
+
+  bison|yacc)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' $msg.  You should only need it if
+         you modified a \`.y' file.  You may need the \`Bison' package
+         in order for those modifications to take effect.  You can get
+         \`Bison' from any GNU archive site.&quot;
+    rm -f y.tab.c y.tab.h
+    if [ $# -ne 1 ]; then
+        eval LASTARG=&quot;\${$#}&quot;
+	case &quot;$LASTARG&quot; in
+	*.y)
+	    SRCFILE=`echo &quot;$LASTARG&quot; | sed 's/y$/c/'`
+	    if [ -f &quot;$SRCFILE&quot; ]; then
+	         cp &quot;$SRCFILE&quot; y.tab.c
+	    fi
+	    SRCFILE=`echo &quot;$LASTARG&quot; | sed 's/y$/h/'`
+	    if [ -f &quot;$SRCFILE&quot; ]; then
+	         cp &quot;$SRCFILE&quot; y.tab.h
+	    fi
+	  ;;
+	esac
+    fi
+    if [ ! -f y.tab.h ]; then
+	echo &gt;y.tab.h
+    fi
+    if [ ! -f y.tab.c ]; then
+	echo 'main() { return 0; }' &gt;y.tab.c
+    fi
+    ;;
+
+  lex|flex)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+         you modified a \`.l' file.  You may need the \`Flex' package
+         in order for those modifications to take effect.  You can get
+         \`Flex' from any GNU archive site.&quot;
+    rm -f lex.yy.c
+    if [ $# -ne 1 ]; then
+        eval LASTARG=&quot;\${$#}&quot;
+	case &quot;$LASTARG&quot; in
+	*.l)
+	    SRCFILE=`echo &quot;$LASTARG&quot; | sed 's/l$/c/'`
+	    if [ -f &quot;$SRCFILE&quot; ]; then
+	         cp &quot;$SRCFILE&quot; lex.yy.c
+	    fi
+	  ;;
+	esac
+    fi
+    if [ ! -f lex.yy.c ]; then
+	echo 'main() { return 0; }' &gt;lex.yy.c
+    fi
+    ;;
+
+  help2man)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+	 you modified a dependency of a manual page.  You may need the
+	 \`Help2man' package in order for those modifications to take
+	 effect.  You can get \`Help2man' from any GNU archive site.&quot;
+
+    file=`echo &quot;$*&quot; | sed -n 's/.*-o \([^ ]*\).*/\1/p'`
+    if test -z &quot;$file&quot;; then
+	file=`echo &quot;$*&quot; | sed -n 's/.*--output=\([^ ]*\).*/\1/p'`
+    fi
+    if [ -f &quot;$file&quot; ]; then
+	touch $file
+    else
+	test -z &quot;$file&quot; || exec &gt;$file
+	echo &quot;.ab help2man is required to generate this page&quot;
+	exit 1
+    fi
+    ;;
+
+  makeinfo)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is $msg.  You should only need it if
+         you modified a \`.texi' or \`.texinfo' file, or any other file
+         indirectly affecting the aspect of the manual.  The spurious
+         call might also be the consequence of using a buggy \`make' (AIX,
+         DU, IRIX).  You might want to install the \`Texinfo' package or
+         the \`GNU make' package.  Grab either from any GNU archive site.&quot;
+    file=`echo &quot;$*&quot; | sed -n 's/.*-o \([^ ]*\).*/\1/p'`
+    if test -z &quot;$file&quot;; then
+      file=`echo &quot;$*&quot; | sed 's/.* \([^ ]*\) *$/\1/'`
+      file=`sed -n '/^@setfilename/ { s/.* \([^ ]*\) *$/\1/; p; q; }' $file`
+    fi
+    touch $file
+    ;;
+
+  tar)
+    shift
+
+    # We have already tried tar in the generic part.
+    # Look for gnutar/gtar before invocation to avoid ugly error
+    # messages.
+    if (gnutar --version &gt; /dev/null 2&gt;&amp;1); then
+       gnutar &quot;$@&quot; &amp;&amp; exit 0
+    fi
+    if (gtar --version &gt; /dev/null 2&gt;&amp;1); then
+       gtar &quot;$@&quot; &amp;&amp; exit 0
+    fi
+    firstarg=&quot;$1&quot;
+    if shift; then
+	case &quot;$firstarg&quot; in
+	*o*)
+	    firstarg=`echo &quot;$firstarg&quot; | sed s/o//`
+	    tar &quot;$firstarg&quot; &quot;$@&quot; &amp;&amp; exit 0
+	    ;;
+	esac
+	case &quot;$firstarg&quot; in
+	*h*)
+	    firstarg=`echo &quot;$firstarg&quot; | sed s/h//`
+	    tar &quot;$firstarg&quot; &quot;$@&quot; &amp;&amp; exit 0
+	    ;;
+	esac
+    fi
+
+    echo 1&gt;&amp;2 &quot;\
+WARNING: I can't seem to be able to run \`tar' with the given arguments.
+         You may want to install GNU tar or Free paxutils, or check the
+         command line arguments.&quot;
+    exit 1
+    ;;
+
+  *)
+    echo 1&gt;&amp;2 &quot;\
+WARNING: \`$1' is needed, and is $msg.
+         You might have modified some files without having the
+         proper tools for further handling them.  Check the \`README' file,
+         it often tells you about the needed prerequisites for installing
+         this package.  You may also peek at any GNU archive site, in case
+         some other package would contain this missing \`$1' program.&quot;
+    exit 1
+    ;;
+esac
+
+exit 0
+
+# Local variables:
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;scriptversion=&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d.%02H&quot;
+# time-stamp-end: &quot;$&quot;
+# End:


Property changes on: trunk/admin/missing
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/mkinstalldirs
===================================================================
--- trunk/admin/mkinstalldirs	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/mkinstalldirs	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,158 @@
+#! /bin/sh
+# mkinstalldirs --- make directory hierarchy
+
+scriptversion=2005-06-29.22
+
+# Original author: Noah Friedman &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">friedman at prep.ai.mit.edu</A>&gt;
+# Created: 1993-05-16
+# Public domain.
+#
+# This file is maintained in Automake, please report
+# bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt; or send patches to
+# &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">automake-patches at gnu.org</A>&gt;.
+
+errstatus=0
+dirmode=
+
+usage=&quot;\
+Usage: mkinstalldirs [-h] [--help] [--version] [-m MODE] DIR ...
+
+Create each directory DIR (with mode MODE, if specified), including all
+leading file name components.
+
+Report bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt;.&quot;
+
+# process command line arguments
+while test $# -gt 0 ; do
+  case $1 in
+    -h | --help | --h*)         # -h for help
+      echo &quot;$usage&quot;
+      exit $?
+      ;;
+    -m)                         # -m PERM arg
+      shift
+      test $# -eq 0 &amp;&amp; { echo &quot;$usage&quot; 1&gt;&amp;2; exit 1; }
+      dirmode=$1
+      shift
+      ;;
+    --version)
+      echo &quot;$0 $scriptversion&quot;
+      exit $?
+      ;;
+    --)                         # stop option processing
+      shift
+      break
+      ;;
+    -*)                         # unknown option
+      echo &quot;$usage&quot; 1&gt;&amp;2
+      exit 1
+      ;;
+    *)                          # first non-opt arg
+      break
+      ;;
+  esac
+done
+
+for file
+do
+  if test -d &quot;$file&quot;; then
+    shift
+  else
+    break
+  fi
+done
+
+case $# in
+  0) exit 0 ;;
+esac
+
+# Solaris 8's mkdir -p isn't thread-safe.  If you mkdir -p a/b and
+# mkdir -p a/c at the same time, both will detect that a is missing,
+# one will create a, then the other will try to create a and die with
+# a &quot;File exists&quot; error.  This is a problem when calling mkinstalldirs
+# from a parallel make.  We use --version in the probe to restrict
+# ourselves to GNU mkdir, which is thread-safe.
+case $dirmode in
+  '')
+    if mkdir -p --version . &gt;/dev/null 2&gt;&amp;1 &amp;&amp; test ! -d ./--version; then
+      echo &quot;mkdir -p -- $*&quot;
+      exec mkdir -p -- &quot;$@&quot;
+    else
+      # On NextStep and OpenStep, the `mkdir' command does not
+      # recognize any option.  It will interpret all options as
+      # directories to create, and then abort because `.' already
+      # exists.
+      test -d ./-p &amp;&amp; rmdir ./-p
+      test -d ./--version &amp;&amp; rmdir ./--version
+    fi
+    ;;
+  *)
+    if mkdir -m &quot;$dirmode&quot; -p --version . &gt;/dev/null 2&gt;&amp;1 &amp;&amp;
+       test ! -d ./--version; then
+      echo &quot;mkdir -m $dirmode -p -- $*&quot;
+      exec mkdir -m &quot;$dirmode&quot; -p -- &quot;$@&quot;
+    else
+      # Clean up after NextStep and OpenStep mkdir.
+      for d in ./-m ./-p ./--version &quot;./$dirmode&quot;;
+      do
+        test -d $d &amp;&amp; rmdir $d
+      done
+    fi
+    ;;
+esac
+
+for file
+do
+  case $file in
+    /*) pathcomp=/ ;;
+    *)  pathcomp= ;;
+  esac
+  oIFS=$IFS
+  IFS=/
+  set fnord $file
+  shift
+  IFS=$oIFS
+
+  for d
+  do
+    test &quot;x$d&quot; = x &amp;&amp; continue
+
+    pathcomp=$pathcomp$d
+    case $pathcomp in
+      -*) pathcomp=./$pathcomp ;;
+    esac
+
+    if test ! -d &quot;$pathcomp&quot;; then
+      echo &quot;mkdir $pathcomp&quot;
+
+      mkdir &quot;$pathcomp&quot; || lasterr=$?
+
+      if test ! -d &quot;$pathcomp&quot;; then
+	errstatus=$lasterr
+      else
+	if test ! -z &quot;$dirmode&quot;; then
+	  echo &quot;chmod $dirmode $pathcomp&quot;
+	  lasterr=
+	  chmod &quot;$dirmode&quot; &quot;$pathcomp&quot; || lasterr=$?
+
+	  if test ! -z &quot;$lasterr&quot;; then
+	    errstatus=$lasterr
+	  fi
+	fi
+      fi
+    fi
+
+    pathcomp=$pathcomp/
+  done
+done
+
+exit $errstatus
+
+# Local Variables:
+# mode: shell-script
+# sh-indentation: 2
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;scriptversion=&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d.%02H&quot;
+# time-stamp-end: &quot;$&quot;
+# End:


Property changes on: trunk/admin/mkinstalldirs
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/nmcheck
===================================================================
--- trunk/admin/nmcheck	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/nmcheck	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,371 @@
+#!/usr/bin/perl -w
+
+# Check namespace cleanness of a library.
+# Allowed symbols are passed as arguments.
+# They may have trailing * = wildcard.
+# Wildcards may be also specified as *::* (e.g. K*::* for all KDE classes)
+# Symbols are listed as full function unmangled names without arguments,
+# e.g. 'foo bar* nspace::*' allows foo(), foo(int), bar(), barbar()
+# and all symbols in namespace/class nspace.
+# If an argument has comma in it, it's a filename of a file containing
+# allowed symbols, one per line.
+
+
+$thisProg   = &quot;$0&quot;;     # This programs name
+
+$library = &quot;&quot;;
+$allowed_symbols = &quot;&quot;;
+$debug = 0;
+$allowed_weak = &quot;&quot;;
+$weak_specified = 0;
+
+while( defined( $ARGV[ 0 ] ))
+{
+    $_ = shift;
+    if( /^--verbose$|^-v$/ )
+    {
+	$debug = 1;
+    }
+    elsif( /^--help$|^-h$/ )
+    {
+        print STDOUT &quot;Usage $thisProg [OPTION] ... library [allowed symbols] ...\n&quot;,
+                &quot;\n&quot;,
+		&quot;Check if the given library has only allowed public symbols.\n&quot;,
+                &quot;\n&quot;,
+		&quot;  --allowweak=[symbol] allow only these weak symbols\n&quot;,
+                &quot;  -v, --verbose        verbosely list files processed\n&quot;,
+                &quot;  -h, --help           print this help, then exit\n&quot;;
+        exit 0;
+    }
+    elsif( /^--allowweak=(.*)$/ )
+    {
+	$allowed_weak .= &quot; &quot; . $1;
+	$weak_specified = 1;
+    }
+    elsif( /^--allowweak$/ ) # simply list all weak
+    {
+	$allowed_weak .= &quot; &quot;;
+	$weak_specified = 1;
+    }
+    elsif( /^--*/ )
+    {
+	die &quot;Invalid argument!\n&quot;;
+    }
+    else
+    {
+	if( ! $library )
+	{
+	    $library = $_;
+	}
+	else
+	{
+	    $allowed_symbols .= &quot; &quot; . $_;
+	}
+    }
+}
+
+if( ! $weak_specified )
+{
+    $allowed_weak = &quot;*&quot;; 
+    # allow all weak symbols by default
+    # instances of templates and similar stuff - unfortunately includes also things from other libraries,
+    # so it cannot be on by default
+}
+
+print STDERR &quot;library:&quot; . $library . &quot;\n&quot; if $debug;
+print STDERR &quot;allowed_symbols:&quot; . $allowed_symbols . &quot;\n&quot; if $debug;
+print STDERR &quot;allowed_weak:&quot; . $allowed_weak . &quot;\n&quot; if $debug;
+
+$default_symbols = &quot;_fini _init&quot;;  # system symbols
+# on my system, every .so has :
+# A _DYNAMIC
+# A _GLOBAL_OFFSET_TABLE_
+# A __bss_start
+# A _edata
+# A _end
+# T _fini
+# T _init
+# no need to list A symbols in $default_symbols
+
+print STDERR &quot;default_symbols: &quot; . $default_symbols . &quot;\n&quot; if $debug;
+
+print STDOUT &quot;Namespace cleanness check for &quot; . $library . &quot; :\n&quot;;
+
+$lib_file = &quot;&quot;;
+if( $library =~ /\.la$/ )
+{
+    # get the real library file from .la
+    open( FILEIN, $library ) || die &quot;Couldn't open $! !\n&quot;;
+    while( $line = &lt;FILEIN&gt; )
+    {
+	if( $line =~ /library_names=\'([^ ]*).*/o )
+	{
+	    $lib_file = $1;
+	}
+    }
+    close( FILEIN );
+    if( ! $lib_file )
+    {
+	print STDERR &quot;Library file not found in .la file!\n&quot;;
+	exit 1;
+    }
+    my $libpath = $library;
+    $libpath =~ s%[^/]*$%%;
+    if(  -e $libpath . &quot;.libs/&quot; . $lib_file )
+    {
+	$lib_file = $libpath . &quot;.libs/&quot; . $lib_file;
+    }
+    else
+    {
+	$lib_file = $libpath . $lib_file;
+    }
+}
+else
+{
+    $lib_file = $library;
+}
+
+print STDERR &quot;libfile: &quot;. $lib_file . &quot;\n&quot; if $debug;
+
+$allowed_symbols .= &quot; &quot; . $default_symbols;
+
+sub process_symbols($\@\%\@);
+
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at wildcards</A> = ();
+%exacts = ();
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at regwildcards</A> = ();
+process_symbols( $allowed_symbols, @wildcards, %exacts, @regwildcards );
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at weak_wildcards</A> = ();
+%weak_exacts = ();
<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">+ at weak_regwildcards</A> = ();
+process_symbols( $allowed_weak, @weak_wildcards, %weak_exacts, @weak_regwildcards );
+
+# grep is for stripping not exported symbols, which don't have address (=first column)
+$nm_command = &quot;nm -BDCg &quot; . $lib_file . &quot; | grep -v '^ ' |&quot;;
+
+# TODO how portable is this nmcheck stuff?
+
+print STDERR &quot;nm command:&quot; . $nm_command . &quot;\n&quot; if $debug;
+
+open( FILEIN, $nm_command ) || die &quot;nm command failed\n&quot;;
+
+my $exit_code = 0;
+
+while( $line = &lt;FILEIN&gt; )
+{
+    my $type;
+    my $symbol;
+    if( $line =~ /^[^ ]* (.) (.*)$/o )
+    {
+	$type = $1;
+	$symbol = $2;
+    }
+    else
+    {
+	die &quot;Invalid line: &quot; . $line . &quot;\n&quot;;
+    }
+    
+    print STDERR &quot;Type: &quot; . $type . &quot; , symbol: &quot; . $symbol . &quot;\n&quot; if $debug;
+    if( $type eq &quot;A&quot; )
+    { # these should be system symbols, so ignore them
+	next;
+    }
+
+    my $orig_symbol = $symbol;
+
+    if( $symbol =~ /\(anonymous namespace\)/o )
+    { # TODO tell to prefer named namespaces? (shorter symbols)
+	next;
+    }
+
+    # strip prefixes
+    # the :: appending is to make &quot;CLASS::*&quot; work also for &quot;vtable for CLASS&quot;
+    $symbol =~ s/^typeinfo for (.*)$/$1::/o;
+    $symbol =~ s/^typeinfo fn for (.*)$/$1::/o;
+    $symbol =~ s/^typeinfo name for (.*)$/$1::/o;
+    $symbol =~ s/^vtable for (.*)$/$1::/o;
+    $symbol =~ s/^guard variable for (.*)$/$1::/o;
+    $symbol =~ s/^reference temporary for (.*)$/$1::/o;
+    $symbol =~ s/^VTT for (.*)$/$1::/o;
+    $symbol =~ s/^virtual thunk \[[^\]]*\] to (.*)$/$1::/o;
+    $symbol =~ s/^non-virtual thunk \[[^\]]*\] to (.*)$/$1::/o;
+    $symbol =~ s/^covariant return thunk \[[^\]]*\] to (.*)$/$1::/o;
+    $symbol =~ s/^construction vtable thunk for (.*)$/$1::/o;
+    $symbol =~ s/^construction vtable for .*-in-(.*) [0-9]*$/$1::/o;
+
+    # templates seem to have also return types mangled in their name, and nm prints it too
+    # they have also template arguments in the symbol
+    # get rid of both of those
+    while( $symbol =~ /&lt;.*&gt;/o )
+    {
+        $symbol =~ s/&lt;[^&lt;&gt;]*&gt;//o; # strip innermost &lt;&gt;
+    }
+    if( $symbol !~ /operator\(\)/o )
+    {
+	$symbol =~ s/ ?\(.*\).*$//o;  # strip () and all after it
+    }
+    else
+    {
+	$symbol =~ s/(^|:| )operator\(\) ?\(.*\).*$//o;  # strip () and all after it
+    }
+    $symbol =~ s/\[.*\] *$//o;   # strip [in-charge] etc.
+    if( $symbol =~ /(^|:| )operator /o )
+    {
+	$symbol =~ s/.* ([^\s]*)operator /$1/o; # strip everything before 'X::operator blah'
+    }
+    else
+    {
+	$symbol =~ s/.* ([^\s]+) *$/$1/o;  # get last word (strip return type)
+    }
+
+    # print STDERR &quot;Processed symbol: &quot; . $symbol . &quot;\n&quot; if $debug;
+    
+    my $found = 0;
+    if( $exacts{ $symbol } )
+    {
+	$found = 1;
+    }
+    if( ! $found )
+    {
+	for my $wild ( @wildcards )
+	{
+	    if( index( $symbol, $wild ) == 0 )
+	    {
+		$found = 1;
+		last;
+	    }
+	}
+    }
+    if( ! $found )
+    {
+	for my $wild ( @regwildcards )
+	{
+	    if( $symbol =~ /^$wild$/ )
+	    {
+		$found = 1;
+		last;
+	    }
+	}
+    }
+    if( ( ! $found ) &amp;&amp; ( $type eq &quot;W&quot; || $type eq &quot;V&quot; ))
+    {
+	if( $weak_exacts{ $symbol } )
+	{
+	    $found = 1;
+	}
+	if( ! $found )
+	{
+	    for my $wild ( @weak_wildcards )
+	    {
+	        if( index( $symbol, $wild ) == 0 )
+	        {
+	    	    $found = 1;
+		    last;
+		}
+	    }
+	}
+	if( ! $found )
+	{
+	    for my $wild ( @weak_regwildcards )
+	    {
+	        if( $symbol =~ /^$wild$/ )
+	        {
+		    $found = 1;
+		    last;
+	        }
+	    }
+	}
+    }
+
+    if( ! $found )
+    {
+	print STDERR &quot;Public symbol &quot; . $orig_symbol . &quot; is not allowed!\n&quot;;
+	$exit_code = 1;
+    }
+}
+
+close( FILEIN );
+
+print STDOUT $exit_code == 0 ? &quot;OK\n&quot; : &quot;FAILED\n&quot;;
+
+exit $exit_code;
+
+sub process_symbols($\@\%\@)
+{
+    my $allowed_symbols = $_[ 0 ];
+    my $wildcards_ref = $_[ 1 ];
+    my $exacts_ref = $_[ 2 ];
+    my $regwildcards_ref = $_[ 3 ];
+    
+    $allowed_symbols =~ s/^ *//o;  # strip whitespace
+    $allowed_symbols =~ s/ *$//o;
+
+    if( $allowed_symbols eq &quot;NONE&quot; )
+    {
+	$allowed_symbols = &quot;&quot;;
+    }
+
+    my @symbols1 = split( ' ', $allowed_symbols );
+    my $i = 0;
+    my @symbols2 = ();
+    while( defined( $symbols1[ $i ] ))
+    {
+	my $symbol = $symbols1[ $i ];
+	if( $symbol =~ /\./ )  # dot in name -&gt; file
+	{
+	    open( SYMIN, $symbol ) || die ( &quot;Cannot open file &quot; . $symbol . &quot;!&quot; );
+	    while( $line = &lt;SYMIN&gt; )
+	    {
+		$line =~ s/^\s*//o;  # strip whitespace
+		$line =~ s/\s*$//o;
+		if( $line !~ /^$/o  # empty line
+		    &amp;&amp;  $line !~ /^\s*#/ ) # comment line starting with #
+		{
+		    $symbols2[ $#symbols2 + 1 ] = $line;
+		}
+	    }
+	    close( SYMIN );
+	}
+	else
+	{
+	    $symbols2[ $#symbols2 + 1 ] = $symbol;
+	}
+	$i++;
+    }
+    $i = 0;
+    while( defined( $symbols2[ $i ] ))
+    {
+	my $symbol = $symbols2[ $i ];
+	if( $symbol =~ /__/
+	    || $symbol =~ /^_[A-Z]/ )
+	{ # ISO C++ 2.10.2
+	    die &quot;Symbols containing a double underscore or beginning with an underscore and an upper-case letter are reserved!\n&quot;;
+	}
+	elsif( $symbol eq &quot;main&quot;
+	    || $symbol eq &quot;main*&quot; )
+	{
+	    die &quot;Symbol main is not allowed!\n&quot;;
+	}
+	if( $symbol =~ /^([^\*]*)\*$/o   # trailing * without any * before it
+	    &amp;&amp; $symbol !~ /operator\*$/o )
+        {
+	    print STDERR &quot;wildcard:&quot; . $symbol . &quot;\n&quot; if $debug;
+    	    $wildcards_ref-&gt;[ $#{$wildcards_ref} + 1 ] = $1;
+	}
+	elsif( $symbol =~ /\*$/o
+	    &amp;&amp; ( $symbol =~ /\*::/o || $symbol =~ /::\*/o )
+	    &amp;&amp; $symbol !~ /^\*/o
+	    &amp;&amp; $symbol !~ /operator\*$/o )
+	{
+	    print STDERR &quot;regwildcard:&quot; . $symbol . &quot;\n&quot; if $debug;
+	    $symbol =~ s/\*/\.\*/go;  # change * to .* (regexp)
+	    $regwildcards_ref-&gt;[ $#{$regwildcards_ref} + 1 ] = $symbol;
+	}
+	else
+	{
+	    print STDERR &quot;exact:&quot; . $symbol . &quot;\n&quot; if $debug;
+	    $exacts_ref-&gt;{ $symbol } = 1;
+	}
+	$i++;
+    }
+}


Property changes on: trunk/admin/nmcheck
___________________________________________________________________
Name: svn:executable
   + *

Added: trunk/admin/oldinclude.m4.in
===================================================================
--- trunk/admin/oldinclude.m4.in	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/oldinclude.m4.in	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,192 @@
+###   -*- autoconf -*-
+
+dnl    This file is part of the KDE libraries/packages
+dnl    Copyright (C) 1997 Janos Farkas (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">chexum at shadow.banki.hu</A>)
+dnl              (C) 1997,98,99 Stephan Kulow (<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">coolo at kde.org</A>)
+
+dnl    This file is free software; you can redistribute it and/or
+dnl    modify it under the terms of the GNU Library General Public
+dnl    License as published by the Free Software Foundation; either
+dnl    version 2 of the License, or (at your option) any later version.
+
+dnl    This library is distributed in the hope that it will be useful,
+dnl    but WITHOUT ANY WARRANTY; without even the implied warranty of
+dnl    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+dnl    Library General Public License for more details.
+
+dnl    You should have received a copy of the GNU Library General Public License
+dnl    along with this library; see the file COPYING.LIB.  If not, write to
+dnl    the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
+dnl    Boston, MA 02110-1301, USA.
+
+AC_DEFUN([KDE_CHECK_MICO],
+[
+AC_REQUIRE([KDE_CHECK_LIBDL])
+AC_REQUIRE([KDE_MISC_TESTS])
+AC_MSG_CHECKING(for MICO)
+
+if test -z &quot;$MICODIR&quot;; then
+    kde_micodir=/usr/local
+ else
+    kde_micodir=&quot;$MICODIR&quot;
+fi
+
+AC_ARG_WITH(micodir,
+  [  --with-micodir=micodir  where mico is installed ],
+  kde_micodir=$withval,
+  kde_micodir=$kde_micodir
+)
+
+AC_CACHE_VAL(kde_cv_mico_incdir,
+[
+  mico_incdirs=&quot;$kde_micodir/include /usr/include /usr/local/include /usr/local/include /opt/local/include $kde_extra_includes&quot;
+AC_FIND_FILE(CORBA.h, $mico_incdirs, kde_cv_mico_incdir)
+
+])
+kde_micodir=`echo $kde_cv_mico_incdir | sed -e 's#/include##'`
+
+if test ! -r  $kde_micodir/include/CORBA.h; then
+  AC_MSG_ERROR([No CORBA.h found, specify another micodir])
+fi
+
+AC_MSG_RESULT($kde_micodir)
+
+MICO_INCLUDES=-I$kde_micodir/include
+AC_SUBST(MICO_INCLUDES)
+MICO_LDFLAGS=-L$kde_micodir/lib
+AC_SUBST(MICO_LDFLAGS)
+micodir=$kde_micodir
+AC_SUBST(micodir)
+
+AC_MSG_CHECKING([for MICO version])
+AC_CACHE_VAL(kde_cv_mico_version,
+[
+AC_LANG_C
+cat &gt;conftest.$ac_ext &lt;&lt;EOF
+#include &lt;stdio.h&gt;
+#include &lt;mico/version.h&gt;
+int main() {
+
+   printf(&quot;MICO_VERSION=%s\n&quot;,MICO_VERSION);
+   return (0);
+}
+EOF
+ac_compile='${CC-gcc} $CFLAGS $MICO_INCLUDES conftest.$ac_ext -o conftest'
+if AC_TRY_EVAL(ac_compile); then
+  if eval `./conftest 2&gt;&amp;5`; then
+    kde_cv_mico_version=$MICO_VERSION
+  else
+    AC_MSG_ERROR([your system is not able to execute a small application to
+    find MICO version! Check $kde_micodir/include/mico/version.h])
+  fi
+else
+  AC_MSG_ERROR([your system is not able to compile a small application to
+  find MICO version! Check $kde_micodir/include/mico/version.h])
+fi
+])
+
+dnl installed MICO version
+mico_v_maj=`echo $kde_cv_mico_version | sed -e 's/^\(.*\)\..*\..*$/\1/'`
+mico_v_mid=`echo $kde_cv_mico_version | sed -e 's/^.*\.\(.*\)\..*$/\1/'`
+mico_v_min=`echo $kde_cv_mico_version | sed -e 's/^.*\..*\.\(.*\)$/\1/'`
+
+if test &quot;x$1&quot; = &quot;x&quot;; then
+ req_version=&quot;2.3.0&quot;
+else
+ req_version=$1
+fi
+
+dnl required MICO version
+req_v_maj=`echo $req_version | sed -e 's/^\(.*\)\..*\..*$/\1/'`
+req_v_mid=`echo $req_version | sed -e 's/^.*\.\(.*\)\..*$/\1/'`
+req_v_min=`echo $req_version | sed -e 's/^.*\..*\.\(.*\)$/\1/'`
+
+if test &quot;$mico_v_maj&quot; -lt &quot;$req_v_maj&quot; || \
+   ( test &quot;$mico_v_maj&quot; -eq &quot;$req_v_maj&quot; &amp;&amp; \
+        test &quot;$mico_v_mid&quot; -lt &quot;$req_v_mid&quot; ) || \
+   ( test &quot;$mico_v_mid&quot; -eq &quot;$req_v_mid&quot; &amp;&amp; \
+        test &quot;$mico_v_min&quot; -lt &quot;$req_v_min&quot; )
+
+then
+  AC_MSG_ERROR([found MICO version $kde_cv_mico_version but version $req_version \
+at least is required. You should upgrade MICO.])
+else
+  AC_MSG_RESULT([$kde_cv_mico_version (minimum version $req_version, ok)])
+fi
+
+LIBMICO=&quot;-lmico$kde_cv_mico_version $LIBCRYPT $LIBSOCKET $LIBDL&quot;
+AC_SUBST(LIBMICO)
+if test -z &quot;$IDL&quot;; then
+  IDL='$(kde_bindir)/cuteidl'
+fi
+AC_SUBST(IDL)
+IDL_DEPENDENCIES='$(kde_includes)/CUTE.h'
+AC_SUBST(IDL_DEPENDENCIES)
+
+idldir=&quot;\$(includedir)/idl&quot;
+AC_SUBST(idldir)
+
+])
+
+AC_DEFUN([KDE_CHECK_MINI_STL],
+[
+AC_REQUIRE([KDE_CHECK_MICO])
+
+AC_MSG_CHECKING(if we use mico's mini-STL)
+AC_CACHE_VAL(kde_cv_have_mini_stl,
+[
+AC_LANG_SAVE
+AC_LANG_CPLUSPLUS
+kde_save_cxxflags=&quot;$CXXFLAGS&quot;
+CXXFLAGS=&quot;$CXXFLAGS $MICO_INCLUDES&quot;
+AC_TRY_COMPILE(
+[
+#include &lt;mico/config.h&gt;
+],
+[
+#ifdef HAVE_MINI_STL
+#error &quot;nothing&quot;
+#endif
+],
+kde_cv_have_mini_stl=no,
+kde_cv_have_mini_stl=yes)
+CXXFLAGS=&quot;$kde_save_cxxflags&quot;
+AC_LANG_RESTORE
+])
+
+if test &quot;x$kde_cv_have_mini_stl&quot; = &quot;xyes&quot;; then
+   AC_MSG_RESULT(yes)
+   $1
+else
+   AC_MSG_RESULT(no)
+   $2
+fi
+])
+
+])
+
+AC_DEFUN([KDE_CHECK_ANSI],
+[
+])
+
+AC_DEFUN([KDE_CHECK_INSURE],
+[
+  AC_ARG_ENABLE(insure, [  --enable-insure             use insure++ for debugging [default=no]],
+  [
+  if test $enableval = &quot;no&quot;; dnl
+	then ac_use_insure=&quot;no&quot;
+	else ac_use_insure=&quot;yes&quot;
+   fi
+  ], [ac_use_insure=&quot;no&quot;])
+
+  AC_MSG_CHECKING(if we will use Insure++ to debug)
+  AC_MSG_RESULT($ac_use_insure)
+  if test &quot;$ac_use_insure&quot; = &quot;yes&quot;; dnl
+       then CC=&quot;insure&quot;; CXX=&quot;insure&quot;; dnl CFLAGS=&quot;$CLAGS -fno-rtti -fno-exceptions &quot;????
+   fi
+])
+
+AC_DEFUN([KDE_CHECK_NEWLIBS],
+[
+
+])

Added: trunk/admin/pkg.m4.in
===================================================================
--- trunk/admin/pkg.m4.in	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/pkg.m4.in	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,57 @@
+
+dnl PKG_CHECK_MODULES(GSTUFF, gtk+-2.0 &gt;= 1.3 glib = 1.3.4, action-if, action-not)
+dnl defines GSTUFF_LIBS, GSTUFF_CFLAGS, see pkg-config man page
+dnl also defines GSTUFF_PKG_ERRORS on error
+AC_DEFUN([PKG_CHECK_MODULES], [
+  succeeded=no
+
+  if test -z &quot;$PKG_CONFIG&quot;; then
+    AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
+  fi
+
+  if test &quot;$PKG_CONFIG&quot; = &quot;no&quot; ; then
+     echo &quot;*** The pkg-config script could not be found. Make sure it is&quot;
+     echo &quot;*** in your path, or set the PKG_CONFIG environment variable&quot;
+     echo &quot;*** to the full path to pkg-config.&quot;
+     echo &quot;*** Or see <A HREF="http://www.freedesktop.org/software/pkgconfig">http://www.freedesktop.org/software/pkgconfig</A> to get pkg-config.&quot;
+  else
+     PKG_CONFIG_MIN_VERSION=0.9.0
+     if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
+        AC_MSG_CHECKING(for $2)
+
+        if $PKG_CONFIG --exists &quot;$2&quot; ; then
+            AC_MSG_RESULT(yes)
+            succeeded=yes
+
+            AC_MSG_CHECKING($1_CFLAGS)
+            $1_CFLAGS=`$PKG_CONFIG --cflags &quot;$2&quot;`
+            AC_MSG_RESULT($$1_CFLAGS)
+
+            AC_MSG_CHECKING($1_LIBS)
+            $1_LIBS=`$PKG_CONFIG --libs &quot;$2&quot;`
+            AC_MSG_RESULT($$1_LIBS)
+        else
+            $1_CFLAGS=&quot;&quot;
+            $1_LIBS=&quot;&quot;
+            ## If we have a custom action on failure, don't print errors, but 
+            ## do set a variable so people can do so.
+            $1_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors &quot;$2&quot;`
+            ifelse([$4], ,echo $$1_PKG_ERRORS,)
+        fi
+
+        AC_SUBST($1_CFLAGS)
+        AC_SUBST($1_LIBS)
+     else
+        echo &quot;*** Your version of pkg-config is too old. You need version $PKG_CONFIG_MIN_VERSION or newer.&quot;
+        echo &quot;*** See <A HREF="http://www.freedesktop.org/software/pkgconfig">http://www.freedesktop.org/software/pkgconfig</A>&quot;
+     fi
+  fi
+
+  if test $succeeded = yes; then
+     ifelse([$3], , :, [$3])
+  else
+     ifelse([$4], , AC_MSG_ERROR([Library requirements ($2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them.]), [$4])
+  fi
+])
+
+

Added: trunk/admin/ylwrap
===================================================================
--- trunk/admin/ylwrap	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/admin/ylwrap	2006-07-21 20:05:36 UTC (rev 265)
@@ -0,0 +1,223 @@
+#! /bin/sh
+# ylwrap - wrapper for lex/yacc invocations.
+
+scriptversion=2005-05-14.22
+
+# Copyright (C) 1996, 1997, 1998, 1999, 2001, 2002, 2003, 2004, 2005
+#   Free Software Foundation, Inc.
+#
+# Written by Tom Tromey &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">tromey at cygnus.com</A>&gt;.
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
+# 02110-1301, USA.
+
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
+# This file is maintained in Automake, please report
+# bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt; or send patches to
+# &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">automake-patches at gnu.org</A>&gt;.
+
+case &quot;$1&quot; in
+  '')
+    echo &quot;$0: No files given.  Try \`$0 --help' for more information.&quot; 1&gt;&amp;2
+    exit 1
+    ;;
+  --basedir)
+    basedir=$2
+    shift 2
+    ;;
+  -h|--h*)
+    cat &lt;&lt;\EOF
+Usage: ylwrap [--help|--version] INPUT [OUTPUT DESIRED]... -- PROGRAM [ARGS]...
+
+Wrapper for lex/yacc invocations, renaming files as desired.
+
+  INPUT is the input file
+  OUTPUT is one file PROG generates
+  DESIRED is the file we actually want instead of OUTPUT
+  PROGRAM is program to run
+  ARGS are passed to PROG
+
+Any number of OUTPUT,DESIRED pairs may be used.
+
+Report bugs to &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/php-qt-svn">bug-automake at gnu.org</A>&gt;.
+EOF
+    exit $?
+    ;;
+  -v|--v*)
+    echo &quot;ylwrap $scriptversion&quot;
+    exit $?
+    ;;
+esac
+
+
+# The input.
+input=&quot;$1&quot;
+shift
+case &quot;$input&quot; in
+  [\\/]* | ?:[\\/]*)
+    # Absolute path; do nothing.
+    ;;
+  *)
+    # Relative path.  Make it absolute.
+    input=&quot;`pwd`/$input&quot;
+    ;;
+esac
+
+pairlist=
+while test &quot;$#&quot; -ne 0; do
+  if test &quot;$1&quot; = &quot;--&quot;; then
+    shift
+    break
+  fi
+  pairlist=&quot;$pairlist $1&quot;
+  shift
+done
+
+# The program to run.
+prog=&quot;$1&quot;
+shift
+# Make any relative path in $prog absolute.
+case &quot;$prog&quot; in
+  [\\/]* | ?:[\\/]*) ;;
+  *[\\/]*) prog=&quot;`pwd`/$prog&quot; ;;
+esac
+
+# FIXME: add hostname here for parallel makes that run commands on
+# other machines.  But that might take us over the 14-char limit.
+dirname=ylwrap$$
+trap &quot;cd `pwd`; rm -rf $dirname &gt; /dev/null 2&gt;&amp;1&quot; 1 2 3 15
+mkdir $dirname || exit 1
+
+cd $dirname
+
+case $# in
+  0) $prog &quot;$input&quot; ;;
+  *) $prog &quot;$@&quot; &quot;$input&quot; ;;
+esac
+ret=$?
+
+if test $ret -eq 0; then
+  set X $pairlist
+  shift
+  first=yes
+  # Since DOS filename conventions don't allow two dots,
+  # the DOS version of Bison writes out y_tab.c instead of y.tab.c
+  # and y_tab.h instead of y.tab.h. Test to see if this is the case.
+  y_tab_nodot=&quot;no&quot;
+  if test -f y_tab.c || test -f y_tab.h; then
+    y_tab_nodot=&quot;yes&quot;
+  fi
+
+  # The directory holding the input.
+  input_dir=`echo &quot;$input&quot; | sed -e 's,\([\\/]\)[^\\/]*$,\1,'`
+  # Quote $INPUT_DIR so we can use it in a regexp.
+  # FIXME: really we should care about more than `.' and `\'.
+  input_rx=`echo &quot;$input_dir&quot; | sed 's,\\\\,\\\\\\\\,g;s,\\.,\\\\.,g'`
+
+  while test &quot;$#&quot; -ne 0; do
+    from=&quot;$1&quot;
+    # Handle y_tab.c and y_tab.h output by DOS
+    if test $y_tab_nodot = &quot;yes&quot;; then
+      if test $from = &quot;y.tab.c&quot;; then
+    	from=&quot;y_tab.c&quot;
+      else
+    	if test $from = &quot;y.tab.h&quot;; then
+    	  from=&quot;y_tab.h&quot;
+    	fi
+      fi
+    fi
+    if test -f &quot;$from&quot;; then
+      # If $2 is an absolute path name, then just use that,
+      # otherwise prepend `../'.
+      case &quot;$2&quot; in
+    	[\\/]* | ?:[\\/]*) target=&quot;$2&quot;;;
+    	*) target=&quot;../$2&quot;;;
+      esac
+
+      # We do not want to overwrite a header file if it hasn't
+      # changed.  This avoid useless recompilations.  However the
+      # parser itself (the first file) should always be updated,
+      # because it is the destination of the .y.c rule in the
+      # Makefile.  Divert the output of all other files to a temporary
+      # file so we can compare them to existing versions.
+      if test $first = no; then
+	realtarget=&quot;$target&quot;
+	target=&quot;tmp-`echo $target | sed s/.*[\\/]//g`&quot;
+      fi
+      # Edit out `#line' or `#' directives.
+      #
+      # We don't want the resulting debug information to point at
+      # an absolute srcdir; it is better for it to just mention the
+      # .y file with no path.
+      #
+      # We want to use the real output file name, not yy.lex.c for
+      # instance.
+      #
+      # We want the include guards to be adjusted too.
+      FROM=`echo &quot;$from&quot; | sed \
+            -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'\
+            -e 's/[^ABCDEFGHIJKLMNOPQRSTUVWXYZ]/_/g'`
+      TARGET=`echo &quot;$2&quot; | sed \
+            -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'\
+            -e 's/[^ABCDEFGHIJKLMNOPQRSTUVWXYZ]/_/g'`
+
+      sed -e &quot;/^#/!b&quot; -e &quot;s,$input_rx,,&quot; -e &quot;s,$from,$2,&quot; \
+          -e &quot;s,$FROM,$TARGET,&quot; &quot;$from&quot; &gt;&quot;$target&quot; || ret=$?
+
+      # Check whether header files must be updated.
+      if test $first = no; then
+	if test -f &quot;$realtarget&quot; &amp;&amp; cmp -s &quot;$realtarget&quot; &quot;$target&quot;; then
+	  echo &quot;$2&quot; is unchanged
+	  rm -f &quot;$target&quot;
+	else
+          echo updating &quot;$2&quot;
+          mv -f &quot;$target&quot; &quot;$realtarget&quot;
+        fi
+      fi
+    else
+      # A missing file is only an error for the first file.  This
+      # is a blatant hack to let us support using &quot;yacc -d&quot;.  If -d
+      # is not specified, we don't want an error when the header
+      # file is &quot;missing&quot;.
+      if test $first = yes; then
+        ret=1
+      fi
+    fi
+    shift
+    shift
+    first=no
+  done
+else
+  ret=$?
+fi
+
+# Remove the directory.
+cd ..
+rm -rf $dirname
+
+exit $ret
+
+# Local Variables:
+# mode: shell-script
+# sh-indentation: 2
+# eval: (add-hook 'write-file-hooks 'time-stamp)
+# time-stamp-start: &quot;scriptversion=&quot;
+# time-stamp-format: &quot;%:y-%02m-%02d.%02H&quot;
+# time-stamp-end: &quot;$&quot;
+# End:


Property changes on: trunk/admin/ylwrap
___________________________________________________________________
Name: svn:executable
   + *

Modified: trunk/config.m4
===================================================================
--- trunk/config.m4	2006-07-12 08:55:37 UTC (rev 264)
+++ trunk/config.m4	2006-07-21 20:05:36 UTC (rev 265)
@@ -1,107 +1,144 @@
-dnl $Id$
-dnl config.m4 for extension php_qt
 
+dnl This is so we can use kde-common
 
-dnl runtime
-PHP_ARG_WITH(qtlib,Qt runtime library,
-[  --with-qtlib=DIR         Qt library binaries])
+dnl includes kde build environment
+KDE_CREATE_LIBS_ALIASES
 
-AC_MSG_CHECKING([for Qt binaries])
+AC_ENABLE_SHARED(yes)
+AC_ENABLE_STATIC(no)
+KDE_PROG_LIBTOOL
 
-if test &quot;$PHP_QTLIB&quot; != &quot;yes&quot;; then
+m4_pattern_allow([AC_PATH_QT])dnl
+AC_PATH_QT()
+AC_SUBST(all_includes)
+AC_SUBST(all_libraries)
 
-    if test -r &quot;$PHP_QTLIB&quot;; then
-        AC_MSG_RESULT(found in $PHP_QTLIB)
-    else 
-        AC_MSG_ERROR([Please check the Qt distribution] $PHP_QTLIB)
-    fi
+dnl =======================================================
+dnl FILE: ./smoke/configure.in.in
+dnl =======================================================
 
-  PHP_ADD_LIBPATH($PHP_QTLIB/lib/qt4 )
-  PHP_ADD_LIBPATH($PHP_QTLIB/lib)
-  PHP_ADD_LIBPATH(/tmp/buildd/qt4-x11-4.0.1/lib)
-  PHP_ADD_LIBPATH($PHP_QTLIB/X11R6/lib)
+#AC_ARG_WITH(
+#   smoke,
+#   [  --with-smoke@&lt;:@=qt|kde@:&gt;@   Smoke: build Smoke for qt+kde or qt only @&lt;:@default:qt@:&gt;@],
+#   [ kde_build_libsmoke=&quot;$withval&quot; ],
+#   [ kde_build_libsmoke=&quot;qt&quot; ]
+#)
+#AC_SUBST(kde_build_libsmoke)
 
-else
-    if test &quot;$PHP_QTLIB&quot; != &quot;no&quot;; then
-        PHP_ADD_LIBPATH(/usr/lib/qt4 )
-        PHP_ADD_LIBPATH(/usr/lib)
-        PHP_ADD_LIBPATH(/tmp/buildd/qt4-x11-4.0.1/lib)
-        PHP_ADD_LIBPATH(/usr/X11R6/lib)
-        AC_MSG_RESULT([default path])
-    else
-        AC_MSG_RESULT([skipped])
-    fi
-fi
+dnl =======================================================
+dnl FILE: ./smoke/kde/configure.in.in
+dnl =======================================================
 
 
-dnl build
+#AC_HAVE_GL
+#KDE_HAVE_GL=yes;
+#if test &quot;X$GLLIB&quot; = &quot;X&quot;; then
+#    KDE_HAVE_GL=no
+#fi
+#
+#AC_SUBST(KDE_HAVE_GL)   
+#
+#KDE_PREFIX=`$KDECONFIG --prefix --expandvars`
+#AC_SUBST(KDE_PREFIX)
+#
+#if test &quot;X$kde_build_libsmoke&quot; = &quot;Xkde&quot; -o &quot;X$kde_build_libsmoke&quot; = &quot;Xqt kde&quot;; then
+#
+#    AC_CONFIG_FILES([ smoke/kde/qtguess.pl ], [
+#        cd smoke/kde
+#        perl qtguess.pl
+#        cd ../..
+#    ])
+#    AC_CONFIG_FILES([ smoke/kde/generate.pl ], [
+#        cd smoke/kde
+#        perl generate.pl
+#        cd ../..
+#    ])
+#fi
 
+dnl =======================================================
+dnl FILE: ./smoke/qt/configure.in.in
+dnl =======================================================
 
-PHP_ARG_WITH(php_qt, for php_qt,
-[  --with-php_qt=DIR        Include Qt support and look for headers in /usr/local/include/qt4 /usr/include/qt4 /usr/lib/qt4/include])
 
-if test &quot;$PHP_PHP_QT&quot; != &quot;no&quot;; then
+#AC_HAVE_GL
+#KDE_HAVE_GL=yes;
+#if test &quot;X$GLLIB&quot; = &quot;X&quot;; then
+#    KDE_HAVE_GL=no
+#fi
 
-  SEARCH_OBJ=&quot;/Qt/qobject.h&quot;
+#AC_SUBST(KDE_HAVE_GL)   
 
-  SEARCH_PATH=&quot;/usr/local /usr /usr/lib/qt4 /usr/lib64/qt4&quot;
-  SEARCH_FOR=&quot;/include/qt4 /include&quot;
-  SEARCH_FOR_OTHER=&quot;/include/Qt/qobject.h&quot;
+#AC_ARG_WITH(
+#   threshold,
+#   [  --with-threshold@&lt;:@=0..15@:&gt;@  Smoke: Qt tests threshold Default:10 Lower=more tests],
+#   [ qt_test_threshold=&quot;$withval&quot; ],
+#   [ qt_test_threshold=10 ]
+#)
+#AC_SUBST(qt_test_threshold)
+#
+#if test &quot;X$kde_build_libsmoke&quot; = &quot;Xqt&quot; -o &quot;X$kde_build_libsmoke&quot; = &quot;Xqt kde&quot;; then
+#
+#    AC_CONFIG_FILES([ smoke/qt/qtguess.pl ], [
+#        cd smoke/qt
+#        perl qtguess.pl
+#        cd ../..
+#    ])
+#    AC_CONFIG_FILES([ smoke/qt/generate.pl ], [
+#        cd smoke/qt
+#        perl generate.pl
+#        cd ../..
+#    ])
+#fi
 
-  if test -r $PHP_PHP_QT/$SEARCH_FOR_OTHER; then 
-    PHP_QT_DIR=$PHP_PHP_QT
-    AC_MSG_RESULT(Qt header files found in $PHP_QT_DIR)
-  else 
-    AC_MSG_CHECKING([for Qt headers in default path])
-    AC_MSG_RESULT(trying different pathes)
-    for i in $SEARCH_PATH ; do
-     for j in $SEARCH_FOR ; do
-      AC_MSG_CHECKING(for $i$j$SEARCH_OBJ)
-      if test -r $i$j/$SEARCH_OBJ; then
-        PHP_QT_DIR=$i$j
-        AC_MSG_RESULT(found)
-        break 2
-      else
-        AC_MSG_RESULT(not found)
-      fi
-     done
-    done
-  fi
 
-  if test -z &quot;$PHP_QT_DIR&quot;; then
-    AC_MSG_RESULT([not found])
-    AC_MSG_ERROR([Please reinstall the Qt distribution])
-  fi
+KDE_CREATE_SUBDIRSLIST
+#AM_CONDITIONAL(smoke_SUBDIR_included, test &quot;x$smoke_SUBDIR_included&quot; = xyes)
 
-  PHP_ADD_INCLUDE($PHP_QT_DIR/include)
+AC_OUTPUT
 
-  dnl from qmake
-  LDFLAGS=&quot;$LDFLAGS -lQtGui -lXt -lpng -lSM -lICE -lXi -lXrender -lXrandr -lXcursor -lXinerama -lfreetype -lXext -lX11 -lm -lQtCore -lfontconfig -lz -ldl -lpthread&quot;
+PHP_ARG_WITH(php_qt, for php_qt,
+[  --enable-php_qt         Enable PHP-Qt support])
 
+if test &quot;$PHP_PHP_QT&quot; != &quot;no&quot;; then
+
+  PHP_QT_DIR=&quot;$qt_incdir&quot;;
+  LDFLAGS=&quot;$LDFLAGS $all_libraries $USER_LDFLAGS $LIBQT&quot;
   PHP_REQUIRE_CXX
 
+  PHP_ADD_INCLUDE($PHP_QT_DIR/include)
+  PHP_ADD_INCLUDE($PHP_QT_DIR)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/Qt3Support)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtAssistant)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtCore)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtDesigner)
   PHP_ADD_INCLUDE($PHP_QT_DIR/QtGui)
-  PHP_ADD_INCLUDE($PHP_QT_DIR/QtCore)
-  PHP_ADD_INCLUDE($PHP_QT_DIR)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtNetwork)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtOpenGL)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtSql)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtSvg)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtTest)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtUiTools)
+  PHP_ADD_INCLUDE($PHP_QT_DIR/QtXml)  
+#  PHP_ADD_INCLUDE(smoke/)
 
   PHP_NEW_EXTENSION(php_qt, \
-  qt/classes/qapplication.cpp \
-  qt/classes/qcoreapplication.cpp \
-  qt/classes/qwidget.cpp \
-  qt/classes/qabstractslider.cpp \
-  qt/classes/qframe.cpp \
-  qt/classes/qlineedit.cpp \
-  qt/classes/qslider.cpp \
-  qt/classes/qlayoutitem.cpp \
-  qt/classes/qlayout.cpp \
-  qt/classes/qboxlayout.cpp \
-  qt/classes/qhboxlayout.cpp \
-  qt/classes/qvboxlayout.cpp \
   qt/object_model/qobject.cpp \
   qt/text_related/qstring.cpp \
-  qt/classes/qlatin1string.cpp \
-  qt/classes/qchar.cpp \
   qt/event/qevent.cpp \
+	qt/classes/qapplication.cpp \
+	qt/classes/qcoreapplication.cpp \
+	qt/classes/qwidget.cpp \
+	qt/classes/qabstractslider.cpp \
+	qt/classes/qframe.cpp \
+	qt/classes/qlineedit.cpp \
+	qt/classes/qslider.cpp \
+	qt/classes/qlayoutitem.cpp \
+	qt/classes/qlayout.cpp \
+	qt/classes/qboxlayout.cpp \
+	qt/classes/qhboxlayout.cpp \
+	qt/classes/qvboxlayout.cpp \
+	qt/classes/qlatin1string.cpp \
+	qt/classes/qchar.cpp \
 	qt/classes/qactionevent.cpp \
 	qt/classes/qabstractbutton.cpp \
 	qt/classes/qcharref.cpp \
@@ -160,5 +197,12 @@
   ,$ext_shared,cli)
   PHP_ADD_BUILD_DIR($ext_builddir/qt)
 
+#  PHP_ADD_SOURCES_X(smoke/qt, \
+#    x_1.cpp x_2.cpp x_3.cpp x_4.cpp x_5.cpp x_6.cpp x_7.cpp \
+#    x_8.cpp x_9.cpp x_10.cpp x_11.cpp x_12.cpp x_13.cpp x_14.cpp x_15.cpp \
+#    x_16.cpp x_17.cpp x_18.cpp x_19.cpp x_20.cpp \
+#    smokedata.cpp,,shared_objects_php_qt,yes)
+#  PHP_ADD_BUILD_DIR($ext_builddir/smoke)
+
+
 fi
-


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000108.html">[Php-qt-svn] r264 - trunk/qt/classes
</A></li>
	<LI>Next message: <A HREF="000110.html">[Php-qt-svn] r266 - trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#109">[ date ]</a>
              <a href="thread.html#109">[ thread ]</a>
              <a href="subject.html#109">[ subject ]</a>
              <a href="author.html#109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/php-qt-svn">More information about the Php-qt-svn
mailing list</a><br>
</body></html>
